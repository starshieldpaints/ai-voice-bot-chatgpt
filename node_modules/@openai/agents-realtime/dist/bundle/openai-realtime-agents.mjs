var Mi = Object.defineProperty;
var bs = (n) => {
  throw TypeError(n);
};
var ji = (n, e, t) => e in n ? Mi(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var v = (n, e, t) => ji(n, typeof e != "symbol" ? e + "" : e, t), hr = (n, e, t) => e.has(n) || bs("Cannot " + t);
var u = (n, e, t) => (hr(n, e, "read from private field"), t ? t.call(n) : e.get(n)), O = (n, e, t) => e.has(n) ? bs("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), S = (n, e, t, r) => (hr(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), q = (n, e, t) => (hr(n, e, "access private method"), t);
const Tr = {
  version: "0.2.1"
};
async function Yr(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function $i(n) {
  const e = Object.values(n).filter((r) => typeof r == "number");
  return Object.entries(n).filter(([r, s]) => e.indexOf(+r) === -1).map(([r, s]) => s);
}
class xa {
  constructor() {
    this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map();
  }
  add(e, ...t) {
    const r = t[0];
    if (this._map.set(e, r), r && typeof r == "object" && "id" in r) {
      if (this._idmap.has(r.id))
        throw new Error(`ID ${r.id} already exists in the registry`);
      this._idmap.set(r.id, e);
    }
    return this;
  }
  clear() {
    return this._map = /* @__PURE__ */ new Map(), this._idmap = /* @__PURE__ */ new Map(), this;
  }
  remove(e) {
    const t = this._map.get(e);
    return t && typeof t == "object" && "id" in t && this._idmap.delete(t.id), this._map.delete(e), this;
  }
  get(e) {
    const t = e._zod.parent;
    if (t) {
      const r = { ...this.get(t) ?? {} };
      return delete r.id, { ...r, ...this._map.get(e) };
    }
    return this._map.get(e);
  }
  has(e) {
    return this._map.has(e);
  }
}
function Fi() {
  return new xa();
}
const Li = /* @__PURE__ */ Fi();
class ws {
  constructor(e) {
    this.counter = 0, this.metadataRegistry = (e == null ? void 0 : e.metadata) ?? Li, this.target = (e == null ? void 0 : e.target) ?? "draft-2020-12", this.unrepresentable = (e == null ? void 0 : e.unrepresentable) ?? "throw", this.override = (e == null ? void 0 : e.override) ?? (() => {
    }), this.io = (e == null ? void 0 : e.io) ?? "output", this.seen = /* @__PURE__ */ new Map();
  }
  process(e, t = { path: [], schemaPath: [] }) {
    var f, h, w;
    var r;
    const s = e._zod.def, a = {
      guid: "uuid",
      url: "uri",
      datetime: "date-time",
      json_string: "json-string",
      regex: ""
      // do not set
    }, i = this.seen.get(e);
    if (i)
      return i.count++, t.schemaPath.includes(e) && (i.cycle = t.path), i.schema;
    const o = { schema: {}, count: 1, cycle: void 0, path: t.path };
    this.seen.set(e, o);
    const l = (h = (f = e._zod).toJSONSchema) == null ? void 0 : h.call(f);
    if (l)
      o.schema = l;
    else {
      const g = {
        ...t,
        schemaPath: [...t.schemaPath, e],
        path: t.path
      }, x = e._zod.parent;
      if (x)
        o.ref = x, this.process(x, g), this.seen.get(x).isParent = !0;
      else {
        const b = o.schema;
        switch (s.type) {
          case "string": {
            const m = b;
            m.type = "string";
            const { minimum: I, maximum: A, format: D, patterns: N, contentEncoding: j } = e._zod.bag;
            if (typeof I == "number" && (m.minLength = I), typeof A == "number" && (m.maxLength = A), D && (m.format = a[D] ?? D, m.format === "" && delete m.format), j && (m.contentEncoding = j), N && N.size > 0) {
              const J = [...N];
              J.length === 1 ? m.pattern = J[0].source : J.length > 1 && (o.schema.allOf = [
                ...J.map((ne) => ({
                  ...this.target === "draft-7" ? { type: "string" } : {},
                  pattern: ne.source
                }))
              ]);
            }
            break;
          }
          case "number": {
            const m = b, { minimum: I, maximum: A, format: D, multipleOf: N, exclusiveMaximum: j, exclusiveMinimum: J } = e._zod.bag;
            typeof D == "string" && D.includes("int") ? m.type = "integer" : m.type = "number", typeof J == "number" && (m.exclusiveMinimum = J), typeof I == "number" && (m.minimum = I, typeof J == "number" && (J >= I ? delete m.minimum : delete m.exclusiveMinimum)), typeof j == "number" && (m.exclusiveMaximum = j), typeof A == "number" && (m.maximum = A, typeof j == "number" && (j <= A ? delete m.maximum : delete m.exclusiveMaximum)), typeof N == "number" && (m.multipleOf = N);
            break;
          }
          case "boolean": {
            const m = b;
            m.type = "boolean";
            break;
          }
          case "bigint": {
            if (this.unrepresentable === "throw")
              throw new Error("BigInt cannot be represented in JSON Schema");
            break;
          }
          case "symbol": {
            if (this.unrepresentable === "throw")
              throw new Error("Symbols cannot be represented in JSON Schema");
            break;
          }
          case "null": {
            b.type = "null";
            break;
          }
          case "any":
            break;
          case "unknown":
            break;
          case "undefined": {
            if (this.unrepresentable === "throw")
              throw new Error("Undefined cannot be represented in JSON Schema");
            break;
          }
          case "void": {
            if (this.unrepresentable === "throw")
              throw new Error("Void cannot be represented in JSON Schema");
            break;
          }
          case "never": {
            b.not = {};
            break;
          }
          case "date": {
            if (this.unrepresentable === "throw")
              throw new Error("Date cannot be represented in JSON Schema");
            break;
          }
          case "array": {
            const m = b, { minimum: I, maximum: A } = e._zod.bag;
            typeof I == "number" && (m.minItems = I), typeof A == "number" && (m.maxItems = A), m.type = "array", m.items = this.process(s.element, { ...g, path: [...g.path, "items"] });
            break;
          }
          case "object": {
            const m = b;
            m.type = "object", m.properties = {};
            const I = s.shape;
            for (const N in I)
              m.properties[N] = this.process(I[N], {
                ...g,
                path: [...g.path, "properties", N]
              });
            const A = new Set(Object.keys(I)), D = new Set([...A].filter((N) => {
              const j = s.shape[N]._zod;
              return this.io === "input" ? j.optin === void 0 : j.optout === void 0;
            }));
            D.size > 0 && (m.required = Array.from(D)), ((w = s.catchall) == null ? void 0 : w._zod.def.type) === "never" ? m.additionalProperties = !1 : s.catchall ? s.catchall && (m.additionalProperties = this.process(s.catchall, {
              ...g,
              path: [...g.path, "additionalProperties"]
            })) : this.io === "output" && (m.additionalProperties = !1);
            break;
          }
          case "union": {
            const m = b;
            m.anyOf = s.options.map((I, A) => this.process(I, {
              ...g,
              path: [...g.path, "anyOf", A]
            }));
            break;
          }
          case "intersection": {
            const m = b, I = this.process(s.left, {
              ...g,
              path: [...g.path, "allOf", 0]
            }), A = this.process(s.right, {
              ...g,
              path: [...g.path, "allOf", 1]
            }), D = (j) => "allOf" in j && Object.keys(j).length === 1, N = [
              ...D(I) ? I.allOf : [I],
              ...D(A) ? A.allOf : [A]
            ];
            m.allOf = N;
            break;
          }
          case "tuple": {
            const m = b;
            m.type = "array";
            const I = s.items.map((N, j) => this.process(N, { ...g, path: [...g.path, "prefixItems", j] }));
            if (this.target === "draft-2020-12" ? m.prefixItems = I : m.items = I, s.rest) {
              const N = this.process(s.rest, {
                ...g,
                path: [...g.path, "items"]
              });
              this.target === "draft-2020-12" ? m.items = N : m.additionalItems = N;
            }
            s.rest && (m.items = this.process(s.rest, {
              ...g,
              path: [...g.path, "items"]
            }));
            const { minimum: A, maximum: D } = e._zod.bag;
            typeof A == "number" && (m.minItems = A), typeof D == "number" && (m.maxItems = D);
            break;
          }
          case "record": {
            const m = b;
            m.type = "object", m.propertyNames = this.process(s.keyType, { ...g, path: [...g.path, "propertyNames"] }), m.additionalProperties = this.process(s.valueType, {
              ...g,
              path: [...g.path, "additionalProperties"]
            });
            break;
          }
          case "map": {
            if (this.unrepresentable === "throw")
              throw new Error("Map cannot be represented in JSON Schema");
            break;
          }
          case "set": {
            if (this.unrepresentable === "throw")
              throw new Error("Set cannot be represented in JSON Schema");
            break;
          }
          case "enum": {
            const m = b, I = $i(s.entries);
            I.every((A) => typeof A == "number") && (m.type = "number"), I.every((A) => typeof A == "string") && (m.type = "string"), m.enum = I;
            break;
          }
          case "literal": {
            const m = b, I = [];
            for (const A of s.values)
              if (A === void 0) {
                if (this.unrepresentable === "throw")
                  throw new Error("Literal `undefined` cannot be represented in JSON Schema");
              } else if (typeof A == "bigint") {
                if (this.unrepresentable === "throw")
                  throw new Error("BigInt literals cannot be represented in JSON Schema");
                I.push(Number(A));
              } else
                I.push(A);
            if (I.length !== 0) if (I.length === 1) {
              const A = I[0];
              m.type = A === null ? "null" : typeof A, m.const = A;
            } else
              I.every((A) => typeof A == "number") && (m.type = "number"), I.every((A) => typeof A == "string") && (m.type = "string"), I.every((A) => typeof A == "boolean") && (m.type = "string"), I.every((A) => A === null) && (m.type = "null"), m.enum = I;
            break;
          }
          case "file": {
            const m = b, I = {
              type: "string",
              format: "binary",
              contentEncoding: "binary"
            }, { minimum: A, maximum: D, mime: N } = e._zod.bag;
            A !== void 0 && (I.minLength = A), D !== void 0 && (I.maxLength = D), N ? N.length === 1 ? (I.contentMediaType = N[0], Object.assign(m, I)) : m.anyOf = N.map((j) => ({ ...I, contentMediaType: j })) : Object.assign(m, I);
            break;
          }
          case "transform": {
            if (this.unrepresentable === "throw")
              throw new Error("Transforms cannot be represented in JSON Schema");
            break;
          }
          case "nullable": {
            const m = this.process(s.innerType, g);
            b.anyOf = [m, { type: "null" }];
            break;
          }
          case "nonoptional": {
            this.process(s.innerType, g), o.ref = s.innerType;
            break;
          }
          case "success": {
            const m = b;
            m.type = "boolean";
            break;
          }
          case "default": {
            this.process(s.innerType, g), o.ref = s.innerType, b.default = JSON.parse(JSON.stringify(s.defaultValue));
            break;
          }
          case "prefault": {
            this.process(s.innerType, g), o.ref = s.innerType, this.io === "input" && (b._prefault = JSON.parse(JSON.stringify(s.defaultValue)));
            break;
          }
          case "catch": {
            this.process(s.innerType, g), o.ref = s.innerType;
            let m;
            try {
              m = s.catchValue(void 0);
            } catch {
              throw new Error("Dynamic catch values are not supported in JSON Schema");
            }
            b.default = m;
            break;
          }
          case "nan": {
            if (this.unrepresentable === "throw")
              throw new Error("NaN cannot be represented in JSON Schema");
            break;
          }
          case "template_literal": {
            const m = b, I = e._zod.pattern;
            if (!I)
              throw new Error("Pattern not found in template literal");
            m.type = "string", m.pattern = I.source;
            break;
          }
          case "pipe": {
            const m = this.io === "input" ? s.in._zod.def.type === "transform" ? s.out : s.in : s.out;
            this.process(m, g), o.ref = m;
            break;
          }
          case "readonly": {
            this.process(s.innerType, g), o.ref = s.innerType, b.readOnly = !0;
            break;
          }
          // passthrough types
          case "promise": {
            this.process(s.innerType, g), o.ref = s.innerType;
            break;
          }
          case "optional": {
            this.process(s.innerType, g), o.ref = s.innerType;
            break;
          }
          case "lazy": {
            const m = e._zod.innerType;
            this.process(m, g), o.ref = m;
            break;
          }
          case "custom": {
            if (this.unrepresentable === "throw")
              throw new Error("Custom types cannot be represented in JSON Schema");
            break;
          }
        }
      }
    }
    const c = this.metadataRegistry.get(e);
    return c && Object.assign(o.schema, c), this.io === "input" && re(e) && (delete o.schema.examples, delete o.schema.default), this.io === "input" && o.schema._prefault && ((r = o.schema).default ?? (r.default = o.schema._prefault)), delete o.schema._prefault, this.seen.get(e).schema;
  }
  emit(e, t) {
    var p, f, h, w, g, x;
    const r = {
      cycles: (t == null ? void 0 : t.cycles) ?? "ref",
      reused: (t == null ? void 0 : t.reused) ?? "inline",
      // unrepresentable: _params?.unrepresentable ?? "throw",
      // uri: _params?.uri ?? ((id) => `${id}`),
      external: (t == null ? void 0 : t.external) ?? void 0
    }, s = this.seen.get(e);
    if (!s)
      throw new Error("Unprocessed schema. This is a bug in Zod.");
    const a = (b) => {
      var N;
      const m = this.target === "draft-2020-12" ? "$defs" : "definitions";
      if (r.external) {
        const j = (N = r.external.registry.get(b[0])) == null ? void 0 : N.id, J = r.external.uri ?? ((me) => me);
        if (j)
          return { ref: J(j) };
        const ne = b[1].defId ?? b[1].schema.id ?? `schema${this.counter++}`;
        return b[1].defId = ne, { defId: ne, ref: `${J("__shared")}#/${m}/${ne}` };
      }
      if (b[1] === s)
        return { ref: "#" };
      const A = `#/${m}/`, D = b[1].schema.id ?? `__schema${this.counter++}`;
      return { defId: D, ref: A + D };
    }, i = (b) => {
      if (b[1].schema.$ref)
        return;
      const m = b[1], { ref: I, defId: A } = a(b);
      m.def = { ...m.schema }, A && (m.defId = A);
      const D = m.schema;
      for (const N in D)
        delete D[N];
      D.$ref = I;
    };
    if (r.cycles === "throw")
      for (const b of this.seen.entries()) {
        const m = b[1];
        if (m.cycle)
          throw new Error(`Cycle detected: #/${(p = m.cycle) == null ? void 0 : p.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);
      }
    for (const b of this.seen.entries()) {
      const m = b[1];
      if (e === b[0]) {
        i(b);
        continue;
      }
      if (r.external) {
        const A = (f = r.external.registry.get(b[0])) == null ? void 0 : f.id;
        if (e !== b[0] && A) {
          i(b);
          continue;
        }
      }
      if ((h = this.metadataRegistry.get(b[0])) == null ? void 0 : h.id) {
        i(b);
        continue;
      }
      if (m.cycle) {
        i(b);
        continue;
      }
      if (m.count > 1 && r.reused === "ref") {
        i(b);
        continue;
      }
    }
    const o = (b, m) => {
      const I = this.seen.get(b), A = I.def ?? I.schema, D = { ...A };
      if (I.ref === null)
        return;
      const N = I.ref;
      if (I.ref = null, N) {
        o(N, m);
        const j = this.seen.get(N).schema;
        j.$ref && m.target === "draft-7" ? (A.allOf = A.allOf ?? [], A.allOf.push(j)) : (Object.assign(A, j), Object.assign(A, D));
      }
      I.isParent || this.override({
        zodSchema: b,
        jsonSchema: A,
        path: I.path ?? []
      });
    };
    for (const b of [...this.seen.entries()].reverse())
      o(b[0], { target: this.target });
    const l = {};
    if (this.target === "draft-2020-12" ? l.$schema = "https://json-schema.org/draft/2020-12/schema" : this.target === "draft-7" ? l.$schema = "http://json-schema.org/draft-07/schema#" : console.warn(`Invalid target: ${this.target}`), (w = r.external) != null && w.uri) {
      const b = (g = r.external.registry.get(e)) == null ? void 0 : g.id;
      if (!b)
        throw new Error("Schema is missing an `id` property");
      l.$id = r.external.uri(b);
    }
    Object.assign(l, s.def);
    const c = ((x = r.external) == null ? void 0 : x.defs) ?? {};
    for (const b of this.seen.entries()) {
      const m = b[1];
      m.def && m.defId && (c[m.defId] = m.def);
    }
    r.external || Object.keys(c).length > 0 && (this.target === "draft-2020-12" ? l.$defs = c : l.definitions = c);
    try {
      return JSON.parse(JSON.stringify(l));
    } catch {
      throw new Error("Error converting schema to JSON.");
    }
  }
}
function Zi(n, e) {
  if (n instanceof xa) {
    const r = new ws(e), s = {};
    for (const o of n._idmap.entries()) {
      const [l, c] = o;
      r.process(c);
    }
    const a = {}, i = {
      registry: n,
      uri: e == null ? void 0 : e.uri,
      defs: s
    };
    for (const o of n._idmap.entries()) {
      const [l, c] = o;
      a[l] = r.emit(c, {
        ...e,
        external: i
      });
    }
    if (Object.keys(s).length > 0) {
      const o = r.target === "draft-2020-12" ? "$defs" : "definitions";
      a.__shared = {
        [o]: s
      };
    }
    return { schemas: a };
  }
  const t = new ws(e);
  return t.process(n), t.emit(n, e);
}
function re(n, e) {
  const t = e ?? { seen: /* @__PURE__ */ new Set() };
  if (t.seen.has(n))
    return !1;
  t.seen.add(n);
  const s = n._zod.def;
  switch (s.type) {
    case "string":
    case "number":
    case "bigint":
    case "boolean":
    case "date":
    case "symbol":
    case "undefined":
    case "null":
    case "any":
    case "unknown":
    case "never":
    case "void":
    case "literal":
    case "enum":
    case "nan":
    case "file":
    case "template_literal":
      return !1;
    case "array":
      return re(s.element, t);
    case "object": {
      for (const a in s.shape)
        if (re(s.shape[a], t))
          return !0;
      return !1;
    }
    case "union": {
      for (const a of s.options)
        if (re(a, t))
          return !0;
      return !1;
    }
    case "intersection":
      return re(s.left, t) || re(s.right, t);
    case "tuple": {
      for (const a of s.items)
        if (re(a, t))
          return !0;
      return !!(s.rest && re(s.rest, t));
    }
    case "record":
      return re(s.keyType, t) || re(s.valueType, t);
    case "map":
      return re(s.keyType, t) || re(s.valueType, t);
    case "set":
      return re(s.valueType, t);
    // inner types
    case "promise":
    case "optional":
    case "nonoptional":
    case "nullable":
    case "readonly":
      return re(s.innerType, t);
    case "lazy":
      return re(s.getter(), t);
    case "default":
      return re(s.innerType, t);
    case "prefault":
      return re(s.innerType, t);
    case "custom":
      return !1;
    case "transform":
      return !0;
    case "pipe":
      return re(s.in, t) || re(s.out, t);
    case "success":
      return !1;
    case "catch":
      return !1;
  }
  throw new Error(`Unknown schema type: ${s.type}`);
}
function Ui(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const Ji = Symbol("Let zodToJsonSchema decide on which parser to use"), xs = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, qi = (n) => typeof n == "string" ? {
  ...xs,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...xs,
  basePath: ["#"],
  definitions: {},
  ...n
}, kr = (n) => "_def" in n ? n._def : n;
function Bi(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const zi = (n) => {
  const e = qi(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      kr(s),
      {
        def: kr(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Sa(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function H(n, e, t, r, s) {
  n[e] = t, Sa(n, e, r, s);
}
var V;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(V || (V = {}));
var Ss;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Ss || (Ss = {}));
const E = V.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), ze = (n) => {
  switch (typeof n) {
    case "undefined":
      return E.undefined;
    case "string":
      return E.string;
    case "number":
      return Number.isNaN(n) ? E.nan : E.number;
    case "boolean":
      return E.boolean;
    case "function":
      return E.function;
    case "bigint":
      return E.bigint;
    case "symbol":
      return E.symbol;
    case "object":
      return Array.isArray(n) ? E.array : n === null ? E.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? E.promise : typeof Map < "u" && n instanceof Map ? E.map : typeof Set < "u" && n instanceof Set ? E.set : typeof Date < "u" && n instanceof Date ? E.date : E.object;
    default:
      return E.unknown;
  }
}, T = V.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class qe extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, l = 0;
          for (; l < i.path.length; ) {
            const c = i.path[l];
            l === i.path.length - 1 ? (o[c] = o[c] || { _errors: [] }, o[c]._errors.push(t(i))) : o[c] = o[c] || { _errors: [] }, o = o[c], l++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof qe))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, V.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      if (s.path.length > 0) {
        const a = s.path[0];
        t[a] = t[a] || [], t[a].push(e(s));
      } else
        r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
qe.create = (n) => new qe(n);
const Ar = (n, e) => {
  let t;
  switch (n.code) {
    case T.invalid_type:
      n.received === E.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case T.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, V.jsonStringifyReplacer)}`;
      break;
    case T.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${V.joinValues(n.keys, ", ")}`;
      break;
    case T.invalid_union:
      t = "Invalid input";
      break;
    case T.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${V.joinValues(n.options)}`;
      break;
    case T.invalid_enum_value:
      t = `Invalid enum value. Expected ${V.joinValues(n.options)}, received '${n.received}'`;
      break;
    case T.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case T.invalid_return_type:
      t = "Invalid function return type";
      break;
    case T.invalid_date:
      t = "Invalid date";
      break;
    case T.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : V.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case T.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "bigint" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case T.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case T.custom:
      t = "Invalid input";
      break;
    case T.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case T.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case T.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, V.assertNever(n);
  }
  return { message: t };
};
let Gi = Ar;
function Vi() {
  return Gi;
}
const Wi = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, a = [...t, ...s.path || []], i = {
    ...s,
    path: a
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: a,
      message: s.message
    };
  let o = "";
  const l = r.filter((c) => !!c).slice().reverse();
  for (const c of l)
    o = c(i, { data: e, defaultError: o }).message;
  return {
    ...s,
    path: a,
    message: o
  };
};
function C(n, e) {
  const t = Vi(), r = Wi({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === Ar ? void 0 : Ar
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class le {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return L;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const a = await s.key, i = await s.value;
      r.push({
        key: a,
        value: i
      });
    }
    return le.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: a, value: i } = s;
      if (a.status === "aborted" || i.status === "aborted")
        return L;
      a.status === "dirty" && e.dirty(), i.status === "dirty" && e.dirty(), a.value !== "__proto__" && (typeof i.value < "u" || s.alwaysSet) && (r[a.value] = i.value);
    }
    return { status: e.value, value: r };
  }
}
const L = Object.freeze({
  status: "aborted"
}), Qt = (n) => ({ status: "dirty", value: n }), Ie = (n) => ({ status: "valid", value: n }), Is = (n) => n.status === "aborted", Ts = (n) => n.status === "dirty", Wt = (n) => n.status === "valid", Bn = (n) => typeof Promise < "u" && n instanceof Promise;
var P;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(P || (P = {}));
class Ne {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const ks = (n, e) => {
  if (Wt(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new qe(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function Z(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (i, o) => {
    const { message: l } = n;
    return i.code === "invalid_enum_value" ? { message: l ?? o.defaultError } : typeof o.data > "u" ? { message: l ?? r ?? o.defaultError } : i.code !== "invalid_type" ? { message: o.defaultError } : { message: l ?? t ?? o.defaultError };
  }, description: s };
}
class z {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return ze(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: ze(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new le(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: ze(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (Bn(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ze(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return ks(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ze(e)
    };
    if (!this["~standard"].async)
      try {
        const a = this._parseSync({ data: e, path: [], parent: t });
        return Wt(a) ? {
          value: a.value
        } : {
          issues: t.common.issues
        };
      } catch (a) {
        (s = (r = a == null ? void 0 : a.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((a) => Wt(a) ? {
      value: a.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: ze(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), a = await (Bn(s) ? s : Promise.resolve(s));
    return ks(r, a);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, a) => {
      const i = e(s), o = () => a.addIssue({
        code: T.custom,
        ...r(s)
      });
      return typeof Promise < "u" && i instanceof Promise ? i.then((l) => l ? !0 : (o(), !1)) : i ? !0 : (o(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new wt({
      schema: this,
      typeName: k.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return Je.create(this, this._def);
  }
  nullable() {
    return xt.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return Ee.create(this);
  }
  promise() {
    return Yn.create(this, this._def);
  }
  or(e) {
    return Gn.create([this, e], this._def);
  }
  and(e) {
    return Vn.create(this, e, this._def);
  }
  transform(e) {
    return new wt({
      ...Z(this._def),
      schema: this,
      typeName: k.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new Xn({
      ...Z(this._def),
      innerType: this,
      defaultValue: t,
      typeName: k.ZodDefault
    });
  }
  brand() {
    return new Aa({
      typeName: k.ZodBranded,
      type: this,
      ...Z(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new Qn({
      ...Z(this._def),
      innerType: this,
      catchValue: t,
      typeName: k.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return Qr.create(this, e);
  }
  readonly() {
    return er.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Hi = /^c[^\s-]{8,}$/i, Ki = /^[0-9a-z]+$/, Yi = /^[0-9A-HJKMNP-TV-Z]{26}$/i, Xi = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Qi = /^[a-z0-9_-]{21}$/i, eo = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, to = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, no = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, ro = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let mr;
const so = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, ao = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, io = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, oo = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, uo = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, co = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Ia = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", lo = new RegExp(`^${Ia}$`);
function Ta(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function po(n) {
  return new RegExp(`^${Ta(n)}$`);
}
function fo(n) {
  let e = `${Ia}T${Ta(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function ho(n, e) {
  return !!((e === "v4" || !e) && so.test(n) || (e === "v6" || !e) && io.test(n));
}
function mo(n, e) {
  if (!eo.test(n))
    return !1;
  try {
    const [t] = n.split(".");
    if (!t)
      return !1;
    const r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function go(n, e) {
  return !!((e === "v4" || !e) && ao.test(n) || (e === "v6" || !e) && oo.test(n));
}
class Ue extends z {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== E.string) {
      const a = this._getOrReturnCtx(e);
      return C(a, {
        code: T.invalid_type,
        expected: E.string,
        received: a.parsedType
      }), L;
    }
    const r = new le();
    let s;
    for (const a of this._def.checks)
      if (a.kind === "min")
        e.data.length < a.value && (s = this._getOrReturnCtx(e, s), C(s, {
          code: T.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "max")
        e.data.length > a.value && (s = this._getOrReturnCtx(e, s), C(s, {
          code: T.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "length") {
        const i = e.data.length > a.value, o = e.data.length < a.value;
        (i || o) && (s = this._getOrReturnCtx(e, s), i ? C(s, {
          code: T.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }) : o && C(s, {
          code: T.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }), r.dirty());
      } else if (a.kind === "email")
        no.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "email",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "emoji")
        mr || (mr = new RegExp(ro, "u")), mr.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "emoji",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "uuid")
        Xi.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "uuid",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "nanoid")
        Qi.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "nanoid",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid")
        Hi.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "cuid",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid2")
        Ki.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "cuid2",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "ulid")
        Yi.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
          validation: "ulid",
          code: T.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), C(s, {
            validation: "url",
            code: T.invalid_string,
            message: a.message
          }), r.dirty();
        }
      else a.kind === "regex" ? (a.regex.lastIndex = 0, a.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "regex",
        code: T.invalid_string,
        message: a.message
      }), r.dirty())) : a.kind === "trim" ? e.data = e.data.trim() : a.kind === "includes" ? e.data.includes(a.value, a.position) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: { includes: a.value, position: a.position },
        message: a.message
      }), r.dirty()) : a.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : a.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : a.kind === "startsWith" ? e.data.startsWith(a.value) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: { startsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "endsWith" ? e.data.endsWith(a.value) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: { endsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "datetime" ? fo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: "datetime",
        message: a.message
      }), r.dirty()) : a.kind === "date" ? lo.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: "date",
        message: a.message
      }), r.dirty()) : a.kind === "time" ? po(a).test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.invalid_string,
        validation: "time",
        message: a.message
      }), r.dirty()) : a.kind === "duration" ? to.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "duration",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "ip" ? ho(e.data, a.version) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "ip",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "jwt" ? mo(e.data, a.alg) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "jwt",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "cidr" ? go(e.data, a.version) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "cidr",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64" ? uo.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "base64",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64url" ? co.test(e.data) || (s = this._getOrReturnCtx(e, s), C(s, {
        validation: "base64url",
        code: T.invalid_string,
        message: a.message
      }), r.dirty()) : V.assertNever(a);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: T.invalid_string,
      ...P.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Ue({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...P.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...P.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...P.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...P.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...P.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...P.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...P.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...P.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...P.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...P.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...P.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...P.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...P.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...P.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...P.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...P.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...P.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...P.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...P.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...P.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...P.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...P.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...P.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, P.errToObj(e));
  }
  trim() {
    return new Ue({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Ue({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Ue({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Ue.create = (n) => new Ue({
  checks: [],
  typeName: k.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...Z(n)
});
function yo(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, a = Number.parseInt(n.toFixed(s).replace(".", "")), i = Number.parseInt(e.toFixed(s).replace(".", ""));
  return a % i / 10 ** s;
}
class Ht extends z {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== E.number) {
      const a = this._getOrReturnCtx(e);
      return C(a, {
        code: T.invalid_type,
        expected: E.number,
        received: a.parsedType
      }), L;
    }
    let r;
    const s = new le();
    for (const a of this._def.checks)
      a.kind === "int" ? V.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.invalid_type,
        expected: "integer",
        received: "float",
        message: a.message
      }), s.dirty()) : a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.too_small,
        minimum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.too_big,
        maximum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? yo(e.data, a.value) !== 0 && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : a.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.not_finite,
        message: a.message
      }), s.dirty()) : V.assertNever(a);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, P.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, P.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, P.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, P.toString(t));
  }
  setLimit(e, t, r, s) {
    return new Ht({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: P.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Ht({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: P.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: P.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: P.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: P.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: P.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: P.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: P.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: P.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: P.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && V.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
Ht.create = (n) => new Ht({
  checks: [],
  typeName: k.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...Z(n)
});
class nn extends z {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== E.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new le();
    for (const a of this._def.checks)
      a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.too_small,
        type: "bigint",
        minimum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.too_big,
        type: "bigint",
        maximum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? e.data % a.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), C(r, {
        code: T.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : V.assertNever(a);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return C(t, {
      code: T.invalid_type,
      expected: E.bigint,
      received: t.parsedType
    }), L;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, P.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, P.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, P.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, P.toString(t));
  }
  setLimit(e, t, r, s) {
    return new nn({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: P.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new nn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: P.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: P.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: P.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: P.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: P.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
nn.create = (n) => new nn({
  checks: [],
  typeName: k.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...Z(n)
});
class Or extends z {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== E.boolean) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.boolean,
        received: r.parsedType
      }), L;
    }
    return Ie(e.data);
  }
}
Or.create = (n) => new Or({
  typeName: k.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...Z(n)
});
class zn extends z {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== E.date) {
      const a = this._getOrReturnCtx(e);
      return C(a, {
        code: T.invalid_type,
        expected: E.date,
        received: a.parsedType
      }), L;
    }
    if (Number.isNaN(e.data.getTime())) {
      const a = this._getOrReturnCtx(e);
      return C(a, {
        code: T.invalid_date
      }), L;
    }
    const r = new le();
    let s;
    for (const a of this._def.checks)
      a.kind === "min" ? e.data.getTime() < a.value && (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.too_small,
        message: a.message,
        inclusive: !0,
        exact: !1,
        minimum: a.value,
        type: "date"
      }), r.dirty()) : a.kind === "max" ? e.data.getTime() > a.value && (s = this._getOrReturnCtx(e, s), C(s, {
        code: T.too_big,
        message: a.message,
        inclusive: !0,
        exact: !1,
        maximum: a.value,
        type: "date"
      }), r.dirty()) : V.assertNever(a);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new zn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: P.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: P.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
zn.create = (n) => new zn({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: k.ZodDate,
  ...Z(n)
});
class As extends z {
  _parse(e) {
    if (this._getType(e) !== E.symbol) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.symbol,
        received: r.parsedType
      }), L;
    }
    return Ie(e.data);
  }
}
As.create = (n) => new As({
  typeName: k.ZodSymbol,
  ...Z(n)
});
class Cr extends z {
  _parse(e) {
    if (this._getType(e) !== E.undefined) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.undefined,
        received: r.parsedType
      }), L;
    }
    return Ie(e.data);
  }
}
Cr.create = (n) => new Cr({
  typeName: k.ZodUndefined,
  ...Z(n)
});
class Er extends z {
  _parse(e) {
    if (this._getType(e) !== E.null) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.null,
        received: r.parsedType
      }), L;
    }
    return Ie(e.data);
  }
}
Er.create = (n) => new Er({
  typeName: k.ZodNull,
  ...Z(n)
});
class rn extends z {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return Ie(e.data);
  }
}
rn.create = (n) => new rn({
  typeName: k.ZodAny,
  ...Z(n)
});
class Os extends z {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return Ie(e.data);
  }
}
Os.create = (n) => new Os({
  typeName: k.ZodUnknown,
  ...Z(n)
});
class Qe extends z {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return C(t, {
      code: T.invalid_type,
      expected: E.never,
      received: t.parsedType
    }), L;
  }
}
Qe.create = (n) => new Qe({
  typeName: k.ZodNever,
  ...Z(n)
});
class Cs extends z {
  _parse(e) {
    if (this._getType(e) !== E.undefined) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.void,
        received: r.parsedType
      }), L;
    }
    return Ie(e.data);
  }
}
Cs.create = (n) => new Cs({
  typeName: k.ZodVoid,
  ...Z(n)
});
class Ee extends z {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== E.array)
      return C(t, {
        code: T.invalid_type,
        expected: E.array,
        received: t.parsedType
      }), L;
    if (s.exactLength !== null) {
      const i = t.data.length > s.exactLength.value, o = t.data.length < s.exactLength.value;
      (i || o) && (C(t, {
        code: i ? T.too_big : T.too_small,
        minimum: o ? s.exactLength.value : void 0,
        maximum: i ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (C(t, {
      code: T.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (C(t, {
      code: T.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((i, o) => s.type._parseAsync(new Ne(t, i, t.path, o)))).then((i) => le.mergeArray(r, i));
    const a = [...t.data].map((i, o) => s.type._parseSync(new Ne(t, i, t.path, o)));
    return le.mergeArray(r, a);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new Ee({
      ...this._def,
      minLength: { value: e, message: P.toString(t) }
    });
  }
  max(e, t) {
    return new Ee({
      ...this._def,
      maxLength: { value: e, message: P.toString(t) }
    });
  }
  length(e, t) {
    return new Ee({
      ...this._def,
      exactLength: { value: e, message: P.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
Ee.create = (n, e) => new Ee({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: k.ZodArray,
  ...Z(e)
});
function Ot(n) {
  if (n instanceof ee) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = Je.create(Ot(r));
    }
    return new ee({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof Ee ? new Ee({
    ...n._def,
    type: Ot(n.element)
  }) : n instanceof Je ? Je.create(Ot(n.unwrap())) : n instanceof xt ? xt.create(Ot(n.unwrap())) : n instanceof vt ? vt.create(n.items.map((e) => Ot(e))) : n;
}
class ee extends z {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = V.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== E.object) {
      const c = this._getOrReturnCtx(e);
      return C(c, {
        code: T.invalid_type,
        expected: E.object,
        received: c.parsedType
      }), L;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: a, keys: i } = this._getCached(), o = [];
    if (!(this._def.catchall instanceof Qe && this._def.unknownKeys === "strip"))
      for (const c in s.data)
        i.includes(c) || o.push(c);
    const l = [];
    for (const c of i) {
      const p = a[c], f = s.data[c];
      l.push({
        key: { status: "valid", value: c },
        value: p._parse(new Ne(s, f, s.path, c)),
        alwaysSet: c in s.data
      });
    }
    if (this._def.catchall instanceof Qe) {
      const c = this._def.unknownKeys;
      if (c === "passthrough")
        for (const p of o)
          l.push({
            key: { status: "valid", value: p },
            value: { status: "valid", value: s.data[p] }
          });
      else if (c === "strict")
        o.length > 0 && (C(s, {
          code: T.unrecognized_keys,
          keys: o
        }), r.dirty());
      else if (c !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const c = this._def.catchall;
      for (const p of o) {
        const f = s.data[p];
        l.push({
          key: { status: "valid", value: p },
          value: c._parse(
            new Ne(s, f, s.path, p)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: p in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const c = [];
      for (const p of l) {
        const f = await p.key, h = await p.value;
        c.push({
          key: f,
          value: h,
          alwaysSet: p.alwaysSet
        });
      }
      return c;
    }).then((c) => le.mergeObjectSync(r, c)) : le.mergeObjectSync(r, l);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return P.errToObj, new ee({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var a, i;
          const s = ((i = (a = this._def).errorMap) == null ? void 0 : i.call(a, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: P.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new ee({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new ee({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new ee({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new ee({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: k.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new ee({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of V.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new ee({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of V.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new ee({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return Ot(this);
  }
  partial(e) {
    const t = {};
    for (const r of V.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new ee({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of V.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let a = this.shape[r];
        for (; a instanceof Je; )
          a = a._def.innerType;
        t[r] = a;
      }
    return new ee({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return ka(V.objectKeys(this.shape));
  }
}
ee.create = (n, e) => new ee({
  shape: () => n,
  unknownKeys: "strip",
  catchall: Qe.create(),
  typeName: k.ZodObject,
  ...Z(e)
});
ee.strictCreate = (n, e) => new ee({
  shape: () => n,
  unknownKeys: "strict",
  catchall: Qe.create(),
  typeName: k.ZodObject,
  ...Z(e)
});
ee.lazycreate = (n, e) => new ee({
  shape: n,
  unknownKeys: "strip",
  catchall: Qe.create(),
  typeName: k.ZodObject,
  ...Z(e)
});
class Gn extends z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(a) {
      for (const o of a)
        if (o.result.status === "valid")
          return o.result;
      for (const o of a)
        if (o.result.status === "dirty")
          return t.common.issues.push(...o.ctx.common.issues), o.result;
      const i = a.map((o) => new qe(o.ctx.common.issues));
      return C(t, {
        code: T.invalid_union,
        unionErrors: i
      }), L;
    }
    if (t.common.async)
      return Promise.all(r.map(async (a) => {
        const i = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await a._parseAsync({
            data: t.data,
            path: t.path,
            parent: i
          }),
          ctx: i
        };
      })).then(s);
    {
      let a;
      const i = [];
      for (const l of r) {
        const c = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, p = l._parseSync({
          data: t.data,
          path: t.path,
          parent: c
        });
        if (p.status === "valid")
          return p;
        p.status === "dirty" && !a && (a = { result: p, ctx: c }), c.common.issues.length && i.push(c.common.issues);
      }
      if (a)
        return t.common.issues.push(...a.ctx.common.issues), a.result;
      const o = i.map((l) => new qe(l));
      return C(t, {
        code: T.invalid_union,
        unionErrors: o
      }), L;
    }
  }
  get options() {
    return this._def.options;
  }
}
Gn.create = (n, e) => new Gn({
  options: n,
  typeName: k.ZodUnion,
  ...Z(e)
});
const Me = (n) => n instanceof Hn ? Me(n.schema) : n instanceof wt ? Me(n.innerType()) : n instanceof Kn ? [n.value] : n instanceof bt ? n.options : n instanceof Rr ? V.objectValues(n.enum) : n instanceof Xn ? Me(n._def.innerType) : n instanceof Cr ? [void 0] : n instanceof Er ? [null] : n instanceof Je ? [void 0, ...Me(n.unwrap())] : n instanceof xt ? [null, ...Me(n.unwrap())] : n instanceof Aa || n instanceof er ? Me(n.unwrap()) : n instanceof Qn ? Me(n._def.innerType) : [];
class Xr extends z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== E.object)
      return C(t, {
        code: T.invalid_type,
        expected: E.object,
        received: t.parsedType
      }), L;
    const r = this.discriminator, s = t.data[r], a = this.optionsMap.get(s);
    return a ? t.common.async ? a._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : a._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (C(t, {
      code: T.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), L);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const a of t) {
      const i = Me(a.shape[e]);
      if (!i.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const o of i) {
        if (s.has(o))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);
        s.set(o, a);
      }
    }
    return new Xr({
      typeName: k.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...Z(r)
    });
  }
}
function Nr(n, e) {
  const t = ze(n), r = ze(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === E.object && r === E.object) {
    const s = V.objectKeys(e), a = V.objectKeys(n).filter((o) => s.indexOf(o) !== -1), i = { ...n, ...e };
    for (const o of a) {
      const l = Nr(n[o], e[o]);
      if (!l.valid)
        return { valid: !1 };
      i[o] = l.data;
    }
    return { valid: !0, data: i };
  } else if (t === E.array && r === E.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let a = 0; a < n.length; a++) {
      const i = n[a], o = e[a], l = Nr(i, o);
      if (!l.valid)
        return { valid: !1 };
      s.push(l.data);
    }
    return { valid: !0, data: s };
  } else return t === E.date && r === E.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class Vn extends z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (a, i) => {
      if (Is(a) || Is(i))
        return L;
      const o = Nr(a.value, i.value);
      return o.valid ? ((Ts(a) || Ts(i)) && t.dirty(), { status: t.value, value: o.data }) : (C(r, {
        code: T.invalid_intersection_types
      }), L);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([a, i]) => s(a, i)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
Vn.create = (n, e, t) => new Vn({
  left: n,
  right: e,
  typeName: k.ZodIntersection,
  ...Z(t)
});
class vt extends z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== E.array)
      return C(r, {
        code: T.invalid_type,
        expected: E.array,
        received: r.parsedType
      }), L;
    if (r.data.length < this._def.items.length)
      return C(r, {
        code: T.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), L;
    !this._def.rest && r.data.length > this._def.items.length && (C(r, {
      code: T.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const a = [...r.data].map((i, o) => {
      const l = this._def.items[o] || this._def.rest;
      return l ? l._parse(new Ne(r, i, r.path, o)) : null;
    }).filter((i) => !!i);
    return r.common.async ? Promise.all(a).then((i) => le.mergeArray(t, i)) : le.mergeArray(t, a);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new vt({
      ...this._def,
      rest: e
    });
  }
}
vt.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new vt({
    items: n,
    typeName: k.ZodTuple,
    rest: null,
    ...Z(e)
  });
};
class Wn extends z {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== E.object)
      return C(r, {
        code: T.invalid_type,
        expected: E.object,
        received: r.parsedType
      }), L;
    const s = [], a = this._def.keyType, i = this._def.valueType;
    for (const o in r.data)
      s.push({
        key: a._parse(new Ne(r, o, r.path, o)),
        value: i._parse(new Ne(r, r.data[o], r.path, o)),
        alwaysSet: o in r.data
      });
    return r.common.async ? le.mergeObjectAsync(t, s) : le.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof z ? new Wn({
      keyType: e,
      valueType: t,
      typeName: k.ZodRecord,
      ...Z(r)
    }) : new Wn({
      keyType: Ue.create(),
      valueType: e,
      typeName: k.ZodRecord,
      ...Z(t)
    });
  }
}
class Es extends z {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== E.map)
      return C(r, {
        code: T.invalid_type,
        expected: E.map,
        received: r.parsedType
      }), L;
    const s = this._def.keyType, a = this._def.valueType, i = [...r.data.entries()].map(([o, l], c) => ({
      key: s._parse(new Ne(r, o, r.path, [c, "key"])),
      value: a._parse(new Ne(r, l, r.path, [c, "value"]))
    }));
    if (r.common.async) {
      const o = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const l of i) {
          const c = await l.key, p = await l.value;
          if (c.status === "aborted" || p.status === "aborted")
            return L;
          (c.status === "dirty" || p.status === "dirty") && t.dirty(), o.set(c.value, p.value);
        }
        return { status: t.value, value: o };
      });
    } else {
      const o = /* @__PURE__ */ new Map();
      for (const l of i) {
        const c = l.key, p = l.value;
        if (c.status === "aborted" || p.status === "aborted")
          return L;
        (c.status === "dirty" || p.status === "dirty") && t.dirty(), o.set(c.value, p.value);
      }
      return { status: t.value, value: o };
    }
  }
}
Es.create = (n, e, t) => new Es({
  valueType: e,
  keyType: n,
  typeName: k.ZodMap,
  ...Z(t)
});
class sn extends z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== E.set)
      return C(r, {
        code: T.invalid_type,
        expected: E.set,
        received: r.parsedType
      }), L;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (C(r, {
      code: T.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (C(r, {
      code: T.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const a = this._def.valueType;
    function i(l) {
      const c = /* @__PURE__ */ new Set();
      for (const p of l) {
        if (p.status === "aborted")
          return L;
        p.status === "dirty" && t.dirty(), c.add(p.value);
      }
      return { status: t.value, value: c };
    }
    const o = [...r.data.values()].map((l, c) => a._parse(new Ne(r, l, r.path, c)));
    return r.common.async ? Promise.all(o).then((l) => i(l)) : i(o);
  }
  min(e, t) {
    return new sn({
      ...this._def,
      minSize: { value: e, message: P.toString(t) }
    });
  }
  max(e, t) {
    return new sn({
      ...this._def,
      maxSize: { value: e, message: P.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
sn.create = (n, e) => new sn({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: k.ZodSet,
  ...Z(e)
});
class Hn extends z {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
Hn.create = (n, e) => new Hn({
  getter: n,
  typeName: k.ZodLazy,
  ...Z(e)
});
class Kn extends z {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return C(t, {
        received: t.data,
        code: T.invalid_literal,
        expected: this._def.value
      }), L;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
Kn.create = (n, e) => new Kn({
  value: n,
  typeName: k.ZodLiteral,
  ...Z(e)
});
function ka(n, e) {
  return new bt({
    values: n,
    typeName: k.ZodEnum,
    ...Z(e)
  });
}
class bt extends z {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return C(t, {
        expected: V.joinValues(r),
        received: t.parsedType,
        code: T.invalid_type
      }), L;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return C(t, {
        received: t.data,
        code: T.invalid_enum_value,
        options: r
      }), L;
    }
    return Ie(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return bt.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return bt.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
bt.create = ka;
class Rr extends z {
  _parse(e) {
    const t = V.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== E.string && r.parsedType !== E.number) {
      const s = V.objectValues(t);
      return C(r, {
        expected: V.joinValues(s),
        received: r.parsedType,
        code: T.invalid_type
      }), L;
    }
    if (this._cache || (this._cache = new Set(V.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = V.objectValues(t);
      return C(r, {
        received: r.data,
        code: T.invalid_enum_value,
        options: s
      }), L;
    }
    return Ie(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
Rr.create = (n, e) => new Rr({
  values: n,
  typeName: k.ZodNativeEnum,
  ...Z(e)
});
class Yn extends z {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== E.promise && t.common.async === !1)
      return C(t, {
        code: T.invalid_type,
        expected: E.promise,
        received: t.parsedType
      }), L;
    const r = t.parsedType === E.promise ? t.data : Promise.resolve(t.data);
    return Ie(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
Yn.create = (n, e) => new Yn({
  type: n,
  typeName: k.ZodPromise,
  ...Z(e)
});
class wt extends z {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === k.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, a = {
      addIssue: (i) => {
        C(r, i), i.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (a.addIssue = a.addIssue.bind(a), s.type === "preprocess") {
      const i = s.transform(r.data, a);
      if (r.common.async)
        return Promise.resolve(i).then(async (o) => {
          if (t.value === "aborted")
            return L;
          const l = await this._def.schema._parseAsync({
            data: o,
            path: r.path,
            parent: r
          });
          return l.status === "aborted" ? L : l.status === "dirty" || t.value === "dirty" ? Qt(l.value) : l;
        });
      {
        if (t.value === "aborted")
          return L;
        const o = this._def.schema._parseSync({
          data: i,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? L : o.status === "dirty" || t.value === "dirty" ? Qt(o.value) : o;
      }
    }
    if (s.type === "refinement") {
      const i = (o) => {
        const l = s.refinement(o, a);
        if (r.common.async)
          return Promise.resolve(l);
        if (l instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return o;
      };
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? L : (o.status === "dirty" && t.dirty(), i(o.value), { status: t.value, value: o.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => o.status === "aborted" ? L : (o.status === "dirty" && t.dirty(), i(o.value).then(() => ({ status: t.value, value: o.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!Wt(i))
          return L;
        const o = s.transform(i.value, a);
        if (o instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: o };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => Wt(i) ? Promise.resolve(s.transform(i.value, a)).then((o) => ({
          status: t.value,
          value: o
        })) : L);
    V.assertNever(s);
  }
}
wt.create = (n, e, t) => new wt({
  schema: n,
  typeName: k.ZodEffects,
  effect: e,
  ...Z(t)
});
wt.createWithPreprocess = (n, e, t) => new wt({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: k.ZodEffects,
  ...Z(t)
});
class Je extends z {
  _parse(e) {
    return this._getType(e) === E.undefined ? Ie(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Je.create = (n, e) => new Je({
  innerType: n,
  typeName: k.ZodOptional,
  ...Z(e)
});
class xt extends z {
  _parse(e) {
    return this._getType(e) === E.null ? Ie(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
xt.create = (n, e) => new xt({
  innerType: n,
  typeName: k.ZodNullable,
  ...Z(e)
});
class Xn extends z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === E.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
Xn.create = (n, e) => new Xn({
  innerType: n,
  typeName: k.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...Z(e)
});
class Qn extends z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return Bn(s) ? s.then((a) => ({
      status: "valid",
      value: a.status === "valid" ? a.value : this._def.catchValue({
        get error() {
          return new qe(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new qe(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
Qn.create = (n, e) => new Qn({
  innerType: n,
  typeName: k.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...Z(e)
});
class Ns extends z {
  _parse(e) {
    if (this._getType(e) !== E.nan) {
      const r = this._getOrReturnCtx(e);
      return C(r, {
        code: T.invalid_type,
        expected: E.nan,
        received: r.parsedType
      }), L;
    }
    return { status: "valid", value: e.data };
  }
}
Ns.create = (n) => new Ns({
  typeName: k.ZodNaN,
  ...Z(n)
});
class Aa extends z {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class Qr extends z {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const a = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? L : a.status === "dirty" ? (t.dirty(), Qt(a.value)) : this._def.out._parseAsync({
          data: a.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? L : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new Qr({
      in: e,
      out: t,
      typeName: k.ZodPipeline
    });
  }
}
class er extends z {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (Wt(s) && (s.value = Object.freeze(s.value)), s);
    return Bn(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
er.create = (n, e) => new er({
  innerType: n,
  typeName: k.ZodReadonly,
  ...Z(e)
});
function Rs(n, e) {
  const t = typeof n == "function" ? n(e) : typeof n == "string" ? { message: n } : n;
  return typeof t == "string" ? { message: t } : t;
}
function _o(n, e = {}, t) {
  return n ? rn.create().superRefine((r, s) => {
    const a = n(r);
    if (a instanceof Promise)
      return a.then((i) => {
        if (!i) {
          const o = Rs(e, r), l = o.fatal ?? t ?? !0;
          s.addIssue({ code: "custom", ...o, fatal: l });
        }
      });
    if (!a) {
      const i = Rs(e, r), o = i.fatal ?? t ?? !0;
      s.addIssue({ code: "custom", ...i, fatal: o });
    }
  }) : rn.create();
}
var k;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(k || (k = {}));
const Oa = (n, e = {
  message: `Input not instance of ${n.name}`
}) => _o((t) => t instanceof n, e), d = Ue.create, R = Ht.create, yt = Or.create, B = rn.create;
Qe.create;
const G = Ee.create, y = ee.create, Tt = Gn.create, he = Xr.create;
Vn.create;
vt.create;
const te = Wn.create, vo = Hn.create, _ = Kn.create, ue = bt.create;
Yn.create;
Je.create;
xt.create;
function bo() {
  return {};
}
function wo(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== k.ZodAny && (t.items = W(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && H(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && H(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (H(t, "minItems", n.exactLength.value, n.exactLength.message, e), H(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function xo(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? H(t, "minimum", r.value, r.message, e) : H(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), H(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? H(t, "maximum", r.value, r.message, e) : H(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), H(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        H(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function So() {
  return {
    type: "boolean"
  };
}
function Io(n, e) {
  return W(n.type._def, e);
}
const To = (n, e) => W(n.innerType._def, e);
function Ca(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, a) => Ca(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return ko(n, e);
  }
}
const ko = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        H(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        H(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function Ao(n, e) {
  return {
    ...W(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function Oo(n, e, t) {
  return e.effectStrategy === "input" ? W(n.schema._def, e, t) : {};
}
function Co(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const Eo = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function No(n, e) {
  const t = [
    W(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    W(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((a) => !!a);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((a) => {
    if (Eo(a))
      s.push(...a.allOf), a.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let i = a;
      if ("additionalProperties" in a && a.additionalProperties === !1) {
        const { additionalProperties: o, ...l } = a;
        i = l;
      } else
        r = void 0;
      s.push(i);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function Ro(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let gr;
const nt = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (gr === void 0 && (gr = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), gr),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function Ea(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? Do(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          H(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          H(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              Te(t, "email", s.message, e);
              break;
            case "format:idn-email":
              Te(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              ke(t, nt.email, s.message, e);
              break;
          }
          break;
        case "url":
          Te(t, "uri", s.message, e);
          break;
        case "uuid":
          Te(t, "uuid", s.message, e);
          break;
        case "regex":
          ke(t, s.regex, s.message, e);
          break;
        case "cuid":
          ke(t, nt.cuid, s.message, e);
          break;
        case "cuid2":
          ke(t, nt.cuid2, s.message, e);
          break;
        case "startsWith":
          ke(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          ke(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          Te(t, "date-time", s.message, e);
          break;
        case "date":
          Te(t, "date", s.message, e);
          break;
        case "time":
          Te(t, "time", s.message, e);
          break;
        case "duration":
          Te(t, "duration", s.message, e);
          break;
        case "length":
          H(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), H(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          ke(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && Te(t, "ipv4", s.message, e), s.version !== "v4" && Te(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          ke(t, nt.emoji, s.message, e);
          break;
        case "ulid": {
          ke(t, nt.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              Te(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              H(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              ke(t, nt.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          ke(t, nt.nanoid, s.message, e);
      }
  return t;
}
const Do = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), Te = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((a) => a.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : H(n, "format", e, t, r);
}, ke = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((a) => a.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: Ds(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : H(n, "pattern", Ds(e, r), t, r);
}, Ds = (n, e) => {
  var c;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let a = "", i = !1, o = !1, l = !1;
  for (let p = 0; p < s.length; p++) {
    if (i) {
      a += s[p], i = !1;
      continue;
    }
    if (r.i) {
      if (o) {
        if (s[p].match(/[a-z]/)) {
          l ? (a += s[p], a += `${s[p - 2]}-${s[p]}`.toUpperCase(), l = !1) : s[p + 1] === "-" && ((c = s[p + 2]) != null && c.match(/[a-z]/)) ? (a += s[p], l = !0) : a += `${s[p]}${s[p].toUpperCase()}`;
          continue;
        }
      } else if (s[p].match(/[a-z]/)) {
        a += `[${s[p]}${s[p].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[p] === "^") {
        a += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[p] === "$") {
        a += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[p] === ".") {
      a += o ? `${s[p]}\r
` : `[${s[p]}\r
]`;
      continue;
    }
    a += s[p], s[p] === "\\" ? i = !0 : o && s[p] === "]" ? o = !1 : !o && s[p] === "[" && (o = !0);
  }
  try {
    const p = new RegExp(a);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return a;
};
function Na(n, e) {
  var r, s, a, i;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === k.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((o, l) => ({
        ...o,
        [l]: W(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", l]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: W(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === k.ZodString && ((a = n.keyType._def.checks) != null && a.length)) {
    const o = Object.entries(Ea(n.keyType._def, e)).reduce((l, [c, p]) => c === "type" ? l : { ...l, [c]: p }, {});
    return {
      ...t,
      propertyNames: o
    };
  } else if (((i = n.keyType) == null ? void 0 : i._def.typeName) === k.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function Po(n, e) {
  if (e.mapStrategy === "record")
    return Na(n, e);
  const t = W(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = W(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function Mo(n) {
  const e = n.values, r = Object.keys(n.values).filter((a) => typeof e[e[a]] != "number").map((a) => e[a]), s = Array.from(new Set(r.map((a) => typeof a)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function jo() {
  return {
    not: {}
  };
}
function $o(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const tr = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function Fo(n, e) {
  if (e.target === "openApi3")
    return Ps(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in tr && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, a) => {
      const i = tr[a._def.typeName];
      return i && !s.includes(i) ? [...s, i] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, a) => {
      const i = typeof a._def.value;
      switch (i) {
        case "string":
        case "number":
        case "boolean":
          return [...s, i];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (a._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((a, i, o) => o.indexOf(a) === i);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((a, i) => a.includes(i._def.value) ? a : [...a, i._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((a) => !r.includes(a))], [])
    };
  return Ps(n, e);
}
const Ps = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => W(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function Lo(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: tr[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [tr[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = W(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = W(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function Zo(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Sa(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? H(t, "minimum", r.value, r.message, e) : H(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), H(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? H(t, "maximum", r.value, r.message, e) : H(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), H(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        H(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function Uo(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : W(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : W(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function Jo(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, a]) => {
      var l;
      if (a === void 0 || a._def === void 0)
        return r;
      const i = [...e.currentPath, "properties", s], o = W(a._def, {
        ...e,
        currentPath: i,
        propertyPath: i
      });
      if (o === void 0)
        return r;
      if (e.openaiStrictMode && a.isOptional() && !a.isNullable() && typeof ((l = a._def) == null ? void 0 : l.defaultValue) > "u")
        throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: o
        },
        required: a.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: Uo(n, e)
  };
  return t.required.length || delete t.required, t;
}
const qo = (n, e) => {
  if (e.propertyPath && e.currentPath.slice(0, e.propertyPath.length).toString() === e.propertyPath.toString())
    return W(n.innerType._def, { ...e, currentPath: e.currentPath });
  const t = W(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, Bo = (n, e) => {
  if (e.pipeStrategy === "input")
    return W(n.in._def, e);
  if (e.pipeStrategy === "output")
    return W(n.out._def, e);
  const t = W(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = W(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function zo(n, e) {
  return W(n.type._def, e);
}
function Go(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: W(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && H(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && H(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function Vo(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => W(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: W(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => W(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function Wo() {
  return {
    not: {}
  };
}
function Ho() {
  return {};
}
const Ko = (n, e) => W(n.innerType._def, e);
function W(n, e, t = !1) {
  var i;
  const r = e.seen.get(n);
  if (e.override) {
    const o = (i = e.override) == null ? void 0 : i.call(e, n, e, r, t);
    if (o !== Ji)
      return o;
  }
  if (r && !t) {
    const o = Yo(r, e);
    if (o !== void 0)
      return "$ref" in o && e.seenRefs.add(o.$ref), o;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const a = Qo(n, n.typeName, e, t);
  return a && eu(n, e, a), s.jsonSchema = a, a;
}
const Yo = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: Xo(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, Xo = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, Qo = (n, e, t, r) => {
  switch (e) {
    case k.ZodString:
      return Ea(n, t);
    case k.ZodNumber:
      return Zo(n, t);
    case k.ZodObject:
      return Jo(n, t);
    case k.ZodBigInt:
      return xo(n, t);
    case k.ZodBoolean:
      return So();
    case k.ZodDate:
      return Ca(n, t);
    case k.ZodUndefined:
      return Wo();
    case k.ZodNull:
      return $o(t);
    case k.ZodArray:
      return wo(n, t);
    case k.ZodUnion:
    case k.ZodDiscriminatedUnion:
      return Fo(n, t);
    case k.ZodIntersection:
      return No(n, t);
    case k.ZodTuple:
      return Vo(n, t);
    case k.ZodRecord:
      return Na(n, t);
    case k.ZodLiteral:
      return Ro(n, t);
    case k.ZodEnum:
      return Co(n);
    case k.ZodNativeEnum:
      return Mo(n);
    case k.ZodNullable:
      return Lo(n, t);
    case k.ZodOptional:
      return qo(n, t);
    case k.ZodMap:
      return Po(n, t);
    case k.ZodSet:
      return Go(n, t);
    case k.ZodLazy:
      return W(n.getter()._def, t);
    case k.ZodPromise:
      return zo(n, t);
    case k.ZodNaN:
    case k.ZodNever:
      return jo();
    case k.ZodEffects:
      return Oo(n, t, r);
    case k.ZodAny:
      return bo();
    case k.ZodUnknown:
      return Ho();
    case k.ZodDefault:
      return Ao(n, t);
    case k.ZodBranded:
      return Io(n, t);
    case k.ZodReadonly:
      return Ko(n, t);
    case k.ZodCatch:
      return To(n, t);
    case k.ZodPipeline:
      return Bo(n, t);
    case k.ZodFunction:
    case k.ZodVoid:
    case k.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, eu = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), tu = (n, e) => {
  const t = zi(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = W(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, a = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  a !== void 0 && (s.title = a);
  const i = (() => {
    if (Bi(t.definitions))
      return;
    const l = {}, c = /* @__PURE__ */ new Set();
    for (let p = 0; p < 500; p++) {
      const f = Object.entries(t.definitions).filter(([h]) => !c.has(h));
      if (f.length === 0)
        break;
      for (const [h, w] of f)
        l[h] = W(kr(w), { ...t, currentPath: [...t.basePath, t.definitionPath, h] }, !0) ?? {}, c.add(h);
    }
    return l;
  })(), o = r === void 0 ? i ? {
    ...s,
    [t.definitionPath]: i
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...i || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...i,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...i,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? o.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (o.$schema = "https://json-schema.org/draft/2019-09/schema#"), o;
};
function nu(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function ru(n) {
  if (n.type !== "object")
    throw new Error(`Root schema must have type: 'object' but got type: ${n.type ? `'${n.type}'` : "undefined"}`);
  const e = structuredClone(n);
  return je(e, [], e);
}
function Dr(n) {
  if (typeof n == "boolean")
    return !1;
  if (n.type === "null")
    return !0;
  for (const e of n.oneOf ?? [])
    if (Dr(e))
      return !0;
  for (const e of n.anyOf ?? [])
    if (Dr(e))
      return !0;
  return !1;
}
function je(n, e, t) {
  if (typeof n == "boolean")
    throw new TypeError(`Expected object schema but got boolean; path=${e.join("/")}`);
  if (!st(n))
    throw new TypeError(`Expected ${JSON.stringify(n)} to be an object; path=${e.join("/")}`);
  const r = n.$defs;
  if (st(r))
    for (const [h, w] of Object.entries(r))
      je(w, [...e, "$defs", h], t);
  const s = n.definitions;
  if (st(s))
    for (const [h, w] of Object.entries(s))
      je(w, [...e, "definitions", h], t);
  n.type === "object" && !("additionalProperties" in n) && (n.additionalProperties = !1);
  const i = n.required ?? [], o = n.properties;
  if (st(o)) {
    for (const [h, w] of Object.entries(o))
      if (!Dr(w) && !i.includes(h))
        throw new Error(`Zod field at \`${[...e, "properties", h].join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
    n.required = Object.keys(o), n.properties = Object.fromEntries(Object.entries(o).map(([h, w]) => [
      h,
      je(w, [...e, "properties", h], t)
    ]));
  }
  const l = n.items;
  st(l) && (n.items = je(l, [...e, "items"], t));
  const c = n.anyOf;
  Array.isArray(c) && (n.anyOf = c.map((h, w) => je(h, [...e, "anyOf", String(w)], t)));
  const p = n.allOf;
  if (Array.isArray(p))
    if (p.length === 1) {
      const h = je(p[0], [...e, "allOf", "0"], t);
      Object.assign(n, h), delete n.allOf;
    } else
      n.allOf = p.map((h, w) => je(h, [...e, "allOf", String(w)], t));
  n.default === null && delete n.default;
  const f = n.$ref;
  if (f && au(n, 1)) {
    if (typeof f != "string")
      throw new TypeError(`Received non-string $ref - ${f}; path=${e.join("/")}`);
    const h = su(t, f);
    if (typeof h == "boolean")
      throw new Error(`Expected \`$ref: ${f}\` to resolve to an object schema but got boolean`);
    if (!st(h))
      throw new Error(`Expected \`$ref: ${f}\` to resolve to an object but got ${JSON.stringify(h)}`);
    return Object.assign(n, { ...h, ...n }), delete n.$ref, je(n, e, t);
  }
  return n;
}
function su(n, e) {
  if (!e.startsWith("#/"))
    throw new Error(`Unexpected $ref format ${JSON.stringify(e)}; Does not start with #/`);
  const t = e.slice(2).split("/");
  let r = n;
  for (const s of t) {
    if (!st(r))
      throw new Error(`encountered non-object entry while resolving ${e} - ${JSON.stringify(r)}`);
    const a = r[s];
    if (a === void 0)
      throw new Error(`Key ${s} not found while resolving ${e}`);
    r = a;
  }
  return r;
}
function st(n) {
  return typeof n == "object" && n !== null && !Array.isArray(n);
}
function au(n, e) {
  let t = 0;
  for (const r in n)
    if (t++, t > e)
      return !0;
  return !1;
}
function Ra(n, e) {
  return tu(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function Da(n) {
  return ru(Zi(n, {
    target: "draft-7"
  }));
}
function Pa(n) {
  return "_zod" in n;
}
function iu(n, e, t) {
  return Ui({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: Pa(n) ? Da(n) : Ra(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function ou(n) {
  return nu({
    type: "function",
    name: n.name,
    parameters: Pa(n.parameters) ? Da(n.parameters) : Ra(n.parameters, { name: n.name }),
    strict: !0,
    ...n.description ? { description: n.description } : void 0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class tt extends Error {
  constructor(t, r) {
    super(t);
    v(this, "state");
    this.state = r;
  }
}
class uu extends tt {
}
class Ms extends tt {
}
class xe extends tt {
}
class Q extends tt {
}
class js extends tt {
  constructor(t, r, s) {
    super(t, s);
    v(this, "error");
    this.error = r;
  }
}
class cu extends tt {
  constructor(t, r, s) {
    super(t, s);
    v(this, "error");
    this.error = r;
  }
}
class $s extends tt {
  constructor(t, r, s) {
    super(t, s);
    v(this, "result");
    this.result = r;
  }
}
class Pr extends tt {
  constructor(t, r, s) {
    super(t, s);
    v(this, "result");
    this.result = r;
  }
}
function Yt(n) {
  var t;
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  return ((t = e._zod) == null ? void 0 : t.def) || e._def || e.def;
}
function or(n) {
  const e = Yt(n);
  if (!e)
    return;
  const t = typeof e.typeName == "string" && e.typeName || typeof e.type == "string" && e.type;
  if (typeof t != "string")
    return;
  const r = t.toLowerCase();
  return r.startsWith("zod") ? r.slice(3) : r;
}
function St(n) {
  return Yt(n) ? or(n) === "object" : !1;
}
function du(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
const lu = "http://json-schema.org/draft-07/schema#", pu = /* @__PURE__ */ new Set(["optional"]), fu = /* @__PURE__ */ new Set([
  "brand",
  "branded",
  "catch",
  "default",
  "effects",
  "pipeline",
  "pipe",
  "prefault",
  "readonly",
  "refinement",
  "transform"
]), Fs = {
  string: { type: "string" },
  number: { type: "number" },
  bigint: { type: "integer" },
  boolean: { type: "boolean" },
  date: { type: "string", format: "date-time" }
};
function Ma(n) {
  return typeof n == "object" && n !== null && n.type === "object" && "properties" in n && "additionalProperties" in n;
}
function hu(n) {
  const e = ja(n);
  if (e)
    return Array.isArray(e.required) || (e.required = []), typeof e.additionalProperties > "u" && (e.additionalProperties = !1), typeof e.$schema != "string" && (e.$schema = lu), e;
}
function ja(n) {
  const e = ku(n);
  if (!e)
    return;
  const t = {}, r = [];
  for (const [s, a] of Object.entries(e)) {
    const { schema: i, optional: o } = mu(a);
    if (!i)
      return;
    t[s] = i, o || r.push(s);
  }
  return { type: "object", properties: t, required: r, additionalProperties: !1 };
}
function mu(n) {
  let e = Mr(n), t = !1;
  for (; pu.has(or(e) ?? ""); ) {
    t = !0;
    const r = Yt(e), s = Mr(r == null ? void 0 : r.innerType);
    if (!s || s === e)
      break;
    e = s;
  }
  return { schema: Re(e), optional: t };
}
function Re(n) {
  if (n === void 0)
    return;
  const e = Mr(n), t = or(e), r = Yt(e);
  if (t) {
    if (t in Fs)
      return Fs[t];
    switch (t) {
      case "object":
        return ja(e);
      case "array":
        return gu(r);
      case "tuple":
        return yu(r);
      case "union":
        return _u(r);
      case "intersection":
        return vu(r);
      case "literal":
        return Iu(r);
      case "enum":
      case "nativeenum":
        return Tu(r);
      case "record":
        return bu(r);
      case "map":
        return wu(r);
      case "set":
        return xu(r);
      case "nullable":
        return Su(r);
      default:
        return;
    }
  }
}
function gu(n) {
  const e = Re($a(n, "element", "items", "type"));
  return e ? { type: "array", items: e } : void 0;
}
function yu(n) {
  const e = Fa(n == null ? void 0 : n.items).map((r) => Re(r)).filter(Boolean);
  if (!e.length)
    return;
  const t = {
    type: "array",
    items: e,
    minItems: e.length
  };
  return n != null && n.rest || (t.maxItems = e.length), t;
}
function _u(n) {
  const e = Fa((n == null ? void 0 : n.options) ?? (n == null ? void 0 : n.schemas)).map((t) => Re(t)).filter(Boolean);
  return e.length ? { anyOf: e } : void 0;
}
function vu(n) {
  const e = Re(n == null ? void 0 : n.left), t = Re(n == null ? void 0 : n.right);
  return e && t ? { allOf: [e, t] } : void 0;
}
function bu(n) {
  const e = Re((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "object", additionalProperties: e } : void 0;
}
function wu(n) {
  const e = Re((n == null ? void 0 : n.valueType) ?? (n == null ? void 0 : n.values));
  return e ? { type: "array", items: e } : void 0;
}
function xu(n) {
  const e = Re(n == null ? void 0 : n.valueType);
  return e ? { type: "array", items: e, uniqueItems: !0 } : void 0;
}
function Su(n) {
  const e = Re((n == null ? void 0 : n.innerType) ?? (n == null ? void 0 : n.type));
  return e ? { anyOf: [e, { type: "null" }] } : void 0;
}
function Mr(n) {
  let e = n;
  for (; fu.has(or(e) ?? ""); ) {
    const t = Yt(e), r = (t == null ? void 0 : t.innerType) ?? (t == null ? void 0 : t.schema) ?? (t == null ? void 0 : t.base) ?? (t == null ? void 0 : t.type) ?? (t == null ? void 0 : t.wrapped) ?? (t == null ? void 0 : t.underlying);
    if (!r || r === e)
      return e;
    e = r;
  }
  return e;
}
function $a(n, ...e) {
  if (n) {
    for (const t of e)
      if (t in n && n[t] !== void 0)
        return n[t];
  }
}
function Fa(n) {
  return Array.isArray(n) ? n : n === void 0 ? [] : [n];
}
function Iu(n) {
  if (!n)
    return;
  const e = $a(n, "value", "literal");
  if (e !== void 0)
    return {
      const: e,
      type: e === null ? "null" : typeof e
    };
}
function Tu(n) {
  if (n) {
    if (Array.isArray(n.values))
      return { enum: n.values };
    if (Array.isArray(n.options))
      return { enum: n.options };
    if (n.values && typeof n.values == "object")
      return { enum: Object.values(n.values) };
    if (n.enum && typeof n.enum == "object")
      return { enum: Object.values(n.enum) };
  }
}
function ku(n) {
  if (typeof n != "object" || n === null)
    return;
  const e = n;
  if (e.shape && typeof e.shape == "object")
    return e.shape;
  if (typeof e.shape == "function")
    try {
      return e.shape();
    } catch {
      return;
    }
  const t = Yt(e), r = t == null ? void 0 : t.shape;
  if (r && typeof r == "object")
    return r;
  if (typeof r == "function")
    try {
      return r();
    } catch {
      return;
    }
}
const Au = ou, Ou = iu;
function La(n) {
  return hu(n);
}
function nr(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function es(n, e) {
  const t = (r) => JSON.parse(r);
  if (St(n)) {
    const r = (a) => {
      const i = La(n);
      if (i)
        return {
          schema: i,
          parser: (l) => n.parse(JSON.parse(l))
        };
      const o = a instanceof Error ? ` Upstream helper error: ${a.message}` : "";
      throw new Q(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${o}`);
    };
    let s;
    try {
      s = Au({
        name: e,
        parameters: n,
        function: () => {
        },
        // empty function here to satisfy the OpenAI helper
        description: ""
      });
    } catch (a) {
      return r(a);
    }
    return Ma(s.parameters) ? {
      schema: s.parameters,
      parser: s.$parseRaw
    } : r();
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new Q("Input type is not a ZodObject or a valid JSON schema");
}
function Ls(n) {
  if (n === "text")
    return "text";
  if (St(n)) {
    const e = (r, s) => {
      const a = La(n);
      if (a)
        return {
          type: (r == null ? void 0 : r.type) ?? "json_schema",
          name: (r == null ? void 0 : r.name) ?? "output",
          strict: (r == null ? void 0 : r.strict) ?? !1,
          schema: a
        };
      const i = s instanceof Error ? ` Upstream helper error: ${s.message}` : "";
      throw new Q(`Unable to convert the provided Zod schema to JSON Schema. Ensure that the \`zod\` package is available at runtime or provide a JSON schema object instead.${i}`);
    };
    let t;
    try {
      t = Ou(n, "output");
    } catch (r) {
      return e(void 0, r);
    }
    return Ma(t.schema) ? {
      type: t.type,
      name: t.name,
      strict: t.strict || !1,
      schema: t.schema
    } : e(t);
  }
  return n;
}
function Cu(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var Mn = { exports: {} }, yr, Zs;
function Eu() {
  if (Zs) return yr;
  Zs = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, a = r * 365.25;
  yr = function(p, f) {
    f = f || {};
    var h = typeof p;
    if (h === "string" && p.length > 0)
      return i(p);
    if (h === "number" && isFinite(p))
      return f.long ? l(p) : o(p);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(p)
    );
  };
  function i(p) {
    if (p = String(p), !(p.length > 100)) {
      var f = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        p
      );
      if (f) {
        var h = parseFloat(f[1]), w = (f[2] || "ms").toLowerCase();
        switch (w) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return h * a;
          case "weeks":
          case "week":
          case "w":
            return h * s;
          case "days":
          case "day":
          case "d":
            return h * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return h * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return h * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return h * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return h;
          default:
            return;
        }
      }
    }
  }
  function o(p) {
    var f = Math.abs(p);
    return f >= r ? Math.round(p / r) + "d" : f >= t ? Math.round(p / t) + "h" : f >= e ? Math.round(p / e) + "m" : f >= n ? Math.round(p / n) + "s" : p + "ms";
  }
  function l(p) {
    var f = Math.abs(p);
    return f >= r ? c(p, f, r, "day") : f >= t ? c(p, f, t, "hour") : f >= e ? c(p, f, e, "minute") : f >= n ? c(p, f, n, "second") : p + " ms";
  }
  function c(p, f, h, w) {
    var g = f >= h * 1.5;
    return Math.round(p / h) + " " + w + (g ? "s" : "");
  }
  return yr;
}
var _r, Us;
function Nu() {
  if (Us) return _r;
  Us = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = c, r.disable = o, r.enable = a, r.enabled = l, r.humanize = Eu(), r.destroy = p, Object.keys(e).forEach((f) => {
      r[f] = e[f];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(f) {
      let h = 0;
      for (let w = 0; w < f.length; w++)
        h = (h << 5) - h + f.charCodeAt(w), h |= 0;
      return r.colors[Math.abs(h) % r.colors.length];
    }
    r.selectColor = t;
    function r(f) {
      let h, w = null, g, x;
      function b(...m) {
        if (!b.enabled)
          return;
        const I = b, A = Number(/* @__PURE__ */ new Date()), D = A - (h || A);
        I.diff = D, I.prev = h, I.curr = A, h = A, m[0] = r.coerce(m[0]), typeof m[0] != "string" && m.unshift("%O");
        let N = 0;
        m[0] = m[0].replace(/%([a-zA-Z%])/g, (J, ne) => {
          if (J === "%%")
            return "%";
          N++;
          const me = r.formatters[ne];
          if (typeof me == "function") {
            const ve = m[N];
            J = me.call(I, ve), m.splice(N, 1), N--;
          }
          return J;
        }), r.formatArgs.call(I, m), (I.log || r.log).apply(I, m);
      }
      return b.namespace = f, b.useColors = r.useColors(), b.color = r.selectColor(f), b.extend = s, b.destroy = r.destroy, Object.defineProperty(b, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => w !== null ? w : (g !== r.namespaces && (g = r.namespaces, x = r.enabled(f)), x),
        set: (m) => {
          w = m;
        }
      }), typeof r.init == "function" && r.init(b), b;
    }
    function s(f, h) {
      const w = r(this.namespace + (typeof h > "u" ? ":" : h) + f);
      return w.log = this.log, w;
    }
    function a(f) {
      r.save(f), r.namespaces = f, r.names = [], r.skips = [];
      const h = (typeof f == "string" ? f : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean);
      for (const w of h)
        w[0] === "-" ? r.skips.push(w.slice(1)) : r.names.push(w);
    }
    function i(f, h) {
      let w = 0, g = 0, x = -1, b = 0;
      for (; w < f.length; )
        if (g < h.length && (h[g] === f[w] || h[g] === "*"))
          h[g] === "*" ? (x = g, b = w, g++) : (w++, g++);
        else if (x !== -1)
          g = x + 1, b++, w = b;
        else
          return !1;
      for (; g < h.length && h[g] === "*"; )
        g++;
      return g === h.length;
    }
    function o() {
      const f = [
        ...r.names,
        ...r.skips.map((h) => "-" + h)
      ].join(",");
      return r.enable(""), f;
    }
    function l(f) {
      for (const h of r.skips)
        if (i(f, h))
          return !1;
      for (const h of r.names)
        if (i(f, h))
          return !0;
      return !1;
    }
    function c(f) {
      return f instanceof Error ? f.stack || f.message : f;
    }
    function p() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return _r = n, _r;
}
var Js;
function Ru() {
  return Js || (Js = 1, (function(n, e) {
    e.formatArgs = r, e.save = s, e.load = a, e.useColors = t, e.storage = i(), e.destroy = /* @__PURE__ */ (() => {
      let l = !1;
      return () => {
        l || (l = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let l;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (l = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(l[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(l) {
      if (l[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + l[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const c = "color: " + this.color;
      l.splice(1, 0, c, "color: inherit");
      let p = 0, f = 0;
      l[0].replace(/%[a-zA-Z%]/g, (h) => {
        h !== "%%" && (p++, h === "%c" && (f = p));
      }), l.splice(f, 0, c);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(l) {
      try {
        l ? e.storage.setItem("debug", l) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function a() {
      let l;
      try {
        l = e.storage.getItem("debug") || e.storage.getItem("DEBUG");
      } catch {
      }
      return !l && typeof process < "u" && "env" in process && (l = process.env.DEBUG), l;
    }
    function i() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = Nu()(e);
    const { formatters: o } = n.exports;
    o.j = function(l) {
      try {
        return JSON.stringify(l);
      } catch (c) {
        return "[UnexpectedJSONParseError]: " + c.message;
      }
    };
  })(Mn, Mn.exports)), Mn.exports;
}
var Du = Ru();
const Pu = /* @__PURE__ */ Cu(Du);
function Za() {
  return Bu();
}
function qs(n) {
  const e = Za();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const Ua = {
  get disabled() {
    return !0;
  }
}, Ja = {
  get dontLogModelData() {
    return qs("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return qs("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, Mu = Ja.dontLogModelData, ju = Ja.dontLogToolData;
function qa(n = "openai-agents") {
  return {
    namespace: n,
    debug: Pu(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: Mu,
    dontLogToolData: ju
  };
}
const M = qa("openai-agents:core"), Bs = 20;
function et(n) {
  if (n == null)
    return String(n);
  if (Ba(n))
    return tn(new Uint8Array(n));
  if (za(n)) {
    const e = n;
    return tn(new Uint8Array(e.buffer, e.byteOffset, e.byteLength));
  }
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n, Lu);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function Ba(n) {
  if (n instanceof ArrayBuffer)
    return !0;
  const e = globalThis.SharedArrayBuffer;
  return !!(e && n instanceof e);
}
function za(n) {
  return typeof ArrayBuffer < "u" && ArrayBuffer.isView(n);
}
function $u(n) {
  return typeof n == "object" && n !== null && n.type === "Buffer" && Array.isArray(n.data);
}
function tn(n) {
  if (n.length === 0)
    return "[byte array (0 bytes)]";
  const e = Math.min(n.length, Bs), t = [];
  for (let a = 0; a < e; a++)
    t.push(Fu(n[a]));
  const r = n.length > Bs ? " " : "";
  return `[byte array ${t.join(" ")}${r} (${n.length} bytes)]`;
}
function Fu(n) {
  return `0x${n.toString(16).padStart(2, "0")}`;
}
function Lu(n, e) {
  if (Ba(e))
    return tn(new Uint8Array(e));
  if (za(e)) {
    const t = e;
    return tn(new Uint8Array(t.buffer, t.byteOffset, t.byteLength));
  }
  return $u(e) ? tn(Uint8Array.from(e.data)) : e;
}
function Zu(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function jr(n) {
  const e = n.name ? nr(n.name) : nr(n.execute.name), t = typeof n.errorFunction > "u" ? Zu : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && St(n.parameters))
    throw new Q("Strict mode is required for Zod parameters");
  const { parser: s, schema: a } = es(n.parameters, e);
  async function i(p, f, h) {
    const [w, g] = await Yr(() => s(f));
    if (w !== null)
      throw M.dontLogToolData ? M.debug(`Invalid JSON input for tool ${e}`) : M.debug(`Invalid JSON input for tool ${e}: ${f}`), new xe("Invalid JSON input for tool");
    M.dontLogToolData ? M.debug(`Invoking tool ${e}`) : M.debug(`Invoking tool ${e} with input ${f}`);
    const x = await n.execute(g, p, h), b = et(x);
    return M.dontLogToolData ? M.debug(`Tool ${e} completed`) : M.debug(`Tool ${e} returned: ${b}`), x;
  }
  async function o(p, f, h) {
    return i(p, f, h).catch((w) => {
      if (t) {
        const g = dn();
        return g == null || g.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: w.toString()
          }
        }), t(p, w);
      }
      throw w;
    });
  }
  const l = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1, c = typeof n.isEnabled == "function" ? async (p, f) => {
    const h = n.isEnabled;
    return !!await h({ runContext: p, agent: f });
  } : async () => typeof n.isEnabled == "boolean" ? n.isEnabled : !0;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: a,
    strict: r,
    invoke: o,
    needsApproval: l,
    isEnabled: c
  };
}
y({
  name: d(),
  description: d().optional(),
  inputSchema: y({
    type: _("object"),
    properties: te(d(), B()),
    required: G(d()),
    additionalProperties: yt()
  })
});
const vr = {};
async function Uu({ server: n, convertSchemasToStrict: e, runContext: t, agent: r }) {
  return n.cacheToolsList && vr[n.name] ? vr[n.name].map((s) => zs(s, n, e)) : Jc(async (s) => {
    const a = await n.listTools();
    let i = a;
    if (t && r) {
      const l = { runContext: t, agent: r, serverName: n.name }, c = [];
      for (const p of a) {
        const f = n.toolFilter;
        if (f)
          if (typeof f == "function") {
            if (!await f(l, p)) {
              M.debug(`MCP Tool (server: ${n.name}, tool: ${p.name}) is blocked by the callable filter.`);
              continue;
            }
          } else {
            const h = f.allowedToolNames ?? [], w = f.blockedToolNames ?? [];
            if (h.length > 0 || w.length > 0) {
              const g = h.length > 0 ? h.includes(p.name) : !0, x = w.length > 0 ? w.includes(p.name) : !1;
              if (!g || x) {
                x ? M.debug(`MCP Tool (server: ${n.name}, tool: ${p.name}) is blocked by the static filter.`) : g || M.debug(`MCP Tool (server: ${n.name}, tool: ${p.name}) is not allowed by the static filter.`);
                continue;
              }
            }
          }
        c.push(p);
      }
      i = c;
    }
    s.spanData.result = i.map((l) => l.name);
    const o = i.map((l) => zs(l, n, e));
    return n.cacheToolsList && (vr[n.name] = i), o;
  }, { data: { server: n.name } });
}
async function Ju(n, e, t, r = !1) {
  const s = Array.isArray(n) ? {
    mcpServers: n,
    runContext: e,
    agent: t,
    convertSchemasToStrict: r
  } : n, { mcpServers: a, convertSchemasToStrict: i = !1, runContext: o, agent: l } = s, c = [], p = /* @__PURE__ */ new Set();
  for (const f of a) {
    const h = await Uu({
      server: f,
      convertSchemasToStrict: i,
      runContext: o,
      agent: l
    }), g = [...new Set(h.map((x) => x.name))].filter((x) => p.has(x));
    if (g.length > 0)
      throw new Q(`Duplicate tool names found across MCP servers: ${g.join(", ")}`);
    for (const x of h)
      p.add(x.name), c.push(x);
  }
  return c;
}
function zs(n, e, t) {
  var i, o, l, c;
  async function r(p, f) {
    let h = {};
    typeof p == "string" && p ? h = JSON.parse(p) : typeof p == "object" && p != null && (h = p);
    const w = dn();
    w && (w.spanData.mcp_data = { server: e.name });
    const g = await e.callTool(n.name, h);
    return g.length === 1 ? g[0] : g;
  }
  const s = {
    ...n.inputSchema,
    type: ((i = n.inputSchema) == null ? void 0 : i.type) ?? "object",
    properties: ((o = n.inputSchema) == null ? void 0 : o.properties) ?? {},
    required: ((l = n.inputSchema) == null ? void 0 : l.required) ?? [],
    additionalProperties: ((c = n.inputSchema) == null ? void 0 : c.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const p = qu(s);
      return jr({
        name: n.name,
        description: n.description || "",
        parameters: p,
        strict: !0,
        execute: r
      });
    } catch (p) {
      M.warn(`Error converting MCP schema to strict mode: ${p}`);
    }
  const a = {
    ...s,
    additionalProperties: !0
  };
  return jr({
    name: n.name,
    description: n.description || "",
    parameters: a,
    strict: !1,
    execute: r
  });
}
function qu(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function Bu() {
  return {};
}
var Pt, ot;
class ur {
  constructor() {
    O(this, Pt, new EventTarget());
    O(this, ot, /* @__PURE__ */ new Map());
  }
  on(e, t) {
    const r = e;
    let s = u(this, ot).get(r);
    s || (s = /* @__PURE__ */ new Map(), u(this, ot).set(r, s));
    let a = s.get(t);
    a || (a = /* @__PURE__ */ new Set(), s.set(t, a));
    const i = ((o) => t(...o.detail ?? []));
    return a.add(i), u(this, Pt).addEventListener(r, i), this;
  }
  off(e, t) {
    const r = e, s = u(this, ot).get(r), a = s == null ? void 0 : s.get(t);
    if (a != null && a.size) {
      for (const i of a)
        u(this, Pt).removeEventListener(r, i);
      s == null || s.delete(t), (s == null ? void 0 : s.size) === 0 && u(this, ot).delete(r);
    }
    return this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, Pt).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
Pt = new WeakMap(), ot = new WeakMap();
const Ga = () => typeof crypto < "u" && crypto.randomUUID ? crypto.randomUUID() : "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(n) {
  const e = Math.random() * 16 | 0;
  return (n === "x" ? e : e & 3 | 8).toString(16);
}), zu = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, Gu = globalThis.ReadableStream, Vu = globalThis.TransformStream;
class Wu {
  constructor() {
    v(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class Hu {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const Ku = new Hu();
class ts {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Yu extends ts {
  constructor() {
    super(...arguments);
    v(this, "eventEmitter", new ur());
  }
}
class Xu extends ts {
  constructor() {
    super(...arguments);
    v(this, "eventEmitter", new ur());
  }
}
const Qu = "OPENAI_DEFAULT_MODEL";
function cr(n) {
  return n.startsWith("gpt-5-chat") ? !1 : n.startsWith("gpt-5");
}
function Va() {
  return cr(Wa());
}
function Wa() {
  var e;
  return ((e = Za()[Qu]) == null ? void 0 : e.toLowerCase()) ?? "gpt-4.1";
}
function ec(n) {
  const e = Wa();
  return cr(e) ? {
    // We chose "low" instead of "minimal" because some of the built-in tools
    // (e.g., file search, image generation, etc.) do not support "minimal"
    // If you want to use "minimal" reasoning effort, you can pass your own model settings
    reasoning: { effort: "low" },
    text: { verbosity: "low" }
  } : {};
}
function Ha(n) {
  return JSON.stringify({ assistant: n.name });
}
function tc(n) {
  return `transfer_to_${nr(n.name)}`;
}
function nc(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class Ka {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    v(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    v(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    v(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    v(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arguments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    v(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    v(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    v(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    v(this, "agent");
    v(this, "isEnabled", async () => !0);
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = tc(e), this.toolDescription = nc(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function Ya(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new Q("You must provide either both `onHandoff` and `inputType` or neither.");
  async function i(l, c) {
    var p;
    if (t) {
      if (!c)
        throw Dt({
          message: `Handoff function expected non empty input but got: ${c}`,
          data: {
            details: "input is empty"
          }
        }), new xe("Handoff function expected non empty input");
      try {
        const f = await t(c);
        e.onHandoff && await e.onHandoff(l, f);
      } catch (f) {
        throw Dt({
          message: "Invalid JSON provided",
          data: {}
        }), M.dontLogToolData || M.error(`Invalid JSON when parsing: ${c}. Error: ${f}`), new xe("Invalid JSON provided");
      }
    } else
      await ((p = e.onHandoff) == null ? void 0 : p.call(e, l));
    return n;
  }
  const o = new Ka(n, i);
  if (typeof e.isEnabled == "function") {
    const l = e.isEnabled;
    o.isEnabled = async ({ runContext: c, agent: p }) => !!await l({ runContext: c, agent: p });
  } else typeof e.isEnabled == "boolean" && (o.isEnabled = async () => e.isEnabled);
  if (e.inputType) {
    const l = es(e.inputType, o.toolName);
    o.inputJsonSchema = l.schema, o.strictJsonSchema = !0, t = l.parser;
  }
  return e.toolNameOverride && (o.toolName = e.toolNameOverride), e.toolDescriptionOverride && (o.toolDescription = e.toolDescriptionOverride), e.inputFilter && (o.inputFilter = e.inputFilter), o;
}
function rc(n) {
  return n instanceof Ka ? n : Ya(n);
}
function Xa(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function sc(n) {
  return n.output.length === 0 ? "" : Xa(n.output[n.output.length - 1]) || "";
}
const $r = /* @__PURE__ */ new WeakMap();
function ac(n, e) {
  n && $r.set(n, e);
}
function ic(n) {
  const e = $r.get(n);
  return e && $r.delete(n), e;
}
const oc = y({ input: d() }), Rt = class Rt extends Yu {
  constructor(t) {
    super();
    v(this, "name");
    v(this, "instructions");
    v(this, "prompt");
    v(this, "handoffDescription");
    v(this, "handoffs");
    v(this, "model");
    v(this, "modelSettings");
    v(this, "tools");
    v(this, "mcpServers");
    v(this, "inputGuardrails");
    v(this, "outputGuardrails");
    v(this, "outputType", "text");
    v(this, "toolUseBehavior");
    v(this, "resetToolChoice");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new Q("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? Rt.DEFAULT_MODEL_PLACEHOLDER, this.prompt = t.prompt, this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? ec(), this.tools = t.tools ?? [], this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, // The user sets a non-default model
    t.model !== void 0 && // The default model is gpt-5
    Va() && // However, the specified model is not a gpt-5 model
    (typeof t.model != "string" || !cr(t.model)) && // The model settings are not customized for the specified model
    t.modelSettings === void 0 && (this.modelSettings = {}), (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && M.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new Rt({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Output schema name.
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (St(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new Rt({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: a, needsApproval: i, runConfig: o, runOptions: l, isEnabled: c } = t;
    return jr({
      name: r ?? nr(this.name),
      description: s ?? "",
      parameters: oc,
      strict: !0,
      needsApproval: i,
      isEnabled: c,
      execute: async (p, f, h) => {
        if (!du(p))
          throw new xe("Agent tool called with invalid input");
        const x = await new ld(o ?? {}).run(this, p.input, {
          context: f,
          ...l ?? {}
        }), b = typeof this.toolUseBehavior == "object" && this.toolUseBehavior !== null && "stopAtToolNames" in this.toolUseBehavior;
        typeof a != "function" && b && M.debug(`You're passing the agent (name: ${this.name}) with toolUseBehavior.stopAtToolNames configured as a tool to a different agent; this may not work as you expect. You may want to have a wrapper function tool to consistently return the final output.`);
        const m = typeof a == "function" ? await a(x) : sc(x.rawResponses[x.rawResponses.length - 1]);
        return h != null && h.toolCall && ac(h.toolCall, x), m;
      }
    });
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Returns the prompt template for the agent, if defined.
   *
   * If the agent has a function as its prompt, this function will be called with the
   * runContext and the agent instance.
   */
  async getPrompt(t) {
    return typeof this.prompt == "function" ? await this.prompt(t, this) : this.prompt;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools(t) {
    return this.mcpServers.length > 0 ? Ju({
      mcpServers: this.mcpServers,
      runContext: t,
      agent: this,
      convertSchemasToStrict: !1
    }) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools(t) {
    const r = await this.getMcpTools(t), s = [];
    for (const a of this.tools) {
      if (a.type === "function") {
        const i = a.isEnabled;
        if (!(typeof i == "function" ? await i(t, this) : typeof i == "boolean" ? i : !0))
          continue;
      }
      s.push(a);
    }
    return [...r, ...s];
  }
  /**
   * Returns the handoffs that should be exposed to the model for the current run.
   *
   * Handoffs that provide an `isEnabled` function returning `false` are omitted.
   */
  async getEnabledHandoffs(t) {
    var a;
    const r = ((a = this.handoffs) == null ? void 0 : a.map((i) => rc(i))) ?? [], s = [];
    for (const i of r)
      await i.isEnabled({ runContext: t, agent: this }) && s.push(i);
    return s;
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return St(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
};
v(Rt, "DEFAULT_MODEL_PLACEHOLDER", "");
let It = Rt;
function Gs({ name: n, execute: e }) {
  return {
    type: "input",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(t)
      };
    }
  };
}
function Fr({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function uc() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const se = y({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: te(d(), B()).optional()
}), kt = se.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: d().optional()
}), cc = se.extend({
  type: _("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: d()
}), dc = se.extend({
  type: _("output_text"),
  /**
   * The text output from the model.
   */
  text: d()
}), ns = se.extend({
  type: _("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: d()
}), lc = se.extend({
  type: _("reasoning_text"),
  /**
   * A text input for example a message from a user
   */
  text: d()
}), Qa = se.extend({
  type: _("input_image"),
  /**
   * The image input to the model. Could be provided inline (`image`), as a URL, or by reference to a
   * previously uploaded OpenAI file.
   */
  image: d().or(y({ id: d().describe("OpenAI file ID") })).describe("Either base64 encoded image data, a data URL, or an object with a file ID.").optional(),
  /**
   * Controls the level of detail requested for image understanding tasks.
   * Future models may add new values, therefore this accepts any string.
   */
  detail: d().optional()
}), ei = se.extend({
  type: _("input_file"),
  /**
   * The file input to the model. Could be raw data, a URL, or an OpenAI file ID.
   */
  file: d().describe("Either base64 encoded file data or a publicly accessible file URL").or(y({ id: d().describe("OpenAI file ID") })).or(y({ url: d().describe("Publicly accessible file URL") })).describe("Contents of the file or an object with a file ID.").optional(),
  /**
   * Optional filename metadata when uploading file data inline.
   */
  filename: d().optional()
}), ti = se.extend({
  type: _("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: d().or(y({
    id: d()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: d().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: d().nullable().optional()
}), pc = se.extend({
  type: _("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: d().describe("Base64 encoded image data")
}), fc = se.extend({
  type: _("text"),
  /**
   * The text output from the model.
   */
  text: d()
}), hc = y({
  data: Tt([d(), Oa(Uint8Array)]).describe("Base64 image data, or raw bytes that will be base64 encoded automatically."),
  mediaType: d().optional()
}), mc = y({
  url: d().describe("Publicly accessible URL pointing to the image content")
}), gc = y({
  fileId: d().describe("OpenAI file ID referencing uploaded image content")
}), yc = Tt([hc, mc, gc]).describe("Inline image data or references to uploaded content."), _c = y({
  data: Tt([d(), Oa(Uint8Array)]).describe("Base64 encoded file data, or raw bytes that will be encoded automatically."),
  mediaType: d().describe("IANA media type describing the file contents"),
  filename: d().describe("Filename associated with the inline data")
}), vc = y({
  url: d().describe("Publicly accessible URL for the file content"),
  filename: d().optional()
}), bc = y({
  id: d().describe("OpenAI file ID referencing uploaded content"),
  filename: d().optional()
}), wc = Tt([
  d().describe("Existing data URL or base64 string"),
  _c,
  vc,
  bc
]).describe("Inline data (with metadata) or references pointing to file contents."), xc = (...n) => d(), Sc = se.extend({
  type: _("image"),
  /**
   * Inline image content or a reference to an uploaded file. Accepts a URL/data URL string or an
   * object describing the data/url/fileId source.
   */
  image: d().or(yc).optional(),
  /**
   * Controls the requested level of detail for vision models.
   * Use a string to avoid constraining future model capabilities.
   */
  detail: xc("low", "high", "auto").optional()
}), Ic = se.extend({
  type: _("file"),
  /**
   * File output reference. Provide either a string (data URL / base64), a data object (requires
   * mediaType + filename), or an object pointing to an uploaded file/URL.
   */
  file: wc
}), Tc = se.extend({
  type: _("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: d().describe("Base64 encoded image data or URL")
}), kc = he("type", [
  y({ type: _("screenshot") }),
  y({
    type: _("click"),
    x: R(),
    y: R(),
    button: ue(["left", "right", "wheel", "back", "forward"])
  }),
  y({
    type: _("double_click"),
    x: R(),
    y: R()
  }),
  y({
    type: _("scroll"),
    x: R(),
    y: R(),
    scroll_x: R(),
    scroll_y: R()
  }),
  y({
    type: _("type"),
    text: d()
  }),
  y({ type: _("wait") }),
  y({
    type: _("move"),
    x: R(),
    y: R()
  }),
  y({
    type: _("keypress"),
    keys: G(d())
  }),
  y({
    type: _("drag"),
    path: G(y({ x: R(), y: R() }))
  })
]), Ac = he("type", [
  dc,
  cc,
  ti,
  pc
]), rs = kt.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: _("message").optional()
}), dr = rs.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: _("assistant"),
  /**
   * The status of the message.
   */
  status: ue(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: G(Ac)
}), Oc = he("type", [
  ns,
  Qa,
  ei,
  ti
]), ni = rs.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: _("user"),
  /**
   * The content of the message.
   */
  content: G(Oc).or(d())
}), ri = rs.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: _("system"),
  /**
   * The content of the message.
   */
  content: d()
});
he("role", [
  ri,
  dr,
  ni
]);
const an = kt.extend({
  type: _("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: d().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: d().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: d().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: d().optional()
}), on = kt.extend({
  type: _("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: d().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: d().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: ue(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: d()
}), Cc = he("type", [
  fc,
  Sc,
  Ic
]), Ec = he("type", [
  ns,
  Qa,
  ei
]), Lr = kt.extend({
  type: _("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: d().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: d().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: ue(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: Tt([
    d(),
    Cc,
    G(Ec)
  ]).describe("Output returned by the tool call. Supports plain strings, legacy ToolOutput items, or structured input_* items.")
}), ss = kt.extend({
  type: _("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: d().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: ue(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: kc
}), Nc = kt.extend({
  type: _("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: d().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: Tc
}), Rc = he("type", [
  ss,
  on,
  an
]), as = se.extend({
  id: d().optional(),
  type: _("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: G(ns),
  /**
   * The raw reasoning text from the model.
   */
  rawContent: G(lc).optional()
}), si = kt.extend({
  type: _("unknown")
}), is = he("type", [
  dr,
  an,
  on,
  ss,
  as,
  si
]), Dc = Tt([
  ni,
  dr,
  ri,
  an,
  on,
  ss,
  Lr,
  Nc,
  as,
  si
]), Pc = y({
  requests: R().optional(),
  inputTokens: R(),
  outputTokens: R(),
  totalTokens: R(),
  inputTokensDetails: te(d(), R()).optional(),
  outputTokensDetails: te(d(), R()).optional()
}), ai = se.extend({
  type: _("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: d()
}), Mc = se.extend({
  type: _("response_started")
}), ii = se.extend({
  type: _("response_done"),
  /**
   * The response from the model.
   */
  response: se.extend({
    /**
     * The ID of the response.
     */
    id: d(),
    /**
     * The usage data for the response.
     */
    usage: Pc,
    /**
     * The output from the model.
     */
    output: G(is)
  })
}), jc = se.extend({
  type: _("model"),
  event: B().describe("The event from the model")
});
he("type", [
  ai,
  ii,
  Mc,
  jc
]);
class lr {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    v(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    v(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    v(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    v(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    v(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    v(this, "outputTokensDetails", []);
    if (typeof e > "u")
      this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = [];
    else {
      this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? (e == null ? void 0 : e.input_tokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? (e == null ? void 0 : e.output_tokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? (e == null ? void 0 : e.total_tokens) ?? 0;
      const t = (e == null ? void 0 : e.inputTokensDetails) ?? (e == null ? void 0 : e.input_tokens_details);
      this.inputTokensDetails = t ? [t] : [];
      const r = (e == null ? void 0 : e.outputTokensDetails) ?? (e == null ? void 0 : e.output_tokens_details);
      this.outputTokensDetails = r ? [r] : [];
    }
  }
  add(e) {
    this.requests += e.requests, this.inputTokens += e.inputTokens, this.outputTokens += e.outputTokens, this.totalTokens += e.totalTokens, e.inputTokensDetails && this.inputTokensDetails.push(...e.inputTokensDetails), e.outputTokensDetails && this.outputTokensDetails.push(...e.outputTokensDetails);
  }
}
var ge;
class Et {
  constructor(e = {}) {
    /**
     * The context object you passed to the `Runner.run()` method.
     */
    v(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be stale until the
     * last chunk of the stream is processed.
     */
    v(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    O(this, ge);
    this.context = e, this.usage = new lr(), S(this, ge, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    S(this, ge, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param approval - Details about the tool call being evaluated.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved(e) {
    const { toolName: t, callId: r } = e, s = u(this, ge).get(t);
    if ((s == null ? void 0 : s.approved) === !0 && s.rejected === !0)
      return M.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((s == null ? void 0 : s.approved) === !0)
      return !0;
    if ((s == null ? void 0 : s.rejected) === !0)
      return !1;
    const a = Array.isArray(s == null ? void 0 : s.approved) ? s.approved.includes(r) : !1, i = Array.isArray(s == null ? void 0 : s.rejected) ? s.rejected.includes(r) : !1;
    if (a && i)
      return M.warn(`Tool call ${r} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (a)
      return !0;
    if (i)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param approvalItem - The tool approval item to approve.
   * @param options - Additional approval behavior options.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, ge).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, ge).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(a);
    }
    u(this, ge).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, ge).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, ge).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(a);
    }
    u(this, ge).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, ge).entries())
    };
  }
}
ge = new WeakMap();
function Vs(n) {
  return n.type === "function" ? {
    type: "function",
    name: n.name,
    description: n.description,
    parameters: n.parameters,
    strict: n.strict
  } : n.type === "computer" ? {
    type: "computer",
    name: n.name,
    environment: n.computer.environment,
    dimensions: n.computer.dimensions
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function Ws(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class At {
  constructor() {
    v(this, "type", "base_item");
    v(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class pr extends At {
  constructor(t, r) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class _t extends At {
  constructor(t, r) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Kt extends At {
  constructor(t, r, s) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "output");
    v(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: et(this.output)
    };
  }
}
class os extends At {
  constructor(t, r) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class us extends At {
  constructor(t, r) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class cs extends At {
  constructor(t, r, s) {
    super();
    v(this, "rawItem");
    v(this, "sourceAgent");
    v(this, "targetAgent");
    v(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class Se extends At {
  constructor(t, r) {
    super();
    v(this, "rawItem");
    v(this, "agent");
    v(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
function fr(n) {
  return async (e, ...t) => Gr(async () => {
    const r = n(...t);
    Zn(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), en();
    }
  });
}
function Hs(n, e) {
  var t;
  return Pe().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function $c(n, e) {
  var t, r;
  return Pe().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Ks = fr($c);
function Fc(n, e) {
  return Pe().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const Lc = fr(Fc);
function Zc(n, e) {
  return Pe().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Ys = fr(Zc);
function Uc(n, e) {
  return Pe().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Jc = fr(Uc);
function Zr(n) {
  if (n.length === 0)
    return "";
  const e = typeof globalThis < "u" && globalThis.Buffer ? globalThis.Buffer : void 0;
  if (e)
    return e.from(n).toString("base64");
  let t = "";
  for (let i = 0; i < n.length; i += 1)
    t += String.fromCharCode(n[i]);
  if (typeof globalThis.btoa == "function")
    return globalThis.btoa(t);
  const r = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  let s = "", a = 0;
  for (; a < t.length; ) {
    const i = t.charCodeAt(a++), o = t.charCodeAt(a++), l = t.charCodeAt(a++), c = i >> 2, p = (i & 3) << 4 | o >> 4, f = isNaN(o) ? 64 : (o & 15) << 2 | l >> 6, h = isNaN(l) ? 64 : l & 63;
    s += r.charAt(c) + r.charAt(p) + r.charAt(f) + r.charAt(h);
  }
  return s;
}
class qc {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    v(this, "data");
    /**
     * The type of the event.
     */
    v(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class Bc {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    v(this, "name");
    v(this, "item");
    v(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class zc {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    v(this, "agent");
    v(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function Xs(n, e, t, r) {
  var g;
  const s = [], a = [], i = [], o = [], l = [], c = [], p = new Map(r.map((x) => [x.toolName, x])), f = new Map(t.filter((x) => x.type === "function").map((x) => [x.name, x])), h = t.find((x) => x.type === "computer"), w = new Map(t.filter((x) => {
    var b;
    return x.type === "hosted_tool" && ((b = x.providerData) == null ? void 0 : b.type) === "mcp";
  }).map((x) => x).map((x) => [x.providerData.server_label, x]));
  for (const x of n.output) {
    if (x.type === "message")
      x.role === "assistant" && s.push(new pr(x, e));
    else if (x.type === "hosted_tool_call") {
      s.push(new _t(x, e));
      const m = x.name;
      if (c.push(m), ((g = x.providerData) == null ? void 0 : g.type) === "mcp_approval_request" || x.name === "mcp_approval_request") {
        const I = x.providerData, A = I.server_label, D = w.get(A);
        if (typeof D > "u") {
          const j = `MCP server (${A}) not found in Agent (${e.name})`;
          throw Dt({
            message: j,
            data: { mcp_server_label: A }
          }), new xe(j);
        }
        const N = new Se({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: I.name,
          id: I.id,
          status: "in_progress",
          providerData: I
        }, e);
        l.push({
          requestItem: N,
          mcpTool: D
        }), D.providerData.on_approval || s.push(N);
      }
    } else if (x.type === "reasoning")
      s.push(new os(x, e));
    else if (x.type === "computer_call") {
      if (s.push(new _t(x, e)), c.push("computer_use"), !h)
        throw Dt({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new xe("Model produced computer action without a computer tool.");
      o.push({
        toolCall: x,
        computer: h
      });
    }
    if (x.type !== "function_call")
      continue;
    c.push(x.name);
    const b = p.get(x.name);
    if (b)
      s.push(new us(x, e)), a.push({
        toolCall: x,
        handoff: b
      });
    else {
      const m = f.get(x.name);
      if (!m)
        throw Dt({
          message: `Tool ${x.name} not found in agent ${e.name}.`,
          data: {
            tool_name: x.name,
            agent_name: e.name
          }
        }), new xe(`Tool ${x.name} not found in agent ${e.name}.`);
      s.push(new _t(x, e)), i.push({
        toolCall: x,
        tool: m
      });
    }
  }
  return {
    newItems: s,
    handoffs: a,
    functions: i,
    computerActions: o,
    mcpApprovalRequests: l,
    toolsUsed: c,
    hasToolsOrApprovalsToRun() {
      return a.length > 0 || i.length > 0 || l.length > 0 || o.length > 0;
    }
  };
}
const Gc = he("type", [
  y({
    type: _("next_step_handoff"),
    newAgent: B()
  }),
  y({
    type: _("next_step_final_output"),
    output: d()
  }),
  y({
    type: _("next_step_run_again")
  }),
  y({
    type: _("next_step_interruption"),
    data: te(d(), B())
  })
]);
class be {
  constructor(e, t, r, s, a) {
    v(this, "originalInput");
    v(this, "modelResponse");
    v(this, "preStepItems");
    v(this, "newStepItems");
    v(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = a;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function Qs(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function ea(n, e, t, r, s, a, i) {
  const o = t.filter((g) => g instanceof Se && "callId" in g.rawItem && g.rawItem.type === "function_call").map((g) => g.rawItem.callId), l = s.functions.filter((g) => o.includes(g.toolCall.callId)), c = await oi(n, l, a, i), p = c.map((g) => g.runItem), f = s.mcpApprovalRequests.filter((g) => {
    var x;
    return g.requestItem.type === "tool_approval_item" && g.requestItem.rawItem.type === "hosted_tool_call" && ((x = g.requestItem.rawItem.providerData) == null ? void 0 : x.type) === "mcp_approval_request";
  });
  for (const g of f) {
    const x = g.requestItem.rawItem.id, b = i._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: g.requestItem.rawItem.name,
      callId: x
    });
    if (typeof b < "u") {
      const m = {
        approve: b,
        approval_request_id: x,
        reason: void 0
      };
      p.push(new _t({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: m
      }, n));
    }
  }
  const h = await ui(n, c, i), w = t.filter((g) => !(g instanceof Se));
  return h.isFinalOutput ? (a.emit("agent_end", i._context, n, h.finalOutput), n.emit("agent_end", i._context, h.finalOutput), new be(e, r, w, p, {
    type: "next_step_final_output",
    output: h.finalOutput
  })) : h.isInterrupted ? new be(e, r, w, p, {
    type: "next_step_interruption",
    data: {
      interruptions: h.interruptions
    }
  }) : new be(e, r, w, p, { type: "next_step_run_again" });
}
async function ta(n, e, t, r, s, a, i) {
  var b, m, I, A;
  const o = t;
  let l = s.newItems;
  const [c, p] = await Promise.all([
    oi(n, s.functions, a, i),
    Qc(n, s.computerActions, a, i._context)
  ]);
  if (l = l.concat(c.map((D) => D.runItem)), l = l.concat(p), s.mcpApprovalRequests.length > 0)
    for (const D of s.mcpApprovalRequests) {
      const N = D.mcpTool.providerData, j = D.requestItem.rawItem.providerData;
      if (N.on_approval) {
        const J = await N.on_approval(i._context, D.requestItem), ne = {
          approve: J.approve,
          approval_request_id: j.id,
          reason: J.reason
        };
        l.push(new _t({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: ne
        }, n));
      } else {
        l.push(D.requestItem);
        const J = {
          type: "hosted_mcp_tool_approval",
          tool: D.mcpTool,
          runItem: new Se({
            type: "hosted_tool_call",
            name: j.name,
            id: j.id,
            arguments: j.arguments,
            status: "in_progress",
            providerData: j
          }, n)
        };
        c.push(J);
      }
    }
  if (s.handoffs.length > 0)
    return await ed(n, e, o, l, r, s.handoffs, a, i._context);
  const f = await ui(n, c, i);
  if (f.isFinalOutput)
    return a.emit("agent_end", i._context, n, f.finalOutput), n.emit("agent_end", i._context, f.finalOutput), new be(e, r, o, l, {
      type: "next_step_final_output",
      output: f.finalOutput
    });
  if (f.isInterrupted)
    return new be(e, r, o, l, {
      type: "next_step_interruption",
      data: {
        interruptions: f.interruptions
      }
    });
  if ((((b = s.functions) == null ? void 0 : b.length) ?? 0) > 0 || (((m = s.computerActions) == null ? void 0 : m.length) ?? 0) > 0 || (((I = s.mcpApprovalRequests) == null ? void 0 : I.length) ?? 0) > 0 || (((A = s.handoffs) == null ? void 0 : A.length) ?? 0) > 0)
    return new be(e, r, o, l, { type: "next_step_run_again" });
  const w = l.filter((D) => D instanceof pr), g = w.length > 0 ? Xa(w[w.length - 1].rawItem) : void 0;
  if (typeof g > "u")
    return new be(e, r, o, l, { type: "next_step_run_again" });
  if (!c.some((D) => D.runItem instanceof Se)) {
    if (n.outputType === "text")
      return new be(e, r, o, l, {
        type: "next_step_final_output",
        output: g
      });
    if (n.outputType !== "text" && g) {
      const { parser: D } = es(n.outputType, "final_output"), [N] = await Yr(() => D(g));
      if (N)
        throw Dt({
          message: "Invalid output type",
          data: {
            error: String(N)
          }
        }), new xe("Invalid output type");
      return new be(e, r, o, l, { type: "next_step_final_output", output: g });
    }
  }
  return new be(e, r, o, l, { type: "next_step_run_again" });
}
function rr(n, e) {
  const t = Vc(e);
  if (t) {
    const r = t.map(Wc);
    return {
      type: "function_call_result",
      name: n.name,
      callId: n.callId,
      status: "completed",
      output: r
    };
  }
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: et(e)
    }
  };
}
function Vc(n) {
  if (Array.isArray(n)) {
    const t = [];
    for (const r of n) {
      const s = na(r);
      if (!s)
        return null;
      t.push(s);
    }
    return t;
  }
  const e = na(n);
  return e ? [e] : null;
}
function na(n) {
  if (!at(n))
    return null;
  const e = n.type;
  if (e === "text" && typeof n.text == "string") {
    const t = { type: "text", text: n.text };
    return at(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "image") {
    const t = { type: "image" };
    let r, s;
    const a = ie(n.mediaType) ? n.mediaType : void 0, i = n.image;
    if (typeof i == "string" && i.length > 0)
      r = i;
    else if (at(i)) {
      const o = i, l = ie(o.mediaType) ? o.mediaType : a;
      if (ie(o.url) ? r = o.url : (ie(o.data) || o.data instanceof Uint8Array && o.data.length > 0) && (r = jn(o.data, l)), !r) {
        const c = ie(o.fileId) && o.fileId || ie(o.id) && o.id || void 0;
        c && (s = c);
      }
    }
    if (!r && typeof n.imageUrl == "string" && n.imageUrl.length > 0 && (r = n.imageUrl), !s && typeof n.fileId == "string" && n.fileId.length > 0 && (s = n.fileId), !r && typeof n.data == "string" && n.data.length > 0 ? r = a ? jn(n.data, a) : n.data : !r && n.data instanceof Uint8Array && n.data.length > 0 && (r = jn(n.data, a)), typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), r)
      t.image = r;
    else if (s)
      t.image = { fileId: s };
    else
      return null;
    return at(n.providerData) && (t.providerData = n.providerData), t;
  }
  if (e === "file") {
    const t = Hc(n);
    if (!t)
      return null;
    const r = { type: "file", file: t };
    return at(n.providerData) && (r.providerData = n.providerData), r;
  }
  return null;
}
function Wc(n) {
  if (n.type === "text") {
    const t = {
      type: "input_text",
      text: n.text
    };
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "image") {
    const t = { type: "input_image" };
    if (typeof n.detail == "string" && n.detail.length > 0 && (t.detail = n.detail), typeof n.image == "string" && n.image.length > 0)
      t.image = n.image;
    else if (at(n.image)) {
      const r = n.image, s = ie(r.mediaType) ? r.mediaType : void 0;
      if (ie(r.url))
        t.image = r.url;
      else if (ie(r.data))
        t.image = s && !r.data.startsWith("data:") ? Nt(r.data, s) : r.data;
      else if (r.data instanceof Uint8Array && r.data.length > 0) {
        const a = Zr(r.data);
        t.image = Nt(a, s);
      } else {
        const a = ie(r.fileId) && r.fileId || ie(r.id) && r.id || void 0;
        a && (t.image = { id: a });
      }
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  if (n.type === "file") {
    const t = { type: "input_file" }, r = n.file;
    if (typeof r == "string")
      t.file = r;
    else if (r && typeof r == "object") {
      const s = r;
      if ("data" in s && s.data) {
        const a = s.mediaType ?? "text/plain";
        if (typeof s.data == "string")
          t.file = Nt(s.data, a);
        else {
          const i = Zr(s.data);
          t.file = Nt(i, a);
        }
      } else if (typeof s.url == "string" && s.url.length > 0)
        t.file = { url: s.url };
      else {
        const a = typeof s.id == "string" && s.id.length > 0 && s.id || (typeof s.fileId == "string" && s.fileId.length > 0 ? s.fileId : void 0);
        a && (t.file = { id: a });
      }
      typeof s.filename == "string" && s.filename.length > 0 && (t.filename = s.filename);
    }
    return n.providerData && (t.providerData = n.providerData), t;
  }
  return n;
}
function Hc(n) {
  const e = n.file;
  if (typeof e == "string" && e.length > 0)
    return e;
  const t = Kc(e);
  if (t)
    return t;
  const r = Yc(n);
  return r || null;
}
function Kc(n) {
  if (!at(n))
    return null;
  if ("data" in n && n.data !== void 0) {
    const t = n.data, r = typeof t == "string" && t.length > 0, s = t instanceof Uint8Array && t.length > 0;
    return !r && !s || !ie(n.mediaType) || !ie(n.filename) ? null : {
      data: typeof t == "string" ? t : new Uint8Array(t),
      mediaType: n.mediaType,
      filename: n.filename
    };
  }
  if (ie(n.url)) {
    const t = { url: n.url };
    return ie(n.filename) && (t.filename = n.filename), t;
  }
  const e = ie(n.id) && n.id || ie(n.fileId) && n.fileId;
  if (e) {
    const t = { id: e };
    return ie(n.filename) && (t.filename = n.filename), t;
  }
  return null;
}
function Yc(n) {
  const e = typeof n.filename == "string" && n.filename.length > 0 ? n.filename : void 0, t = typeof n.mediaType == "string" && n.mediaType.length > 0 ? n.mediaType : void 0;
  if (typeof n.fileData == "string" && n.fileData.length > 0)
    return !t || !e ? null : { data: n.fileData, mediaType: t, filename: e };
  if (n.fileData instanceof Uint8Array && n.fileData.length > 0)
    return !t || !e ? null : { data: new Uint8Array(n.fileData), mediaType: t, filename: e };
  if (typeof n.fileUrl == "string" && n.fileUrl.length > 0) {
    const r = { url: n.fileUrl };
    return e && (r.filename = e), r;
  }
  if (typeof n.fileId == "string" && n.fileId.length > 0) {
    const r = { id: n.fileId };
    return e && (r.filename = e), r;
  }
  return null;
}
function at(n) {
  return typeof n == "object" && n !== null;
}
function ie(n) {
  return typeof n == "string" && n.length > 0;
}
function jn(n, e) {
  if (typeof n == "string")
    return e && !n.startsWith("data:") ? Nt(n, e) : n;
  const t = Zr(n);
  return Nt(t, e);
}
function Nt(n, e) {
  return e ? `data:${e};base64,${n}` : n;
}
async function oi(n, e, t, r) {
  async function s(a) {
    let i = a.toolCall.arguments;
    if (a.tool.parameters && (St(a.tool.parameters) ? i = a.tool.parameters.parse(i) : i = JSON.parse(i)), await a.tool.needsApproval(r._context, i, a.toolCall.callId)) {
      const l = r._context.isToolApproved({
        toolName: a.tool.name,
        callId: a.toolCall.callId
      });
      if (l === !1)
        return Ks(async (c) => {
          const p = "Tool execution was not approved.";
          return c.setError({
            message: p,
            data: {
              tool_name: a.tool.name,
              error: `Tool execution for ${a.toolCall.callId} was manually rejected by user.`
            }
          }), c.spanData.output = p, {
            type: "function_output",
            tool: a.tool,
            output: p,
            runItem: new Kt(rr(a.toolCall, p), n, p)
          };
        }, {
          data: {
            name: a.tool.name
          }
        });
      if (l !== !0)
        return {
          type: "function_approval",
          tool: a.tool,
          runItem: new Se(a.toolCall, n)
        };
    }
    return Ks(async (l) => {
      t.config.traceIncludeSensitiveData && (l.spanData.input = a.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, a.tool, {
          toolCall: a.toolCall
        }), n.emit("agent_tool_start", r._context, a.tool, {
          toolCall: a.toolCall
        });
        const c = await a.tool.invoke(r._context, a.toolCall.arguments, { toolCall: a.toolCall }), p = et(c);
        t.emit("agent_tool_end", r._context, n, a.tool, p, { toolCall: a.toolCall }), n.emit("agent_tool_end", r._context, a.tool, p, { toolCall: a.toolCall }), t.config.traceIncludeSensitiveData && (l.spanData.output = p);
        const f = {
          type: "function_output",
          tool: a.tool,
          output: c,
          runItem: new Kt(rr(a.toolCall, c), n, c)
        }, h = ic(a.toolCall);
        if (h) {
          f.agentRunResult = h;
          const w = h.interruptions;
          w.length > 0 && (f.interruptions = w);
        }
        return f;
      } catch (c) {
        throw l.setError({
          message: "Error running tool",
          data: {
            tool_name: a.tool.name,
            error: String(c)
          }
        }), c;
      }
    }, {
      data: {
        name: a.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (a) {
    throw new cu(`Failed to run function tools: ${a}`, a, r);
  }
}
async function Xc(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
async function Qc(n, e, t, r, s = void 0) {
  const a = s ?? M, i = [];
  for (const o of e) {
    const l = o.computer.computer, c = o.toolCall;
    t.emit("agent_tool_start", r, n, o.computer, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_start", r, o.computer, { toolCall: c });
    let p;
    try {
      p = await Xc(l, c);
    } catch (w) {
      a.error("Failed to execute computer action:", w), p = "";
    }
    t.emit("agent_tool_end", r, n, o.computer, p, {
      toolCall: c
    }), typeof n.emit == "function" && n.emit("agent_tool_end", r, o.computer, p, {
      toolCall: c
    });
    const f = p ? `data:image/png;base64,${p}` : "", h = {
      type: "computer_call_result",
      callId: c.callId,
      output: { type: "computer_screenshot", data: f }
    };
    i.push(new Kt(h, n, f));
  }
  return i;
}
async function ed(n, e, t, r, s, a, i, o) {
  if (r = [...r], a.length === 0)
    return M.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new be(e, s, t, r, { type: "next_step_run_again" });
  if (a.length > 1) {
    const c = "Multiple handoffs detected, ignoring this one.";
    for (let p = 1; p < a.length; p++)
      r.push(new Kt(rr(a[p].toolCall, c), n, c));
  }
  const l = a[0];
  return Lc(async (c) => {
    const p = l.handoff, f = await p.onInvokeHandoff(o, l.toolCall.arguments);
    if (c.spanData.to_agent = f.name, a.length > 1) {
      const w = a.map((g) => g.handoff.agentName);
      c.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: w
        }
      });
    }
    r.push(new cs(rr(l.toolCall, Ha(f)), n, f)), i.emit("agent_handoff", o, n, f), n.emit("agent_handoff", o, f);
    const h = p.inputFilter ?? i.config.handoffInputFilter;
    if (h) {
      M.debug("Filtering inputs for handoff"), typeof h != "function" && c.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const w = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r],
        runContext: o
      }, g = h(w);
      e = g.inputHistory, t = g.preHandoffItems, r = g.newItems;
    }
    return new be(e, s, t, r, { type: "next_step_handoff", newAgent: f });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const $n = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function ui(n, e, t) {
  if (e.length === 0)
    return $n;
  const r = [];
  for (const i of e)
    if (i.runItem instanceof Se && r.push(i.runItem), i.type === "function_output") {
      if (Array.isArray(i.interruptions))
        r.push(...i.interruptions);
      else if (i.agentRunResult) {
        const o = i.agentRunResult.interruptions;
        o.length > 0 && r.push(...o);
      }
    }
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return $n;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: et(s.output)
    } : $n;
  const a = n.toolUseBehavior;
  if (typeof a == "object") {
    const i = e.find((o) => a.stopAtToolNames.includes(o.tool.name));
    return (i == null ? void 0 : i.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: et(i.output)
    } : $n;
  }
  if (typeof a == "function")
    return a(t._context, e);
  throw new Q(`Invalid toolUseBehavior: ${a}`, t);
}
function td(n) {
  if (n instanceof pr)
    return "message_output_created";
  if (n instanceof us)
    return "handoff_requested";
  if (n instanceof cs)
    return "handoff_occurred";
  if (n instanceof _t)
    return "tool_called";
  if (n instanceof Kt)
    return "tool_output";
  if (n instanceof os)
    return "reasoning_item_created";
  if (n instanceof Se)
    return "tool_approval_requested";
}
function ci(n, e) {
  const t = td(e);
  if (!t) {
    M.warn("Unknown item type: ", e);
    return;
  }
  n._addItem(new Bc(t, e));
}
function nd(n, e) {
  for (const t of e)
    ci(n, t);
}
function ra(n, e, t) {
  const r = t == null ? void 0 : t.skipItems;
  for (const s of e.newStepItems)
    r != null && r.has(s) || ci(n, s);
}
var Mt;
class sa {
  constructor() {
    O(this, Mt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, Mt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, Mt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, Mt).entries()).map(([e, t]) => [e.name, t]));
  }
}
Mt = new WeakMap();
const Ln = "1.0", rd = _(Ln), Oe = y({
  name: d()
}), sd = y({
  object: _("trace.span"),
  id: d(),
  trace_id: d(),
  parent_id: d().nullable(),
  started_at: d().nullable(),
  ended_at: d().nullable(),
  error: y({
    message: d(),
    data: te(d(), B()).optional()
  }).nullable(),
  span_data: te(d(), B())
}), di = sd.extend({
  previous_span: vo(() => di).optional()
}), li = y({
  requests: R(),
  inputTokens: R(),
  outputTokens: R(),
  totalTokens: R()
}), aa = y({
  usage: li,
  output: G(is),
  responseId: d().optional(),
  providerData: te(d(), B()).optional()
}), pi = he("type", [
  y({
    type: _("message_output_item"),
    rawItem: dr,
    agent: Oe
  }),
  y({
    type: _("tool_call_item"),
    rawItem: Rc.or(an),
    agent: Oe
  }),
  y({
    type: _("tool_call_output_item"),
    rawItem: Lr,
    agent: Oe,
    output: d()
  }),
  y({
    type: _("reasoning_item"),
    rawItem: as,
    agent: Oe
  }),
  y({
    type: _("handoff_call_item"),
    rawItem: on,
    agent: Oe
  }),
  y({
    type: _("handoff_output_item"),
    rawItem: Lr,
    sourceAgent: Oe,
    targetAgent: Oe
  }),
  y({
    type: _("tool_approval_item"),
    rawItem: on.or(an),
    agent: Oe
  })
]), ad = y({
  object: _("trace"),
  id: d(),
  workflow_name: d(),
  group_id: d().nullable(),
  metadata: te(d(), B())
}), id = y({
  newItems: G(pi),
  toolsUsed: G(d()),
  handoffs: G(y({
    toolCall: B(),
    handoff: B()
  })),
  functions: G(y({
    toolCall: B(),
    tool: B()
  })),
  computerActions: G(y({
    toolCall: B(),
    computer: B()
  })),
  mcpApprovalRequests: G(y({
    requestItem: y({
      // protocol.HostedToolCallItem
      rawItem: y({
        type: _("hosted_tool_call"),
        name: d(),
        arguments: d().optional(),
        status: d().optional(),
        output: d().optional(),
        // this always exists but marked as optional for early version compatibility; when releasing 1.0, we can remove the nullable and optional
        providerData: te(d(), B()).nullable().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: y({
      type: _("hosted_tool"),
      name: _("hosted_mcp"),
      providerData: te(d(), B())
    })
  })).optional()
}), fi = y({
  tripwireTriggered: yt(),
  outputInfo: B()
}), od = y({
  guardrail: y({
    type: _("input"),
    name: d()
  }),
  output: fi
}), ud = y({
  guardrail: y({
    type: _("output"),
    name: d()
  }),
  agentOutput: B(),
  agent: Oe,
  output: fi
}), ia = y({
  $schemaVersion: rd,
  currentTurn: R(),
  currentAgent: Oe,
  originalInput: d().or(G(Dc)),
  modelResponses: G(aa),
  context: y({
    usage: li,
    approvals: te(d(), y({
      approved: G(d()).or(yt()),
      rejected: G(d()).or(yt())
    })),
    context: te(d(), B())
  }),
  toolUseTracker: te(d(), G(d())),
  maxTurns: R(),
  currentAgentSpan: di.nullable().optional(),
  noActiveAgentRun: yt(),
  inputGuardrailResults: G(od),
  outputGuardrailResults: G(ud),
  currentStep: Gc.optional(),
  lastModelResponse: aa.optional(),
  generatedItems: G(pi),
  lastProcessedResponse: id.optional(),
  trace: ad.nullable()
});
class it {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    v(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    v(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    v(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    v(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    v(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    v(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    v(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    v(this, "_generatedItems");
    /**
     * Maximum allowed turns before forcing termination.
     */
    v(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    v(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    v(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    v(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    v(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    v(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    v(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    v(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new sa(), this._generatedItems = [], this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = cn();
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during the run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return un(this._originalInput, this._generatedItems);
  }
  /**
   * Returns all interruptions if the current step is an interruption otherwise returns an empty array.
   */
  getInterruptions() {
    var e;
    return ((e = this._currentStep) == null ? void 0 : e.type) !== "next_step_interruption" ? [] : this._currentStep.data.interruptions;
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: Ln,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens
        },
        output: s.output,
        responseId: s.responseId,
        providerData: s.providerData
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = ia.safeParse(e);
    if (!t.success)
      throw new uu(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var f, h, w, g, x;
    const [r, s] = await Yr(() => JSON.parse(t));
    if (r)
      throw new Q(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const a = s.$schemaVersion;
    if (!a)
      throw new Q("Run state is missing schema version");
    if (a !== Ln)
      throw new Q(`Run state schema version ${a} is not supported. Please use version ${Ln}`);
    const i = ia.parse(JSON.parse(t)), o = cd(e), l = new Et(i.context.context);
    l._rebuildApprovals(i.context.approvals);
    const c = o.get(i.currentAgent.name);
    if (!c)
      throw new Q(`Agent ${i.currentAgent.name} not found`);
    const p = new it(l, "", c, i.maxTurns);
    p._currentTurn = i.currentTurn, p._toolUseTracker = new sa();
    for (const [b, m] of Object.entries(i.toolUseTracker))
      p._toolUseTracker.addToolUse(o.get(b), m);
    if (i.currentAgentSpan) {
      i.trace || M.warn("Trace is not set, skipping tracing setup");
      const b = Pe().createTrace({
        traceId: (f = i.trace) == null ? void 0 : f.id,
        name: (h = i.trace) == null ? void 0 : h.workflow_name,
        groupId: ((w = i.trace) == null ? void 0 : w.group_id) ?? void 0,
        metadata: (g = i.trace) == null ? void 0 : g.metadata
      });
      p._currentAgentSpan = hi(b, i.currentAgentSpan), p._trace = b;
    }
    return p._noActiveAgentRun = i.noActiveAgentRun, p._inputGuardrailResults = i.inputGuardrailResults, p._outputGuardrailResults = i.outputGuardrailResults.map((b) => ({
      ...b,
      agent: o.get(b.agent.name)
    })), p._currentStep = i.currentStep, p._originalInput = i.originalInput, p._modelResponses = i.modelResponses.map(oa), p._lastTurnResponse = i.lastModelResponse ? oa(i.lastModelResponse) : void 0, p._generatedItems = i.generatedItems.map((b) => mi(b, o)), p._lastProcessedResponse = i.lastProcessedResponse ? await dd(o, p._currentAgent, p._context, i.lastProcessedResponse) : void 0, ((x = i.currentStep) == null ? void 0 : x.type) === "next_step_handoff" && (p._currentStep = {
      type: "next_step_handoff",
      newAgent: o.get(i.currentStep.newAgent.name)
    }), p;
  }
}
function cd(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof It ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function hi(n, e) {
  const t = e.span_data, r = e.previous_span ? hi(n, e.previous_span) : void 0, s = Pe().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function oa(n) {
  const e = new lr();
  return e.requests = n.usage.requests, e.inputTokens = n.usage.inputTokens, e.outputTokens = n.usage.outputTokens, e.totalTokens = n.usage.totalTokens, {
    usage: e,
    output: n.output.map((t) => is.parse(t)),
    responseId: n.responseId,
    providerData: n.providerData
  };
}
function mi(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new pr(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new _t(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new Kt(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new os(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new us(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new cs(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new Se(n.rawItem, e.get(n.agent.name));
  }
}
async function dd(n, e, t, r) {
  const s = await e.getAllTools(t), a = new Map(s.filter((c) => c.type === "function").map((c) => [c.name, c])), i = new Map(s.filter((c) => c.type === "computer").map((c) => [c.name, c])), o = new Map(e.handoffs.map((c) => c instanceof It ? [c.name, Ya(c)] : [c.toolName, c])), l = {
    newItems: r.newItems.map((c) => mi(c, n)),
    toolsUsed: r.toolsUsed,
    handoffs: r.handoffs.map((c) => {
      if (!o.has(c.handoff.toolName))
        throw new Q(`Handoff ${c.handoff.toolName} not found`);
      return {
        toolCall: c.toolCall,
        handoff: o.get(c.handoff.toolName)
      };
    }),
    functions: await Promise.all(r.functions.map(async (c) => {
      if (!a.has(c.tool.name))
        throw new Q(`Tool ${c.tool.name} not found`);
      return {
        toolCall: c.toolCall,
        tool: a.get(c.tool.name)
      };
    })),
    computerActions: r.computerActions.map((c) => {
      const p = c.computer.name;
      if (!i.has(p))
        throw new Q(`Computer tool ${p} not found`);
      return {
        toolCall: c.toolCall,
        computer: i.get(p)
      };
    }),
    mcpApprovalRequests: (r.mcpApprovalRequests ?? []).map((c) => ({
      requestItem: new Se(c.requestItem.rawItem, e),
      mcpTool: c.mcpTool
    }))
  };
  return {
    ...l,
    hasToolsOrApprovalsToRun() {
      return l.handoffs.length > 0 || l.functions.length > 0 || l.mcpApprovalRequests.length > 0 || l.computerActions.length > 0;
    }
  };
}
const ua = 10;
function ca(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
function Ur(n) {
  return typeof n == "string" ? [{ type: "message", role: "user", content: n }] : [...n];
}
class da {
  constructor({ conversationId: e, previousResponseId: t }) {
    // Conversation ID:
    // - https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#using-the-conversations-api
    // - https://platform.openai.com/docs/api-reference/conversations/create
    v(this, "conversationId");
    // Previous Response ID:
    // https://platform.openai.com/docs/guides/conversation-state?api-mode=responses#passing-context-from-the-previous-response
    v(this, "previousResponseId");
    // Using this flag because WeakSet does not provide a way to check its size
    v(this, "sentInitialInput", !1);
    // The items already sent to the model; using WeakSet for memory efficiency
    v(this, "sentItems", /* @__PURE__ */ new WeakSet());
    // The items received from the server; using WeakSet for memory efficiency
    v(this, "serverItems", /* @__PURE__ */ new WeakSet());
    this.conversationId = e ?? void 0, this.previousResponseId = t ?? void 0;
  }
  /**
   * Pre-populates tracker caches from an existing RunState when resuming server-managed runs.
   */
  primeFromState({ originalInput: e, generatedItems: t, modelResponses: r }) {
    if (this.sentInitialInput)
      return;
    for (const a of Ur(e))
      a && typeof a == "object" && this.sentItems.add(a);
    this.sentInitialInput = !0;
    const s = r[r.length - 1];
    for (const a of r)
      for (const i of a.output)
        i && typeof i == "object" && this.serverItems.add(i);
    !this.conversationId && (s != null && s.responseId) && (this.previousResponseId = s.responseId);
    for (const a of t) {
      const i = a.rawItem;
      !i || typeof i != "object" || this.serverItems.has(i) && this.sentItems.add(i);
    }
  }
  trackServerItems(e) {
    if (e) {
      for (const t of e.output)
        t && typeof t == "object" && this.serverItems.add(t);
      !this.conversationId && this.previousResponseId !== void 0 && e.responseId && (this.previousResponseId = e.responseId);
    }
  }
  prepareInput(e, t) {
    const r = [];
    if (!this.sentInitialInput) {
      const s = Ur(e);
      for (const a of s)
        r.push(a), a && typeof a == "object" && this.sentItems.add(a);
      this.sentInitialInput = !0;
    }
    for (const s of t) {
      if (s.type === "tool_approval_item")
        continue;
      const a = s.rawItem;
      !a || typeof a != "object" || this.sentItems.has(a) || this.serverItems.has(a) || (r.push(a), this.sentItems.add(a));
    }
    return r;
  }
}
function un(n, e) {
  const t = e.filter((r) => r.type !== "tool_approval_item").map((r) => r.rawItem);
  return [...Ur(n), ...t];
}
var de, Jr, qr, Br, gi, zr;
class ld extends Xu {
  constructor(t = {}) {
    super();
    O(this, de);
    v(this, "config");
    v(this, "inputGuardrailDefs");
    v(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? uc(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(Gs), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(Fr);
  }
  run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    return r instanceof it && r._trace ? pd(r._trace, async () => (r._currentAgentSpan && Zn(r._currentAgentSpan), s != null && s.stream ? q(this, de, zr).call(this, t, r, s) : q(this, de, Jr).call(this, t, r, s))) : fd(async () => s != null && s.stream ? q(this, de, zr).call(this, t, r, s) : q(this, de, Jr).call(this, t, r, s), {
      traceId: this.config.traceId,
      name: this.config.workflowName,
      groupId: this.config.groupId,
      metadata: this.config.traceMetadata
    });
  }
}
de = new WeakSet(), Jr = async function(t, r, s) {
  return Gr(async () => {
    var l, c;
    const a = r instanceof it, i = a ? r : new it(s.context instanceof Et ? s.context : new Et(s.context), r, t, s.maxTurns ?? ua), o = s.conversationId || s.previousResponseId ? new da({
      conversationId: s.conversationId,
      previousResponseId: s.previousResponseId
    }) : void 0;
    o && a && o.primeFromState({
      originalInput: i._originalInput,
      generatedItems: i._generatedItems,
      modelResponses: i._modelResponses
    });
    try {
      for (; ; ) {
        const p = i._currentAgent.model !== void 0 && i._currentAgent.model !== "" || this.config.model !== void 0 && this.config.model !== "";
        let f = la(i._currentAgent.model, this.config.model);
        if (typeof f == "string" && (f = await this.config.modelProvider.getModel(f)), i._currentStep = i._currentStep ?? {
          type: "next_step_run_again"
        }, i._currentStep.type === "next_step_interruption") {
          if (M.debug("Continuing from interruption"), !i._lastTurnResponse || !i._lastProcessedResponse)
            throw new Q("No model response found in previous state", i);
          const h = await ea(i._currentAgent, i._originalInput, i._generatedItems, i._lastTurnResponse, i._lastProcessedResponse, this, i);
          if (i._toolUseTracker.addToolUse(i._currentAgent, i._lastProcessedResponse.toolsUsed), i._originalInput = h.originalInput, i._generatedItems = h.generatedItems, i._currentStep = h.nextStep, h.nextStep.type === "next_step_interruption")
            return new br(i);
          continue;
        }
        if (i._currentStep.type === "next_step_run_again") {
          const h = await i._currentAgent.getEnabledHandoffs(i._context);
          if (!i._currentAgentSpan) {
            const J = h.map((ne) => ne.agentName);
            i._currentAgentSpan = Hs({
              data: {
                name: i._currentAgent.name,
                handoffs: J,
                output_type: i._currentAgent.outputSchemaName
              }
            }), i._currentAgentSpan.start(), Zn(i._currentAgentSpan);
          }
          const w = await i._currentAgent.getAllTools(i._context), g = w.map((J) => Vs(J)), x = h.map((J) => Ws(J));
          if (i._currentAgentSpan && (i._currentAgentSpan.spanData.tools = w.map((J) => J.name)), i._currentTurn++, i._currentTurn > i._maxTurns)
            throw (l = i._currentAgentSpan) == null || l.setError({
              message: "Max turns exceeded",
              data: { max_turns: i._maxTurns }
            }), new Ms(`Max turns (${i._maxTurns}) exceeded`, i);
          M.debug(`Running agent ${i._currentAgent.name} (turn ${i._currentTurn})`), i._currentTurn === 1 && await q(this, de, qr).call(this, i);
          const b = o ? o.prepareInput(i._originalInput, i._generatedItems) : un(i._originalInput, i._generatedItems);
          i._noActiveAgentRun && (i._currentAgent.emit("agent_start", i._context, i._currentAgent), this.emit("agent_start", i._context, i._currentAgent));
          let m = {
            ...this.config.modelSettings,
            ...i._currentAgent.modelSettings
          };
          const I = i._currentAgent.modelSettings;
          m = pa(p, I, f, m), m = Qs(i._currentAgent, i._toolUseTracker, m);
          const A = (o == null ? void 0 : o.previousResponseId) ?? s.previousResponseId, D = (o == null ? void 0 : o.conversationId) ?? s.conversationId;
          i._lastTurnResponse = await f.getResponse({
            systemInstructions: await i._currentAgent.getSystemPrompt(i._context),
            prompt: await i._currentAgent.getPrompt(i._context),
            // Explicit agent/run config models should take precedence over prompt defaults.
            ...p ? { overridePromptModel: !0 } : {},
            input: b,
            previousResponseId: A,
            conversationId: D,
            modelSettings: m,
            tools: g,
            outputType: Ls(i._currentAgent.outputType),
            handoffs: x,
            tracing: ca(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), i._modelResponses.push(i._lastTurnResponse), i._context.usage.add(i._lastTurnResponse.usage), i._noActiveAgentRun = !1, o == null || o.trackServerItems(i._lastTurnResponse);
          const N = Xs(i._lastTurnResponse, i._currentAgent, w, h);
          i._lastProcessedResponse = N;
          const j = await ta(i._currentAgent, i._originalInput, i._generatedItems, i._lastTurnResponse, i._lastProcessedResponse, this, i);
          i._toolUseTracker.addToolUse(i._currentAgent, i._lastProcessedResponse.toolsUsed), i._originalInput = j.originalInput, i._generatedItems = j.generatedItems, i._currentStep = j.nextStep;
        }
        if (i._currentStep && i._currentStep.type === "next_step_final_output")
          return await q(this, de, Br).call(this, i, i._currentStep.output), this.emit("agent_end", i._context, i._currentAgent, i._currentStep.output), i._currentAgent.emit("agent_end", i._context, i._currentStep.output), new br(i);
        if (i._currentStep && i._currentStep.type === "next_step_handoff")
          i._currentAgent = i._currentStep.newAgent, i._currentAgentSpan && (i._currentAgentSpan.end(), en(), i._currentAgentSpan = void 0), i._noActiveAgentRun = !0, i._currentStep = { type: "next_step_run_again" };
        else {
          if (i._currentStep && i._currentStep.type === "next_step_interruption")
            return new br(i);
          M.debug("Running next loop");
        }
      }
    } catch (p) {
      throw i._currentAgentSpan && i._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(p) }
      }), p;
    } finally {
      i._currentAgentSpan && (((c = i._currentStep) == null ? void 0 : c.type) !== "next_step_interruption" && i._currentAgentSpan.end(), en());
    }
  });
}, qr = async function(t) {
  const r = this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(Gs));
  if (r.length > 0) {
    const s = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const a = await Promise.all(r.map(async (i) => Ys(async (o) => {
        const l = await i.run(s);
        return o.spanData.triggered = l.output.tripwireTriggered, l;
      }, { data: { name: i.name } }, t._currentAgentSpan)));
      for (const i of a)
        if (i.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: i.guardrail.name }
          }), new $s(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i, t);
    } catch (a) {
      throw a instanceof $s ? a : (t._currentTurn--, new js(`Input guardrail failed to complete: ${a}`, a, t));
    }
  }
}, Br = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(Fr));
  if (s.length > 0) {
    const a = t._currentAgent.processFinalOutput(r), i = {
      agent: t._currentAgent,
      agentOutput: a,
      context: t._context,
      details: { modelResponse: t._lastTurnResponse }
    };
    try {
      const o = await Promise.all(s.map(async (l) => Ys(async (c) => {
        const p = await l.run(i);
        return c.spanData.triggered = p.output.tripwireTriggered, p;
      }, { data: { name: l.name } }, t._currentAgentSpan)));
      for (const l of o)
        if (l.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: l.guardrail.name }
          }), new Pr(`Output guardrail triggered: ${JSON.stringify(l.output.outputInfo)}`, l, t);
    } catch (o) {
      throw o instanceof Pr ? o : new js(`Output guardrail failed to complete: ${o}`, o, t);
    }
  }
}, gi = async function(t, r, s) {
  var i, o, l;
  const a = r.conversationId || r.previousResponseId ? new da({
    conversationId: r.conversationId,
    previousResponseId: r.previousResponseId
  }) : void 0;
  a && s && a.primeFromState({
    originalInput: t.state._originalInput,
    generatedItems: t.state._generatedItems,
    modelResponses: t.state._modelResponses
  });
  try {
    for (; ; ) {
      const c = t.state._currentAgent, p = await c.getEnabledHandoffs(t.state._context), f = await c.getAllTools(t.state._context), h = f.map((g) => Vs(g)), w = p.map((g) => Ws(g));
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (M.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new Q("No model response found in previous state", t.state);
        const g = await ea(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        if (ra(t, g), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = g.originalInput, t.state._generatedItems = g.generatedItems, t.state._currentStep = g.nextStep, g.nextStep.type === "next_step_interruption")
          return;
        continue;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        if (!t.state._currentAgentSpan) {
          const me = p.map((ve) => ve.agentName);
          t.state._currentAgentSpan = Hs({
            data: {
              name: c.name,
              handoffs: me,
              tools: f.map((ve) => ve.name),
              output_type: c.outputSchemaName
            }
          }), t.state._currentAgentSpan.start(), Zn(t.state._currentAgentSpan);
        }
        if (t.state._currentTurn++, t.state._currentTurn > t.state._maxTurns)
          throw (i = t.state._currentAgentSpan) == null || i.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new Ms(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        M.debug(`Running agent ${c.name} (turn ${t.state._currentTurn})`);
        const g = c.model !== void 0 && c.model !== "" || this.config.model !== void 0 && this.config.model !== "";
        let x = la(c.model, this.config.model);
        typeof x == "string" && (x = await this.config.modelProvider.getModel(x)), t.state._currentTurn === 1 && await q(this, de, qr).call(this, t.state);
        let b = {
          ...this.config.modelSettings,
          ...c.modelSettings
        };
        const m = c.modelSettings;
        b = pa(g, m, x, b), b = Qs(c, t.state._toolUseTracker, b);
        const I = a ? a.prepareInput(t.input, t.newItems) : un(t.input, t.newItems);
        t.state._noActiveAgentRun && (c.emit("agent_start", t.state._context, c), this.emit("agent_start", t.state._context, c));
        let A;
        const D = (a == null ? void 0 : a.previousResponseId) ?? r.previousResponseId, N = (a == null ? void 0 : a.conversationId) ?? r.conversationId;
        for await (const me of x.getStreamedResponse({
          systemInstructions: await c.getSystemPrompt(t.state._context),
          prompt: await c.getPrompt(t.state._context),
          // Streaming requests should also honor explicitly chosen models.
          ...g ? { overridePromptModel: !0 } : {},
          input: I,
          previousResponseId: D,
          conversationId: N,
          modelSettings: b,
          tools: h,
          handoffs: w,
          outputType: Ls(c.outputType),
          tracing: ca(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (me.type === "response_done") {
            const ve = ii.parse(me);
            A = {
              usage: new lr(ve.response.usage),
              output: ve.response.output,
              responseId: ve.response.id
            };
          }
          if (t.cancelled)
            return;
          t._addItem(new qc(me));
        }
        if (t.state._noActiveAgentRun = !1, !A)
          throw new xe("Model did not produce a final response!", t.state);
        t.state._lastTurnResponse = A, a == null || a.trackServerItems(A), t.state._modelResponses.push(t.state._lastTurnResponse);
        const j = Xs(t.state._lastTurnResponse, c, f, p);
        t.state._lastProcessedResponse = j;
        const J = new Set(j.newItems);
        J.size > 0 && nd(t, j.newItems);
        const ne = await ta(c, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        ra(t, ne, {
          skipItems: J
        }), t.state._toolUseTracker.addToolUse(c, j.toolsUsed), t.state._originalInput = ne.originalInput, t.state._generatedItems = ne.generatedItems, t.state._currentStep = ne.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await q(this, de, Br).call(this, t.state, t.state._currentStep.output), this.emit("agent_end", t.state._context, c, t.state._currentStep.output), c.emit("agent_end", t.state._context, t.state._currentStep.output);
        return;
      } else {
        if (t.state._currentStep.type === "next_step_interruption")
          return;
        t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (o = t.state._currentStep) == null ? void 0 : o.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), en()), t.state._currentAgentSpan = void 0, t._addItem(new zc(t.state._currentAgent)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
          type: "next_step_run_again"
        }) : M.debug("Running next loop");
      }
    }
  } catch (c) {
    throw t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(c) }
    }), c;
  } finally {
    t.state._currentAgentSpan && (((l = t.state._currentStep) == null ? void 0 : l.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), en());
  }
}, zr = async function(t, r, s) {
  return s = s ?? {}, Gr(async () => {
    const a = r instanceof it, i = a ? r : new it(s.context instanceof Et ? s.context : new Et(s.context), r, t, s.maxTurns ?? ua), o = new _i({
      signal: s.signal,
      state: i
    });
    o.maxTurns = s.maxTurns ?? i._maxTurns;
    const l = q(this, de, gi).call(this, o, s, a).then(() => {
      o._done();
    }, (c) => {
      o._raiseError(c);
    });
    return o._setStreamLoopPromise(l), o;
  });
};
function la(n, e) {
  return typeof n == "string" && n !== It.DEFAULT_MODEL_PLACEHOLDER || n ? n : e ?? n ?? It.DEFAULT_MODEL_PLACEHOLDER;
}
function pa(n, e, t, r) {
  var s, a, i, o, l, c, p, f;
  if (
    // gpt-5 is enabled for the default model for agents
    Va() && // explicitly set model for the agent
    n && // this runner uses a non-gpt-5 model
    (typeof t != "string" || !cr(t)) && ((s = e.providerData) != null && s.reasoning || (i = (a = e.providerData) == null ? void 0 : a.text) != null && i.verbosity || (o = e.providerData) != null && o.reasoning_effort)
  ) {
    const h = { ...r };
    return (l = h.providerData) == null || delete l.reasoning, (p = (c = h.providerData) == null ? void 0 : c.text) == null || delete p.verbosity, (f = h.providerData) == null || delete f.reasoning_effort, h.reasoning && (delete h.reasoning.effort, delete h.reasoning.summary), h.text && delete h.text.verbosity, h;
  }
  return r;
}
class yi {
  constructor(e) {
    v(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return un(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return un([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    M.warn("Accessed finalOutput before agent run is completed.");
  }
}
class br extends yi {
  constructor(e) {
    super(e);
  }
}
var fn, Ge, ye, $e, jt, $t, hn, ut, mn;
class _i extends yi {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    v(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    v(this, "maxTurns");
    O(this, fn, null);
    O(this, Ge);
    O(this, ye);
    O(this, $e);
    O(this, jt);
    O(this, $t);
    O(this, hn);
    O(this, ut, !1);
    O(this, mn);
    if (S(this, Ge, t.signal), S(this, $e, new Gu({
      start: (r) => {
        S(this, ye, r);
      },
      cancel: () => {
        S(this, ut, !0);
      }
    })), S(this, jt, new Promise((r, s) => {
      S(this, $t, r), S(this, hn, s);
    })), u(this, Ge)) {
      const r = () => {
        var a, i;
        if (u(this, ut))
          return;
        S(this, ut, !0);
        const s = u(this, ye);
        if (S(this, ye, void 0), u(this, $e).locked) {
          if (s)
            try {
              s.close();
            } catch (o) {
              M.debug(`Failed to close readable stream on abort: ${o}`);
            }
        } else
          u(this, $e).cancel((a = u(this, Ge)) == null ? void 0 : a.reason).catch((o) => {
            M.debug(`Failed to cancel readable stream on abort: ${o}`);
          });
        (i = u(this, $t)) == null || i.call(this);
      };
      u(this, Ge).aborted ? r() : u(this, Ge).addEventListener("abort", r, { once: !0 });
    }
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, ye)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, ye) && (u(this, ye).close(), S(this, ye, void 0), (t = u(this, $t)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, ye) && (u(this, ye).error(t), S(this, ye, void 0)), S(this, fn, t), (r = u(this, hn)) == null || r.call(this, t), u(this, jt).catch((s) => {
      M.debug(`Resulted in an error: ${s}`);
    });
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, ut);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, $e);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, jt);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, fn);
  }
  toTextStream(t = {}) {
    const r = u(this, $e).pipeThrough(new Vu({
      transform(s, a) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const i = ai.parse(s.data);
          a.enqueue(i.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? zu.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, $e)[Symbol.asyncIterator]();
  }
  /**
   * @internal
   * Sets the stream loop promise that completes when the internal stream loop finishes.
   * This is used to defer trace end until all agent work is complete.
   */
  _setStreamLoopPromise(t) {
    S(this, mn, t);
  }
  /**
   * @internal
   * Returns a promise that resolves when the stream loop completes.
   * This is used by the tracing system to wait for all agent work before ending the trace.
   */
  _getStreamLoopPromise() {
    return u(this, mn);
  }
}
fn = new WeakMap(), Ge = new WeakMap(), ye = new WeakMap(), $e = new WeakMap(), jt = new WeakMap(), $t = new WeakMap(), hn = new WeakMap(), ut = new WeakMap(), mn = new WeakMap();
let fa;
function De() {
  return fa ?? (fa = new Wu()), fa;
}
function cn() {
  const n = De().getStore();
  return n != null && n.trace ? n.trace : null;
}
function dn() {
  const n = De().getStore();
  return n != null && n.span ? n.span : null;
}
function vi(n) {
  return async () => {
    const e = cn();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    if (t instanceof _i) {
      const r = t._getStreamLoopPromise();
      if (r)
        return r.finally(() => e.end()), t;
    }
    return await e.end(), t;
  };
}
async function pd(n, e, t = {}) {
  const r = typeof n == "string" ? Pe().createTrace({
    ...t,
    name: n
  }) : n;
  return De().run({ trace: r }, vi(e));
}
async function fd(n, e = {}) {
  if (cn())
    return await n();
  const r = Pe().createTrace(e);
  return De().run({ trace: r }, vi(n));
}
function Zn(n) {
  const e = De().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), e.span = n, De().enterWith(e);
}
function en() {
  var e;
  const n = De().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, De().enterWith(n));
}
function Dt(n) {
  const e = dn();
  e && e.setError(n);
}
function hd(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function Gr(n) {
  const e = De().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = hd(e);
  return De().run(t, n);
}
class md {
  async export(e) {
    if (Ua.disabled) {
      M.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}${t.groupId ? ` groupId=${t.groupId}` : ""}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var gn, Ft, yn, _n, Lt, ce, Fe, Ve, We, Zt, fe, Vr, Wr, Ct;
class gd {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: a = 0.8
  } = {}) {
    O(this, fe);
    O(this, gn);
    O(this, Ft);
    O(this, yn);
    O(this, _n);
    O(this, Lt);
    O(this, ce, []);
    O(this, Fe);
    O(this, Ve, null);
    O(this, We, !1);
    O(this, Zt, null);
    S(this, gn, t), S(this, Ft, r), S(this, yn, s), S(this, _n, t * a), S(this, Lt, e), S(this, Fe, Ku), M.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    S(this, Zt, new AbortController()), q(this, fe, Wr).call(this);
  }
  async onTraceStart(e) {
    await q(this, fe, Vr).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await q(this, fe, Vr).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, Fe).setTimeout(() => {
      var r;
      (r = u(this, Zt)) == null || r.abort();
    }, e), M.debug("Shutting down gracefully"); u(this, ce).length > 0; ) {
      if (M.debug(`Waiting for buffer to empty. Items left: ${u(this, ce).length}`), u(this, We) || await q(this, fe, Ct).call(this, !0), (t = u(this, Zt)) != null && t.signal.aborted) {
        M.debug("Timeout reached, force flushing"), await q(this, fe, Ct).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, Fe).setTimeout(r, 500));
    }
    M.debug("Buffer empty. Exiting"), u(this, Fe) && u(this, Ve) && u(this, Fe).clearTimeout(u(this, Ve));
  }
  async forceFlush() {
    u(this, ce).length > 0 && await q(this, fe, Ct).call(this, !0);
  }
}
gn = new WeakMap(), Ft = new WeakMap(), yn = new WeakMap(), _n = new WeakMap(), Lt = new WeakMap(), ce = new WeakMap(), Fe = new WeakMap(), Ve = new WeakMap(), We = new WeakMap(), Zt = new WeakMap(), fe = new WeakSet(), Vr = async function(e) {
  if (u(this, ce).length + 1 > u(this, gn)) {
    M.error("Dropping trace because buffer is full");
    return;
  }
  u(this, ce).push(e), u(this, ce).length > u(this, _n) && await q(this, fe, Ct).call(this);
}, Wr = function() {
  S(this, Ve, u(this, Fe).setTimeout(async () => {
    await q(this, fe, Ct).call(this), q(this, fe, Wr).call(this);
  }, u(this, yn))), typeof u(this, Ve).unref == "function" && u(this, Ve).unref();
}, Ct = async function(e = !1) {
  if (u(this, ce).length !== 0) {
    if (M.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, ce).length}`), e || u(this, ce).length < u(this, Ft)) {
      const t = [...u(this, ce)];
      S(this, ce, []), S(this, We, !0), await u(this, Lt).export(t), S(this, We, !1);
    } else if (u(this, ce).length > 0) {
      const t = u(this, ce).splice(0, u(this, Ft));
      S(this, We, !0), await u(this, Lt).export(t), S(this, We, !1);
    }
  }
};
var _e;
class yd {
  constructor() {
    O(this, _e, []);
  }
  start() {
    for (const e of u(this, _e))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, _e).push(e);
  }
  setProcessors(e) {
    M.debug("Shutting down old processors");
    for (const t of u(this, _e))
      t.shutdown();
    S(this, _e, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, _e))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, _e))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, _e))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, _e))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, _e))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, _e))
      await e.forceFlush();
  }
}
_e = new WeakMap();
let wr = null, xr = null;
function _d() {
  return wr || (wr = new md()), wr;
}
function bi() {
  return xr || (xr = new gd(_d())), xr;
}
function ha() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function wi() {
  return `trace_${Ga().replace(/-/g, "")}`;
}
function vd() {
  return `span_${Ga().replace(/-/g, "").slice(0, 24)}`;
}
function bd(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var vn, bn, wn, xn, ct, He, Ke, dt, Sn;
const ls = class ls {
  constructor(e, t) {
    v(this, "type", "trace.span");
    O(this, vn);
    O(this, bn);
    O(this, wn);
    O(this, xn);
    O(this, ct);
    O(this, He);
    O(this, Ke);
    O(this, dt);
    O(this, Sn);
    S(this, bn, e.traceId), S(this, wn, e.spanId ?? vd()), S(this, vn, e.data), S(this, ct, t), S(this, xn, e.parentId ?? null), S(this, dt, e.error ?? null), S(this, He, e.startedAt ?? null), S(this, Ke, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, bn);
  }
  get spanData() {
    return u(this, vn);
  }
  get spanId() {
    return u(this, wn);
  }
  get parentId() {
    return u(this, xn);
  }
  get previousSpan() {
    return u(this, Sn);
  }
  set previousSpan(e) {
    S(this, Sn, e);
  }
  start() {
    if (u(this, He)) {
      M.warn("Span already started");
      return;
    }
    S(this, He, ha()), u(this, ct).onSpanStart(this);
  }
  end() {
    if (u(this, Ke)) {
      M.debug("Span already finished", this.spanData);
      return;
    }
    S(this, Ke, ha()), u(this, ct).onSpanEnd(this);
  }
  setError(e) {
    S(this, dt, e);
  }
  get error() {
    return u(this, dt);
  }
  get startedAt() {
    return u(this, He);
  }
  get endedAt() {
    return u(this, Ke);
  }
  clone() {
    var t;
    const e = new ls({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, He) ?? void 0,
      endedAt: u(this, Ke) ?? void 0,
      error: u(this, dt) ?? void 0
    }, u(this, ct));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: bd(this.spanData),
      error: this.error
    };
  }
};
vn = new WeakMap(), bn = new WeakMap(), wn = new WeakMap(), xn = new WeakMap(), ct = new WeakMap(), He = new WeakMap(), Ke = new WeakMap(), dt = new WeakMap(), Sn = new WeakMap();
let ln = ls;
class Be extends ln {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var Ut, Le;
const ps = class ps {
  constructor(e, t) {
    v(this, "type", "trace");
    v(this, "traceId");
    v(this, "name");
    v(this, "groupId", null);
    v(this, "metadata");
    O(this, Ut);
    O(this, Le);
    this.traceId = e.traceId ?? wi(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, S(this, Ut, t ?? bi()), S(this, Le, e.started ?? !1);
  }
  async start() {
    u(this, Le) || (S(this, Le, !0), await u(this, Ut).onTraceStart(this));
  }
  async end() {
    u(this, Le) && (S(this, Le, !1), await u(this, Ut).onTraceEnd(this));
  }
  clone() {
    return new ps({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, Le)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
Ut = new WeakMap(), Le = new WeakMap();
let pn = ps;
class Sr extends pn {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var oe, lt, ar, xi;
class wd {
  constructor() {
    O(this, ar);
    O(this, oe);
    O(this, lt);
    S(this, oe, new yd()), S(this, lt, Ua.disabled), q(this, ar, xi).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, oe).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, oe).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return cn();
  }
  getCurrentSpan() {
    return dn();
  }
  setDisabled(e) {
    S(this, lt, e);
  }
  startExportLoop() {
    u(this, oe).start();
  }
  createTrace(e) {
    if (u(this, lt))
      return M.debug("Tracing is disabled, Not creating trace %o", e), new Sr();
    const t = e.traceId ?? wi(), r = e.name ?? "Agent workflow";
    return M.debug("Creating trace %s with name %s", t, r), new pn({ ...e, name: r, traceId: t }, u(this, oe));
  }
  createSpan(e, t) {
    if (u(this, lt) || e.disabled)
      return M.debug("Tracing is disabled, Not creating span %o", e), new Be(e.data, u(this, oe));
    let r, s;
    if (t) {
      if (t instanceof pn) {
        if (t instanceof Sr)
          return M.debug("Parent trace is no-op, returning NoopSpan"), new Be(e.data, u(this, oe));
        s = t.traceId;
      } else if (t instanceof ln) {
        if (t instanceof Be)
          return M.debug("Parent span is no-op, returning NoopSpan"), new Be(e.data, u(this, oe));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const a = cn(), i = dn();
      if (!a)
        return M.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new Be(e.data, u(this, oe));
      if (i instanceof Be || a instanceof Sr)
        return M.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`), new Be(e.data, u(this, oe));
      s = a.traceId, i ? (M.debug("Using parent span %s", i.spanId), r = i.spanId) : M.debug("No parent span, using current trace %s", a.traceId);
    }
    return s ? (M.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new ln({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, oe))) : (M.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new Be(e.data, u(this, oe)));
  }
  async shutdown(e) {
    try {
      M.debug("Shutting down tracing provider"), await u(this, oe).shutdown(e);
    } catch (t) {
      M.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, oe).forceFlush();
  }
}
oe = new WeakMap(), lt = new WeakMap(), ar = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
xi = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), ma("SIGINT") || process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), ma("SIGTERM") || process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      M.error("Unhandled rejection", t, r), await e(), xd("unhandledRejection") || process.exit(1);
    });
  }
};
function ma(n) {
  return process.listeners(n).length > 1;
}
function xd(n) {
  return process.listeners(n).length > 1;
}
let Ir;
function Pe() {
  return Ir || (Ir = new wd()), Ir;
}
function Sd(n) {
  Pe().registerProcessor(n);
}
Sd(bi());
function Si(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function Ii(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function Ti(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "output_text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "output_audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Id(n, e) {
  const t = n.filter((a) => !e.some((i) => i.itemId === a.itemId)), r = e.filter((a) => !n.some((i) => i.itemId === a.itemId)), s = e.filter((a) => n.some((i) => i.itemId === a.itemId && JSON.stringify(i) !== JSON.stringify(a)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function Td() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function ga(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "output_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function ya(n, e, t) {
  if (e.type === "conversation.item.input_audio_transcription.completed")
    return n.map((a) => {
      if (a.itemId === e.item_id && a.type === "message" && "role" in a && a.role === "user") {
        const i = a.content.map((o) => o.type === "input_audio" ? {
          ...o,
          transcript: e.transcript
        } : o);
        return {
          ...a,
          content: i,
          status: "completed"
        };
      }
      return a;
    });
  const r = !t && e.type === "message" ? ga(e) : e, s = n.findIndex((a) => a.itemId === e.itemId);
  if (s !== -1)
    return n.map((a, i) => i === s ? r : !t && a.type === "message" ? ga(a) : a);
  if (e.previousItemId) {
    const a = n.findIndex((i) => i.itemId === e.previousItemId);
    return a !== -1 ? [
      ...n.slice(0, a + 1),
      r,
      ...n.slice(a + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const ki = {
  "User-Agent": `Agents/JavaScript ${Tr.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${Tr.version}`
}, kd = `openai-agents-sdk.${Tr.version}`;
function Ad(n, e) {
  const { name: t, arguments: r, ...s } = e;
  return new Se({
    type: "hosted_tool_call",
    name: t,
    arguments: JSON.stringify(r),
    status: "in_progress",
    providerData: {
      ...s
    }
  }, n);
}
function _a(n) {
  const { name: e, arguments: t, providerData: r } = n.rawItem, { itemId: s, serverLabel: a, ...i } = r ?? {};
  if (!s || !a)
    throw new Error("Invalid approval item for Realtime MCP approval request");
  return {
    type: "mcp_approval_request",
    itemId: s,
    serverLabel: a,
    ...i,
    name: e,
    arguments: t ? JSON.parse(t) : {},
    approved: null
  };
}
class ql extends It {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    v(this, "voice");
    this.voice = t.voice;
  }
}
function Od(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Cd({ policyHint: n, ...e }) {
  const t = Fr(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const a = await t.run(s);
      return {
        ...a,
        guardrail: { ...a.guardrail, policyHint: r }
      };
    }
  };
}
function Ed(n) {
  return `
 Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
function rt(n, e) {
  return n in e && typeof e[n] < "u";
}
function Nd(n) {
  return rt("modalities", n) || rt("inputAudioFormat", n) || rt("outputAudioFormat", n) || rt("inputAudioTranscription", n) || rt("turnDetection", n) || rt("inputAudioNoiseReduction", n) || rt("speed", n);
}
function Rd(n) {
  var e, t, r, s, a, i, o, l;
  if (!Nd(n)) {
    const c = (e = n.audio) != null && e.input ? {
      format: Fn(n.audio.input.format),
      noiseReduction: n.audio.input.noiseReduction ?? null,
      transcription: n.audio.input.transcription,
      turnDetection: n.audio.input.turnDetection
    } : void 0, p = ((r = (t = n.audio) == null ? void 0 : t.output) == null ? void 0 : r.voice) ?? n.voice, f = (s = n.audio) != null && s.output || typeof p < "u" ? {
      format: Fn((i = (a = n.audio) == null ? void 0 : a.output) == null ? void 0 : i.format),
      voice: p,
      speed: (l = (o = n.audio) == null ? void 0 : o.output) == null ? void 0 : l.speed
    } : void 0;
    return {
      model: n.model,
      instructions: n.instructions,
      toolChoice: n.toolChoice,
      tools: n.tools,
      tracing: n.tracing,
      providerData: n.providerData,
      prompt: n.prompt,
      outputModalities: n.outputModalities,
      audio: c || f ? {
        input: c,
        output: f
      } : void 0
    };
  }
  return {
    model: n.model,
    instructions: n.instructions,
    toolChoice: n.toolChoice,
    tools: n.tools,
    tracing: n.tracing,
    providerData: n.providerData,
    prompt: n.prompt,
    outputModalities: n.modalities,
    audio: {
      input: {
        format: Fn(n.inputAudioFormat),
        noiseReduction: n.inputAudioNoiseReduction ?? null,
        transcription: n.inputAudioTranscription,
        turnDetection: n.turnDetection
      },
      output: {
        format: Fn(n.outputAudioFormat),
        voice: n.voice,
        speed: n.speed
      }
    }
  };
}
function Fn(n) {
  if (!n)
    return;
  if (typeof n == "object")
    return n;
  const e = String(n);
  return e === "pcm16" ? { type: "audio/pcm", rate: 24e3 } : e === "g711_ulaw" ? { type: "audio/pcmu" } : e === "g711_alaw" ? { type: "audio/pcma" } : { type: "audio/pcm", rate: 24e3 };
}
y({
  itemId: d()
});
const va = he("role", [
  y({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: _("message"),
    role: _("system"),
    content: G(y({ type: _("input_text"), text: d() }))
  }),
  y({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: _("message"),
    role: _("user"),
    status: ue(["in_progress", "completed"]),
    content: G(y({ type: _("input_text"), text: d() }).or(y({
      type: _("input_audio"),
      audio: d().nullable().optional(),
      transcript: d().nullable()
    })))
  }),
  y({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: _("message"),
    role: _("assistant"),
    status: ue(["in_progress", "completed", "incomplete"]),
    content: G(y({ type: _("output_text"), text: d() }).or(y({
      type: _("output_audio"),
      audio: d().nullable().optional(),
      transcript: d().nullable().optional()
    })))
  })
]), ba = y({
  itemId: d(),
  previousItemId: d().nullable().optional(),
  type: _("function_call"),
  status: ue(["in_progress", "completed", "incomplete"]),
  arguments: d(),
  name: d(),
  output: d().nullable()
}), wa = y({
  itemId: d(),
  previousItemId: d().nullable().optional(),
  type: ue(["mcp_call", "mcp_tool_call"]),
  status: ue(["in_progress", "completed", "incomplete"]),
  arguments: d(),
  name: d(),
  output: d().nullable()
}), Dd = y({
  itemId: d(),
  type: _("mcp_approval_request"),
  serverLabel: d(),
  name: d(),
  arguments: te(d(), B()),
  approved: yt().optional().nullable()
}), we = qa("openai-agents:realtime"), Ai = y({
  id: d().optional().nullable(),
  conversation_id: d().optional().nullable(),
  max_output_tokens: R().or(_("inf")).optional().nullable(),
  metadata: te(d(), B()).optional().nullable(),
  // GA rename: modalities -> output_modalities
  output_modalities: G(d()).optional().nullable(),
  object: _("realtime.response").optional().nullable(),
  output: G(B()).optional().nullable(),
  // GA grouping: audio.output.{format,voice}
  audio: y({
    output: y({
      format: B().optional().nullable(),
      voice: d().optional().nullable()
    }).optional().nullable()
  }).optional().nullable(),
  status: ue(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: te(d(), B()).optional().nullable(),
  usage: y({
    input_tokens: R().optional(),
    input_token_details: te(d(), B()).optional().nullable(),
    output_tokens: R().optional(),
    output_token_details: te(d(), B()).optional().nullable()
  }).optional().nullable()
}), Pd = y({
  id: d().optional(),
  audio: d().nullable().optional(),
  text: d().nullable().optional(),
  transcript: d().nullable().optional(),
  type: Tt([
    _("input_text"),
    _("input_audio"),
    _("item_reference"),
    _("output_text"),
    _("output_audio")
  ])
}), Xt = y({
  id: d().optional(),
  arguments: d().optional(),
  call_id: d().optional(),
  content: G(Pd).optional(),
  name: d().optional(),
  output: d().nullable().optional(),
  role: ue(["user", "assistant", "system"]).optional(),
  status: ue(["completed", "incomplete", "in_progress"]).optional(),
  type: ue([
    "message",
    "function_call",
    "function_call_output",
    "mcp_list_tools",
    "mcp_tool_call",
    "mcp_call",
    "mcp_approval_request",
    "mcp_approval_response"
  ]).optional(),
  approval_request_id: d().nullable().optional(),
  approve: yt().nullable().optional(),
  reason: d().nullable().optional(),
  server_label: d().optional(),
  error: B().nullable().optional(),
  tools: G(y({
    name: d(),
    description: d(),
    input_schema: te(B()).optional()
  }).passthrough()).optional()
}).passthrough(), Md = y({
  type: _("conversation.created"),
  event_id: d(),
  conversation: y({
    id: d().optional(),
    object: _("realtime.conversation").optional()
  })
}), jd = y({
  type: _("conversation.item.added"),
  event_id: d(),
  item: Xt,
  previous_item_id: d().nullable().optional()
}), $d = y({
  type: _("conversation.item.done"),
  event_id: d(),
  item: Xt,
  previous_item_id: d().nullable().optional()
}), Fd = y({
  type: _("conversation.item.deleted"),
  event_id: d(),
  item_id: d()
}), Ld = y({
  type: _("conversation.item.input_audio_transcription.completed"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  transcript: d(),
  logprobs: G(B()).nullable().optional()
}), Zd = y({
  type: _("conversation.item.input_audio_transcription.delta"),
  event_id: d(),
  item_id: d(),
  content_index: R().optional(),
  delta: d().optional(),
  logprobs: G(B()).nullable().optional()
}), Ud = y({
  type: _("conversation.item.input_audio_transcription.failed"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  error: y({
    code: d().optional(),
    message: d().optional(),
    param: d().optional(),
    type: d().optional()
  })
}), Jd = y({
  type: _("conversation.item.retrieved"),
  event_id: d(),
  item: Xt
}), qd = y({
  type: _("conversation.item.truncated"),
  event_id: d(),
  item_id: d(),
  audio_end_ms: R(),
  content_index: R()
}), Bd = y({
  type: _("conversation.item.create"),
  item: Xt,
  event_id: d().optional(),
  previous_item_id: d().nullable().optional()
}), zd = y({
  type: _("conversation.item.delete"),
  item_id: d(),
  event_id: d().optional()
}), Gd = y({
  type: _("conversation.item.retrieve"),
  item_id: d(),
  event_id: d().optional()
}), Vd = y({
  type: _("conversation.item.truncate"),
  item_id: d(),
  audio_end_ms: R(),
  content_index: R(),
  event_id: d().optional()
}), Wd = y({
  type: _("error"),
  event_id: d().optional(),
  error: B().optional()
}), Hd = y({
  type: _("input_audio_buffer.cleared"),
  event_id: d()
}), Kd = y({
  type: _("input_audio_buffer.append"),
  audio: d(),
  event_id: d().optional()
}), Yd = y({
  type: _("input_audio_buffer.clear"),
  event_id: d().optional()
}), Xd = y({
  type: _("input_audio_buffer.commit"),
  event_id: d().optional()
}), Qd = y({
  type: _("input_audio_buffer.committed"),
  event_id: d(),
  item_id: d(),
  previous_item_id: d().nullable().optional()
}), el = y({
  type: _("input_audio_buffer.speech_started"),
  event_id: d(),
  item_id: d(),
  audio_start_ms: R()
}), tl = y({
  type: _("input_audio_buffer.speech_stopped"),
  event_id: d(),
  item_id: d(),
  audio_end_ms: R()
}), nl = y({
  type: _("output_audio_buffer.started"),
  event_id: d()
}).passthrough(), rl = y({
  type: _("output_audio_buffer.stopped"),
  event_id: d()
}).passthrough(), sl = y({
  type: _("output_audio_buffer.cleared"),
  event_id: d()
}), al = y({
  type: _("rate_limits.updated"),
  event_id: d(),
  rate_limits: G(y({
    limit: R().optional(),
    name: ue(["requests", "tokens"]).optional(),
    remaining: R().optional(),
    reset_seconds: R().optional()
  }))
}), il = y({
  type: _("response.output_audio.delta"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  delta: d(),
  output_index: R(),
  response_id: d()
}), ol = y({
  type: _("response.output_audio.done"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  output_index: R(),
  response_id: d()
}), ul = y({
  type: _("response.output_audio_transcript.delta"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  delta: d(),
  output_index: R(),
  response_id: d()
}), cl = y({
  //  GA may introduce response.output_audio_transcript.done
  type: _("response.output_audio_transcript.done"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  transcript: d(),
  output_index: R(),
  response_id: d()
}), dl = y({
  type: _("response.content_part.added"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  output_index: R(),
  response_id: d(),
  part: y({
    audio: d().optional(),
    text: d().optional(),
    transcript: d().optional(),
    type: ue(["text", "audio"]).optional()
  })
}), ll = y({
  type: _("response.content_part.done"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  output_index: R(),
  response_id: d(),
  part: y({
    audio: d().optional(),
    text: d().optional(),
    transcript: d().optional(),
    type: ue(["text", "audio"]).optional()
  })
}), pl = y({
  type: _("response.created"),
  event_id: d(),
  response: Ai
}), Oi = y({
  type: _("response.done"),
  event_id: d(),
  response: Ai
}), fl = y({
  type: _("response.function_call_arguments.delta"),
  event_id: d(),
  item_id: d(),
  call_id: d(),
  delta: d(),
  output_index: R(),
  response_id: d()
}), hl = y({
  type: _("response.function_call_arguments.done"),
  event_id: d(),
  item_id: d(),
  call_id: d(),
  arguments: d(),
  output_index: R(),
  response_id: d()
}), ml = y({
  type: _("response.output_item.added"),
  event_id: d(),
  item: Xt,
  output_index: R(),
  response_id: d()
}), gl = y({
  type: _("response.output_item.done"),
  event_id: d(),
  item: Xt,
  output_index: R(),
  response_id: d()
}), yl = y({
  type: _("response.output_text.delta"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  delta: d(),
  output_index: R(),
  response_id: d()
}), _l = y({
  // No rename specified for done; keep response.text.done
  type: _("response.output_text.done"),
  event_id: d(),
  item_id: d(),
  content_index: R(),
  text: d(),
  output_index: R(),
  response_id: d()
}), vl = y({
  type: _("session.created"),
  event_id: d(),
  session: B()
}), bl = y({
  type: _("session.updated"),
  event_id: d(),
  session: B()
}), wl = y({
  type: _("response.cancel"),
  event_id: d().optional(),
  response_id: d().optional()
}), xl = y({
  type: _("response.create"),
  event_id: d().optional(),
  response: B().optional()
}), Sl = y({
  type: _("session.update"),
  event_id: d().optional(),
  session: B()
}), Il = y({
  type: _("mcp_list_tools.in_progress"),
  event_id: d().optional(),
  item_id: d().optional()
}), Tl = y({
  type: _("mcp_list_tools.completed"),
  event_id: d().optional(),
  item_id: d().optional()
}), kl = y({
  type: _("response.mcp_call_arguments.delta"),
  event_id: d(),
  response_id: d(),
  item_id: d(),
  output_index: R(),
  delta: d(),
  obfuscation: d()
}), Al = y({
  type: _("response.mcp_call_arguments.done"),
  event_id: d(),
  response_id: d(),
  item_id: d(),
  output_index: R(),
  arguments: d()
}), Ol = y({
  type: _("response.mcp_call.in_progress"),
  event_id: d(),
  output_index: R(),
  item_id: d()
}), Cl = y({
  type: _("response.mcp_call.completed"),
  event_id: d(),
  output_index: R(),
  item_id: d()
}), El = y({
  type: _("mcp_list_tools.failed"),
  event_id: d().optional(),
  item_id: d().optional()
}), Nl = y({
  type: d(),
  event_id: d().optional().nullable()
}).passthrough(), Rl = he("type", [
  Md,
  jd,
  $d,
  Fd,
  Ld,
  Zd,
  Ud,
  Jd,
  qd,
  Wd,
  Hd,
  Qd,
  el,
  tl,
  nl,
  rl,
  sl,
  al,
  il,
  ol,
  ul,
  cl,
  dl,
  ll,
  pl,
  Oi,
  fl,
  hl,
  ml,
  gl,
  yl,
  _l,
  vl,
  bl,
  Il,
  Tl,
  El,
  kl,
  Al,
  Ol,
  Cl
]);
he("type", [
  Bd,
  zd,
  Gd,
  Vd,
  Kd,
  Yd,
  Xd,
  wl,
  xl,
  Sl
]);
function ds(n) {
  const e = JSON.parse(n.data.toString()), t = Rl.safeParse(e);
  if (!t.success) {
    const r = Nl.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const Dl = "gpt-realtime", Ae = {
  outputModalities: ["audio"],
  audio: {
    input: {
      format: { type: "audio/pcm", rate: 24e3 },
      transcription: { model: "gpt-4o-mini-transcribe" },
      turnDetection: { type: "semantic_vad" },
      noiseReduction: null
    },
    output: {
      format: { type: "audio/pcm", rate: 24e3 },
      speed: 1
    }
  }
};
var pt, In, pe, Tn;
const fs = class fs extends ts {
  constructor(t = {}) {
    super();
    O(this, pt);
    O(this, In);
    O(this, pe, null);
    O(this, Tn, null);
    v(this, "eventEmitter", new ur());
    S(this, pt, t.model ?? Dl), S(this, In, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, pt);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    S(this, pt, t);
  }
  get _rawSessionConfig() {
    return u(this, Tn) ?? null;
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, In);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var a, i, o, l, c, p;
    const { data: r, isGeneric: s } = ds(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "session.updated" && S(this, Tn, r.session), r.type === "response.done") {
        const f = Oi.safeParse(r);
        if (!f.success) {
          we.error("Error parsing response done event", f.error);
          return;
        }
        const h = ((a = f.data.response.usage) == null ? void 0 : a.input_tokens) ?? 0, w = ((i = f.data.response.usage) == null ? void 0 : i.output_tokens) ?? 0, g = h + w, x = new lr({
          inputTokens: h,
          inputTokensDetails: ((o = f.data.response.usage) == null ? void 0 : o.input_token_details) ?? {},
          outputTokens: w,
          outputTokensDetails: ((l = f.data.response.usage) == null ? void 0 : l.output_token_details) ?? {},
          totalTokens: g
        });
        this.emit("usage_update", x), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: f.data.response.id ?? "",
            output: f.data.response.output ?? [],
            usage: {
              inputTokens: h,
              inputTokensDetails: ((c = f.data.response.usage) == null ? void 0 : c.input_token_details) ?? {},
              outputTokens: w,
              outputTokensDetails: ((p = f.data.response.usage) == null ? void 0 : p.output_token_details) ?? {},
              totalTokens: g
            }
          }
        });
        return;
      }
      if (r.type === "response.output_audio.done") {
        this.emit("audio_done");
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.output_text.delta" || r.type === "response.output_audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.output_audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if (r.type === "conversation.item.added" || r.type === "conversation.item.done" || r.type === "conversation.item.retrieved") {
        if (r.item.type === "mcp_list_tools" && r.type === "conversation.item.done") {
          const f = r.item.server_label ?? "", h = r.item.tools ?? [];
          try {
            this.emit("mcp_tools_listed", {
              serverLabel: f,
              tools: h
            });
          } catch (w) {
            we.error("Error emitting mcp_tools_listed", w, r.item);
          }
          return;
        }
        if (r.item.type === "message") {
          const f = r.type === "conversation.item.added" || r.type === "conversation.item.done" ? r.previous_item_id : null, h = va.parse({
            itemId: r.item.id,
            previousItemId: f,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.item.status
          });
          this.emit("item_update", h);
          return;
        }
        if (r.item.type === "mcp_approval_request" && r.type === "conversation.item.done") {
          const f = r.item, h = Dd.parse({
            itemId: f.id,
            type: f.type,
            serverLabel: f.server_label,
            name: f.name,
            arguments: JSON.parse(f.arguments || "{}"),
            approved: f.approved
          });
          this.emit("item_update", h), this.emit("mcp_approval_request", h);
          return;
        }
        if (r.item.type === "mcp_tool_call" || r.item.type === "mcp_call") {
          const f = r.type === "conversation.item.done" ? "completed" : "in_progress", h = wa.parse({
            itemId: r.item.id,
            type: r.item.type,
            status: f,
            arguments: r.item.arguments,
            name: r.item.name,
            output: r.item.output
          });
          this.emit("item_update", h), r.type === "conversation.item.done" && this.emit("mcp_tool_call_completed", h);
          return;
        }
      }
      if (r.type === "response.mcp_call.in_progress") {
        const f = r;
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: f.item_id
        });
        return;
      }
      if (r.type === "mcp_list_tools.in_progress") {
        const f = r;
        f.item_id && this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: f.item_id
        });
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const f = r.item;
        if (f.type === "function_call" && f.status === "completed") {
          const h = ba.parse({
            itemId: f.id,
            type: f.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: f.arguments,
            name: f.name,
            output: null
          });
          this.emit("item_update", h), this.emit("function_call", {
            id: f.id,
            type: "function_call",
            callId: f.call_id ?? "",
            arguments: f.arguments ?? "",
            name: f.name ?? ""
          });
          return;
        }
        if (f.type === "mcp_tool_call" || f.type === "mcp_call") {
          const h = wa.parse({
            itemId: f.id,
            type: f.type,
            status: r.type === "response.output_item.done" ? "completed" : "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: f.arguments,
            name: f.name,
            output: f.output
          });
          this.emit("item_update", h);
          return;
        }
        if (f.type === "message") {
          const h = va.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: r.type === "response.output_item.done" ? f.status ?? "completed" : f.status ?? "in_progress"
          });
          this.emit("item_update", h);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r, { triggerResponse: s = !0 } = {}) {
    const a = typeof t == "string" ? [
      {
        type: "input_text",
        text: t
      }
    ] : t.content.map((i) => i.type === "input_image" ? {
      type: "input_image",
      image_url: i.image,
      ...i.providerData ?? {}
    } : i);
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "message",
        role: "user",
        content: a
      },
      ...r
    }), s && this.sendEvent({
      type: "response.create"
    });
  }
  addImage(t, { triggerResponse: r = !0 } = {}) {
    this.sendMessage({
      type: "message",
      role: "user",
      content: [{ type: "input_image", image: t }]
    }, {}, { triggerResponse: r });
  }
  _getMergedSessionConfig(t) {
    var a, i, o, l, c, p, f, h, w, g, x, b, m, I, A, D, N, j, J, ne, me, ve, hs, ms, gs, ys, _s, vs;
    const r = Rd(t), s = {
      type: "realtime",
      instructions: r.instructions,
      model: r.model ?? u(this, pt),
      output_modalities: r.outputModalities ?? Ae.outputModalities,
      audio: {
        input: {
          format: ((i = (a = r.audio) == null ? void 0 : a.input) == null ? void 0 : i.format) ?? ((l = (o = Ae.audio) == null ? void 0 : o.input) == null ? void 0 : l.format),
          noise_reduction: ((p = (c = r.audio) == null ? void 0 : c.input) == null ? void 0 : p.noiseReduction) ?? ((h = (f = Ae.audio) == null ? void 0 : f.input) == null ? void 0 : h.noiseReduction),
          transcription: ((g = (w = r.audio) == null ? void 0 : w.input) == null ? void 0 : g.transcription) ?? ((b = (x = Ae.audio) == null ? void 0 : x.input) == null ? void 0 : b.transcription),
          turn_detection: fs.buildTurnDetectionConfig((I = (m = r.audio) == null ? void 0 : m.input) == null ? void 0 : I.turnDetection) ?? ((D = (A = Ae.audio) == null ? void 0 : A.input) == null ? void 0 : D.turnDetection)
        },
        output: {
          format: ((j = (N = r.audio) == null ? void 0 : N.output) == null ? void 0 : j.format) ?? ((ne = (J = Ae.audio) == null ? void 0 : J.output) == null ? void 0 : ne.format),
          voice: ((ve = (me = r.audio) == null ? void 0 : me.output) == null ? void 0 : ve.voice) ?? ((ms = (hs = Ae.audio) == null ? void 0 : hs.output) == null ? void 0 : ms.voice),
          speed: ((ys = (gs = r.audio) == null ? void 0 : gs.output) == null ? void 0 : ys.speed) ?? ((vs = (_s = Ae.audio) == null ? void 0 : _s.output) == null ? void 0 : vs.speed)
        }
      },
      tool_choice: r.toolChoice ?? Ae.toolChoice,
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...r.providerData ?? {}
    };
    return r.prompt && (s.prompt = {
      id: r.prompt.promptId,
      version: r.prompt.version,
      variables: r.prompt.variables
    }), r.tools && r.tools.length > 0 && (s.tools = r.tools.map((Pi) => ({
      ...Pi,
      strict: void 0
    }))), s;
  }
  static buildTurnDetectionConfig(t) {
    if (typeof t > "u")
      return;
    const { type: r, createResponse: s, create_response: a, eagerness: i, interruptResponse: o, interrupt_response: l, prefixPaddingMs: c, prefix_padding_ms: p, silenceDurationMs: f, silence_duration_ms: h, threshold: w, idleTimeoutMs: g, idle_timeout_ms: x, ...b } = t, m = {
      type: r,
      create_response: s || a,
      eagerness: i,
      interrupt_response: o || l,
      prefix_padding_ms: c || p,
      silence_duration_ms: f || h,
      idle_timeout_ms: g || x,
      threshold: w,
      ...b
    };
    return Object.keys(m).forEach((I) => {
      m[I] === void 0 && delete m[I];
    }), Object.keys(m).length > 0 ? m : void 0;
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    S(this, pe, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, a;
    if (typeof u(this, pe) > "u" && S(this, pe, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: "auto"
        }
      });
      return;
    }
    if (u(this, pe) !== null && typeof u(this, pe) != "string" && typeof t != "string") {
      we.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      we.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: null
        }
      });
      return;
    }
    if (u(this, pe) === null || typeof u(this, pe) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          type: "realtime",
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, pe)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, pe)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((a = u(this, pe)) == null ? void 0 : a.workflow_name)) {
      we.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, pe)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        type: "realtime",
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this._getMergedSessionConfig(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const a = ba.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", a);
    } catch (a) {
      we.error("Error parsing tool call item", a, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: Ii(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: a, updates: i } = Id(t, r), o = new Set(s.map((c) => c.itemId));
    for (const c of i)
      o.add(c.itemId);
    if (o.size > 0)
      for (const c of o)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: c
        });
    const l = [...a, ...i];
    for (const c of l)
      if (c.type === "message") {
        const p = {
          type: "message",
          role: c.role,
          content: c.content,
          id: c.itemId
        };
        c.role !== "system" && c.status && (p.status = c.status), this.sendEvent({
          type: "conversation.item.create",
          item: p
        });
      } else c.type === "function_call" && we.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
  sendMcpResponse(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      previous_item_id: t.itemId,
      item: {
        type: "mcp_approval_response",
        approval_request_id: t.itemId,
        approve: r
      }
    });
  }
};
pt = new WeakMap(), In = new WeakMap(), pe = new WeakMap(), Tn = new WeakMap();
let sr = fs;
var kn, K, An, ft, On;
class Pl extends sr {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    v(this, "options");
    O(this, kn);
    O(this, K, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    });
    O(this, An);
    O(this, ft, !1);
    O(this, On, !1);
    this.options = t, S(this, kn, t.baseUrl ?? "https://api.openai.com/v1/realtime/calls"), S(this, An, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current call ID of the WebRTC connection.
   */
  get callId() {
    return u(this, K).callId;
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, K).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, K);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, On);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, K).status === "connected")
      return;
    u(this, K).status === "connecting" && we.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, kn), a = await this._getApiKey(t), i = typeof a == "string" && a.startsWith("ek_");
    if (!u(this, An) && !i)
      throw new Q("Using the WebRTC connection in a browser environment requires an ephemeral client key. If you need to use a regular API key, use the WebSocket transport or set the `useInsecureApiKey` option to true.");
    return new Promise(async (o, l) => {
      var c, p;
      try {
        const f = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, h = new URL(s);
        let w = new RTCPeerConnection();
        const g = w.createDataChannel("oai-events");
        let x;
        S(this, K, {
          status: "connecting",
          peerConnection: w,
          dataChannel: g,
          callId: x
        }), this.emit("connection_change", u(this, K).status), g.addEventListener("open", () => {
          S(this, K, {
            status: "connected",
            peerConnection: w,
            dataChannel: g,
            callId: x
          }), this.updateSessionConfig(f), this.emit("connection_change", u(this, K).status), this._onOpen(), o();
        }), g.addEventListener("error", (N) => {
          this.close(), this._onError(N), l(N);
        }), g.addEventListener("message", (N) => {
          this._onMessage(N);
          const { data: j, isGeneric: J } = ds(N);
          !j || J || (j.type === "response.created" ? S(this, ft, !0) : j.type === "response.done" && S(this, ft, !1), j.type === "session.created" && (this._tracingConfig = j.session.tracing, this._updateTracingConfig(f.tracing ?? "auto")));
        });
        const b = this.options.audioElement ?? document.createElement("audio");
        b.autoplay = !0, w.ontrack = (N) => {
          b.srcObject = N.streams[0];
        };
        const m = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        w.addTrack(m.getAudioTracks()[0]), this.options.changePeerConnection && (w = await this.options.changePeerConnection(w), S(this, K, { ...u(this, K), peerConnection: w }));
        const I = await w.createOffer();
        if (await w.setLocalDescription(I), !I.sdp)
          throw new Error("Failed to create offer");
        const A = await fetch(h, {
          method: "POST",
          body: I.sdp,
          headers: {
            "Content-Type": "application/sdp",
            Authorization: `Bearer ${a}`,
            "X-OpenAI-Agents-SDK": ki["X-OpenAI-Agents-SDK"]
          }
        });
        x = (p = (c = A.headers) == null ? void 0 : c.get("Location")) == null ? void 0 : p.split("/").pop(), S(this, K, { ...u(this, K), callId: x });
        const D = {
          type: "answer",
          sdp: await A.text()
        };
        await w.setRemoteDescription(D);
      } catch (f) {
        this.close(), this._onError(f), l(f);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, K).dataChannel || u(this, K).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, K).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    S(this, On, t), u(this, K).peerConnection && u(this, K).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, K).dataChannel && u(this, K).dataChannel.close(), u(this, K).peerConnection) {
      const t = u(this, K).peerConnection;
      t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, K).status !== "disconnected" && (S(this, K, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0,
      callId: void 0
    }), this.emit("connection_change", u(this, K).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, ft) && (this.sendEvent({
      type: "response.cancel"
    }), S(this, ft, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
kn = new WeakMap(), K = new WeakMap(), An = new WeakMap(), ft = new WeakMap(), On = new WeakMap();
const Ml = globalThis.WebSocket;
var Ye, Xe, ae, Cn, Ze, ht, mt, Jt, En, ir, Ci;
class jl extends sr {
  constructor(t = {}) {
    super(t);
    O(this, ir);
    O(this, Ye);
    O(this, Xe);
    O(this, ae, {
      status: "disconnected",
      websocket: void 0
    });
    O(this, Cn);
    O(this, Ze);
    O(this, ht);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    v(this, "_firstAudioTimestamp");
    v(this, "_audioLengthMs", 0);
    O(this, mt, !1);
    O(this, Jt);
    O(this, En);
    S(this, Xe, t.url), S(this, Cn, t.useInsecureApiKey ?? !1), S(this, Jt, t.createWebSocket), S(this, En, t.skipOpenEventListeners ?? !1);
  }
  getCommonRequestHeaders() {
    return ki;
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, ae).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, ae);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Ze);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, S(this, Ye, await this._getApiKey(t));
    const s = t.url ?? u(this, Xe) ?? `wss://api.openai.com/v1/realtime?model=${this.currentModel}`;
    S(this, Xe, s);
    const a = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((i, o) => {
      q(this, ir, Ci).call(this, i, o, a).catch(o);
    }), await this.updateSessionConfig(a);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, ae).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, ae).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, ae).websocket) == null || t.close(), S(this, Ze, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, S(this, ht, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, ae).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, mt) && (this.sendEvent({
      type: "response.cancel"
    }), S(this, mt, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t, r = !0) {
    if (t < 0)
      return;
    r && this._cancelResponse();
    const s = this._audioLengthMs ?? Number.POSITIVE_INFINITY, a = Math.max(0, Math.floor(Math.min(t, s)));
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Ze),
      content_index: u(this, ht),
      audio_end_ms: a
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt(t = !0) {
    if (!u(this, Ze) || typeof this._firstAudioTimestamp != "number")
      return;
    const r = Date.now() - this._firstAudioTimestamp;
    r >= 0 && this._interrupt(r, t), S(this, Ze, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, S(this, ht, void 0);
  }
}
Ye = new WeakMap(), Xe = new WeakMap(), ae = new WeakMap(), Cn = new WeakMap(), Ze = new WeakMap(), ht = new WeakMap(), mt = new WeakMap(), Jt = new WeakMap(), En = new WeakMap(), ir = new WeakSet(), Ci = async function(t, r, s) {
  if (u(this, ae).websocket) {
    t();
    return;
  }
  if (!u(this, Ye))
    throw new Q("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, Ye).startsWith("ek_") && !u(this, Cn))
    throw new Q("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  let a = null;
  if (u(this, Jt))
    a = await u(this, Jt).call(this, {
      url: u(this, Xe),
      apiKey: u(this, Ye)
    });
  else {
    const o = [
      "realtime",
      // Auth
      "openai-insecure-api-key." + u(this, Ye),
      // Version header
      kd
    ];
    a = new Ml(u(this, Xe), o);
  }
  S(this, ae, {
    status: "connecting",
    websocket: a
  }), this.emit("connection_change", u(this, ae).status);
  const i = () => {
    S(this, ae, {
      status: "connected",
      websocket: a
    }), this.emit("connection_change", u(this, ae).status), this._onOpen(), t();
  };
  u(this, En) === !0 ? i() : a.addEventListener("open", i), a.addEventListener("error", (o) => {
    this._onError(o), S(this, ae, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, ae).status), r(o);
  }), a.addEventListener("message", (o) => {
    var p, f, h, w, g, x, b;
    this._onMessage(o);
    const { data: l, isGeneric: c } = ds(o);
    if (!(!l || c))
      if (l.type === "response.output_audio.delta") {
        S(this, ht, l.content_index), S(this, Ze, l.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const m = Si(l.delta), I = (h = (f = (p = this._rawSessionConfig) == null ? void 0 : p.audio) == null ? void 0 : f.output) == null ? void 0 : h.format;
        if (I && typeof I == "object") {
          const D = I.type;
          if (D === "audio/pcmu" || D === "audio/pcma")
            this._audioLengthMs += m.byteLength / 8;
          else if (D === "audio/pcm") {
            const N = I.rate ?? 24e3;
            this._audioLengthMs += m.byteLength / 2 / N * 1e3;
          } else
            this._audioLengthMs += m.byteLength / 24 / 2;
        } else typeof I == "string" ? I.startsWith("g711_") ? this._audioLengthMs += m.byteLength / 8 : this._audioLengthMs += m.byteLength / 24 / 2 : this._audioLengthMs += m.byteLength / 24 / 2;
        const A = {
          type: "audio",
          data: m,
          responseId: l.response_id
        };
        this._onAudio(A);
      } else if (l.type === "input_audio_buffer.speech_started") {
        const m = ((b = (x = (g = (w = this._rawSessionConfig) == null ? void 0 : w.audio) == null ? void 0 : g.input) == null ? void 0 : x.turn_detection) == null ? void 0 : b.interrupt_response) ?? !1;
        this.interrupt(!m);
      } else l.type === "response.created" ? S(this, mt, !0) : l.type === "response.done" ? S(this, mt, !1) : l.type === "session.created" && (this._tracingConfig = l.session.tracing, this._updateTracingConfig(s.tracing ?? "auto"));
  }), a.addEventListener("close", () => {
    S(this, ae, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, ae).status), this._onClose();
  });
};
const Ei = Symbol("backgroundResult");
function Bl(n) {
  return {
    [Ei]: !0,
    content: n
  };
}
function $l(n) {
  return typeof n == "object" && n !== null && Ei in n;
}
function Fl(n) {
  return n.type === "function" || n.type === "hosted_tool" && n.name === "hosted_mcp";
}
function Ll(n) {
  if (n.type === "function")
    return n;
  if (n.type === "hosted_tool" && n.name === "hosted_mcp") {
    const e = n.providerData.server_url && n.providerData.server_url.length > 0 ? n.providerData.server_url : void 0;
    return {
      type: "mcp",
      server_label: n.providerData.server_label,
      server_url: e,
      headers: n.providerData.headers,
      allowed_tools: n.providerData.allowed_tools,
      require_approval: n.providerData.require_approval
    };
  }
  throw new Q(`Invalid tool type: ${n}`);
}
function Zl() {
  return JSON.parse(JSON.stringify(Ae));
}
var U, $, qt, F, Bt, zt, Nn, X, Gt, Vt, Ce, Rn, gt, Dn, Pn, Y, Un, Jn, Ni, qn, Ri, Hr, Di, Kr;
class zl extends ur {
  constructor(t, r = {}) {
    super();
    O(this, Y);
    v(this, "initialAgent");
    v(this, "options");
    O(this, U);
    O(this, $);
    O(this, qt);
    O(this, F);
    O(this, Bt, []);
    O(this, zt);
    O(this, Nn, {});
    O(this, X, []);
    O(this, Gt);
    O(this, Vt, {});
    O(this, Ce, !1);
    // Tracks all MCP tools fetched per server label (from mcp_list_tools results).
    O(this, Rn, /* @__PURE__ */ new Map());
    // Tracks currently available MCP tools based on the active agent's configured server_labels.
    O(this, gt, []);
    // Keeps track of the last full session config we sent (camelCase keys) so that
    // subsequent updates (e.g. during agent handoffs) preserve properties that are
    // not explicitly recalculated here (such as inputAudioFormat, outputAudioFormat,
    // modalities, speed, toolChoice, turnDetection, etc.). Without this, updating
    // the agent would drop audio format overrides (e.g. g711_ulaw) and revert to
    // transport defaults causing issues for integrations like Twilio.
    O(this, Dn, Zl());
    O(this, Pn, !0);
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && Td() || r.transport === "webrtc" ? S(this, U, new Pl()) : r.transport === "websocket" || typeof r.transport > "u" ? S(this, U, new jl()) : S(this, U, r.transport), S(this, $, t), S(this, F, new Et({
      ...r.context ?? {},
      history: u(this, X)
    })), S(this, Bt, (r.outputGuardrails ?? []).map(Cd)), S(this, zt, Od(r.outputGuardrailSettings ?? {})), S(this, Gt, r.historyStoreAudio ?? !1), S(this, Pn, r.automaticallyTriggerResponseForMcpToolCalls ?? !0);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, U);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, $);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, F).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, F);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, U).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, X);
  }
  get availableMcpTools() {
    return u(this, gt);
  }
  async updateAgent(t) {
    return u(this, $).emit("agent_handoff", u(this, F), t), this.emit("agent_handoff", u(this, F), u(this, $), t), await q(this, Y, Un).call(this, t), await u(this, U).updateSessionConfig(await q(this, Y, Jn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await q(this, Y, Un).call(this, this.initialAgent), q(this, Y, Di).call(this), await u(this, U).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      url: t.url,
      initialSessionConfig: await q(this, Y, Jn).call(this, this.options.config)
    }), S(this, X, []), this.emit("history_updated", u(this, X));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, X)) : r = t, u(this, U).resetHistory(u(this, X), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, U).sendMessage(t, r);
  }
  /**
   * Add image to the session
   * @param image - The image to add.
   */
  addImage(t, { triggerResponse: r = !0 } = {}) {
    u(this, U).addImage(t, { triggerResponse: r });
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, U).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    S(this, Vt, {}), u(this, U).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, U).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, U).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, F).approveTool(t, r);
    const s = u(this, $).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await q(this, Y, qn).call(this, t.rawItem, s);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysApprove && we.warn("Always approving MCP tools is not supported. Use the allowed tools configuration instead.");
      const a = _a(t);
      u(this, U).sendMcpResponse(a, !0);
    } else
      throw new xe(`Tool ${t.rawItem.name} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, F).rejectTool(t, r);
    const s = u(this, $).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await q(this, Y, qn).call(this, t.rawItem, s);
    else if (t.rawItem.type === "hosted_tool_call") {
      r.alwaysReject && we.warn("Always rejecting MCP tools is not supported. Use the allowed tools configuration instead.");
      const a = _a(t);
      u(this, U).sendMcpResponse(a, !1);
    } else
      throw new xe(`Tool ${t.rawItem.name} not found`);
  }
}
U = new WeakMap(), $ = new WeakMap(), qt = new WeakMap(), F = new WeakMap(), Bt = new WeakMap(), zt = new WeakMap(), Nn = new WeakMap(), X = new WeakMap(), Gt = new WeakMap(), Vt = new WeakMap(), Ce = new WeakMap(), Rn = new WeakMap(), gt = new WeakMap(), Dn = new WeakMap(), Pn = new WeakMap(), Y = new WeakSet(), Un = async function(t) {
  S(this, $, t);
  const r = await u(this, $).getEnabledHandoffs(u(this, F)), s = r.map((l) => l.getHandoffAsFunctionTool()), a = (await u(this, $).getAllTools(u(this, F))).filter(Fl).map(Ll), i = typeof u(this, $).tools < "u" || typeof u(this, $).mcpServers < "u", o = r.length > 0;
  S(this, qt, i || o ? [...a, ...s] : void 0), q(this, Y, Kr).call(this);
}, Jn = async function(t = {}) {
  const r = await u(this, $).getSystemPrompt(u(this, F)), s = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  s !== null && s !== "auto" ? (this.options.groupId && (s.group_id = this.options.groupId), this.options.traceMetadata && (s.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && we.warn("In order to set traceMetadata or a groupId you need to specify a workflowName.");
  const i = {
    ...{
      ...u(this, Dn) ?? {},
      ...this.options.config ?? {},
      ...t ?? {}
    },
    instructions: r,
    voice: u(this, $).voice,
    model: this.options.model,
    tools: u(this, qt),
    tracing: s,
    prompt: typeof u(this, $).prompt == "function" ? await u(this, $).prompt(u(this, F), u(this, $)) : u(this, $).prompt
  };
  return S(this, Dn, i), i;
}, Ni = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, F), t.arguments);
  u(this, $).emit("agent_handoff", u(this, F), s), this.emit("agent_handoff", u(this, F), u(this, $), s), await q(this, Y, Un).call(this, s), await u(this, U).updateSessionConfig(await q(this, Y, Jn).call(this));
  const a = Ha(s);
  return u(this, U).sendFunctionCallOutput(t, a, !0), s;
}, qn = async function(t, r) {
  u(this, F).context.history = JSON.parse(JSON.stringify(u(this, X)));
  let s = t.arguments;
  if (r.parameters && (St(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, F), s, t.callId)) {
    const l = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (l === !1) {
      this.emit("agent_tool_start", u(this, F), u(this, $), r, {
        toolCall: t
      }), u(this, $).emit("agent_tool_start", u(this, F), r, {
        toolCall: t
      });
      const c = "Tool execution was not approved.";
      u(this, U).sendFunctionCallOutput(t, c, !0), this.emit("agent_tool_end", u(this, F), u(this, $), r, c, { toolCall: t }), u(this, $).emit("agent_tool_end", u(this, F), r, c, {
        toolCall: t
      });
      return;
    } else if (typeof l > "u") {
      this.emit("tool_approval_requested", u(this, F), u(this, $), {
        type: "function_approval",
        tool: r,
        approvalItem: new Se(t, u(this, $))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, F), u(this, $), r, {
    toolCall: t
  }), u(this, $).emit("agent_tool_start", u(this, F), r, {
    toolCall: t
  }), u(this, F).context.history = JSON.parse(JSON.stringify(u(this, X)));
  const i = await r.invoke(u(this, F), t.arguments, {
    toolCall: t
  });
  let o;
  $l(i) ? (o = et(i.content), u(this, U).sendFunctionCallOutput(t, o, !1)) : (o = et(i), u(this, U).sendFunctionCallOutput(t, o, !0)), this.emit("agent_tool_end", u(this, F), u(this, $), r, o, { toolCall: t }), u(this, $).emit("agent_tool_end", u(this, F), r, o, { toolCall: t });
}, Ri = async function(t) {
  const r = await u(this, $).getEnabledHandoffs(u(this, F)), s = new Map(r.map((l) => [l.toolName, l])), a = await u(this, $).getAllTools(u(this, F)), i = new Map(a.map((l) => [l.name, l])), o = s.get(t.name);
  if (o)
    await q(this, Y, Ni).call(this, t, o);
  else {
    const l = i.get(t.name);
    if (l && l.type === "function")
      await q(this, Y, qn).call(this, t, l);
    else
      throw new xe(`Tool ${t.name} not found`);
  }
}, Hr = async function(t, r, s) {
  if (u(this, Bt).length === 0)
    return;
  const a = {
    agent: u(this, $),
    agentOutput: t,
    context: u(this, F)
  }, o = (await Promise.all(u(this, Bt).map((l) => l.run(a)))).find((l) => l.output.tripwireTriggered);
  if (o) {
    if (u(this, Vt)[r])
      return;
    u(this, Vt)[r] = !0;
    const l = new Pr(`Output guardrail triggered: ${JSON.stringify(o.output.outputInfo)}`, o);
    this.emit("guardrail_tripped", u(this, F), u(this, $), l, {
      itemId: s
    }), this.interrupt();
    const c = Ed(o);
    this.sendMessage(c);
    return;
  }
}, Di = function() {
  u(this, U).on("*", (s) => {
    if (this.emit("transport_event", s), s.type === "conversation.item.input_audio_transcription.completed")
      try {
        const a = s;
        S(this, X, ya(u(this, X), a, u(this, Gt))), u(this, F).context.history = u(this, X), this.emit("history_updated", u(this, X));
      } catch (a) {
        this.emit("error", {
          type: "error",
          error: a
        });
      }
  }), u(this, U).on("mcp_tools_listed", ({ serverLabel: s, tools: a }) => {
    try {
      u(this, Rn).set(s, a ?? []), q(this, Y, Kr).call(this);
    } catch (i) {
      this.emit("error", { type: "error", error: i });
    }
  }), u(this, U).on("audio", (s) => {
    u(this, Ce) || (S(this, Ce, !0), this.emit("audio_start", u(this, F), u(this, $))), this.emit("audio", s);
  }), u(this, U).on("turn_started", () => {
    S(this, Ce, !1), this.emit("agent_start", u(this, F), u(this, $)), u(this, $).emit("agent_start", u(this, F), u(this, $));
  }), u(this, U).on("turn_done", (s) => {
    const a = s.response.output[s.response.output.length - 1], i = Ti(a) ?? "", o = (a == null ? void 0 : a.id) ?? "";
    this.emit("agent_end", u(this, F), u(this, $), i), u(this, $).emit("agent_end", u(this, F), i), q(this, Y, Hr).call(this, i, s.response.id, o);
  }), u(this, U).on("audio_done", () => {
    u(this, Ce) && S(this, Ce, !1), this.emit("audio_stopped", u(this, F), u(this, $));
  });
  let t = 0, r;
  u(this, U).on("audio_transcript_delta", (s) => {
    try {
      const a = s.delta, i = s.itemId, o = s.responseId;
      r !== i && (r = i, t = 0);
      const c = (u(this, Nn)[i] ?? "") + a;
      if (u(this, Nn)[i] = c, u(this, zt).debounceTextLength < 0)
        return;
      const p = Math.floor(c.length / u(this, zt).debounceTextLength);
      p > t && (t = p, q(this, Y, Hr).call(this, c, o, i));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("item_update", (s) => {
    try {
      const a = !u(this, X).some((i) => i.itemId === s.itemId);
      if (S(this, X, ya(u(this, X), s, u(this, Gt))), u(this, F).context.history = u(this, X), a) {
        const i = u(this, X).find((o) => o.itemId === s.itemId);
        i && this.emit("history_added", i);
      }
      this.emit("history_updated", u(this, X));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("item_deleted", (s) => {
    try {
      S(this, X, u(this, X).filter((a) => a.itemId !== s.itemId)), u(this, F).context.history = u(this, X), this.emit("history_updated", u(this, X));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("function_call", async (s) => {
    try {
      await q(this, Y, Ri).call(this, s);
    } catch (a) {
      we.error("Error handling function call", a), this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, U).on("usage_update", (s) => {
    u(this, F).usage.add(s);
  }), u(this, U).on("audio_interrupted", () => {
    u(this, Ce) && S(this, Ce, !1), this.emit("audio_interrupted", u(this, F), u(this, $));
  }), u(this, U).on("error", (s) => {
    this.emit("error", s);
  }), u(this, U).on("mcp_tool_call_completed", (s) => {
    this.emit("mcp_tool_call_completed", u(this, F), u(this, $), s), u(this, Pn) && u(this, U).sendEvent({
      type: "response.create"
    });
  }), u(this, U).on("mcp_approval_request", (s) => {
    this.emit("tool_approval_requested", u(this, F), u(this, $), {
      type: "mcp_approval_request",
      approvalItem: Ad(u(this, $), s)
    });
  });
}, /**
 * Recomputes the currently available MCP tools based on the current agent's active
 * MCP server configurations and the cached per-server tool listings. Emits
 * `mcp_tools_changed` if the set changed.
 */
Kr = function() {
  var l;
  const t = (l = u(this, qt)) == null ? void 0 : l.filter((c) => c.type === "mcp"), r = (c) => {
    const p = c.allowed_tools;
    if (p) {
      if (Array.isArray(p))
        return p;
      if (p && Array.isArray(p.tool_names))
        return p.tool_names;
    }
  }, s = /* @__PURE__ */ new Map();
  for (const c of t) {
    const p = u(this, Rn).get(c.server_label) ?? [], f = r(c);
    for (const h of p)
      f && !f.includes(h.name) || s.has(h.name) || s.set(h.name, h);
  }
  const a = Array.from(s.values()), i = u(this, gt);
  (i.length !== a.length || JSON.stringify(i.map((c) => c.name).sort()) !== JSON.stringify(a.map((c) => c.name).sort())) && (S(this, gt, a), this.emit("mcp_tools_changed", u(this, gt)));
};
const Gl = {
  base64ToArrayBuffer: Si,
  arrayBufferToBase64: Ii,
  getLastTextFromAudioOutputMessage: Ti
};
export {
  Dl as DEFAULT_OPENAI_REALTIME_MODEL,
  Ae as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  xe as ModelBehaviorError,
  sr as OpenAIRealtimeBase,
  Pl as OpenAIRealtimeWebRTC,
  jl as OpenAIRealtimeWebSocket,
  Pr as OutputGuardrailTripwireTriggered,
  ql as RealtimeAgent,
  zl as RealtimeSession,
  Q as UserError,
  Bl as backgroundResult,
  $l as isBackgroundResult,
  jr as tool,
  Gl as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92NC9jb3JlL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3Y0L2NvcmUvcmVnaXN0cmllcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjQvY29yZS90by1qc29uLXNjaGVtYS5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3BhcnNlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL09wdGlvbnMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS91dGlsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvUmVmcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL2Vycm9yTWVzc2FnZXMubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL1pvZEVycm9yLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9sb2NhbGVzL2VuLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL3YzL2hlbHBlcnMvcGFyc2VVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC92My9oZWxwZXJzL2Vycm9yVXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvdjMvdHlwZXMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYW55Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hcnJheS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvYmlnaW50Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9ib29sZWFuLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9icmFuZGVkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9jYXRjaC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGF0ZS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZGVmYXVsdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZWZmZWN0cy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvZW51bS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvaW50ZXJzZWN0aW9uLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9saXRlcmFsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zdHJpbmcubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlY29yZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbWFwLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uYXRpdmVFbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9uZXZlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5pb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bGxhYmxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udW1iZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL29iamVjdC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb3B0aW9uYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3BpcGVsaW5lLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9wcm9taXNlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9zZXQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3R1cGxlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmRlZmluZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Vua25vd24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3JlYWRvbmx5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2VEZWYubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS96b2RUb0pzb25TY2hlbWEubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvUmVzcG9uc2VzUGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvbGliL3RyYW5zZm9ybS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2hlbHBlcnMvem9kLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXJyb3JzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvem9kQ29tcGF0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvdHlwZUd1YXJkcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3pvZEpzb25TY2hlbWFDb21wYXQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbWNwLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3Qvc2hpbXMvc2hpbXMtYnJvd3Nlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2xpZmVjeWNsZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2RlZmF1bHRNb2RlbC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2hhbmRvZmYubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9tZXNzYWdlcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZ3VhcmRyYWlsLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvY3JlYXRlU3BhbnMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9iYXNlNjQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ldmVudHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5JbXBsZW1lbnRhdGlvbi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1blN0YXRlLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcmVzdWx0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jb250ZXh0Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm9jZXNzb3IubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9zcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdHJhY2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9wcm92aWRlci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pbmRleC5tanMiLCIuLi91dGlscy5tanMiLCIuLi9yZWFsdGltZUFnZW50Lm1qcyIsIi4uL2d1YXJkcmFpbC5tanMiLCIuLi9jbGllbnRNZXNzYWdlcy5tanMiLCIuLi9pdGVtcy5tanMiLCIuLi9sb2dnZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qcyIsIi4uL3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzIiwiLi4vdG9vbC5tanMiLCIuLi9yZWFsdGltZVNlc3Npb24ubWpzIiwiLi4vaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZFxuZXhwb3J0IGNvbnN0IE1FVEFEQVRBID0ge1xuICAgIFwibmFtZVwiOiBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCIsXG4gICAgXCJ2ZXJzaW9uXCI6IFwiMC4yLjFcIixcbiAgICBcInZlcnNpb25zXCI6IHtcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1yZWFsdGltZVwiOiBcIjAuMi4xXCIsXG4gICAgICAgIFwiQG9wZW5haS9hZ2VudHMtY29yZVwiOiBcIndvcmtzcGFjZToqXCJcbiAgICB9XG59O1xuZXhwb3J0IGRlZmF1bHQgTUVUQURBVEE7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXRhZGF0YS5tanMubWFwIiwiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhZmVFeGVjdXRlKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBhd2FpdCBmbigpXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBbZXJyb3IsIG51bGxdO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNhZmVFeGVjdXRlLm1qcy5tYXAiLCIvLyBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFcXVhbCh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE5vdEVxdWFsKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoXykgeyB9XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW51bVZhbHVlcyhlbnRyaWVzKSB7XG4gICAgY29uc3QgbnVtZXJpY1ZhbHVlcyA9IE9iamVjdC52YWx1ZXMoZW50cmllcykuZmlsdGVyKCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIik7XG4gICAgY29uc3QgdmFsdWVzID0gT2JqZWN0LmVudHJpZXMoZW50cmllcylcbiAgICAgICAgLmZpbHRlcigoW2ssIF9dKSA9PiBudW1lcmljVmFsdWVzLmluZGV4T2YoK2spID09PSAtMSlcbiAgICAgICAgLm1hcCgoW18sIHZdKSA9PiB2KTtcbiAgICByZXR1cm4gdmFsdWVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwifFwiKSB7XG4gICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiBzdHJpbmdpZnlQcmltaXRpdmUodmFsKSkuam9pbihzZXBhcmF0b3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGpzb25TdHJpbmdpZnlSZXBsYWNlcihfLCB2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgIHJldHVybiB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjYWNoZWQoZ2V0dGVyKSB7XG4gICAgY29uc3Qgc2V0ID0gZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICAgICAgaWYgKCFzZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbHVlXCIsIHsgdmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FjaGVkIHZhbHVlIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbnVsbGlzaChpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dCA9PT0gbnVsbCB8fCBpbnB1dCA9PT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuUmVnZXgoc291cmNlKSB7XG4gICAgY29uc3Qgc3RhcnQgPSBzb3VyY2Uuc3RhcnRzV2l0aChcIl5cIikgPyAxIDogMDtcbiAgICBjb25zdCBlbmQgPSBzb3VyY2UuZW5kc1dpdGgoXCIkXCIpID8gc291cmNlLmxlbmd0aCAtIDEgOiBzb3VyY2UubGVuZ3RoO1xuICAgIHJldHVybiBzb3VyY2Uuc2xpY2Uoc3RhcnQsIGVuZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVMYXp5KG9iamVjdCwga2V5LCBnZXR0ZXIpIHtcbiAgICBjb25zdCBzZXQgPSBmYWxzZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBrZXksIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgaWYgKCFzZXQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdldHRlcigpO1xuICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY2FjaGVkIHZhbHVlIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHYsXG4gICAgICAgICAgICAgICAgLy8gY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBvYmplY3Rba2V5XSA9IHY7XG4gICAgICAgIH0sXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25Qcm9wKHRhcmdldCwgcHJvcCwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wLCB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRBdFBhdGgob2JqLCBwYXRoKSB7XG4gICAgaWYgKCFwYXRoKVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIHJldHVybiBwYXRoLnJlZHVjZSgoYWNjLCBrZXkpID0+IGFjYz8uW2tleV0sIG9iaik7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJvbWlzZUFsbE9iamVjdChwcm9taXNlc09iaikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwcm9taXNlc09iaik7XG4gICAgY29uc3QgcHJvbWlzZXMgPSBrZXlzLm1hcCgoa2V5KSA9PiBwcm9taXNlc09ialtrZXldKTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWRPYmogPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXNvbHZlZE9ialtrZXlzW2ldXSA9IHJlc3VsdHNbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmVkT2JqO1xuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbVN0cmluZyhsZW5ndGggPSAxMCkge1xuICAgIGNvbnN0IGNoYXJzID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiO1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RyICs9IGNoYXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCldO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVzYyhzdHIpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RyKTtcbn1cbmV4cG9ydCBjb25zdCBjYXB0dXJlU3RhY2tUcmFjZSA9IEVycm9yLmNhcHR1cmVTdGFja1RyYWNlXG4gICAgPyBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZVxuICAgIDogKC4uLl9hcmdzKSA9PiB7IH07XG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoZGF0YSkge1xuICAgIHJldHVybiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpO1xufVxuZXhwb3J0IGNvbnN0IGFsbG93c0V2YWwgPSBjYWNoZWQoKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvcj8udXNlckFnZW50Py5pbmNsdWRlcyhcIkNsb3VkZmxhcmVcIikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBGID0gRnVuY3Rpb247XG4gICAgICAgIG5ldyBGKFwiXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKF8pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn0pO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qobykge1xuICAgIGlmIChpc09iamVjdChvKSA9PT0gZmFsc2UpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBtb2RpZmllZCBjb25zdHJ1Y3RvclxuICAgIGNvbnN0IGN0b3IgPSBvLmNvbnN0cnVjdG9yO1xuICAgIGlmIChjdG9yID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIG1vZGlmaWVkIHByb3RvdHlwZVxuICAgIGNvbnN0IHByb3QgPSBjdG9yLnByb3RvdHlwZTtcbiAgICBpZiAoaXNPYmplY3QocHJvdCkgPT09IGZhbHNlKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgLy8gY3RvciBkb2Vzbid0IGhhdmUgc3RhdGljIGBpc1Byb3RvdHlwZU9mYFxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvdCwgXCJpc1Byb3RvdHlwZU9mXCIpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG51bUtleXMoZGF0YSkge1xuICAgIGxldCBrZXlDb3VudCA9IDA7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkpIHtcbiAgICAgICAgICAgIGtleUNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvdW50O1xufVxuZXhwb3J0IGNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN0cmluZ1wiO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gXCJuYW5cIiA6IFwibnVtYmVyXCI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJib29sZWFuXCI7XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIjtcbiAgICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYmlnaW50XCI7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBcInN5bWJvbFwiO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInByb21pc2VcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU2V0ICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzZXRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImRhdGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRmlsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcImZpbGVcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcIm9iamVjdFwiO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGRhdGEgdHlwZTogJHt0fWApO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcHJvcGVydHlLZXlUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwic3ltYm9sXCJdKTtcbmV4cG9ydCBjb25zdCBwcmltaXRpdmVUeXBlcyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYmlnaW50XCIsIFwiYm9vbGVhblwiLCBcInN5bWJvbFwiLCBcInVuZGVmaW5lZFwiXSk7XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgXCJcXFxcJCZcIik7XG59XG4vLyB6b2Qtc3BlY2lmaWMgdXRpbHNcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShpbnN0LCBkZWYsIHBhcmFtcykge1xuICAgIGNvbnN0IGNsID0gbmV3IGluc3QuX3pvZC5jb25zdHIoZGVmID8/IGluc3QuX3pvZC5kZWYpO1xuICAgIGlmICghZGVmIHx8IHBhcmFtcz8ucGFyZW50KVxuICAgICAgICBjbC5fem9kLnBhcmVudCA9IGluc3Q7XG4gICAgcmV0dXJuIGNsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVBhcmFtcyhfcGFyYW1zKSB7XG4gICAgY29uc3QgcGFyYW1zID0gX3BhcmFtcztcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiKVxuICAgICAgICByZXR1cm4geyBlcnJvcjogKCkgPT4gcGFyYW1zIH07XG4gICAgaWYgKHBhcmFtcz8ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChwYXJhbXM/LmVycm9yICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgc3BlY2lmeSBib3RoIGBtZXNzYWdlYCBhbmQgYGVycm9yYCBwYXJhbXNcIik7XG4gICAgICAgIHBhcmFtcy5lcnJvciA9IHBhcmFtcy5tZXNzYWdlO1xuICAgIH1cbiAgICBkZWxldGUgcGFyYW1zLm1lc3NhZ2U7XG4gICAgaWYgKHR5cGVvZiBwYXJhbXMuZXJyb3IgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiB7IC4uLnBhcmFtcywgZXJyb3I6ICgpID0+IHBhcmFtcy5lcnJvciB9O1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNwYXJlbnRQcm94eShnZXR0ZXIpIHtcbiAgICBsZXQgdGFyZ2V0O1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgICAgZ2V0KF8sIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgICAgICB0YXJnZXQgPz8gKHRhcmdldCA9IGdldHRlcigpKTtcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KF8sIHByb3AsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5zZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSwgcmVjZWl2ZXIpO1xuICAgICAgICB9LFxuICAgICAgICBoYXMoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5oYXModGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHByb3ApO1xuICAgICAgICB9LFxuICAgICAgICBvd25LZXlzKF8pIHtcbiAgICAgICAgICAgIHRhcmdldCA/PyAodGFyZ2V0ID0gZ2V0dGVyKCkpO1xuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoXywgcHJvcCkge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBwcm9wKTtcbiAgICAgICAgfSxcbiAgICAgICAgZGVmaW5lUHJvcGVydHkoXywgcHJvcCwgZGVzY3JpcHRvcikge1xuICAgICAgICAgICAgdGFyZ2V0ID8/ICh0YXJnZXQgPSBnZXR0ZXIoKSk7XG4gICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3AsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeVByaW1pdGl2ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpICsgXCJuXCI7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xuICAgIHJldHVybiBgJHt2YWx1ZX1gO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbmFsS2V5cyhzaGFwZSkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhzaGFwZSkuZmlsdGVyKChrKSA9PiB7XG4gICAgICAgIHJldHVybiBzaGFwZVtrXS5fem9kLm9wdGluID09PSBcIm9wdGlvbmFsXCIgJiYgc2hhcGVba10uX3pvZC5vcHRvdXQgPT09IFwib3B0aW9uYWxcIjtcbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBOVU1CRVJfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBzYWZlaW50OiBbTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSXSxcbiAgICBpbnQzMjogWy0yMTQ3NDgzNjQ4LCAyMTQ3NDgzNjQ3XSxcbiAgICB1aW50MzI6IFswLCA0Mjk0OTY3Mjk1XSxcbiAgICBmbG9hdDMyOiBbLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCwgMy40MDI4MjM0NjYzODUyODg2ZTM4XSxcbiAgICBmbG9hdDY0OiBbLU51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUVdLFxufTtcbmV4cG9ydCBjb25zdCBCSUdJTlRfRk9STUFUX1JBTkdFUyA9IHtcbiAgICBpbnQ2NDogWy8qIEBfX1BVUkVfXyovIEJpZ0ludChcIi05MjIzMzcyMDM2ODU0Nzc1ODA4XCIpLCAvKiBAX19QVVJFX18qLyBCaWdJbnQoXCI5MjIzMzcyMDM2ODU0Nzc1ODA3XCIpXSxcbiAgICB1aW50NjQ6IFsvKiBAX19QVVJFX18qLyBCaWdJbnQoMCksIC8qIEBfX1BVUkVfXyovIEJpZ0ludChcIjE4NDQ2NzQ0MDczNzA5NTUxNjE1XCIpXSxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGljayhzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7IC8vLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGN1cnJEZWYuc2hhcGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAvLyBwaWNrIGtleVxuICAgICAgICBuZXdTaGFwZVtrZXldID0gY3VyckRlZi5zaGFwZVtrZXldO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgc2hhcGU6IG5ld1NoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9taXQoc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3QgbmV3U2hhcGUgPSB7IC4uLnNjaGVtYS5fem9kLmRlZi5zaGFwZSB9O1xuICAgIGNvbnN0IGN1cnJEZWYgPSBzY2hlbWEuX3pvZC5kZWY7IC8vLnNoYXBlO1xuICAgIGZvciAoY29uc3Qga2V5IGluIG1hc2spIHtcbiAgICAgICAgaWYgKCEoa2V5IGluIGN1cnJEZWYuc2hhcGUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVucmVjb2duaXplZCBrZXk6IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBkZWxldGUgbmV3U2hhcGVba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlOiBuZXdTaGFwZSxcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoc2NoZW1hLCBzaGFwZSkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChzaGFwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB0byBleHRlbmQ6IGV4cGVjdGVkIGEgcGxhaW4gb2JqZWN0XCIpO1xuICAgIH1cbiAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIC4uLnNjaGVtYS5fem9kLmRlZixcbiAgICAgICAgZ2V0IHNoYXBlKCkge1xuICAgICAgICAgICAgY29uc3QgX3NoYXBlID0geyAuLi5zY2hlbWEuX3pvZC5kZWYuc2hhcGUsIC4uLnNoYXBlIH07XG4gICAgICAgICAgICBhc3NpZ25Qcm9wKHRoaXMsIFwic2hhcGVcIiwgX3NoYXBlKTsgLy8gc2VsZi1jYWNoaW5nXG4gICAgICAgICAgICByZXR1cm4gX3NoYXBlO1xuICAgICAgICB9LFxuICAgICAgICBjaGVja3M6IFtdLCAvLyBkZWxldGUgZXhpc3RpbmcgY2hlY2tzXG4gICAgfTtcbiAgICByZXR1cm4gY2xvbmUoc2NoZW1hLCBkZWYpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKGEsIGIpIHtcbiAgICByZXR1cm4gY2xvbmUoYSwge1xuICAgICAgICAuLi5hLl96b2QuZGVmLFxuICAgICAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgICAgICBjb25zdCBfc2hhcGUgPSB7IC4uLmEuX3pvZC5kZWYuc2hhcGUsIC4uLmIuX3pvZC5kZWYuc2hhcGUgfTtcbiAgICAgICAgICAgIGFzc2lnblByb3AodGhpcywgXCJzaGFwZVwiLCBfc2hhcGUpOyAvLyBzZWxmLWNhY2hpbmdcbiAgICAgICAgICAgIHJldHVybiBfc2hhcGU7XG4gICAgICAgIH0sXG4gICAgICAgIGNhdGNoYWxsOiBiLl96b2QuZGVmLmNhdGNoYWxsLFxuICAgICAgICBjaGVja3M6IFtdLCAvLyBkZWxldGUgZXhpc3RpbmcgY2hlY2tzXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFydGlhbChDbGFzcywgc2NoZW1hLCBtYXNrKSB7XG4gICAgY29uc3Qgb2xkU2hhcGUgPSBzY2hlbWEuX3pvZC5kZWYuc2hhcGU7XG4gICAgY29uc3Qgc2hhcGUgPSB7IC4uLm9sZFNoYXBlIH07XG4gICAgaWYgKG1hc2spIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbWFzaykge1xuICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZFNoYXBlKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGtleTogXCIke2tleX1cImApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzc1xuICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9sZFNoYXBlKSB7XG4gICAgICAgICAgICAvLyBpZiAob2xkU2hhcGVba2V5XSEuX3pvZC5vcHRpbiA9PT0gXCJvcHRpb25hbFwiKSBjb250aW51ZTtcbiAgICAgICAgICAgIHNoYXBlW2tleV0gPSBDbGFzc1xuICAgICAgICAgICAgICAgID8gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbm5lclR5cGU6IG9sZFNoYXBlW2tleV0sXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IG9sZFNoYXBlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICBjaGVja3M6IFtdLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVkKENsYXNzLCBzY2hlbWEsIG1hc2spIHtcbiAgICBjb25zdCBvbGRTaGFwZSA9IHNjaGVtYS5fem9kLmRlZi5zaGFwZTtcbiAgICBjb25zdCBzaGFwZSA9IHsgLi4ub2xkU2hhcGUgfTtcbiAgICBpZiAobWFzaykge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtYXNrKSB7XG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gc2hhcGUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQga2V5OiBcIiR7a2V5fVwiYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0ZSB3aXRoIG5vbi1vcHRpb25hbFxuICAgICAgICAgICAgc2hhcGVba2V5XSA9IG5ldyBDbGFzcyh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJub25vcHRpb25hbFwiLFxuICAgICAgICAgICAgICAgIGlubmVyVHlwZTogb2xkU2hhcGVba2V5XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTaGFwZSkge1xuICAgICAgICAgICAgLy8gb3ZlcndyaXRlIHdpdGggbm9uLW9wdGlvbmFsXG4gICAgICAgICAgICBzaGFwZVtrZXldID0gbmV3IENsYXNzKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm5vbm9wdGlvbmFsXCIsXG4gICAgICAgICAgICAgICAgaW5uZXJUeXBlOiBvbGRTaGFwZVtrZXldLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHNjaGVtYSwge1xuICAgICAgICAuLi5zY2hlbWEuX3pvZC5kZWYsXG4gICAgICAgIHNoYXBlLFxuICAgICAgICAvLyBvcHRpb25hbDogW10sXG4gICAgICAgIGNoZWNrczogW10sXG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWJvcnRlZCh4LCBzdGFydEluZGV4ID0gMCkge1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgeC5pc3N1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHguaXNzdWVzW2ldPy5jb250aW51ZSAhPT0gdHJ1ZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gcHJlZml4SXNzdWVzKHBhdGgsIGlzc3Vlcykge1xuICAgIHJldHVybiBpc3N1ZXMubWFwKChpc3MpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAoX2EgPSBpc3MpLnBhdGggPz8gKF9hLnBhdGggPSBbXSk7XG4gICAgICAgIGlzcy5wYXRoLnVuc2hpZnQocGF0aCk7XG4gICAgICAgIHJldHVybiBpc3M7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gdW53cmFwTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59XG5leHBvcnQgZnVuY3Rpb24gZmluYWxpemVJc3N1ZShpc3MsIGN0eCwgY29uZmlnKSB7XG4gICAgY29uc3QgZnVsbCA9IHsgLi4uaXNzLCBwYXRoOiBpc3MucGF0aCA/PyBbXSB9O1xuICAgIC8vIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgIGlmICghaXNzLm1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHVud3JhcE1lc3NhZ2UoaXNzLmluc3Q/Ll96b2QuZGVmPy5lcnJvcj8uKGlzcykpID8/XG4gICAgICAgICAgICB1bndyYXBNZXNzYWdlKGN0eD8uZXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcuY3VzdG9tRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgdW53cmFwTWVzc2FnZShjb25maWcubG9jYWxlRXJyb3I/Lihpc3MpKSA/P1xuICAgICAgICAgICAgXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgIGZ1bGwubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIC8vIGRlbGV0ZSAoZnVsbCBhcyBhbnkpLmRlZjtcbiAgICBkZWxldGUgZnVsbC5pbnN0O1xuICAgIGRlbGV0ZSBmdWxsLmNvbnRpbnVlO1xuICAgIGlmICghY3R4Py5yZXBvcnRJbnB1dCkge1xuICAgICAgICBkZWxldGUgZnVsbC5pbnB1dDtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2l6YWJsZU9yaWdpbihpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFNldClcbiAgICAgICAgcmV0dXJuIFwic2V0XCI7XG4gICAgaWYgKGlucHV0IGluc3RhbmNlb2YgTWFwKVxuICAgICAgICByZXR1cm4gXCJtYXBcIjtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBGaWxlKVxuICAgICAgICByZXR1cm4gXCJmaWxlXCI7XG4gICAgcmV0dXJuIFwidW5rbm93blwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aGFibGVPcmlnaW4oaW5wdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpXG4gICAgICAgIHJldHVybiBcImFycmF5XCI7XG4gICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgcmV0dXJuIFwidW5rbm93blwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzc3VlKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBbaXNzLCBpbnB1dCwgaW5zdF0gPSBhcmdzO1xuICAgIGlmICh0eXBlb2YgaXNzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlOiBpc3MsXG4gICAgICAgICAgICBjb2RlOiBcImN1c3RvbVwiLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBpbnN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4geyAuLi5pc3MgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkVudW0ob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iailcbiAgICAgICAgLmZpbHRlcigoW2ssIF9dKSA9PiB7XG4gICAgICAgIC8vIHJldHVybiB0cnVlIGlmIE5hTiwgbWVhbmluZyBpdCdzIG5vdCBhIG51bWJlciwgdGh1cyBhIHN0cmluZyBrZXlcbiAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihOdW1iZXIucGFyc2VJbnQoaywgMTApKTtcbiAgICB9KVxuICAgICAgICAubWFwKChlbCkgPT4gZWxbMV0pO1xufVxuLy8gaW5zdGFuY2VvZlxuZXhwb3J0IGNsYXNzIENsYXNzIHtcbiAgICBjb25zdHJ1Y3RvciguLi5fYXJncykgeyB9XG59XG4iLCJleHBvcnQgY29uc3QgJG91dHB1dCA9IFN5bWJvbChcIlpvZE91dHB1dFwiKTtcbmV4cG9ydCBjb25zdCAkaW5wdXQgPSBTeW1ib2woXCJab2RJbnB1dFwiKTtcbmV4cG9ydCBjbGFzcyAkWm9kUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX2lkbWFwID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBhZGQoc2NoZW1hLCAuLi5fbWV0YSkge1xuICAgICAgICBjb25zdCBtZXRhID0gX21ldGFbMF07XG4gICAgICAgIHRoaXMuX21hcC5zZXQoc2NoZW1hLCBtZXRhKTtcbiAgICAgICAgaWYgKG1ldGEgJiYgdHlwZW9mIG1ldGEgPT09IFwib2JqZWN0XCIgJiYgXCJpZFwiIGluIG1ldGEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pZG1hcC5oYXMobWV0YS5pZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElEICR7bWV0YS5pZH0gYWxyZWFkeSBleGlzdHMgaW4gdGhlIHJlZ2lzdHJ5YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pZG1hcC5zZXQobWV0YS5pZCwgc2NoZW1hKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5faWRtYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZW1vdmUoc2NoZW1hKSB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0aGlzLl9tYXAuZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09PSBcIm9iamVjdFwiICYmIFwiaWRcIiBpbiBtZXRhKSB7XG4gICAgICAgICAgICB0aGlzLl9pZG1hcC5kZWxldGUobWV0YS5pZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbWFwLmRlbGV0ZShzY2hlbWEpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZ2V0KHNjaGVtYSkge1xuICAgICAgICAvLyByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpIGFzIGFueTtcbiAgICAgICAgLy8gaW5oZXJpdCBtZXRhZGF0YVxuICAgICAgICBjb25zdCBwID0gc2NoZW1hLl96b2QucGFyZW50O1xuICAgICAgICBpZiAocCkge1xuICAgICAgICAgICAgY29uc3QgcG0gPSB7IC4uLih0aGlzLmdldChwKSA/PyB7fSkgfTtcbiAgICAgICAgICAgIGRlbGV0ZSBwbS5pZDsgLy8gZG8gbm90IGluaGVyaXQgaWRcbiAgICAgICAgICAgIHJldHVybiB7IC4uLnBtLCAuLi50aGlzLl9tYXAuZ2V0KHNjaGVtYSkgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldChzY2hlbWEpO1xuICAgIH1cbiAgICBoYXMoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAuaGFzKHNjaGVtYSk7XG4gICAgfVxufVxuLy8gcmVnaXN0cmllc1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdHJ5KCkge1xuICAgIHJldHVybiBuZXcgJFpvZFJlZ2lzdHJ5KCk7XG59XG5leHBvcnQgY29uc3QgZ2xvYmFsUmVnaXN0cnkgPSAvKkBfX1BVUkVfXyovIHJlZ2lzdHJ5KCk7XG4iLCJpbXBvcnQgeyAkWm9kUmVnaXN0cnksIGdsb2JhbFJlZ2lzdHJ5IH0gZnJvbSBcIi4vcmVnaXN0cmllcy5qc1wiO1xuaW1wb3J0IHsgZ2V0RW51bVZhbHVlcyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmV4cG9ydCBjbGFzcyBKU09OU2NoZW1hR2VuZXJhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5ID0gcGFyYW1zPy5tZXRhZGF0YSA/PyBnbG9iYWxSZWdpc3RyeTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBwYXJhbXM/LnRhcmdldCA/PyBcImRyYWZ0LTIwMjAtMTJcIjtcbiAgICAgICAgdGhpcy51bnJlcHJlc2VudGFibGUgPSBwYXJhbXM/LnVucmVwcmVzZW50YWJsZSA/PyBcInRocm93XCI7XG4gICAgICAgIHRoaXMub3ZlcnJpZGUgPSBwYXJhbXM/Lm92ZXJyaWRlID8/ICgoKSA9PiB7IH0pO1xuICAgICAgICB0aGlzLmlvID0gcGFyYW1zPy5pbyA/PyBcIm91dHB1dFwiO1xuICAgICAgICB0aGlzLnNlZW4gPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHByb2Nlc3Moc2NoZW1hLCBfcGFyYW1zID0geyBwYXRoOiBbXSwgc2NoZW1hUGF0aDogW10gfSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICAgICAgY29uc3QgZm9ybWF0TWFwID0ge1xuICAgICAgICAgICAgZ3VpZDogXCJ1dWlkXCIsXG4gICAgICAgICAgICB1cmw6IFwidXJpXCIsXG4gICAgICAgICAgICBkYXRldGltZTogXCJkYXRlLXRpbWVcIixcbiAgICAgICAgICAgIGpzb25fc3RyaW5nOiBcImpzb24tc3RyaW5nXCIsXG4gICAgICAgICAgICByZWdleDogXCJcIiwgLy8gZG8gbm90IHNldFxuICAgICAgICB9O1xuICAgICAgICAvLyBjaGVjayBmb3Igc2NoZW1hIGluIHNlZW5zXG4gICAgICAgIGNvbnN0IHNlZW4gPSB0aGlzLnNlZW4uZ2V0KHNjaGVtYSk7XG4gICAgICAgIGlmIChzZWVuKSB7XG4gICAgICAgICAgICBzZWVuLmNvdW50Kys7XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBjeWNsZVxuICAgICAgICAgICAgY29uc3QgaXNDeWNsZSA9IF9wYXJhbXMuc2NoZW1hUGF0aC5pbmNsdWRlcyhzY2hlbWEpO1xuICAgICAgICAgICAgaWYgKGlzQ3ljbGUpIHtcbiAgICAgICAgICAgICAgICBzZWVuLmN5Y2xlID0gX3BhcmFtcy5wYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlZW4uc2NoZW1hO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluaXRpYWxpemVcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyBzY2hlbWE6IHt9LCBjb3VudDogMSwgY3ljbGU6IHVuZGVmaW5lZCwgcGF0aDogX3BhcmFtcy5wYXRoIH07XG4gICAgICAgIHRoaXMuc2Vlbi5zZXQoc2NoZW1hLCByZXN1bHQpO1xuICAgICAgICAvLyBjdXN0b20gbWV0aG9kIG92ZXJyaWRlcyBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgIGNvbnN0IG92ZXJyaWRlU2NoZW1hID0gc2NoZW1hLl96b2QudG9KU09OU2NoZW1hPy4oKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlU2NoZW1hKSB7XG4gICAgICAgICAgICByZXN1bHQuc2NoZW1hID0gb3ZlcnJpZGVTY2hlbWE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLi4uX3BhcmFtcyxcbiAgICAgICAgICAgICAgICBzY2hlbWFQYXRoOiBbLi4uX3BhcmFtcy5zY2hlbWFQYXRoLCBzY2hlbWFdLFxuICAgICAgICAgICAgICAgIHBhdGg6IF9wYXJhbXMucGF0aCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBzY2hlbWEuX3pvZC5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gc2NoZW1hIHdhcyBjbG9uZWQgZnJvbSBhbm90aGVyIHNjaGVtYVxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKHBhcmVudCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlZW4uZ2V0KHBhcmVudCkuaXNQYXJlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX2pzb24gPSByZXN1bHQuc2NoZW1hO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGVmLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIHBhdHRlcm5zLCBjb250ZW50RW5jb2RpbmcgfSA9IHNjaGVtYS5fem9kXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkxlbmd0aCA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhMZW5ndGggPSBtYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3VzdG9tIHBhdHRlcm4gb3ZlcnJpZGVzIGZvcm1hdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZm9ybWF0ID0gZm9ybWF0TWFwW2Zvcm1hdF0gPz8gZm9ybWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmZvcm1hdCA9PT0gXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZm9ybWF0OyAvLyBlbXB0eSBmb3JtYXQgaXMgbm90IHZhbGlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVuY29kaW5nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uY29udGVudEVuY29kaW5nID0gY29udGVudEVuY29kaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhdHRlcm5zICYmIHBhdHRlcm5zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXhlcyA9IFsuLi5wYXR0ZXJuc107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlZ2V4ZXMubGVuZ3RoID09PSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnBhdHRlcm4gPSByZWdleGVzWzBdLnNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyZWdleGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNjaGVtYS5hbGxPZiA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlZ2V4ZXMubWFwKChyZWdleCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4odGhpcy50YXJnZXQgPT09IFwiZHJhZnQtN1wiID8geyB0eXBlOiBcInN0cmluZ1wiIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybjogcmVnZXguc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtLCBmb3JtYXQsIG11bHRpcGxlT2YsIGV4Y2x1c2l2ZU1heGltdW0sIGV4Y2x1c2l2ZU1pbmltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm9ybWF0ID09PSBcInN0cmluZ1wiICYmIGZvcm1hdC5pbmNsdWRlcyhcImludFwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImludGVnZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNaW5pbXVtID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZXhjbHVzaXZlTWluaW11bSA9IGV4Y2x1c2l2ZU1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbmltdW0gPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhjbHVzaXZlTWluaW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhjbHVzaXZlTWluaW11bSA+PSBtaW5pbXVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24ubWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGpzb24uZXhjbHVzaXZlTWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4Y2x1c2l2ZU1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5leGNsdXNpdmVNYXhpbXVtID0gZXhjbHVzaXZlTWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ubWF4aW11bSA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGNsdXNpdmVNYXhpbXVtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGNsdXNpdmVNYXhpbXVtIDw9IG1heGltdW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5tYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUganNvbi5leGNsdXNpdmVNYXhpbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbXVsdGlwbGVPZiA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm11bHRpcGxlT2YgPSBtdWx0aXBsZU9mO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJvb2xlYW5cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJib29sZWFuXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmlnaW50XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzeW1ib2xcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW1ib2xzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJudWxsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLnR5cGUgPSBcIm51bGxcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhbnlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVua25vd25cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZGVmaW5lZCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidm9pZFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZvaWQgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5ldmVyXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLm5vdCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRhdGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRlIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0gfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWluaW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1pbkl0ZW1zID0gbWluaW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWF4aW11bSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLm1heEl0ZW1zID0gbWF4aW11bTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwiYXJyYXlcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSB0aGlzLnByb2Nlc3MoZGVmLmVsZW1lbnQsIHsgLi4ucGFyYW1zLCBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiaXRlbXNcIl0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwib2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNoYXBlID0gZGVmLnNoYXBlOyAvLyBwYXJhbXMuc2hhcGVDYWNoZS5nZXQoc2NoZW1hKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGFwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucHJvcGVydGllc1trZXldID0gdGhpcy5wcm9jZXNzKHNoYXBlW2tleV0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicHJvcGVydGllc1wiLCBrZXldLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWlyZWQga2V5c1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsS2V5cyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoc2hhcGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IG9wdGlvbmFsS2V5cyA9IG5ldyBTZXQoZGVmLm9wdGlvbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkS2V5cyA9IG5ldyBTZXQoWy4uLmFsbEtleXNdLmZpbHRlcigoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IGRlZi5zaGFwZVtrZXldLl96b2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW8gPT09IFwiaW5wdXRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5vcHRpbiA9PT0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYub3B0b3V0ID09PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVpcmVkS2V5cy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucmVxdWlyZWQgPSBBcnJheS5mcm9tKHJlcXVpcmVkS2V5cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXRjaGFsbFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5jYXRjaGFsbD8uX3pvZC5kZWYudHlwZSA9PT0gXCJuZXZlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RyaWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWRlZi5jYXRjaGFsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ3VsYXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJvdXRwdXRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGVmLmNhdGNoYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsUHJvcGVydGllcyA9IHRoaXMucHJvY2VzcyhkZWYuY2F0Y2hhbGwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidW5pb25cIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hbnlPZiA9IGRlZi5vcHRpb25zLm1hcCgoeCwgaSkgPT4gdGhpcy5wcm9jZXNzKHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFueU9mXCIsIGldLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImludGVyc2VjdGlvblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0gdGhpcy5wcm9jZXNzKGRlZi5sZWZ0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJhbGxPZlwiLCAwXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMucHJvY2VzcyhkZWYucmlnaHQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogWy4uLnBhcmFtcy5wYXRoLCBcImFsbE9mXCIsIDFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NpbXBsZUludGVyc2VjdGlvbiA9ICh2YWwpID0+IFwiYWxsT2ZcIiBpbiB2YWwgJiYgT2JqZWN0LmtleXModmFsKS5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNTaW1wbGVJbnRlcnNlY3Rpb24oYSkgPyBhLmFsbE9mIDogW2FdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4oaXNTaW1wbGVJbnRlcnNlY3Rpb24oYikgPyBiLmFsbE9mIDogW2JdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLmFsbE9mID0gYWxsT2Y7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHVwbGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganNvbiA9IF9qc29uO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlZml4SXRlbXMgPSBkZWYuaXRlbXMubWFwKCh4LCBpKSA9PiB0aGlzLnByb2Nlc3MoeCwgeyAuLi5wYXJhbXMsIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJwcmVmaXhJdGVtc1wiLCBpXSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5wcmVmaXhJdGVtcyA9IHByZWZpeEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHByZWZpeEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMucHJvY2VzcyhkZWYucmVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uaXRlbXMgPSByZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hZGRpdGlvbmFsSXRlbXMgPSByZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZGl0aW9uYWxJdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlZi5yZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5pdGVtcyA9IHRoaXMucHJvY2VzcyhkZWYucmVzdCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFsuLi5wYXJhbXMucGF0aCwgXCJpdGVtc1wiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxlbmd0aFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBtaW5pbXVtLCBtYXhpbXVtIH0gPSBzY2hlbWEuX3pvZC5iYWc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pbmltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5taW5JdGVtcyA9IG1pbmltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1heGltdW0gPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5tYXhJdGVtcyA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVjb3JkXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwib2JqZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnByb3BlcnR5TmFtZXMgPSB0aGlzLnByb2Nlc3MoZGVmLmtleVR5cGUsIHsgLi4ucGFyYW1zLCBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwicHJvcGVydHlOYW1lc1wiXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uYWRkaXRpb25hbFByb3BlcnRpZXMgPSB0aGlzLnByb2Nlc3MoZGVmLnZhbHVlVHlwZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBbLi4ucGFyYW1zLnBhdGgsIFwiYWRkaXRpb25hbFByb3BlcnRpZXNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtYXBcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNldFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNldCBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW51bVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSBnZXRFbnVtVmFsdWVzKGRlZi5lbnRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE51bWJlciBlbnVtcyBjYW4gaGF2ZSBib3RoIHN0cmluZyBhbmQgbnVtYmVyIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWVzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZW51bSA9IHZhbHVlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsaXRlcmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBfanNvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsIG9mIGRlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxpdGVyYWwgYHVuZGVmaW5lZGAgY2Fubm90IGJlIHJlcHJlc2VudGVkIGluIEpTT04gU2NoZW1hXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90IGFkZCB0byB2YWxzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmlnSW50IGxpdGVyYWxzIGNhbm5vdCBiZSByZXByZXNlbnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaChOdW1iZXIodmFsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaCh2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmcgKGFuIHVuZGVmaW5lZCBsaXRlcmFsIHdhcyBzdHJpcHBlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsID0gdmFsc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSB2YWwgPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiB2YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5jb25zdCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxzLmV2ZXJ5KCh2KSA9PiB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVtYmVyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHMuZXZlcnkoKHYpID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdHlwZW9mIHYgPT09IFwiYm9vbGVhblwiKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFscy5ldmVyeSgodikgPT4gdiA9PT0gbnVsbCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24udHlwZSA9IFwibnVsbFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpzb24uZW51bSA9IHZhbHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZmlsZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBcImJpbmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbmNvZGluZzogXCJiaW5hcnlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IG1pbmltdW0sIG1heGltdW0sIG1pbWUgfSA9IHNjaGVtYS5fem9kLmJhZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW5pbXVtICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5taW5MZW5ndGggPSBtaW5pbXVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1heGltdW0gIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLm1heExlbmd0aCA9IG1heGltdW07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW1lLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLmNvbnRlbnRNZWRpYVR5cGUgPSBtaW1lWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGpzb24sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbi5hbnlPZiA9IG1pbWUubWFwKChtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtRmlsZSA9IHsgLi4uZmlsZSwgY29udGVudE1lZGlhVHlwZTogbSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1GaWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGpzb24sIGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMudW5yZXByZXNlbnRhYmxlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNmb3JtXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVucmVwcmVzZW50YWJsZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJhbnNmb3JtcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibnVsbGFibGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLnByb2Nlc3MoZGVmLmlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmFueU9mID0gW2lubmVyLCB7IHR5cGU6IFwibnVsbFwiIH1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vbm9wdGlvbmFsXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLnR5cGUgPSBcImJvb2xlYW5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkZWZhdWx0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfanNvbi5kZWZhdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWYuZGVmYXVsdFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2pzb24uX3ByZWZhdWx0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWYuZGVmYXVsdFZhbHVlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2F0Y2hcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXNlIGNvbmRpdGlvbmFsc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYXRjaFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaFZhbHVlID0gZGVmLmNhdGNoVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEeW5hbWljIGNhdGNoIHZhbHVlcyBhcmUgbm90IHN1cHBvcnRlZCBpbiBKU09OIFNjaGVtYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLmRlZmF1bHQgPSBjYXRjaFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hblwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5hTiBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGVtcGxhdGVfbGl0ZXJhbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gX2pzb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2NoZW1hLl96b2QucGF0dGVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGF0dGVybilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXR0ZXJuIG5vdCBmb3VuZCBpbiB0ZW1wbGF0ZSBsaXRlcmFsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAganNvbi50eXBlID0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24ucGF0dGVybiA9IHBhdHRlcm4uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBpcGVcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5uZXJUeXBlID0gdGhpcy5pbyA9PT0gXCJpbnB1dFwiID8gKGRlZi5pbi5fem9kLmRlZi50eXBlID09PSBcInRyYW5zZm9ybVwiID8gZGVmLm91dCA6IGRlZi5pbikgOiBkZWYub3V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGlubmVyVHlwZSwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5yZWYgPSBpbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicmVhZG9ubHlcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9qc29uLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIHBhc3N0aHJvdWdoIHR5cGVzXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJwcm9taXNlXCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VzcyhkZWYuaW5uZXJUeXBlLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnJlZiA9IGRlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib3B0aW9uYWxcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGRlZi5pbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsYXp5XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyVHlwZSA9IHNjaGVtYS5fem9kLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzcyhpbm5lclR5cGUsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucmVmID0gaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImN1c3RvbVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bnJlcHJlc2VudGFibGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkN1c3RvbSB0eXBlcyBjYW5ub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlNPTiBTY2hlbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gbWV0YWRhdGFcbiAgICAgICAgY29uc3QgbWV0YSA9IHRoaXMubWV0YWRhdGFSZWdpc3RyeS5nZXQoc2NoZW1hKTtcbiAgICAgICAgaWYgKG1ldGEpXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdC5zY2hlbWEsIG1ldGEpO1xuICAgICAgICBpZiAodGhpcy5pbyA9PT0gXCJpbnB1dFwiICYmIGlzVHJhbnNmb3JtaW5nKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIC8vIGV4YW1wbGVzL2RlZmF1bHRzIG9ubHkgYXBwbHkgdG8gb3V0cHV0IHR5cGUgb2YgcGlwZVxuICAgICAgICAgICAgZGVsZXRlIHJlc3VsdC5zY2hlbWEuZXhhbXBsZXM7XG4gICAgICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBwcmVmYXVsdCBhcyBkZWZhdWx0XG4gICAgICAgIGlmICh0aGlzLmlvID09PSBcImlucHV0XCIgJiYgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpXG4gICAgICAgICAgICAoX2EgPSByZXN1bHQuc2NoZW1hKS5kZWZhdWx0ID8/IChfYS5kZWZhdWx0ID0gcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQpO1xuICAgICAgICBkZWxldGUgcmVzdWx0LnNjaGVtYS5fcHJlZmF1bHQ7XG4gICAgICAgIC8vIHB1bGxpbmcgZnJlc2ggZnJvbSB0aGlzLnNlZW4gaW4gY2FzZSBpdCB3YXMgb3ZlcndyaXR0ZW5cbiAgICAgICAgY29uc3QgX3Jlc3VsdCA9IHRoaXMuc2Vlbi5nZXQoc2NoZW1hKTtcbiAgICAgICAgcmV0dXJuIF9yZXN1bHQuc2NoZW1hO1xuICAgIH1cbiAgICBlbWl0KHNjaGVtYSwgX3BhcmFtcykge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICBjeWNsZXM6IF9wYXJhbXM/LmN5Y2xlcyA/PyBcInJlZlwiLFxuICAgICAgICAgICAgcmV1c2VkOiBfcGFyYW1zPy5yZXVzZWQgPz8gXCJpbmxpbmVcIixcbiAgICAgICAgICAgIC8vIHVucmVwcmVzZW50YWJsZTogX3BhcmFtcz8udW5yZXByZXNlbnRhYmxlID8/IFwidGhyb3dcIixcbiAgICAgICAgICAgIC8vIHVyaTogX3BhcmFtcz8udXJpID8/ICgoaWQpID0+IGAke2lkfWApLFxuICAgICAgICAgICAgZXh0ZXJuYWw6IF9wYXJhbXM/LmV4dGVybmFsID8/IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHNlZW4gbWFwO1xuICAgICAgICBjb25zdCByb290ID0gdGhpcy5zZWVuLmdldChzY2hlbWEpO1xuICAgICAgICBpZiAoIXJvb3QpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnByb2Nlc3NlZCBzY2hlbWEuIFRoaXMgaXMgYSBidWcgaW4gWm9kLlwiKTtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSByZXN1bHQgd2l0aCByb290IHNjaGVtYSBmaWVsZHNcbiAgICAgICAgLy8gT2JqZWN0LmFzc2lnbihyZXN1bHQsIHNlZW4uY2FjaGVkKTtcbiAgICAgICAgLy8gcmV0dXJucyBhIHJlZiB0byB0aGUgc2NoZW1hXG4gICAgICAgIC8vIGRlZklkIHdpbGwgYmUgZW1wdHkgaWYgdGhlIHJlZiBwb2ludHMgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hIChvciAjKVxuICAgICAgICBjb25zdCBtYWtlVVJJID0gKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAvLyBjb21wYXJpbmcgdGhlIHNlZW4gb2JqZWN0cyBiZWNhdXNlIHNvbWV0aW1lc1xuICAgICAgICAgICAgLy8gbXVsdGlwbGUgc2NoZW1hcyBtYXAgdG8gdGhlIHNhbWUgc2VlbiBvYmplY3QuXG4gICAgICAgICAgICAvLyBlLmcuIGxhenlcbiAgICAgICAgICAgIC8vIGV4dGVybmFsIGlzIGNvbmZpZ3VyZWRcbiAgICAgICAgICAgIGNvbnN0IGRlZnNTZWdtZW50ID0gdGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiID8gXCIkZGVmc1wiIDogXCJkZWZpbml0aW9uc1wiO1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVybmFsSWQgPSBwYXJhbXMuZXh0ZXJuYWwucmVnaXN0cnkuZ2V0KGVudHJ5WzBdKT8uaWQ7IC8vID8/IFwiX19zaGFyZWRcIjsvLyBgX19zY2hlbWEke3RoaXMuY291bnRlcisrfWA7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgc2NoZW1hIGlzIGluIHRoZSBleHRlcm5hbCByZWdpc3RyeVxuICAgICAgICAgICAgICAgIGNvbnN0IHVyaUdlbmVyYXRvciA9IHBhcmFtcy5leHRlcm5hbC51cmkgPz8gKChpZCkgPT4gaWQpO1xuICAgICAgICAgICAgICAgIGlmIChleHRlcm5hbElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJlZjogdXJpR2VuZXJhdG9yKGV4dGVybmFsSWQpIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgYWRkIHRvIF9fc2hhcmVkXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBlbnRyeVsxXS5kZWZJZCA/PyBlbnRyeVsxXS5zY2hlbWEuaWQgPz8gYHNjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgICAgICBlbnRyeVsxXS5kZWZJZCA9IGlkOyAvLyBzZXQgZGVmSWQgc28gaXQgd2lsbCBiZSByZXVzZWQgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgZGVmSWQ6IGlkLCByZWY6IGAke3VyaUdlbmVyYXRvcihcIl9fc2hhcmVkXCIpfSMvJHtkZWZzU2VnbWVudH0vJHtpZH1gIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZW50cnlbMV0gPT09IHJvb3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyByZWY6IFwiI1wiIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBzZWxmLWNvbnRhaW5lZCBzY2hlbWFcbiAgICAgICAgICAgIGNvbnN0IHVyaVByZWZpeCA9IGAjYDtcbiAgICAgICAgICAgIGNvbnN0IGRlZlVyaVByZWZpeCA9IGAke3VyaVByZWZpeH0vJHtkZWZzU2VnbWVudH0vYDtcbiAgICAgICAgICAgIGNvbnN0IGRlZklkID0gZW50cnlbMV0uc2NoZW1hLmlkID8/IGBfX3NjaGVtYSR7dGhpcy5jb3VudGVyKyt9YDtcbiAgICAgICAgICAgIHJldHVybiB7IGRlZklkLCByZWY6IGRlZlVyaVByZWZpeCArIGRlZklkIH07XG4gICAgICAgIH07XG4gICAgICAgIC8vIHN0b3JlZCBjYWNoZWQgdmVyc2lvbiBpbiBgZGVmYCBwcm9wZXJ0eVxuICAgICAgICAvLyByZW1vdmUgYWxsIHByb3BlcnRpZXMsIHNldCAkcmVmXG4gICAgICAgIGNvbnN0IGV4dHJhY3RUb0RlZiA9IChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgdGhlIHNjaGVtYSBpcyBhbHJlYWR5IGEgcmVmZXJlbmNlLCBkbyBub3QgZXh0cmFjdCBpdFxuICAgICAgICAgICAgaWYgKGVudHJ5WzFdLnNjaGVtYS4kcmVmKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgY29uc3QgeyByZWYsIGRlZklkIH0gPSBtYWtlVVJJKGVudHJ5KTtcbiAgICAgICAgICAgIHNlZW4uZGVmID0geyAuLi5zZWVuLnNjaGVtYSB9O1xuICAgICAgICAgICAgLy8gZGVmSWQgd29uJ3QgYmUgc2V0IGlmIHRoZSBzY2hlbWEgaXMgYSByZWZlcmVuY2UgdG8gYW4gZXh0ZXJuYWwgc2NoZW1hXG4gICAgICAgICAgICBpZiAoZGVmSWQpXG4gICAgICAgICAgICAgICAgc2Vlbi5kZWZJZCA9IGRlZklkO1xuICAgICAgICAgICAgLy8gd2lwZSBhd2F5IGFsbCBwcm9wZXJ0aWVzIGV4Y2VwdCAkcmVmXG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLnNjaGVtYTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWFba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjaGVtYS4kcmVmID0gcmVmO1xuICAgICAgICB9O1xuICAgICAgICAvLyB0aHJvdyBvbiBjeWNsZXNcbiAgICAgICAgLy8gYnJlYWsgY3ljbGVzXG4gICAgICAgIGlmIChwYXJhbXMuY3ljbGVzID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgICAgICBpZiAoc2Vlbi5jeWNsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDeWNsZSBkZXRlY3RlZDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCMvJHtzZWVuLmN5Y2xlPy5qb2luKFwiL1wiKX0vPHJvb3Q+YCArXG4gICAgICAgICAgICAgICAgICAgICAgICAnXFxuXFxuU2V0IHRoZSBgY3ljbGVzYCBwYXJhbWV0ZXIgdG8gYFwicmVmXCJgIHRvIHJlc29sdmUgY3ljbGljYWwgc2NoZW1hcyB3aXRoIGRlZnMuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGV4dHJhY3Qgc2NoZW1hcyBpbnRvICRkZWZzXG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWVuLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgY29uc3Qgc2VlbiA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgLy8gY29udmVydCByb290IHNjaGVtYSB0byAjICRyZWZcbiAgICAgICAgICAgIGlmIChzY2hlbWEgPT09IGVudHJ5WzBdKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTsgLy8gdGhpcyBoYXMgc3BlY2lhbCBoYW5kbGluZyBmb3IgdGhlIHJvb3Qgc2NoZW1hXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHNjaGVtYXMgdGhhdCBhcmUgaW4gdGhlIGV4dGVybmFsIHJlZ2lzdHJ5XG4gICAgICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXh0ID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICAgICAgICAgIGlmIChzY2hlbWEgIT09IGVudHJ5WzBdICYmIGV4dCkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHRyYWN0IHNjaGVtYXMgd2l0aCBgaWRgIG1ldGFcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5tZXRhZGF0YVJlZ2lzdHJ5LmdldChlbnRyeVswXSk/LmlkO1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGJyZWFrIGN5Y2xlc1xuICAgICAgICAgICAgaWYgKHNlZW4uY3ljbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBhbnlcbiAgICAgICAgICAgICAgICBleHRyYWN0VG9EZWYoZW50cnkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXh0cmFjdCByZXVzZWQgc2NoZW1hc1xuICAgICAgICAgICAgaWYgKHNlZW4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5yZXVzZWQgPT09IFwicmVmXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdFRvRGVmKGVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBmbGF0dGVuIF9yZWZzXG4gICAgICAgIGNvbnN0IGZsYXR0ZW5SZWYgPSAoem9kU2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSB0aGlzLnNlZW4uZ2V0KHpvZFNjaGVtYSk7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSBzZWVuLmRlZiA/PyBzZWVuLnNjaGVtYTtcbiAgICAgICAgICAgIGNvbnN0IF9jYWNoZWQgPSB7IC4uLnNjaGVtYSB9O1xuICAgICAgICAgICAgLy8gYWxyZWFkeSBzZWVuXG4gICAgICAgICAgICBpZiAoc2Vlbi5yZWYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBmbGF0dGVuIHJlZiBpZiBkZWZpbmVkXG4gICAgICAgICAgICBjb25zdCByZWYgPSBzZWVuLnJlZjtcbiAgICAgICAgICAgIHNlZW4ucmVmID0gbnVsbDsgLy8gcHJldmVudCByZWN1cnNpb25cbiAgICAgICAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgICAgICAgICBmbGF0dGVuUmVmKHJlZiwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICAvLyBtZXJnZSByZWZlcmVuY2VkIHNjaGVtYSBpbnRvIGN1cnJlbnRcbiAgICAgICAgICAgICAgICBjb25zdCByZWZTY2hlbWEgPSB0aGlzLnNlZW4uZ2V0KHJlZikuc2NoZW1hO1xuICAgICAgICAgICAgICAgIGlmIChyZWZTY2hlbWEuJHJlZiAmJiBwYXJhbXMudGFyZ2V0ID09PSBcImRyYWZ0LTdcIikge1xuICAgICAgICAgICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBzY2hlbWEuYWxsT2YgPz8gW107XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHJlZlNjaGVtYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNjaGVtYSwgcmVmU2NoZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzY2hlbWEsIF9jYWNoZWQpOyAvLyBwcmV2ZW50IG92ZXJ3cml0aW5nIGFueSBmaWVsZHMgaW4gdGhlIG9yaWdpbmFsIHNjaGVtYVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGV4ZWN1dGUgb3ZlcnJpZGVzXG4gICAgICAgICAgICBpZiAoIXNlZW4uaXNQYXJlbnQpXG4gICAgICAgICAgICAgICAgdGhpcy5vdmVycmlkZSh7XG4gICAgICAgICAgICAgICAgICAgIHpvZFNjaGVtYTogem9kU2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiBzY2hlbWEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHNlZW4ucGF0aCA/PyBbXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBbLi4udGhpcy5zZWVuLmVudHJpZXMoKV0ucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICBmbGF0dGVuUmVmKGVudHJ5WzBdLCB7IHRhcmdldDogdGhpcy50YXJnZXQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGlmICh0aGlzLnRhcmdldCA9PT0gXCJkcmFmdC0yMDIwLTEyXCIpIHtcbiAgICAgICAgICAgIHJlc3VsdC4kc2NoZW1hID0gXCJodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDIwLTEyL3NjaGVtYVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09PSBcImRyYWZ0LTdcIikge1xuICAgICAgICAgICAgcmVzdWx0LiRzY2hlbWEgPSBcImh0dHA6Ly9qc29uLXNjaGVtYS5vcmcvZHJhZnQtMDcvc2NoZW1hI1wiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBJbnZhbGlkIHRhcmdldDogJHt0aGlzLnRhcmdldH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1zLmV4dGVybmFsPy51cmkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyYW1zLmV4dGVybmFsLnJlZ2lzdHJ5LmdldChzY2hlbWEpPy5pZDtcbiAgICAgICAgICAgIGlmICghaWQpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2NoZW1hIGlzIG1pc3NpbmcgYW4gYGlkYCBwcm9wZXJ0eVwiKTtcbiAgICAgICAgICAgIHJlc3VsdC4kaWQgPSBwYXJhbXMuZXh0ZXJuYWwudXJpKGlkKTtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuYXNzaWduKHJlc3VsdCwgcm9vdC5kZWYpO1xuICAgICAgICAvLyBidWlsZCBkZWZzIG9iamVjdFxuICAgICAgICBjb25zdCBkZWZzID0gcGFyYW1zLmV4dGVybmFsPy5kZWZzID8/IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuc2Vlbi5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlZW4gPSBlbnRyeVsxXTtcbiAgICAgICAgICAgIGlmIChzZWVuLmRlZiAmJiBzZWVuLmRlZklkKSB7XG4gICAgICAgICAgICAgICAgZGVmc1tzZWVuLmRlZklkXSA9IHNlZW4uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBkZWZpbml0aW9ucyBpbiByZXN1bHRcbiAgICAgICAgaWYgKHBhcmFtcy5leHRlcm5hbCkge1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRlZnMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXJnZXQgPT09IFwiZHJhZnQtMjAyMC0xMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC4kZGVmcyA9IGRlZnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGVmaW5pdGlvbnMgPSBkZWZzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gdGhpcyBcImZpbmFsaXplc1wiIHRoaXMgc2NoZW1hIGFuZCBlbnN1cmVzIGFsbCBjeWNsZXMgYXJlIHJlbW92ZWRcbiAgICAgICAgICAgIC8vIGVhY2ggY2FsbCB0byAuZW1pdCgpIGlzIGZ1bmN0aW9uYWxseSBpbmRlcGVuZGVudFxuICAgICAgICAgICAgLy8gdGhvdWdoIHRoZSBzZWVuIG1hcCBpcyBzaGFyZWRcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciBjb252ZXJ0aW5nIHNjaGVtYSB0byBKU09OLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiB0b0pTT05TY2hlbWEoaW5wdXQsIF9wYXJhbXMpIHtcbiAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiAkWm9kUmVnaXN0cnkpIHtcbiAgICAgICAgY29uc3QgZ2VuID0gbmV3IEpTT05TY2hlbWFHZW5lcmF0b3IoX3BhcmFtcyk7XG4gICAgICAgIGNvbnN0IGRlZnMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBpbnB1dC5faWRtYXAuZW50cmllcygpKSB7XG4gICAgICAgICAgICBjb25zdCBbXywgc2NoZW1hXSA9IGVudHJ5O1xuICAgICAgICAgICAgZ2VuLnByb2Nlc3Moc2NoZW1hKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzY2hlbWFzID0ge307XG4gICAgICAgIGNvbnN0IGV4dGVybmFsID0ge1xuICAgICAgICAgICAgcmVnaXN0cnk6IGlucHV0LFxuICAgICAgICAgICAgdXJpOiBfcGFyYW1zPy51cmksXG4gICAgICAgICAgICBkZWZzLFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGlucHV0Ll9pZG1hcC5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHNjaGVtYV0gPSBlbnRyeTtcbiAgICAgICAgICAgIHNjaGVtYXNba2V5XSA9IGdlbi5lbWl0KHNjaGVtYSwge1xuICAgICAgICAgICAgICAgIC4uLl9wYXJhbXMsXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWwsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGVmcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZGVmc1NlZ21lbnQgPSBnZW4udGFyZ2V0ID09PSBcImRyYWZ0LTIwMjAtMTJcIiA/IFwiJGRlZnNcIiA6IFwiZGVmaW5pdGlvbnNcIjtcbiAgICAgICAgICAgIHNjaGVtYXMuX19zaGFyZWQgPSB7XG4gICAgICAgICAgICAgICAgW2RlZnNTZWdtZW50XTogZGVmcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc2NoZW1hcyB9O1xuICAgIH1cbiAgICBjb25zdCBnZW4gPSBuZXcgSlNPTlNjaGVtYUdlbmVyYXRvcihfcGFyYW1zKTtcbiAgICBnZW4ucHJvY2VzcyhpbnB1dCk7XG4gICAgcmV0dXJuIGdlbi5lbWl0KGlucHV0LCBfcGFyYW1zKTtcbn1cbmZ1bmN0aW9uIGlzVHJhbnNmb3JtaW5nKF9zY2hlbWEsIF9jdHgpIHtcbiAgICBjb25zdCBjdHggPSBfY3R4ID8/IHsgc2VlbjogbmV3IFNldCgpIH07XG4gICAgaWYgKGN0eC5zZWVuLmhhcyhfc2NoZW1hKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGN0eC5zZWVuLmFkZChfc2NoZW1hKTtcbiAgICBjb25zdCBzY2hlbWEgPSBfc2NoZW1hO1xuICAgIGNvbnN0IGRlZiA9IHNjaGVtYS5fem9kLmRlZjtcbiAgICBzd2l0Y2ggKGRlZi50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgIGNhc2UgXCJkYXRlXCI6XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICBjYXNlIFwibnVsbFwiOlxuICAgICAgICBjYXNlIFwiYW55XCI6XG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCI6XG4gICAgICAgIGNhc2UgXCJuZXZlclwiOlxuICAgICAgICBjYXNlIFwidm9pZFwiOlxuICAgICAgICBjYXNlIFwibGl0ZXJhbFwiOlxuICAgICAgICBjYXNlIFwiZW51bVwiOlxuICAgICAgICBjYXNlIFwibmFuXCI6XG4gICAgICAgIGNhc2UgXCJmaWxlXCI6XG4gICAgICAgIGNhc2UgXCJ0ZW1wbGF0ZV9saXRlcmFsXCI6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNhc2UgXCJhcnJheVwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLmVsZW1lbnQsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWYuc2hhcGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNUcmFuc2Zvcm1pbmcoZGVmLnNoYXBlW2tleV0sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ1bmlvblwiOiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBkZWYub3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhvcHRpb24sIGN0eCkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJpbnRlcnNlY3Rpb25cIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5sZWZ0LCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi5yaWdodCwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwidHVwbGVcIjoge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRlZi5pdGVtcykge1xuICAgICAgICAgICAgICAgIGlmIChpc1RyYW5zZm9ybWluZyhpdGVtLCBjdHgpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWYucmVzdCAmJiBpc1RyYW5zZm9ybWluZyhkZWYucmVzdCwgY3R4KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwicmVjb3JkXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYua2V5VHlwZSwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYudmFsdWVUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJtYXBcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5rZXlUeXBlLCBjdHgpIHx8IGlzVHJhbnNmb3JtaW5nKGRlZi52YWx1ZVR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInNldFwiOiB7XG4gICAgICAgICAgICByZXR1cm4gaXNUcmFuc2Zvcm1pbmcoZGVmLnZhbHVlVHlwZSwgY3R4KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpbm5lciB0eXBlc1xuICAgICAgICBjYXNlIFwicHJvbWlzZVwiOlxuICAgICAgICBjYXNlIFwib3B0aW9uYWxcIjpcbiAgICAgICAgY2FzZSBcIm5vbm9wdGlvbmFsXCI6XG4gICAgICAgIGNhc2UgXCJudWxsYWJsZVwiOlxuICAgICAgICBjYXNlIFwicmVhZG9ubHlcIjpcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW5uZXJUeXBlLCBjdHgpO1xuICAgICAgICBjYXNlIFwibGF6eVwiOlxuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5nZXR0ZXIoKSwgY3R4KTtcbiAgICAgICAgY2FzZSBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbm5lclR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInByZWZhdWx0XCI6IHtcbiAgICAgICAgICAgIHJldHVybiBpc1RyYW5zZm9ybWluZyhkZWYuaW5uZXJUeXBlLCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJjdXN0b21cIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ0cmFuc2Zvcm1cIjoge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInBpcGVcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGlzVHJhbnNmb3JtaW5nKGRlZi5pbiwgY3R4KSB8fCBpc1RyYW5zZm9ybWluZyhkZWYub3V0LCBjdHgpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiY2F0Y2hcIjoge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBkZWY7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBzY2hlbWEgdHlwZTogJHtkZWYudHlwZX1gKTtcbn1cbiIsImltcG9ydCB7IENvbnRlbnRGaWx0ZXJGaW5pc2hSZWFzb25FcnJvciwgTGVuZ3RoRmluaXNoUmVhc29uRXJyb3IsIE9wZW5BSUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2wodG9vbCkge1xuICAgIHJldHVybiB0b29sICE9PSB1bmRlZmluZWQgJiYgJ2Z1bmN0aW9uJyBpbiB0b29sICYmIHRvb2wuZnVuY3Rpb24gIT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlUmVzcG9uc2VGb3JtYXQocmVzcG9uc2VfZm9ybWF0LCBwYXJzZXIpIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnJlc3BvbnNlX2Zvcm1hdCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0JyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVUZXh0Rm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCkge1xuICAgIHJldHVybiByZXNwb25zZV9mb3JtYXQ/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVUb29sKHRvb2wsIHsgcGFyc2VyLCBjYWxsYmFjaywgfSkge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4udG9vbCB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAkYnJhbmQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiAnYXV0by1wYXJzZWFibGUtdG9vbCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRjYWxsYmFjazoge1xuICAgICAgICAgICAgdmFsdWU6IGNhbGxiYWNrLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0F1dG9QYXJzYWJsZVRvb2wodG9vbCkge1xuICAgIHJldHVybiB0b29sPy5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtdG9vbCc7XG59XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zIHx8ICFoYXNBdXRvUGFyc2VhYmxlSW5wdXQocGFyYW1zKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uY29tcGxldGlvbixcbiAgICAgICAgICAgIGNob2ljZXM6IGNvbXBsZXRpb24uY2hvaWNlcy5tYXAoKGNob2ljZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHMoY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBjb25zdCBjaG9pY2VzID0gY29tcGxldGlvbi5jaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiB7XG4gICAgICAgIGlmIChjaG9pY2UuZmluaXNoX3JlYXNvbiA9PT0gJ2xlbmd0aCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBMZW5ndGhGaW5pc2hSZWFzb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaG9pY2UuZmluaXNoX3JlYXNvbiA9PT0gJ2NvbnRlbnRfZmlsdGVyJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IENvbnRlbnRGaWx0ZXJGaW5pc2hSZWFzb25FcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydFRvb2xDYWxsc0FyZUNoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sQ2FsbHMoY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5jaG9pY2UsXG4gICAgICAgICAgICBtZXNzYWdlOiB7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX2NhbGxzOiBjaG9pY2UubWVzc2FnZS50b29sX2NhbGxzPy5tYXAoKHRvb2xDYWxsKSA9PiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpKSA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgIHBhcnNlZDogY2hvaWNlLm1lc3NhZ2UuY29udGVudCAmJiAhY2hvaWNlLm1lc3NhZ2UucmVmdXNhbCA/XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlUmVzcG9uc2VGb3JtYXQocGFyYW1zLCBjaG9pY2UubWVzc2FnZS5jb250ZW50KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7IC4uLmNvbXBsZXRpb24sIGNob2ljZXMgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2VGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChwYXJhbXMucmVzcG9uc2VfZm9ybWF0Py50eXBlID09PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZV9mb3JtYXQgPSBwYXJhbXMucmVzcG9uc2VfZm9ybWF0O1xuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlX2Zvcm1hdC4kcGFyc2VSYXcoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJiBpbnB1dFRvb2wuZnVuY3Rpb24/Lm5hbWUgPT09IHRvb2xDYWxsLmZ1bmN0aW9uLm5hbWUpOyAvLyBUUyBkb2Vzbid0IG5hcnJvdyBiYXNlZCBvbiBpc0NoYXRDb21wbGV0aW9uVG9vbFxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgLi4udG9vbENhbGwuZnVuY3Rpb24sXG4gICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuZnVuY3Rpb24uYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogaW5wdXRUb29sPy5mdW5jdGlvbi5zdHJpY3QgPyBKU09OLnBhcnNlKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkUGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgISgndG9vbHMnIGluIHBhcmFtcykgfHwgIXBhcmFtcy50b29scykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0VG9vbCA9IHBhcmFtcy50b29scz8uZmluZCgoaW5wdXRUb29sKSA9PiBpc0NoYXRDb21wbGV0aW9uRnVuY3Rpb25Ub29sKGlucHV0VG9vbCkgJiYgaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4gKGlzQ2hhdENvbXBsZXRpb25GdW5jdGlvblRvb2woaW5wdXRUb29sKSAmJlxuICAgICAgICAoaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgfHwgaW5wdXRUb29sPy5mdW5jdGlvbi5zdHJpY3QgfHwgZmFsc2UpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNBdXRvUGFyc2VhYmxlSW5wdXQocGFyYW1zKSB7XG4gICAgaWYgKGlzQXV0b1BhcnNhYmxlUmVzcG9uc2VGb3JtYXQocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAocGFyYW1zLnRvb2xzPy5zb21lKCh0KSA9PiBpc0F1dG9QYXJzYWJsZVRvb2wodCkgfHwgKHQudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0LmZ1bmN0aW9uLnN0cmljdCA9PT0gdHJ1ZSkpID8/IGZhbHNlKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUb29sQ2FsbHNBcmVDaGF0Q29tcGxldGlvbkZ1bmN0aW9uVG9vbENhbGxzKHRvb2xDYWxscykge1xuICAgIGZvciAoY29uc3QgdG9vbENhbGwgb2YgdG9vbENhbGxzIHx8IFtdKSB7XG4gICAgICAgIGlmICh0b29sQ2FsbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgY2FsbHMgYXJlIHN1cHBvcnRlZDsgUmVjZWl2ZWQgXFxgJHt0b29sQ2FsbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0RWwgPSBzdWIucGF0aFswXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tmaXJzdEVsXSA9IGZpZWxkRXJyb3JzW2ZpcnN0RWxdIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW2ZpcnN0RWxdLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9ybUVycm9ycy5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3JtRXJyb3JzLCBmaWVsZEVycm9ycyB9O1xuICAgIH1cbiAgICBnZXQgZm9ybUVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdHRlbigpO1xuICAgIH1cbn1cblpvZEVycm9yLmNyZWF0ZSA9IChpc3N1ZXMpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihpc3N1ZXMpO1xuICAgIHJldHVybiBlcnJvcjtcbn07XG4iLCJpbXBvcnQgeyBab2RJc3N1ZUNvZGUgfSBmcm9tIFwiLi4vWm9kRXJyb3IuanNcIjtcbmltcG9ydCB7IHV0aWwsIFpvZFBhcnNlZFR5cGUgfSBmcm9tIFwiLi4vaGVscGVycy91dGlsLmpzXCI7XG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke2lzc3VlLm1pbmltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseSBlcXVhbCB0byBgIDogaXNzdWUuaW5jbHVzaXZlID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgIDogYGdyZWF0ZXIgdGhhbiBgfSR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1pbmltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fYmlnOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGF0IG1vc3RgIDogYHVuZGVyYH0gJHtpc3N1ZS5tYXhpbXVtfSBjaGFyYWN0ZXIocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlICR7aXNzdWUuZXhhY3QgPyBgZXhhY3RseWAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgbGVzcyB0aGFuIG9yIGVxdWFsIHRvYCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2AgOiBgc21hbGxlciB0aGFuYH0gJHtuZXcgRGF0ZShOdW1iZXIoaXNzdWUubWF4aW11bSkpfWA7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiSW52YWxpZCBpbnB1dFwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmN1c3RvbTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludGVyc2VjdGlvbiByZXN1bHRzIGNvdWxkIG5vdCBiZSBtZXJnZWRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAke2lzc3VlLm11bHRpcGxlT2Z9YDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfZmluaXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IFwiTnVtYmVyIG11c3QgYmUgZmluaXRlXCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBfY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoaXNzdWUpO1xuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlIH07XG59O1xuZXhwb3J0IGRlZmF1bHQgZXJyb3JNYXA7XG4iLCJpbXBvcnQgZGVmYXVsdEVycm9yTWFwIGZyb20gXCIuL2xvY2FsZXMvZW4uanNcIjtcbmxldCBvdmVycmlkZUVycm9yTWFwID0gZGVmYXVsdEVycm9yTWFwO1xuZXhwb3J0IHsgZGVmYXVsdEVycm9yTWFwIH07XG5leHBvcnQgZnVuY3Rpb24gc2V0RXJyb3JNYXAobWFwKSB7XG4gICAgb3ZlcnJpZGVFcnJvck1hcCA9IG1hcDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cbiIsImltcG9ydCB7IGdldEVycm9yTWFwIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi4vbG9jYWxlcy9lbi5qc1wiO1xuZXhwb3J0IGNvbnN0IG1ha2VJc3N1ZSA9IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCB7IGRhdGEsIHBhdGgsIGVycm9yTWFwcywgaXNzdWVEYXRhIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZnVsbFBhdGggPSBbLi4ucGF0aCwgLi4uKGlzc3VlRGF0YS5wYXRoIHx8IFtdKV07XG4gICAgY29uc3QgZnVsbElzc3VlID0ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgIH07XG4gICAgaWYgKGlzc3VlRGF0YS5tZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICAgICAgbWVzc2FnZTogaXNzdWVEYXRhLm1lc3NhZ2UsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIGNvbnN0IG1hcHMgPSBlcnJvck1hcHNcbiAgICAgICAgLmZpbHRlcigobSkgPT4gISFtKVxuICAgICAgICAuc2xpY2UoKVxuICAgICAgICAucmV2ZXJzZSgpO1xuICAgIGZvciAoY29uc3QgbWFwIG9mIG1hcHMpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gbWFwKGZ1bGxJc3N1ZSwgeyBkYXRhLCBkZWZhdWx0RXJyb3I6IGVycm9yTWVzc2FnZSB9KS5tZXNzYWdlO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgIHBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgRU1QVFlfUEFUSCA9IFtdO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgLy8gY29udGV4dHVhbCBlcnJvciBtYXAgaXMgZmlyc3QgcHJpb3JpdHlcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCwgLy8gdGhlbiBzY2hlbWEtYm91bmQgbWFwIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAsIC8vIHRoZW4gZ2xvYmFsIG92ZXJyaWRlIG1hcFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGRlZmF1bHRFcnJvck1hcCA/IHVuZGVmaW5lZCA6IGRlZmF1bHRFcnJvck1hcCwgLy8gdGhlbiBnbG9iYWwgZGVmYXVsdCBtYXBcbiAgICAgICAgXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgfSk7XG4gICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaChpc3N1ZSk7XG59XG5leHBvcnQgY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiYgKHR5cGVvZiB2YWx1ZS52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiB8fCBwYWlyLmFsd2F5c1NldCkpIHtcbiAgICAgICAgICAgICAgICBmaW5hbE9iamVjdFtrZXkudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBmaW5hbE9iamVjdCB9O1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJTlZBTElEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgc3RhdHVzOiBcImFib3J0ZWRcIixcbn0pO1xuZXhwb3J0IGNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgT0sgPSAodmFsdWUpID0+ICh7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZSB9KTtcbmV4cG9ydCBjb25zdCBpc0Fib3J0ZWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiO1xuZXhwb3J0IGNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmV4cG9ydCBjb25zdCBpc1ZhbGlkID0gKHgpID0+IHguc3RhdHVzID09PSBcInZhbGlkXCI7XG5leHBvcnQgY29uc3QgaXNBc3luYyA9ICh4KSA9PiB0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiB4IGluc3RhbmNlb2YgUHJvbWlzZTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgaWYgKCFoZWFkZXIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIENvbnZlcnQgYmFzZTY0dXJsIHRvIGJhc2U2NFxuICAgICAgICBjb25zdCBiYXNlNjQgPSBoZWFkZXJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csIFwiK1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgXCIvXCIpXG4gICAgICAgICAgICAucGFkRW5kKGhlYWRlci5sZW5ndGggKyAoKDQgLSAoaGVhZGVyLmxlbmd0aCAlIDQpKSAlIDQpLCBcIj1cIik7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKGF0b2IoYmFzZTY0KSk7XG4gICAgICAgIGlmICh0eXBlb2YgZGVjb2RlZCAhPT0gXCJvYmplY3RcIiB8fCBkZWNvZGVkID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoXCJ0eXBcIiBpbiBkZWNvZGVkICYmIGRlY29kZWQ/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkZWNvZGVkLmFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGFsZyAmJiBkZWNvZGVkLmFsZyAhPT0gYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZENpZHIoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NENpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBjbGFzcyBab2RTdHJpbmcgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBTdHJpbmcoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbW9qaVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVtb2ppUmVnZXggPSBuZXcgUmVnRXhwKF9lbW9qaVJlZ2V4LCBcInVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1vamlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInV1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1dWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJuYW5vaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghbmFub2lkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWQyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1bGlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVsaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGVSZWdleDtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IHRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb25SZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZHVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImlwXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEpXVChpbnB1dC5kYXRhLCBjaGVjay5hbGcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiand0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjaWRyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRDaWRyKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY2lkclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NHVybFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjR1cmxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NHVybChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGJhc2U2NHVybCBlbmNvZGluZyBpcyBhIG1vZGlmaWNhdGlvbiBvZiBiYXNlNjQgdGhhdCBjYW4gc2FmZWx5IGJlIHVzZWQgaW4gVVJMcyBhbmQgZmlsZW5hbWVzXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgand0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJqd3RcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBpcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiaXBcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBjaWRyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjaWRyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IG9wdGlvbnM/Lm9mZnNldCA/PyBmYWxzZSxcbiAgICAgICAgICAgIGxvY2FsOiBvcHRpb25zPy5sb2NhbCA/PyBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImRhdGVcIiwgbWVzc2FnZSB9KTtcbiAgICB9XG4gICAgdGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucz8ubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zPy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5kc1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZW5kc1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluTGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhMZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZW5ndGgobGVuLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IGxlbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYC5taW4oMSlgXG4gICAgICovXG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgdHJpbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRyaW1cIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTG93ZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9Mb3dlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9VcHBlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0RhdGV0aW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGV0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGVcIik7XG4gICAgfVxuICAgIGdldCBpc1RpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZHVyYXRpb25cIik7XG4gICAgfVxuICAgIGdldCBpc0VtYWlsKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtYWlsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVUkwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNFbW9qaSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJlbW9qaVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1dWlkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNOQU5PSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWQyXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVTElEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0lQKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImlwXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDSURSKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImNpZHJcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NHVybCgpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjR1cmxcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBjbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJpZ2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YSAlIGNoZWNrLnZhbHVlICE9PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfZ2V0SW52YWxpZElucHV0KGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYmlnaW50LFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pblZhbHVlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RCb29sZWFuIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQm9vbGVhbihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJvb2xlYW4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGF0ZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IG5ldyBEYXRlKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5kYXRlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoaW5wdXQuZGF0YS5nZXRUaW1lKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5EYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4RGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluRGF0ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluICE9IG51bGwgPyBuZXcgRGF0ZShtaW4pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG1heERhdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heCAhPSBudWxsID8gbmV3IERhdGUobWF4KSA6IG51bGw7XG4gICAgfVxufVxuWm9kRGF0ZS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFN5bWJvbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kU3ltYm9sLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEFueSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvLyB0byBwcmV2ZW50IGluc3RhbmNlcyBvZiBvdGhlciBjbGFzc2VzIGZyb20gZXh0ZW5kaW5nIFpvZEFueS4gdGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggY2F0Y2hhbGwgaW4gWm9kT2JqZWN0LlxuICAgICAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBbnkoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2ROZXZlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxufVxuWm9kTmV2ZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFZvaWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudm9pZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RWb2lkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFZvaWQoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE9iamVjdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgSW4gbW9zdCBjYXNlcywgdGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIC0gdW5rbm93biBwcm9wZXJ0aWVzIGFyZSBub3cgc2lsZW50bHkgc3RyaXBwZWQuXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHBhc3MgdGhyb3VnaCB1bmtub3duIHByb3BlcnRpZXMsIHVzZSBgLnBhc3N0aHJvdWdoKClgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vbnN0cmljdCA9IHRoaXMucGFzc3Rocm91Z2g7XG4gICAgICAgIC8vIGV4dGVuZDxcbiAgICAgICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZSxcbiAgICAgICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgICAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8vICAgfT4sXG4gICAgICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PlxuICAgICAgICAvLyA+KFxuICAgICAgICAvLyAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAgICAgLy8gICBleHRlbmRTaGFwZTxULCBBdWdtZW50YXRpb24+LFxuICAgICAgICAvLyAgIFVua25vd25LZXlzLFxuICAgICAgICAvLyAgIENhdGNoYWxsLFxuICAgICAgICAvLyAgIE5ld091dHB1dCxcbiAgICAgICAgLy8gICBOZXdJbnB1dFxuICAgICAgICAvLyA+IHtcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIC8vICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgIC8vICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgLy8gICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgIC8vICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgLy8gICAgIH0pLFxuICAgICAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGAuZXh0ZW5kYCBpbnN0ZWFkXG4gICAgICAgICAqICAqL1xuICAgICAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgICB9XG4gICAgX2dldENhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSB1dGlsLm9iamVjdEtleXMoc2hhcGUpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSB7IHNoYXBlLCBrZXlzIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IHNoYXBlLCBrZXlzOiBzaGFwZUtleXMgfSA9IHRoaXMuX2dldENhY2hlZCgpO1xuICAgICAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICAgICAgaWYgKCEodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIgJiYgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSB0aGlzLl9kZWYuZXJyb3JNYXA/Lihpc3N1ZSwgY3R4KS5tZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlID8/IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyhtYXNrKSkge1xuICAgICAgICAgICAgaWYgKG1hc2tba2V5XSAmJiB0aGlzLnNoYXBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmICghbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYS5vcHRpb25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKSB7XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIGxldCBuZXdGaWVsZCA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXdGaWVsZCBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gbmV3RmllbGQuX2RlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gW251bGwsIC4uLmdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSldO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFJlYWRvbmx5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQ2F0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5fZGVmLmlubmVyVHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbmV4cG9ydCBjbGFzcyBab2REaXNjcmltaW5hdGVkVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlID0gY3R4LmRhdGFbZGlzY3JpbWluYXRvcl07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc01hcC5nZXQoZGlzY3JpbWluYXRvclZhbHVlKTtcbiAgICAgICAgaWYgKCFvcHRpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNNYXAua2V5cygpKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkaXNjcmltaW5hdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBvcHRpb25zTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnNNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlzY3JpbWluYXRlZCB1bmlvbiBzY2hlbWEuIEl0cyBiZWhhdmlvdXIgaXMgdmVyeSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIG5vcm1hbCB6LnVuaW9uKCkgY29uc3RydWN0b3IuXG4gICAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgICAqIGhhdmUgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIGVhY2ggb2JqZWN0IGluIHRoZSB1bmlvbi5cbiAgICAgKiBAcGFyYW0gZGlzY3JpbWluYXRvciB0aGUgbmFtZSBvZiB0aGUgZGlzY3JpbWluYXRvciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSB2YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlc1xuICAgICAgICBjb25zdCBvcHRpb25zTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyB0cnkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlcyA9IGdldERpc2NyaW1pbmF0b3IodHlwZS5zaGFwZVtkaXNjcmltaW5hdG9yXSk7XG4gICAgICAgICAgICBpZiAoIWRpc2NyaW1pbmF0b3JWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICAgICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNoYXJlZEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBzaGFyZWRWYWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0FycmF5LnB1c2goc2hhcmVkVmFsdWUuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiArYSA9PT0gK2IpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIHR5cGUgWm9kVHVwbGVJdGVtcyA9IFtab2RUeXBlQW55LCAuLi5ab2RUeXBlQW55W11dO1xuZXhwb3J0IGNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE1hcCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBrZXlTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5tYXApIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubWFwLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBbaW5kZXgsIFwia2V5XCJdKSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwgW2luZGV4LCBcInZhbHVlXCJdKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RNYXAuY3JlYXRlID0gKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgY3R4LnNjaGVtYUVycm9yTWFwLCBnZXRFcnJvck1hcCgpLCBkZWZhdWx0RXJyb3JNYXBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblR5cGVFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwIH07XG4gICAgICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9kZWYucmV0dXJucyBpbnN0YW5jZW9mIFpvZFByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhhc3luYyBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzID8gYXJncyA6IFpvZFR1cGxlLmNyZWF0ZShbXSkucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSksXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5zIHx8IFpvZFVua25vd24uY3JlYXRlKCksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNsYXNzIFpvZEVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5kYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuZXhwb3J0IGNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiYgY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgZW51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxufVxuWm9kTmF0aXZlRW51bS5jcmVhdGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYXRpdmVFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5wcm9taXNlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICAgICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QucmVmaW5lbWVudChhY2MsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHJlZmluZW1lbnQgZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IHsgWm9kRWZmZWN0cyBhcyBab2RUcmFuc2Zvcm1lciB9O1xuZXhwb3J0IGNsYXNzIFpvZE9wdGlvbmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE9wdGlvbmFsLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgQlJBTkQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUmVhZG9ubHkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaXNBc3luYyhyZXN1bHQpID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSkgOiBmcmVlemUocmVzdWx0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RSZWFkb25seS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICB6LmN1c3RvbSAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGNsZWFuUGFyYW1zKHBhcmFtcywgZGF0YSkge1xuICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oY2hlY2ssIF9wYXJhbXMgPSB7fSwgXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogUGFzcyBgZmF0YWxgIGludG8gdGhlIHBhcmFtcyBvYmplY3QgaW5zdGVhZDpcbiAqXG4gKiBgYGB0c1xuICogei5zdHJpbmcoKS5jdXN0b20oKHZhbCkgPT4gdmFsLmxlbmd0aCA+IDUsIHsgZmF0YWw6IGZhbHNlIH0pXG4gKiBgYGBcbiAqXG4gKi9cbmZhdGFsKSB7XG4gICAgaWYgKGNoZWNrKVxuICAgICAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSBwYXJhbXMuZmF0YWwgPz8gZmF0YWwgPz8gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCk7XG59XG5leHBvcnQgeyBab2RUeXBlIGFzIFNjaGVtYSwgWm9kVHlwZSBhcyBab2RTY2hlbWEgfTtcbmV4cG9ydCBjb25zdCBsYXRlID0ge1xuICAgIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGUsXG59O1xuZXhwb3J0IHZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuLy8gcmVxdWlyZXMgVFMgNC40K1xuY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl8pIHsgfVxufVxuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5leHBvcnQgY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuZXhwb3J0IHsgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGRhdGVUeXBlIGFzIGRhdGUsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1hcFR5cGUgYXMgbWFwLCBuYW5UeXBlIGFzIG5hbiwgbmF0aXZlRW51bVR5cGUgYXMgbmF0aXZlRW51bSwgbmV2ZXJUeXBlIGFzIG5ldmVyLCBudWxsVHlwZSBhcyBudWxsLCBudWxsYWJsZVR5cGUgYXMgbnVsbGFibGUsIG51bWJlclR5cGUgYXMgbnVtYmVyLCBvYmplY3RUeXBlIGFzIG9iamVjdCwgb2Jvb2xlYW4sIG9udW1iZXIsIG9wdGlvbmFsVHlwZSBhcyBvcHRpb25hbCwgb3N0cmluZywgcGlwZWxpbmVUeXBlIGFzIHBpcGVsaW5lLCBwcmVwcm9jZXNzVHlwZSBhcyBwcmVwcm9jZXNzLCBwcm9taXNlVHlwZSBhcyBwcm9taXNlLCByZWNvcmRUeXBlIGFzIHJlY29yZCwgc2V0VHlwZSBhcyBzZXQsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHZvaWRUeXBlIGFzIHZvaWQsIH07XG5leHBvcnQgY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQW55RGVmKCkge1xuICAgIHJldHVybiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFueS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQXJyYXlEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgIH07XG4gICAgaWYgKGRlZi50eXBlPy5fZGVmPy50eXBlTmFtZSAhPT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSkge1xuICAgICAgICByZXMuaXRlbXMgPSBwYXJzZURlZihkZWYudHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWYubWluTGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYubWluTGVuZ3RoLnZhbHVlLCBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heEl0ZW1zJywgZGVmLm1heExlbmd0aC52YWx1ZSwgZGVmLm1heExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgaWYgKGRlZi5leGFjdExlbmd0aCkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkl0ZW1zJywgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlLCBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5Lm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ2ludDY0JyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaWdpbnQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUJvb2xlYW5EZWYoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib29sZWFuLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJyYW5kZWREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiBwYXJzZURlZihfZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icmFuZGVkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZUNhdGNoRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhdGNoLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgb3ZlcnJpZGVEYXRlU3RyYXRlZ3kpIHtcbiAgICBjb25zdCBzdHJhdGVneSA9IG92ZXJyaWRlRGF0ZVN0cmF0ZWd5ID8/IHJlZnMuZGF0ZVN0cmF0ZWd5O1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0cmF0ZWd5KSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW55T2Y6IHN0cmF0ZWd5Lm1hcCgoaXRlbSwgaSkgPT4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcywgaXRlbSkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzd2l0Y2ggKHN0cmF0ZWd5KSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGNhc2UgJ2Zvcm1hdDpkYXRlLXRpbWUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlLXRpbWUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdkYXRlJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgJ2ludGVnZXInOlxuICAgICAgICAgICAgcmV0dXJuIGludGVnZXJEYXRlUGFyc2VyKGRlZiwgcmVmcyk7XG4gICAgfVxufVxuY29uc3QgaW50ZWdlckRhdGVQYXJzZXIgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnaW50ZWdlcicsXG4gICAgICAgIGZvcm1hdDogJ3VuaXgtdGltZScsXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgZm9yIChjb25zdCBjaGVjayBvZiBkZWYuY2hlY2tzKSB7XG4gICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIC8vIFRoaXMgaXMgaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRlLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZmF1bHREZWYoX2RlZiwgcmVmcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnBhcnNlRGVmKF9kZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpLFxuICAgICAgICBkZWZhdWx0OiBfZGVmLmRlZmF1bHRWYWx1ZSgpLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVmZmVjdHNEZWYoX2RlZiwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgcmV0dXJuIHJlZnMuZWZmZWN0U3RyYXRlZ3kgPT09ICdpbnB1dCcgPyBwYXJzZURlZihfZGVmLnNjaGVtYS5fZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIDoge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lZmZlY3RzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VFbnVtRGVmKGRlZikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICBlbnVtOiBbLi4uZGVmLnZhbHVlc10sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVudW0ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuY29uc3QgaXNKc29uU2NoZW1hN0FsbE9mVHlwZSA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKCd0eXBlJyBpbiB0eXBlICYmIHR5cGUudHlwZSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gJ2FsbE9mJyBpbiB0eXBlO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUludGVyc2VjdGlvbkRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBhbGxPZiA9IFtcbiAgICAgICAgcGFyc2VEZWYoZGVmLmxlZnQuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FsbE9mJywgJzAnXSxcbiAgICAgICAgfSksXG4gICAgICAgIHBhcnNlRGVmKGRlZi5yaWdodC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMSddLFxuICAgICAgICB9KSxcbiAgICBdLmZpbHRlcigoeCkgPT4gISF4KTtcbiAgICBsZXQgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gcmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScgPyB7IHVuZXZhbHVhdGVkUHJvcGVydGllczogZmFsc2UgfSA6IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtZXJnZWRBbGxPZiA9IFtdO1xuICAgIC8vIElmIGVpdGhlciBvZiB0aGUgc2NoZW1hcyBpcyBhbiBhbGxPZiwgbWVyZ2UgdGhlbSBpbnRvIGEgc2luZ2xlIGFsbE9mXG4gICAgYWxsT2YuZm9yRWFjaCgoc2NoZW1hKSA9PiB7XG4gICAgICAgIGlmIChpc0pzb25TY2hlbWE3QWxsT2ZUeXBlKHNjaGVtYSkpIHtcbiAgICAgICAgICAgIG1lcmdlZEFsbE9mLnB1c2goLi4uc2NoZW1hLmFsbE9mKTtcbiAgICAgICAgICAgIGlmIChzY2hlbWEudW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBvbmUgb2YgdGhlIHNjaGVtYXMgaGFzIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXQsXG4gICAgICAgICAgICAgICAgLy8gdGhlIG1lcmdlZCBzY2hlbWEgc2hvdWxkIGFsc28gaGF2ZSBubyB1bmV2YWx1YXRlZFByb3BlcnRpZXMgc2V0XG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG5lc3RlZFNjaGVtYSA9IHNjaGVtYTtcbiAgICAgICAgICAgIGlmICgnYWRkaXRpb25hbFByb3BlcnRpZXMnIGluIHNjaGVtYSAmJiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBhZGRpdGlvbmFsUHJvcGVydGllcywgLi4ucmVzdCB9ID0gc2NoZW1hO1xuICAgICAgICAgICAgICAgIG5lc3RlZFNjaGVtYSA9IHJlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBcyBzb29uIGFzIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgYWRkaXRpb25hbFByb3BlcnRpZXMgc2V0IG5vdCB0byBmYWxzZSwgd2UgYWxsb3cgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaChuZXN0ZWRTY2hlbWEpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1lcmdlZEFsbE9mLmxlbmd0aCA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIGFsbE9mOiBtZXJnZWRBbGxPZixcbiAgICAgICAgICAgIC4uLnVuZXZhbHVhdGVkUHJvcGVydGllcyxcbiAgICAgICAgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdGlvbi5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTGl0ZXJhbERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBwYXJzZWRUeXBlID0gdHlwZW9mIGRlZi52YWx1ZTtcbiAgICBpZiAocGFyc2VkVHlwZSAhPT0gJ2JpZ2ludCcgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ251bWJlcicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ2Jvb2xlYW4nICYmXG4gICAgICAgIHBhcnNlZFR5cGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBBcnJheS5pc0FycmF5KGRlZi52YWx1ZSkgPyAnYXJyYXknIDogJ29iamVjdCcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICAgICAgZW51bTogW2RlZi52YWx1ZV0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGUgPT09ICdiaWdpbnQnID8gJ2ludGVnZXInIDogcGFyc2VkVHlwZSxcbiAgICAgICAgY29uc3Q6IGRlZi52YWx1ZSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0ZXJhbC5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xubGV0IGVtb2ppUmVnZXg7XG4vKipcbiAqIEdlbmVyYXRlZCBmcm9tIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zIGZvdW5kIGhlcmUgYXMgb2YgMjAyNC0wNS0yMjpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9ibG9iL21hc3Rlci9zcmMvdHlwZXMudHMuXG4gKlxuICogRXhwcmVzc2lvbnMgd2l0aCAvaSBmbGFnIGhhdmUgYmVlbiBjaGFuZ2VkIGFjY29yZGluZ2x5LlxuICovXG5leHBvcnQgY29uc3Qgem9kUGF0dGVybnMgPSB7XG4gICAgLyoqXG4gICAgICogYGNgIHdhcyBjaGFuZ2VkIHRvIGBbY0NdYCB0byByZXBsaWNhdGUgL2kgZmxhZ1xuICAgICAqL1xuICAgIGN1aWQ6IC9eW2NDXVteXFxzLV17OCx9JC8sXG4gICAgY3VpZDI6IC9eWzAtOWEtel0rJC8sXG4gICAgdWxpZDogL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC8sXG4gICAgLyoqXG4gICAgICogYGEtemAgd2FzIGFkZGVkIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgZW1haWw6IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbYS16QS1aMC05XycrXFwtXFwuXSopW2EtekEtWjAtOV8rLV1AKFthLXpBLVowLTldW2EtekEtWjAtOVxcLV0qXFwuKStbYS16QS1aXXsyLH0kLyxcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RlZCBhIHZhbGlkIFVuaWNvZGUgUmVnRXhwXG4gICAgICpcbiAgICAgKiBMYXppbHkgaW5zdGFudGlhdGUgc2luY2UgdGhpcyB0eXBlIG9mIHJlZ2V4IGlzbid0IHN1cHBvcnRlZFxuICAgICAqIGluIGFsbCBlbnZzIChlLmcuIFJlYWN0IE5hdGl2ZSkuXG4gICAgICpcbiAgICAgKiBTZWU6XG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2lzc3Vlcy8yNDMzXG4gICAgICogRml4IGluIFpvZDpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvY29tbWl0LzkzNDBmZDUxZTQ4NTc2YTc1YWRjOTE5YmZmNjVkYmM0YTVkNGM5OWJcbiAgICAgKi9cbiAgICBlbW9qaTogKCkgPT4ge1xuICAgICAgICBpZiAoZW1vamlSZWdleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBlbW9qaVJlZ2V4ID0gUmVnRXhwKCdeKFxcXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY318XFxcXHB7RW1vamlfQ29tcG9uZW50fSkrJCcsICd1Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtb2ppUmVnZXg7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICB1dWlkOiAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvLFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIGlwdjQ6IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pJC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NjogL14oKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpJC8sXG4gICAgYmFzZTY0OiAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC8sXG4gICAgbmFub2lkOiAvXlthLXpBLVowLTlfLV17MjF9JC8sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgfTtcbiAgICBmdW5jdGlvbiBwcm9jZXNzUGF0dGVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gcmVmcy5wYXR0ZXJuU3RyYXRlZ3kgPT09ICdlc2NhcGUnID8gZXNjYXBlTm9uQWxwaGFOdW1lcmljKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cbiAgICBpZiAoZGVmLmNoZWNrcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hlY2sua2luZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdtYXgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuZW1haWxTdHJhdGVneSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0OmVtYWlsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDppZG4tZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpZG4tZW1haWwnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuZW1haWwsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VybCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1cmknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXVpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd1dWlkJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JlZ2V4JzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIGNoZWNrLnJlZ2V4LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnY3VpZDInOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuY3VpZDIsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFydHNXaXRoJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIFJlZ0V4cChgXiR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfWApLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kc1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGAke3Byb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKX0kYCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRldGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlLXRpbWUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkYXRlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWUnOlxuICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAndGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkdXJhdGlvbic6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdkdXJhdGlvbicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbkxlbmd0aCcsIHR5cGVvZiByZXMubWluTGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWF4KHJlcy5taW5MZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhMZW5ndGgnLCB0eXBlb2YgcmVzLm1heExlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1pbihyZXMubWF4TGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2luY2x1ZGVzJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKHByb2Nlc3NQYXR0ZXJuKGNoZWNrLnZhbHVlKSksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnaXAnOiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay52ZXJzaW9uICE9PSAndjQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGb3JtYXQocmVzLCAnaXB2NicsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdlbW9qaSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbW9qaSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3VsaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy51bGlkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChyZWZzLmJhc2U2NFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6YmluYXJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdiaW5hcnknLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRFbmNvZGluZzpiYXNlNjQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdjb250ZW50RW5jb2RpbmcnLCAnYmFzZTY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXR0ZXJuOnpvZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMuYmFzZTY0LCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnbmFub2lkJzoge1xuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgem9kUGF0dGVybnMubmFub2lkLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAndG9Mb3dlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvVXBwZXJDYXNlJzpcbiAgICAgICAgICAgICAgICBjYXNlICd0cmltJzpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgKChfKSA9PiB7IH0pKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuY29uc3QgZXNjYXBlTm9uQWxwaGFOdW1lcmljID0gKHZhbHVlKSA9PiBBcnJheS5mcm9tKHZhbHVlKVxuICAgIC5tYXAoKGMpID0+ICgvW2EtekEtWjAtOV0vLnRlc3QoYykgPyBjIDogYFxcXFwke2N9YCkpXG4gICAgLmpvaW4oJycpO1xuY29uc3QgYWRkRm9ybWF0ID0gKHNjaGVtYSwgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLmZvcm1hdCB8fCBzY2hlbWEuYW55T2Y/LnNvbWUoKHgpID0+IHguZm9ybWF0KSkge1xuICAgICAgICBpZiAoIXNjaGVtYS5hbnlPZikge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mID0gW107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNjaGVtYS5mb3JtYXQpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHNjaGVtYS5mb3JtYXQsXG4gICAgICAgICAgICAgICAgLi4uKHNjaGVtYS5lcnJvck1lc3NhZ2UgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogc2NoZW1hLmVycm9yTWVzc2FnZS5mb3JtYXQgfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5mb3JtYXQ7XG4gICAgICAgICAgICBpZiAoc2NoZW1hLmVycm9yTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdDtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYW55T2YucHVzaCh7XG4gICAgICAgICAgICBmb3JtYXQ6IHZhbHVlLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IGZvcm1hdDogbWVzc2FnZSB9IH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnZm9ybWF0JywgdmFsdWUsIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG5jb25zdCBhZGRQYXR0ZXJuID0gKHNjaGVtYSwgcmVnZXgsIG1lc3NhZ2UsIHJlZnMpID0+IHtcbiAgICBpZiAoc2NoZW1hLnBhdHRlcm4gfHwgc2NoZW1hLmFsbE9mPy5zb21lKCh4KSA9PiB4LnBhdHRlcm4pKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFsbE9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYWxsT2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLnBhdHRlcm4pIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuOiBzY2hlbWEucGF0dGVybixcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgcGF0dGVybjogc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuIH0sXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEucGF0dGVybjtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UucGF0dGVybjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoc2NoZW1hLmVycm9yTWVzc2FnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzY2hlbWEuZXJyb3JNZXNzYWdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzY2hlbWEuYWxsT2YucHVzaCh7XG4gICAgICAgICAgICBwYXR0ZXJuOiBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSxcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICYmIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7IGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdwYXR0ZXJuJywgcHJvY2Vzc1JlZ0V4cChyZWdleCwgcmVmcyksIG1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbn07XG4vLyBNdXRhdGUgei5zdHJpbmcucmVnZXgoKSBpbiBhIGJlc3QgYXR0ZW1wdCB0byBhY2NvbW1vZGF0ZSBmb3IgcmVnZXggZmxhZ3Mgd2hlbiBhcHBseVJlZ2V4RmxhZ3MgaXMgdHJ1ZVxuY29uc3QgcHJvY2Vzc1JlZ0V4cCA9IChyZWdleE9yRnVuY3Rpb24sIHJlZnMpID0+IHtcbiAgICBjb25zdCByZWdleCA9IHR5cGVvZiByZWdleE9yRnVuY3Rpb24gPT09ICdmdW5jdGlvbicgPyByZWdleE9yRnVuY3Rpb24oKSA6IHJlZ2V4T3JGdW5jdGlvbjtcbiAgICBpZiAoIXJlZnMuYXBwbHlSZWdleEZsYWdzIHx8ICFyZWdleC5mbGFncylcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICAvLyBDdXJyZW50bHkgaGFuZGxlZCBmbGFnc1xuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgICBpOiByZWdleC5mbGFncy5pbmNsdWRlcygnaScpLCAvLyBDYXNlLWluc2Vuc2l0aXZlXG4gICAgICAgIG06IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdtJyksIC8vIGBeYCBhbmQgYCRgIG1hdGNoZXMgYWRqYWNlbnQgdG8gbmV3bGluZSBjaGFyYWN0ZXJzXG4gICAgICAgIHM6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdzJyksIC8vIGAuYCBtYXRjaGVzIG5ld2xpbmVzXG4gICAgfTtcbiAgICAvLyBUaGUgZ2VuZXJhbCBwcmluY2lwbGUgaGVyZSBpcyB0byBzdGVwIHRocm91Z2ggZWFjaCBjaGFyYWN0ZXIsIG9uZSBhdCBhIHRpbWUsIGFwcGx5aW5nIG11dGF0aW9ucyBhcyBmbGFncyByZXF1aXJlLiBXZSBrZWVwIHRyYWNrIHdoZW4gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGlzIGVzY2FwZWQsIGFuZCB3aGVuIGl0J3MgaW5zaWRlIGEgZ3JvdXAgL2xpa2UgW3RoaXNdLyBvciAoYWxzbykgYSByYW5nZSBsaWtlIC9bYS16XS8uIFRoZSBmb2xsb3dpbmcgaXMgZmFpcmx5IGJyaXR0bGUgaW1wZXJhdGl2ZSBjb2RlOyBlZGl0IGF0IHlvdXIgcGVyaWwhXG4gICAgY29uc3Qgc291cmNlID0gZmxhZ3MuaSA/IHJlZ2V4LnNvdXJjZS50b0xvd2VyQ2FzZSgpIDogcmVnZXguc291cmNlO1xuICAgIGxldCBwYXR0ZXJuID0gJyc7XG4gICAgbGV0IGlzRXNjYXBlZCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgIGxldCBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc291cmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc0VzY2FwZWQpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MuaSkge1xuICAgICAgICAgICAgaWYgKGluQ2hhckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVtpXS5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5DaGFyUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBgJHtzb3VyY2VbaSAtIDJdfS0ke3NvdXJjZVtpXX1gLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpICsgMV0gPT09ICctJyAmJiBzb3VyY2VbaSArIDJdPy5tYXRjaCgvW2Etel0vKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkNoYXJSYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpXX0ke3NvdXJjZVtpXS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgWyR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9XWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLm0pIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VbaV0gPT09ICdeJykge1xuICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYChefCg/PD1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNvdXJjZVtpXSA9PT0gJyQnKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKCR8KD89W1xcclxcbl0pKWA7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzLnMgJiYgc291cmNlW2ldID09PSAnLicpIHtcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gaW5DaGFyR3JvdXAgPyBgJHtzb3VyY2VbaV19XFxyXFxuYCA6IGBbJHtzb3VyY2VbaV19XFxyXFxuXWA7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ10nKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbkNoYXJHcm91cCAmJiBzb3VyY2VbaV0gPT09ICdbJykge1xuICAgICAgICAgICAgaW5DaGFyR3JvdXAgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4VGVzdCA9IG5ldyBSZWdFeHAocGF0dGVybik7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgY29udmVydCByZWdleCBwYXR0ZXJuIGF0ICR7cmVmcy5jdXJyZW50UGF0aC5qb2luKCcvJyl9IHRvIGEgZmxhZy1pbmRlcGVuZGVudCBmb3JtISBGYWxsaW5nIGJhY2sgdG8gdGhlIGZsYWctaWdub3JhbnQgc291cmNlYCk7XG4gICAgICAgIHJldHVybiByZWdleC5zb3VyY2U7XG4gICAgfVxuICAgIHJldHVybiBwYXR0ZXJuO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9zdHJpbmcubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnICYmIGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgICByZXF1aXJlZDogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLmFjYyxcbiAgICAgICAgICAgICAgICBba2V5XTogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLFxuICAgICAgICAgICAgICAgIH0pID8/IHt9LFxuICAgICAgICAgICAgfSksIHt9KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgIH0pID8/IHt9LFxuICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxuICAgIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyAmJiBkZWYua2V5VHlwZS5fZGVmLmNoZWNrcz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSBPYmplY3QuZW50cmllcyhwYXJzZVN0cmluZ0RlZihkZWYua2V5VHlwZS5fZGVmLCByZWZzKSkucmVkdWNlKChhY2MsIFtrZXksIHZhbHVlXSkgPT4gKGtleSA9PT0gJ3R5cGUnID8gYWNjIDogeyAuLi5hY2MsIFtrZXldOiB2YWx1ZSB9KSwge30pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICAgICAgcHJvcGVydHlOYW1lczoga2V5VHlwZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiB7XG4gICAgICAgICAgICAgICAgZW51bTogZGVmLmtleVR5cGUuX2RlZi52YWx1ZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVjb3JkLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcmVjb3JkLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWFwRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLm1hcFN0cmF0ZWd5ID09PSAncmVjb3JkJykge1xuICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICB9XG4gICAgY29uc3Qga2V5cyA9IHBhcnNlRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCAnaXRlbXMnLCAnMCddLFxuICAgIH0pIHx8IHt9O1xuICAgIGNvbnN0IHZhbHVlcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcxJ10sXG4gICAgfSkgfHwge307XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgbWF4SXRlbXM6IDEyNSxcbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBpdGVtczogW2tleXMsIHZhbHVlc10sXG4gICAgICAgICAgICBtaW5JdGVtczogMixcbiAgICAgICAgICAgIG1heEl0ZW1zOiAyLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gZGVmLnZhbHVlcztcbiAgICBjb25zdCBhY3R1YWxLZXlzID0gT2JqZWN0LmtleXMoZGVmLnZhbHVlcykuZmlsdGVyKChrZXkpID0+IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmplY3Rbb2JqZWN0W2tleV1dICE9PSAnbnVtYmVyJztcbiAgICB9KTtcbiAgICBjb25zdCBhY3R1YWxWYWx1ZXMgPSBhY3R1YWxLZXlzLm1hcCgoa2V5KSA9PiBvYmplY3Rba2V5XSk7XG4gICAgY29uc3QgcGFyc2VkVHlwZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoYWN0dWFsVmFsdWVzLm1hcCgodmFsdWVzKSA9PiB0eXBlb2YgdmFsdWVzKSkpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBhcnNlZFR5cGVzLmxlbmd0aCA9PT0gMSA/XG4gICAgICAgICAgICBwYXJzZWRUeXBlc1swXSA9PT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgICAgICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgOiAnbnVtYmVyJ1xuICAgICAgICAgICAgOiBbJ3N0cmluZycsICdudW1iZXInXSxcbiAgICAgICAgZW51bTogYWN0dWFsVmFsdWVzLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXRpdmVFbnVtLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOZXZlckRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uZXZlci5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTnVsbERlZihyZWZzKSB7XG4gICAgcmV0dXJuIHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnID9cbiAgICAgICAge1xuICAgICAgICAgICAgZW51bTogWydudWxsJ10sXG4gICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6ICdudWxsJyxcbiAgICAgICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGwubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHByaW1pdGl2ZU1hcHBpbmdzID0ge1xuICAgIFpvZFN0cmluZzogJ3N0cmluZycsXG4gICAgWm9kTnVtYmVyOiAnbnVtYmVyJyxcbiAgICBab2RCaWdJbnQ6ICdpbnRlZ2VyJyxcbiAgICBab2RCb29sZWFuOiAnYm9vbGVhbicsXG4gICAgWm9kTnVsbDogJ251bGwnLFxufTtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuaW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJylcbiAgICAgICAgcmV0dXJuIGFzQW55T2YoZGVmLCByZWZzKTtcbiAgICBjb25zdCBvcHRpb25zID0gZGVmLm9wdGlvbnMgaW5zdGFuY2VvZiBNYXAgPyBBcnJheS5mcm9tKGRlZi5vcHRpb25zLnZhbHVlcygpKSA6IGRlZi5vcHRpb25zO1xuICAgIC8vIFRoaXMgYmxvY2tzIHRyaWVzIHRvIGxvb2sgYWhlYWQgYSBiaXQgdG8gcHJvZHVjZSBuaWNlciBsb29raW5nIHNjaGVtYXMgd2l0aCB0eXBlIGFycmF5IGluc3RlYWQgb2YgYW55T2YuXG4gICAgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSBpbiBwcmltaXRpdmVNYXBwaW5ncyAmJiAoIXguX2RlZi5jaGVja3MgfHwgIXguX2RlZi5jaGVja3MubGVuZ3RoKSkpIHtcbiAgICAgICAgLy8gYWxsIHR5cGVzIGluIHVuaW9uIGFyZSBwcmltaXRpdmUgYW5kIGxhY2sgY2hlY2tzLCBzbyBtaWdodCBhcyB3ZWxsIHNxdWFzaCBpbnRvIHt0eXBlOiBbLi4uXX1cbiAgICAgICAgY29uc3QgdHlwZXMgPSBvcHRpb25zLnJlZHVjZSgodHlwZXMsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBwcmltaXRpdmVNYXBwaW5nc1t4Ll9kZWYudHlwZU5hbWVdOyAvL0NhbiBiZSBzYWZlbHkgY2FzdGVkIGR1ZSB0byByb3cgNDNcbiAgICAgICAgICAgIHJldHVybiB0eXBlICYmICF0eXBlcy5pbmNsdWRlcyh0eXBlKSA/IFsuLi50eXBlcywgdHlwZV0gOiB0eXBlcztcbiAgICAgICAgfSwgW10pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdHlwZXMubGVuZ3RoID4gMSA/IHR5cGVzIDogdHlwZXNbMF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZExpdGVyYWwnICYmICF4LmRlc2NyaXB0aW9uKSkge1xuICAgICAgICAvLyBhbGwgb3B0aW9ucyBsaXRlcmFsc1xuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgeC5fZGVmLnZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgdHlwZV07XG4gICAgICAgICAgICAgICAgY2FzZSAnYmlnaW50JzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdpbnRlZ2VyJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHguX2RlZi52YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCAnbnVsbCddO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgW10pO1xuICAgICAgICBpZiAodHlwZXMubGVuZ3RoID09PSBvcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gYWxsIHRoZSBsaXRlcmFscyBhcmUgcHJpbWl0aXZlLCBhcyBmYXIgYXMgbnVsbCBjYW4gYmUgY29uc2lkZXJlZCBwcmltaXRpdmVcbiAgICAgICAgICAgIGNvbnN0IHVuaXF1ZVR5cGVzID0gdHlwZXMuZmlsdGVyKCh4LCBpLCBhKSA9PiBhLmluZGV4T2YoeCkgPT09IGkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlxdWVUeXBlcy5sZW5ndGggPiAxID8gdW5pcXVlVHlwZXMgOiB1bmlxdWVUeXBlc1swXSxcbiAgICAgICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2MuaW5jbHVkZXMoeC5fZGVmLnZhbHVlKSA/IGFjYyA6IFsuLi5hY2MsIHguX2RlZi52YWx1ZV07XG4gICAgICAgICAgICAgICAgfSwgW10pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmV2ZXJ5KCh4KSA9PiB4Ll9kZWYudHlwZU5hbWUgPT09ICdab2RFbnVtJykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgZW51bTogb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4gWy4uLmFjYywgLi4ueC5fZGVmLnZhbHVlcy5maWx0ZXIoKHgpID0+ICFhY2MuaW5jbHVkZXMoeCkpXSwgW10pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xufVxuY29uc3QgYXNBbnlPZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCBhbnlPZiA9IChkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnMpXG4gICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsIGAke2l9YF0sXG4gICAgfSkpXG4gICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCAmJiAoIXJlZnMuc3RyaWN0VW5pb25zIHx8ICh0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoeCkubGVuZ3RoID4gMCkpKTtcbiAgICByZXR1cm4gYW55T2YubGVuZ3RoID8geyBhbnlPZiB9IDogdW5kZWZpbmVkO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuaW9uLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IHByaW1pdGl2ZU1hcHBpbmdzIH0gZnJvbSBcIi4vdW5pb24ubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoWydab2RTdHJpbmcnLCAnWm9kTnVtYmVyJywgJ1pvZEJpZ0ludCcsICdab2RCb29sZWFuJywgJ1pvZE51bGwnXS5pbmNsdWRlcyhkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWUpICYmXG4gICAgICAgICghZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcyB8fCAhZGVmLmlubmVyVHlwZS5fZGVmLmNoZWNrcy5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJyB8fCByZWZzLm51bGxhYmxlU3RyYXRlZ3kgPT09ICdwcm9wZXJ0eScpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogcHJpbWl0aXZlTWFwcGluZ3NbZGVmLmlubmVyVHlwZS5fZGVmLnR5cGVOYW1lXSxcbiAgICAgICAgICAgICAgICBudWxsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFtwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLCAnbnVsbCddLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aF0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoYmFzZSAmJiAnJHJlZicgaW4gYmFzZSlcbiAgICAgICAgICAgIHJldHVybiB7IGFsbE9mOiBbYmFzZV0sIG51bGxhYmxlOiB0cnVlIH07XG4gICAgICAgIHJldHVybiBiYXNlICYmIHsgLi4uYmFzZSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICB9XG4gICAgY29uc3QgYmFzZSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcwJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGJhc2UgJiYgeyBhbnlPZjogW2Jhc2UsIHsgdHlwZTogJ251bGwnIH1dIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udWxsYWJsZS5tanMubWFwIiwiaW1wb3J0IHsgYWRkRXJyb3JNZXNzYWdlLCBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VOdW1iZXJEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICB9O1xuICAgIGlmICghZGVmLmNoZWNrcylcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdpbnQnOlxuICAgICAgICAgICAgICAgIHJlcy50eXBlID0gJ2ludGVnZXInO1xuICAgICAgICAgICAgICAgIGFkZEVycm9yTWVzc2FnZShyZXMsICd0eXBlJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWE3Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2V4Y2x1c2l2ZU1pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2suaW5jbHVzaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZXhjbHVzaXZlTWluaW11bSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5pbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNYXhpbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbXVsdGlwbGVPZic6XG4gICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtdWx0aXBsZU9mJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1udW1iZXIubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZnVuY3Rpb24gZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMucmVtb3ZlQWRkaXRpb25hbFN0cmF0ZWd5ID09PSAnc3RyaWN0Jykge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzICE9PSAnc3RyaWN0J1xuICAgICAgICAgICAgOiBwYXJzZURlZihkZWYuY2F0Y2hhbGwuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgICAgIH0pID8/IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGVmLmNhdGNoYWxsLl9kZWYudHlwZU5hbWUgPT09ICdab2ROZXZlcicgP1xuICAgICAgICAgICAgZGVmLnVua25vd25LZXlzID09PSAncGFzc3Rocm91Z2gnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgLi4uT2JqZWN0LmVudHJpZXMoZGVmLnNoYXBlKCkpLnJlZHVjZSgoYWNjLCBbcHJvcE5hbWUsIHByb3BEZWZdKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJvcERlZiA9PT0gdW5kZWZpbmVkIHx8IHByb3BEZWYuX2RlZiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eVBhdGggPSBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ3Byb3BlcnRpZXMnLCBwcm9wTmFtZV07XG4gICAgICAgICAgICBjb25zdCBwYXJzZWREZWYgPSBwYXJzZURlZihwcm9wRGVmLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICAgICAgcHJvcGVydHlQYXRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAocGFyc2VkRGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGlmIChyZWZzLm9wZW5haVN0cmljdE1vZGUgJiZcbiAgICAgICAgICAgICAgICBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJlxuICAgICAgICAgICAgICAgICFwcm9wRGVmLmlzTnVsbGFibGUoKSAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBwcm9wRGVmLl9kZWY/LmRlZmF1bHRWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFpvZCBmaWVsZCBhdCBcXGAke3Byb3BlcnR5UGF0aC5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWNjLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgICAgIFtwcm9wTmFtZV06IHBhcnNlZERlZixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBwcm9wRGVmLmlzT3B0aW9uYWwoKSAmJiAhcmVmcy5vcGVuYWlTdHJpY3RNb2RlID8gYWNjLnJlcXVpcmVkIDogWy4uLmFjYy5yZXF1aXJlZCwgcHJvcE5hbWVdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSwgeyBwcm9wZXJ0aWVzOiB7fSwgcmVxdWlyZWQ6IFtdIH0pLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMoZGVmLCByZWZzKSxcbiAgICB9O1xuICAgIGlmICghcmVzdWx0LnJlcXVpcmVkLmxlbmd0aClcbiAgICAgICAgZGVsZXRlIHJlc3VsdC5yZXF1aXJlZDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqZWN0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZU9wdGlvbmFsRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnByb3BlcnR5UGF0aCAmJlxuICAgICAgICByZWZzLmN1cnJlbnRQYXRoLnNsaWNlKDAsIHJlZnMucHJvcGVydHlQYXRoLmxlbmd0aCkudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGgudG9TdHJpbmcoKSkge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiByZWZzLmN1cnJlbnRQYXRoIH0pO1xuICAgIH1cbiAgICBjb25zdCBpbm5lclNjaGVtYSA9IHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbnlPZicsICcxJ10sXG4gICAgfSk7XG4gICAgcmV0dXJuIGlubmVyU2NoZW1hID9cbiAgICAgICAge1xuICAgICAgICAgICAgYW55T2Y6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5vdDoge30sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbm5lclNjaGVtYSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH1cbiAgICAgICAgOiB7fTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcHRpb25hbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VQaXBlbGluZURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbi5fZGVmLCByZWZzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy5waXBlU3RyYXRlZ3kgPT09ICdvdXRwdXQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBhID0gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgIH0pO1xuICAgIGNvbnN0IGIgPSBwYXJzZURlZihkZWYub3V0Ll9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCBhID8gJzEnIDogJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhbGxPZjogW2EsIGJdLmZpbHRlcigoeCkgPT4geCAhPT0gdW5kZWZpbmVkKSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcGVsaW5lLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVByb21pc2VEZWYoZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvbWlzZS5tanMubWFwIiwiaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZXREZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnXSxcbiAgICB9KTtcbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIHVuaXF1ZUl0ZW1zOiB0cnVlLFxuICAgICAgICBpdGVtcyxcbiAgICB9O1xuICAgIGlmIChkZWYubWluU2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21pbkl0ZW1zJywgZGVmLm1pblNpemUudmFsdWUsIGRlZi5taW5TaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLm1heFNpemUpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdtYXhJdGVtcycsIGRlZi5tYXhTaXplLnZhbHVlLCBkZWYubWF4U2l6ZS5tZXNzYWdlLCByZWZzKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAoZGVmLnJlc3QpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIGl0ZW1zOiBkZWYuaXRlbXNcbiAgICAgICAgICAgICAgICAubWFwKCh4LCBpKSA9PiBwYXJzZURlZih4Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgYCR7aX1gXSxcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgeCkgPT4gKHggPT09IHVuZGVmaW5lZCA/IGFjYyA6IFsuLi5hY2MsIHhdKSwgW10pLFxuICAgICAgICAgICAgYWRkaXRpb25hbEl0ZW1zOiBwYXJzZURlZihkZWYucmVzdC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsSXRlbXMnXSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICBtaW5JdGVtczogZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIG1heEl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHVwbGUubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVuZGVmaW5lZERlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBub3Q6IHt9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmRlZmluZWQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZVVua25vd25EZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5rbm93bi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcGFyc2VSZWFkb25seURlZiA9IChkZWYsIHJlZnMpID0+IHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCByZWZzKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFkb25seS5tanMubWFwIiwiaW1wb3J0IHsgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIH0gZnJvbSAnem9kL3YzJztcbmltcG9ydCB7IHBhcnNlQW55RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hbnkubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUFycmF5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9hcnJheS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQmlnaW50RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9iaWdpbnQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJvb2xlYW5EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2Jvb2xlYW4ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUJyYW5kZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JyYW5kZWQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUNhdGNoRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9jYXRjaC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGF0ZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGF0ZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlRGVmYXVsdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvZGVmYXVsdC5tanNcIjtcbmltcG9ydCB7IHBhcnNlRWZmZWN0c0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvZWZmZWN0cy5tanNcIjtcbmltcG9ydCB7IHBhcnNlRW51bURlZiB9IGZyb20gXCIuL3BhcnNlcnMvZW51bS5tanNcIjtcbmltcG9ydCB7IHBhcnNlSW50ZXJzZWN0aW9uRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZUxpdGVyYWxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2xpdGVyYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU1hcERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbWFwLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOYXRpdmVFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uYXRpdmVFbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOZXZlckRlZiB9IGZyb20gXCIuL3BhcnNlcnMvbmV2ZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU51bGxhYmxlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udWxsYWJsZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVtYmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9udW1iZXIubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9iamVjdERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb2JqZWN0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VPcHRpb25hbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvb3B0aW9uYWwubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVBpcGVsaW5lRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9waXBlbGluZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvbWlzZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcHJvbWlzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVjb3JkRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWNvcmQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVNldERlZiB9IGZyb20gXCIuL3BhcnNlcnMvc2V0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VTdHJpbmdEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3N0cmluZy5tanNcIjtcbmltcG9ydCB7IHBhcnNlVHVwbGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3R1cGxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmRlZmluZWREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuZGVmaW5lZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlVW5pb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3VuaW9uLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmtub3duRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy91bmtub3duLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFkb25seURlZiB9IGZyb20gXCIuL3BhcnNlcnMvcmVhZG9ubHkubWpzXCI7XG5pbXBvcnQgeyBpZ25vcmVPdmVycmlkZSB9IGZyb20gXCIuL09wdGlvbnMubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24gPSBmYWxzZSkge1xuICAgIGNvbnN0IHNlZW5JdGVtID0gcmVmcy5zZWVuLmdldChkZWYpO1xuICAgIGlmIChyZWZzLm92ZXJyaWRlKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlUmVzdWx0ID0gcmVmcy5vdmVycmlkZT8uKGRlZiwgcmVmcywgc2Vlbkl0ZW0sIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGlmIChvdmVycmlkZVJlc3VsdCAhPT0gaWdub3JlT3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvdmVycmlkZVJlc3VsdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc2Vlbkl0ZW0gJiYgIWZvcmNlUmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCBzZWVuU2NoZW1hID0gZ2V0JHJlZihzZWVuSXRlbSwgcmVmcyk7XG4gICAgICAgIGlmIChzZWVuU2NoZW1hICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICgnJHJlZicgaW4gc2VlblNjaGVtYSkge1xuICAgICAgICAgICAgICAgIHJlZnMuc2VlblJlZnMuYWRkKHNlZW5TY2hlbWEuJHJlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VlblNjaGVtYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXdJdGVtID0geyBkZWYsIHBhdGg6IHJlZnMuY3VycmVudFBhdGgsIGpzb25TY2hlbWE6IHVuZGVmaW5lZCB9O1xuICAgIHJlZnMuc2Vlbi5zZXQoZGVmLCBuZXdJdGVtKTtcbiAgICBjb25zdCBqc29uU2NoZW1hID0gc2VsZWN0UGFyc2VyKGRlZiwgZGVmLnR5cGVOYW1lLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgIGlmIChqc29uU2NoZW1hKSB7XG4gICAgICAgIGFkZE1ldGEoZGVmLCByZWZzLCBqc29uU2NoZW1hKTtcbiAgICB9XG4gICAgbmV3SXRlbS5qc29uU2NoZW1hID0ganNvblNjaGVtYTtcbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmNvbnN0IGdldCRyZWYgPSAoaXRlbSwgcmVmcykgPT4ge1xuICAgIHN3aXRjaCAocmVmcy4kcmVmU3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAncm9vdCc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBpdGVtLnBhdGguam9pbignLycpIH07XG4gICAgICAgIC8vIHRoaXMgY2FzZSBpcyBuZWVkZWQgYXMgT3BlbkFJIHN0cmljdCBtb2RlIGRvZXNuJ3Qgc3VwcG9ydCB0b3AtbGV2ZWwgYCRyZWZgcywgaS5lLlxuICAgICAgICAvLyB0aGUgdG9wLWxldmVsIHNjaGVtYSAqbXVzdCogYmUgYHtcInR5cGVcIjogXCJvYmplY3RcIiwgXCJwcm9wZXJ0aWVzXCI6IHsuLi59fWAgYnV0IGlmIHdlIGV2ZXJcbiAgICAgICAgLy8gbmVlZCB0byBkZWZpbmUgYSBgJHJlZmAsIHJlbGF0aXZlIGAkcmVmYHMgYXJlbid0IHN1cHBvcnRlZCwgc28gd2UgbmVlZCB0byBleHRyYWN0XG4gICAgICAgIC8vIHRoZSBzY2hlbWEgdG8gYCMvZGVmaW5pdGlvbnMvYCBhbmQgcmVmZXJlbmNlIHRoYXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIGUuZy4gaWYgd2UgbmVlZCB0byByZWZlcmVuY2UgYSBzY2hlbWEgYXRcbiAgICAgICAgLy8gYFtcIiNcIixcImRlZmluaXRpb25zXCIsXCJjb250YWN0UGVyc29uXCIsXCJwcm9wZXJ0aWVzXCIsXCJwZXJzb24xXCIsXCJwcm9wZXJ0aWVzXCIsXCJuYW1lXCJdYFxuICAgICAgICAvLyB0aGVuIHdlJ2xsIGV4dHJhY3QgaXQgb3V0IHRvIGBjb250YWN0UGVyc29uX3Byb3BlcnRpZXNfcGVyc29uMV9wcm9wZXJ0aWVzX25hbWVgXG4gICAgICAgIGNhc2UgJ2V4dHJhY3QtdG8tcm9vdCc6XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gaXRlbS5wYXRoLnNsaWNlKHJlZnMuYmFzZVBhdGgubGVuZ3RoICsgMSkuam9pbignXycpO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBleHRyYWN0IHRoZSByb290IHNjaGVtYSBpbiB0aGlzIGNhc2UsIGFzIGl0J3MgYWxyZWFkeVxuICAgICAgICAgICAgLy8gYmVlbiBhZGRlZCB0byB0aGUgZGVmaW5pdGlvbnNcbiAgICAgICAgICAgIGlmIChuYW1lICE9PSByZWZzLm5hbWUgJiYgcmVmcy5uYW1lU3RyYXRlZ3kgPT09ICdkdXBsaWNhdGUtcmVmJykge1xuICAgICAgICAgICAgICAgIHJlZnMuZGVmaW5pdGlvbnNbbmFtZV0gPSBpdGVtLmRlZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJykgfTtcbiAgICAgICAgY2FzZSAncmVsYXRpdmUnOlxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogZ2V0UmVsYXRpdmVQYXRoKHJlZnMuY3VycmVudFBhdGgsIGl0ZW0ucGF0aCkgfTtcbiAgICAgICAgY2FzZSAnbm9uZSc6XG4gICAgICAgIGNhc2UgJ3NlZW4nOiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5wYXRoLmxlbmd0aCA8IHJlZnMuY3VycmVudFBhdGgubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgaXRlbS5wYXRoLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHJlZnMuY3VycmVudFBhdGhbaW5kZXhdID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlY3Vyc2l2ZSByZWZlcmVuY2UgZGV0ZWN0ZWQgYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0hIERlZmF1bHRpbmcgdG8gYW55YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlZnMuJHJlZlN0cmF0ZWd5ID09PSAnc2VlbicgPyB7fSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBnZXRSZWxhdGl2ZVBhdGggPSAocGF0aEEsIHBhdGhCKSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGZvciAoOyBpIDwgcGF0aEEubGVuZ3RoICYmIGkgPCBwYXRoQi5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocGF0aEFbaV0gIT09IHBhdGhCW2ldKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBbKHBhdGhBLmxlbmd0aCAtIGkpLnRvU3RyaW5nKCksIC4uLnBhdGhCLnNsaWNlKGkpXS5qb2luKCcvJyk7XG59O1xuY29uc3Qgc2VsZWN0UGFyc2VyID0gKGRlZiwgdHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgPT4ge1xuICAgIHN3aXRjaCAodHlwZU5hbWUpIHtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU3RyaW5nRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3Q6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPYmplY3REZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQmlnaW50RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW46XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCb29sZWFuRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEYXRlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuZGVmaW5lZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVuZGVmaW5lZERlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbERlZihyZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQXJyYXk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVHVwbGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUmVjb3JkRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExpdGVyYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW06XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOYXRpdmVFbnVtRGVmKGRlZik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVsbGFibGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VPcHRpb25hbERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXA6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VNYXBEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU2V0RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmdldHRlcigpLl9kZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU46XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTmV2ZXJEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0czpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVmZmVjdHNEZWYoZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VBbnlEZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVVua25vd25EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZmF1bHREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJyYW5kZWREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHk6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWFkb25seURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUNhdGNoRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlUGlwZWxpbmVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb246XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQ6XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gKChfKSA9PiB1bmRlZmluZWQpKHR5cGVOYW1lKTtcbiAgICB9XG59O1xuY29uc3QgYWRkTWV0YSA9IChkZWYsIHJlZnMsIGpzb25TY2hlbWEpID0+IHtcbiAgICBpZiAoZGVmLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGpzb25TY2hlbWEuZGVzY3JpcHRpb24gPSBkZWYuZGVzY3JpcHRpb247XG4gICAgICAgIGlmIChyZWZzLm1hcmtkb3duRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGpzb25TY2hlbWEubWFya2Rvd25EZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZURlZi5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi9wYXJzZURlZi5tanNcIjtcbmltcG9ydCB7IGdldFJlZnMgfSBmcm9tIFwiLi9SZWZzLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmLCBpc0VtcHR5T2JqIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmNvbnN0IHpvZFRvSnNvblNjaGVtYSA9IChzY2hlbWEsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZWZzID0gZ2V0UmVmcyhvcHRpb25zKTtcbiAgICBjb25zdCBuYW1lID0gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID8gb3B0aW9uc1xuICAgICAgICA6IG9wdGlvbnM/Lm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/IHVuZGVmaW5lZFxuICAgICAgICAgICAgOiBvcHRpb25zPy5uYW1lO1xuICAgIGNvbnN0IG1haW4gPSBwYXJzZURlZihzY2hlbWEuX2RlZiwgbmFtZSA9PT0gdW5kZWZpbmVkID8gcmVmcyA6ICh7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwgbmFtZV0sXG4gICAgfSksIGZhbHNlKSA/PyB7fTtcbiAgICBjb25zdCB0aXRsZSA9IHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0JyAmJiBvcHRpb25zLm5hbWUgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm5hbWVTdHJhdGVneSA9PT0gJ3RpdGxlJyA/XG4gICAgICAgIG9wdGlvbnMubmFtZVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtYWluLnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICAgIGNvbnN0IGRlZmluaXRpb25zID0gKCgpID0+IHtcbiAgICAgICAgaWYgKGlzRW1wdHlPYmoocmVmcy5kZWZpbml0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbnMgPSB7fTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkRGVmaW5pdGlvbnMgPSBuZXcgU2V0KCk7XG4gICAgICAgIC8vIHRoZSBjYWxsIHRvIGBwYXJzZURlZigpYCBoZXJlIG1pZ2h0IGl0c2VsZiBhZGQgbW9yZSBlbnRyaWVzIHRvIGAuZGVmaW5pdGlvbnNgXG4gICAgICAgIC8vIHNvIHdlIG5lZWQgdG8gY29udGludWFsbHkgZXZhbHVhdGUgZGVmaW5pdGlvbnMgdW50aWwgd2UndmUgcmVzb2x2ZWQgYWxsIG9mIHRoZW1cbiAgICAgICAgLy9cbiAgICAgICAgLy8gd2UgaGF2ZSBhIGdlbmVyb3VzIGl0ZXJhdGlvbiBsaW1pdCBoZXJlIHRvIGF2b2lkIGJsb3dpbmcgdXAgdGhlIHN0YWNrIGlmIHRoZXJlXG4gICAgICAgIC8vIGFyZSBhbnkgYnVncyB0aGF0IHdvdWxkIG90aGVyd2lzZSByZXN1bHQgaW4gdXMgaXRlcmF0aW5nIGluZGVmaW5pdGVseVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwMDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdEZWZpbml0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHJlZnMuZGVmaW5pdGlvbnMpLmZpbHRlcigoW2tleV0pID0+ICFwcm9jZXNzZWREZWZpbml0aW9ucy5oYXMoa2V5KSk7XG4gICAgICAgICAgICBpZiAobmV3RGVmaW5pdGlvbnMubGVuZ3RoID09PSAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBzY2hlbWFdIG9mIG5ld0RlZmluaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5pdGlvbnNba2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmKHpvZERlZihzY2hlbWEpLCB7IC4uLnJlZnMsIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5iYXNlUGF0aCwgcmVmcy5kZWZpbml0aW9uUGF0aCwga2V5XSB9LCB0cnVlKSA/PyB7fTtcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWREZWZpbml0aW9ucy5hZGQoa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbnM7XG4gICAgfSkoKTtcbiAgICBjb25zdCBjb21iaW5lZCA9IG5hbWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgIGRlZmluaXRpb25zID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXTogZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IG1haW5cbiAgICAgICAgOiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnID9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5tYWluLFxuICAgICAgICAgICAgICAgIC4uLihkZWZpbml0aW9ucyB8fCByZWZzLnNlZW5SZWZzLnNpemUgP1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kZWZpbml0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGFjdHVhbGx5IGR1cGxpY2F0ZSB0aGUgc2NoZW1hIGRlZmluaXRpb24gaWYgaXQgd2FzIGV2ZXIgcmVmZXJlbmNlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSB0aGUgZHVwbGljYXRpb24gaXMgY29tcGxldGVseSBwb2ludGxlc3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4ocmVmcy5zZWVuUmVmcy5zaXplID8geyBbbmFtZV06IG1haW4gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICRyZWY6IFsuLi4ocmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdyZWxhdGl2ZScgPyBbXSA6IHJlZnMuYmFzZVBhdGgpLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXS5qb2luKCcvJyksXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBbbmFtZV06IG1haW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgIGNvbWJpbmVkLiRzY2hlbWEgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbiAgICB9XG4gICAgZWxzZSBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hMjAxOS0wOScpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDE5LTA5L3NjaGVtYSMnO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZWQ7XG59O1xuZXhwb3J0IHsgem9kVG9Kc29uU2NoZW1hIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD16b2RUb0pzb25TY2hlbWEubWpzLm1hcCIsImltcG9ydCB7IE9wZW5BSUVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLm1qc1wiO1xuaW1wb3J0IHsgaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdCB9IGZyb20gXCIuLi9saWIvcGFyc2VyLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMgfHwgIWhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5yZXNwb25zZSxcbiAgICAgICAgICAgIG91dHB1dF9wYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcykge1xuICAgIGNvbnN0IG91dHB1dCA9IHJlc3BvbnNlLm91dHB1dC5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogcGFyc2VUb29sQ2FsbChwYXJhbXMsIGl0ZW0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZDogcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudC50ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcbiAgICBjb25zdCBwYXJzZWQgPSBPYmplY3QuYXNzaWduKHt9LCByZXNwb25zZSwgeyBvdXRwdXQgfSk7XG4gICAgaWYgKCFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHJlc3BvbnNlLCAnb3V0cHV0X3RleHQnKSkge1xuICAgICAgICBhZGRPdXRwdXRUZXh0KHBhcnNlZCk7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwYXJzZWQsICdvdXRwdXRfcGFyc2VkJywge1xuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBwYXJzZWQub3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnICYmIGNvbnRlbnQucGFyc2VkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudC5wYXJzZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gcGFyc2VkO1xufVxuZnVuY3Rpb24gcGFyc2VUZXh0Rm9ybWF0KHBhcmFtcywgY29udGVudCkge1xuICAgIGlmIChwYXJhbXMudGV4dD8uZm9ybWF0Py50eXBlICE9PSAnanNvbl9zY2hlbWEnKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJyRwYXJzZVJhdycgaW4gcGFyYW1zLnRleHQ/LmZvcm1hdCkge1xuICAgICAgICBjb25zdCB0ZXh0X2Zvcm1hdCA9IHBhcmFtcy50ZXh0Py5mb3JtYXQ7XG4gICAgICAgIHJldHVybiB0ZXh0X2Zvcm1hdC4kcGFyc2VSYXcoY29udGVudCk7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnBhcnNlKGNvbnRlbnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMudGV4dD8uZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wodG9vbCwgeyBwYXJzZXIsIGNhbGxiYWNrLCB9KSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi50b29sIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS10b29sJyxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkcGFyc2VSYXc6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZXIsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJGNhbGxiYWNrOiB7XG4gICAgICAgICAgICB2YWx1ZTogY2FsbGJhY2ssXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXV0b1BhcnNhYmxlVG9vbCh0b29sKSB7XG4gICAgcmV0dXJuIHRvb2w/LlsnJGJyYW5kJ10gPT09ICdhdXRvLXBhcnNlYWJsZS10b29sJztcbn1cbmZ1bmN0aW9uIGdldElucHV0VG9vbEJ5TmFtZShpbnB1dF90b29scywgbmFtZSkge1xuICAgIHJldHVybiBpbnB1dF90b29scy5maW5kKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiYgdG9vbC5uYW1lID09PSBuYW1lKTtcbn1cbmZ1bmN0aW9uIHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgIDogaW5wdXRUb29sPy5zdHJpY3QgPyBKU09OLnBhcnNlKHRvb2xDYWxsLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IG51bGwsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRQYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGlucHV0VG9vbCA9IGdldElucHV0VG9vbEJ5TmFtZShwYXJhbXMudG9vbHMgPz8gW10sIHRvb2xDYWxsLm5hbWUpO1xuICAgIHJldHVybiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSB8fCBpbnB1dFRvb2w/LnN0cmljdCB8fCBmYWxzZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0VG9vbHModG9vbHMpIHtcbiAgICBmb3IgKGNvbnN0IHRvb2wgb2YgdG9vbHMgPz8gW10pIHtcbiAgICAgICAgaWYgKHRvb2wudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBDdXJyZW50bHkgb25seSBcXGBmdW5jdGlvblxcYCB0b29sIHR5cGVzIHN1cHBvcnQgYXV0by1wYXJzaW5nOyBSZWNlaXZlZCBcXGAke3Rvb2wudHlwZX1cXGBgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9vbC5mdW5jdGlvbi5zdHJpY3QgIT09IHRydWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPcGVuQUlFcnJvcihgVGhlIFxcYCR7dG9vbC5mdW5jdGlvbi5uYW1lfVxcYCB0b29sIGlzIG5vdCBtYXJrZWQgd2l0aCBcXGBzdHJpY3Q6IHRydWVcXGAuIE9ubHkgc3RyaWN0IGZ1bmN0aW9uIHRvb2xzIGNhbiBiZSBhdXRvLXBhcnNlZGApO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFkZE91dHB1dFRleHQocnNwKSB7XG4gICAgY29uc3QgdGV4dHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiByc3Aub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNvbnRlbnQgb2Ygb3V0cHV0LmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICB0ZXh0cy5wdXNoKGNvbnRlbnQudGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcnNwLm91dHB1dF90ZXh0ID0gdGV4dHMuam9pbignJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZXNwb25zZXNQYXJzZXIubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiB0b1N0cmljdEpzb25TY2hlbWEoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYS50eXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFJvb3Qgc2NoZW1hIG11c3QgaGF2ZSB0eXBlOiAnb2JqZWN0JyBidXQgZ290IHR5cGU6ICR7c2NoZW1hLnR5cGUgPyBgJyR7c2NoZW1hLnR5cGV9J2AgOiAndW5kZWZpbmVkJ31gKTtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hQ29weSA9IHN0cnVjdHVyZWRDbG9uZShzY2hlbWEpO1xuICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYUNvcHksIFtdLCBzY2hlbWFDb3B5KTtcbn1cbmZ1bmN0aW9uIGlzTnVsbGFibGUoc2NoZW1hKSB7XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEgPT09ICdib29sZWFuJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzY2hlbWEudHlwZSA9PT0gJ251bGwnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IG9uZU9mVmFyaWFudCBvZiBzY2hlbWEub25lT2YgPz8gW10pIHtcbiAgICAgICAgaWYgKGlzTnVsbGFibGUob25lT2ZWYXJpYW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBhbGxPZlZhcmlhbnQgb2Ygc2NoZW1hLmFueU9mID8/IFtdKSB7XG4gICAgICAgIGlmIChpc051bGxhYmxlKGFsbE9mVmFyaWFudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogTXV0YXRlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgdG8gZW5zdXJlIGl0IGNvbmZvcm1zIHRvIHRoZSBgc3RyaWN0YCBzdGFuZGFyZFxuICogdGhhdCB0aGUgQVBJIGV4cGVjdHMuXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZVN0cmljdEpzb25TY2hlbWEoanNvblNjaGVtYSwgcGF0aCwgcm9vdCkge1xuICAgIGlmICh0eXBlb2YganNvblNjaGVtYSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEV4cGVjdGVkIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuOyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIGlmICghaXNPYmplY3QoanNvblNjaGVtYSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgRXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShqc29uU2NoZW1hKX0gdG8gYmUgYW4gb2JqZWN0OyBwYXRoPSR7cGF0aC5qb2luKCcvJyl9YCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSAkZGVmcyAobm9uLXN0YW5kYXJkIGJ1dCBzb21ldGltZXMgdXNlZClcbiAgICBjb25zdCBkZWZzID0ganNvblNjaGVtYS4kZGVmcztcbiAgICBpZiAoaXNPYmplY3QoZGVmcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbZGVmTmFtZSwgZGVmU2NoZW1hXSBvZiBPYmplY3QuZW50cmllcyhkZWZzKSkge1xuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShkZWZTY2hlbWEsIFsuLi5wYXRoLCAnJGRlZnMnLCBkZWZOYW1lXSwgcm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gSGFuZGxlIGRlZmluaXRpb25zIChkcmFmdC0wNCBzdHlsZSwgZGVwcmVjYXRlZCBpbiBkcmFmdC0wNyBidXQgc3RpbGwgdXNlZClcbiAgICBjb25zdCBkZWZpbml0aW9ucyA9IGpzb25TY2hlbWEuZGVmaW5pdGlvbnM7XG4gICAgaWYgKGlzT2JqZWN0KGRlZmluaXRpb25zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtkZWZpbml0aW9uTmFtZSwgZGVmaW5pdGlvblNjaGVtYV0gb2YgT2JqZWN0LmVudHJpZXMoZGVmaW5pdGlvbnMpKSB7XG4gICAgICAgICAgICBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGRlZmluaXRpb25TY2hlbWEsIFsuLi5wYXRoLCAnZGVmaW5pdGlvbnMnLCBkZWZpbml0aW9uTmFtZV0sIHJvb3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEFkZCBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UgdG8gb2JqZWN0IHR5cGVzXG4gICAgY29uc3QgdHlwID0ganNvblNjaGVtYS50eXBlO1xuICAgIGlmICh0eXAgPT09ICdvYmplY3QnICYmICEoJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiBqc29uU2NoZW1hKSkge1xuICAgICAgICBqc29uU2NoZW1hLmFkZGl0aW9uYWxQcm9wZXJ0aWVzID0gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlcXVpcmVkID0ganNvblNjaGVtYS5yZXF1aXJlZCA/PyBbXTtcbiAgICAvLyBIYW5kbGUgb2JqZWN0IHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ganNvblNjaGVtYS5wcm9wZXJ0aWVzO1xuICAgIGlmIChpc09iamVjdChwcm9wZXJ0aWVzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhwcm9wZXJ0aWVzKSkge1xuICAgICAgICAgICAgaWYgKCFpc051bGxhYmxlKHZhbHVlKSAmJiAhcmVxdWlyZWQuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7Wy4uLnBhdGgsICdwcm9wZXJ0aWVzJywga2V5XS5qb2luKCcvJyl9XFxgIHVzZXMgXFxgLm9wdGlvbmFsKClcXGAgd2l0aG91dCBcXGAubnVsbGFibGUoKVxcYCB3aGljaCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBBUEkuIFNlZTogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL3N0cnVjdHVyZWQtb3V0cHV0cz9hcGktbW9kZT1yZXNwb25zZXMjYWxsLWZpZWxkcy1tdXN0LWJlLXJlcXVpcmVkYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAganNvblNjaGVtYS5yZXF1aXJlZCA9IE9iamVjdC5rZXlzKHByb3BlcnRpZXMpO1xuICAgICAgICBqc29uU2NoZW1hLnByb3BlcnRpZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMocHJvcGVydGllcykubWFwKChba2V5LCBwcm9wU2NoZW1hXSkgPT4gW1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgZW5zdXJlU3RyaWN0SnNvblNjaGVtYShwcm9wU2NoZW1hLCBbLi4ucGF0aCwgJ3Byb3BlcnRpZXMnLCBrZXldLCByb290KSxcbiAgICAgICAgXSkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgYXJyYXlzXG4gICAgY29uc3QgaXRlbXMgPSBqc29uU2NoZW1hLml0ZW1zO1xuICAgIGlmIChpc09iamVjdChpdGVtcykpIHtcbiAgICAgICAganNvblNjaGVtYS5pdGVtcyA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoaXRlbXMsIFsuLi5wYXRoLCAnaXRlbXMnXSwgcm9vdCk7XG4gICAgfVxuICAgIC8vIEhhbmRsZSB1bmlvbnMgKGFueU9mKVxuICAgIGNvbnN0IGFueU9mID0ganNvblNjaGVtYS5hbnlPZjtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbnlPZikpIHtcbiAgICAgICAganNvblNjaGVtYS5hbnlPZiA9IGFueU9mLm1hcCgodmFyaWFudCwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYSh2YXJpYW50LCBbLi4ucGF0aCwgJ2FueU9mJywgU3RyaW5nKGkpXSwgcm9vdCkpO1xuICAgIH1cbiAgICAvLyBIYW5kbGUgaW50ZXJzZWN0aW9ucyAoYWxsT2YpXG4gICAgY29uc3QgYWxsT2YgPSBqc29uU2NoZW1hLmFsbE9mO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbE9mKSkge1xuICAgICAgICBpZiAoYWxsT2YubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlZCA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoYWxsT2ZbMF0sIFsuLi5wYXRoLCAnYWxsT2YnLCAnMCddLCByb290KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oanNvblNjaGVtYSwgcmVzb2x2ZWQpO1xuICAgICAgICAgICAgZGVsZXRlIGpzb25TY2hlbWEuYWxsT2Y7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBqc29uU2NoZW1hLmFsbE9mID0gYWxsT2YubWFwKChlbnRyeSwgaSkgPT4gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShlbnRyeSwgWy4uLnBhdGgsICdhbGxPZicsIFN0cmluZyhpKV0sIHJvb3QpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTdHJpcCBgbnVsbGAgZGVmYXVsdHMgYXMgdGhlcmUncyBubyBtZWFuaW5nZnVsIGRpc3RpbmN0aW9uXG4gICAgaWYgKGpzb25TY2hlbWEuZGVmYXVsdCA9PT0gbnVsbCkge1xuICAgICAgICBkZWxldGUganNvblNjaGVtYS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBIYW5kbGUgJHJlZiB3aXRoIGFkZGl0aW9uYWwgcHJvcGVydGllc1xuICAgIGNvbnN0IHJlZiA9IGpzb25TY2hlbWEuJHJlZjtcbiAgICBpZiAocmVmICYmIGhhc01vcmVUaGFuTktleXMoanNvblNjaGVtYSwgMSkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBSZWNlaXZlZCBub24tc3RyaW5nICRyZWYgLSAke3JlZn07IHBhdGg9JHtwYXRoLmpvaW4oJy8nKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHJlc29sdmVSZWYocm9vdCwgcmVmKTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXNvbHZlZCA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIFxcYCRyZWY6ICR7cmVmfVxcYCB0byByZXNvbHZlIHRvIGFuIG9iamVjdCBzY2hlbWEgYnV0IGdvdCBib29sZWFuYCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc09iamVjdChyZXNvbHZlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgXFxgJHJlZjogJHtyZWZ9XFxgIHRvIHJlc29sdmUgdG8gYW4gb2JqZWN0IGJ1dCBnb3QgJHtKU09OLnN0cmluZ2lmeShyZXNvbHZlZCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJvcGVydGllcyBmcm9tIHRoZSBqc29uIHNjaGVtYSB0YWtlIHByaW9yaXR5IG92ZXIgdGhlIG9uZXMgb24gdGhlIGAkcmVmYFxuICAgICAgICBPYmplY3QuYXNzaWduKGpzb25TY2hlbWEsIHsgLi4ucmVzb2x2ZWQsIC4uLmpzb25TY2hlbWEgfSk7XG4gICAgICAgIGRlbGV0ZSBqc29uU2NoZW1hLiRyZWY7XG4gICAgICAgIC8vIFNpbmNlIHRoZSBzY2hlbWEgZXhwYW5kZWQgZnJvbSBgJHJlZmAgbWlnaHQgbm90IGhhdmUgYGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZWAgYXBwbGllZCxcbiAgICAgICAgLy8gd2UgY2FsbCBgZW5zdXJlU3RyaWN0SnNvblNjaGVtYWAgYWdhaW4gdG8gZml4IHRoZSBpbmxpbmVkIHNjaGVtYSBhbmQgZW5zdXJlIGl0J3MgdmFsaWQuXG4gICAgICAgIHJldHVybiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKGpzb25TY2hlbWEsIHBhdGgsIHJvb3QpO1xuICAgIH1cbiAgICByZXR1cm4ganNvblNjaGVtYTtcbn1cbmZ1bmN0aW9uIHJlc29sdmVSZWYocm9vdCwgcmVmKSB7XG4gICAgaWYgKCFyZWYuc3RhcnRzV2l0aCgnIy8nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgJHJlZiBmb3JtYXQgJHtKU09OLnN0cmluZ2lmeShyZWYpfTsgRG9lcyBub3Qgc3RhcnQgd2l0aCAjL2ApO1xuICAgIH1cbiAgICBjb25zdCBwYXRoUGFydHMgPSByZWYuc2xpY2UoMikuc3BsaXQoJy8nKTtcbiAgICBsZXQgcmVzb2x2ZWQgPSByb290O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIHBhdGhQYXJ0cykge1xuICAgICAgICBpZiAoIWlzT2JqZWN0KHJlc29sdmVkKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBlbmNvdW50ZXJlZCBub24tb2JqZWN0IGVudHJ5IHdoaWxlIHJlc29sdmluZyAke3JlZn0gLSAke0pTT04uc3RyaW5naWZ5KHJlc29sdmVkKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZSA9IHJlc29sdmVkW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEtleSAke2tleX0gbm90IGZvdW5kIHdoaWxlIHJlc29sdmluZyAke3JlZn1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlZCA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG59XG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgb2JqICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59XG5mdW5jdGlvbiBoYXNNb3JlVGhhbk5LZXlzKG9iaiwgbikge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IF8gaW4gb2JqKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgaWYgKGkgPiBuKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0ubWpzLm1hcCIsImltcG9ydCB7IHogYXMgejQgfSBmcm9tICd6b2QvdjQnO1xuaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmltcG9ydCB7IHRvU3RyaWN0SnNvblNjaGVtYSB9IGZyb20gXCIuLi9saWIvdHJhbnNmb3JtLm1qc1wiO1xuZnVuY3Rpb24gem9kVjNUb0pzb25TY2hlbWEoc2NoZW1hLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIF96b2RUb0pzb25TY2hlbWEoc2NoZW1hLCB7XG4gICAgICAgIG9wZW5haVN0cmljdE1vZGU6IHRydWUsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgbmFtZVN0cmF0ZWd5OiAnZHVwbGljYXRlLXJlZicsXG4gICAgICAgICRyZWZTdHJhdGVneTogJ2V4dHJhY3QtdG8tcm9vdCcsXG4gICAgICAgIG51bGxhYmxlU3RyYXRlZ3k6ICdwcm9wZXJ0eScsXG4gICAgfSk7XG59XG5mdW5jdGlvbiB6b2RWNFRvSnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICByZXR1cm4gdG9TdHJpY3RKc29uU2NoZW1hKHo0LnRvSlNPTlNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgdGFyZ2V0OiAnZHJhZnQtNycsXG4gICAgfSkpO1xufVxuZnVuY3Rpb24gaXNab2RWNCh6b2RPYmplY3QpIHtcbiAgICByZXR1cm4gJ196b2QnIGluIHpvZE9iamVjdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogaXNab2RWNCh6b2RPYmplY3QpID8gem9kVjRUb0pzb25TY2hlbWEoem9kT2JqZWN0KSA6IHpvZFYzVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogaXNab2RWNCh6b2RPYmplY3QpID8gem9kVjRUb0pzb25TY2hlbWEoem9kT2JqZWN0KSA6IHpvZFYzVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaXNab2RWNChvcHRpb25zLnBhcmFtZXRlcnMpID9cbiAgICAgICAgICAgICAgICB6b2RWNFRvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICAgICAgOiB6b2RWM1RvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMsIHsgbmFtZTogb3B0aW9ucy5uYW1lIH0pLFxuICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgICAgICB9LFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB6b2RSZXNwb25zZXNGdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgICAgIHBhcmFtZXRlcnM6IGlzWm9kVjQob3B0aW9ucy5wYXJhbWV0ZXJzKSA/XG4gICAgICAgICAgICB6b2RWNFRvSnNvblNjaGVtYShvcHRpb25zLnBhcmFtZXRlcnMpXG4gICAgICAgICAgICA6IHpvZFYzVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYXNab2RUeXBlKHNjaGVtYSkge1xuICAgIHJldHVybiBzY2hlbWE7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICByZXR1cm4gY2FuZGlkYXRlLl96b2Q/LmRlZiB8fCBjYW5kaWRhdGUuX2RlZiB8fCBjYW5kaWRhdGUuZGVmO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRab2RUeXBlKGlucHV0KSB7XG4gICAgY29uc3QgZGVmID0gcmVhZFpvZERlZmluaXRpb24oaW5wdXQpO1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHJhd1R5cGUgPSAodHlwZW9mIGRlZi50eXBlTmFtZSA9PT0gJ3N0cmluZycgJiYgZGVmLnR5cGVOYW1lKSB8fFxuICAgICAgICAodHlwZW9mIGRlZi50eXBlID09PSAnc3RyaW5nJyAmJiBkZWYudHlwZSk7XG4gICAgaWYgKHR5cGVvZiByYXdUeXBlICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsb3dlciA9IHJhd1R5cGUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbG93ZXIuc3RhcnRzV2l0aCgnem9kJykgPyBsb3dlci5zbGljZSgzKSA6IGxvd2VyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9em9kQ29tcGF0Lm1qcy5tYXAiLCJpbXBvcnQgeyByZWFkWm9kRGVmaW5pdGlvbiwgcmVhZFpvZFR5cGUgfSBmcm9tIFwiLi96b2RDb21wYXQubWpzXCI7XG4vKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgY29uc3QgZGVmaW5pdGlvbiA9IHJlYWRab2REZWZpbml0aW9uKGlucHV0KTtcbiAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gcmVhZFpvZFR5cGUoaW5wdXQpO1xuICAgIHJldHVybiB0eXBlID09PSAnb2JqZWN0Jztcbn1cbi8qKlxuICogVmVyaWZpZXMgdGhhdCBhbiBpbnB1dCBpcyBhbiBvYmplY3Qgd2l0aCBhbiBgaW5wdXRgIHByb3BlcnR5LlxuICogQHBhcmFtIGlucHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBZ2VudFRvb2xJbnB1dChpbnB1dCkge1xuICAgIHJldHVybiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBpbnB1dCAhPT0gbnVsbCAmJlxuICAgICAgICAnaW5wdXQnIGluIGlucHV0ICYmXG4gICAgICAgIHR5cGVvZiBpbnB1dC5pbnB1dCA9PT0gJ3N0cmluZycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZUd1YXJkcy5tanMubWFwIiwiaW1wb3J0IHsgcmVhZFpvZERlZmluaXRpb24sIHJlYWRab2RUeXBlIH0gZnJvbSBcIi4vem9kQ29tcGF0Lm1qc1wiO1xuY29uc3QgSlNPTl9TQ0hFTUFfRFJBRlRfMDcgPSAnaHR0cDovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC0wNy9zY2hlbWEjJztcbmNvbnN0IE9QVElPTkFMX1dSQVBQRVJTID0gbmV3IFNldChbJ29wdGlvbmFsJ10pO1xuY29uc3QgREVDT1JBVE9SX1dSQVBQRVJTID0gbmV3IFNldChbXG4gICAgJ2JyYW5kJyxcbiAgICAnYnJhbmRlZCcsXG4gICAgJ2NhdGNoJyxcbiAgICAnZGVmYXVsdCcsXG4gICAgJ2VmZmVjdHMnLFxuICAgICdwaXBlbGluZScsXG4gICAgJ3BpcGUnLFxuICAgICdwcmVmYXVsdCcsXG4gICAgJ3JlYWRvbmx5JyxcbiAgICAncmVmaW5lbWVudCcsXG4gICAgJ3RyYW5zZm9ybScsXG5dKTtcbi8vIFByaW1pdGl2ZSBsZWFmIG5vZGVzIG1hcCAxOjEgdG8gSlNPTiBTY2hlbWEgdHlwZXM7IGV2ZXJ5dGhpbmcgZWxzZSBpcyBoYW5kbGVkXG4vLyBieSB0aGUgc3BlY2lhbGlzZWQgYnVpbGRlcnMgZnVydGhlciBkb3duLlxuY29uc3QgU0lNUExFX1RZUEVfTUFQUElORyA9IHtcbiAgICBzdHJpbmc6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICBudW1iZXI6IHsgdHlwZTogJ251bWJlcicgfSxcbiAgICBiaWdpbnQ6IHsgdHlwZTogJ2ludGVnZXInIH0sXG4gICAgYm9vbGVhbjogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICBkYXRlOiB7IHR5cGU6ICdzdHJpbmcnLCBmb3JtYXQ6ICdkYXRlLXRpbWUnIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSh2YWx1ZSkge1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAncHJvcGVydGllcycgaW4gdmFsdWUgJiZcbiAgICAgICAgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJyBpbiB2YWx1ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gem9kSnNvblNjaGVtYUNvbXBhdChpbnB1dCkge1xuICAgIC8vIEF0dGVtcHQgdG8gYnVpbGQgYW4gb2JqZWN0IHNjaGVtYSBmcm9tIFpvZCdzIGludGVybmFsIHNoYXBlLiBJZiB3ZSBjYW5ub3RcbiAgICAvLyB1bmRlcnN0YW5kIHRoZSBzdHJ1Y3R1cmUgd2UgcmV0dXJuIHVuZGVmaW5lZCwgbGV0dGluZyBjYWxsZXJzIHJhaXNlIGFcbiAgICAvLyBkZXNjcmlwdGl2ZSBlcnJvciBpbnN0ZWFkIG9mIGVtaXR0aW5nIGFuIGludmFsaWQgc2NoZW1hLlxuICAgIGNvbnN0IHNjaGVtYSA9IGJ1aWxkT2JqZWN0U2NoZW1hKGlucHV0KTtcbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hLnJlcXVpcmVkKSkge1xuICAgICAgICBzY2hlbWEucmVxdWlyZWQgPSBbXTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjaGVtYS4kc2NoZW1hICE9PSAnc3RyaW5nJykge1xuICAgICAgICBzY2hlbWEuJHNjaGVtYSA9IEpTT05fU0NIRU1BX0RSQUZUXzA3O1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuZnVuY3Rpb24gYnVpbGRPYmplY3RTY2hlbWEodmFsdWUpIHtcbiAgICBjb25zdCBzaGFwZSA9IHJlYWRTaGFwZSh2YWx1ZSk7XG4gICAgaWYgKCFzaGFwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307XG4gICAgY29uc3QgcmVxdWlyZWQgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIGZpZWxkXSBvZiBPYmplY3QuZW50cmllcyhzaGFwZSkpIHtcbiAgICAgICAgY29uc3QgeyBzY2hlbWEsIG9wdGlvbmFsIH0gPSBjb252ZXJ0UHJvcGVydHkoZmllbGQpO1xuICAgICAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzW2tleV0gPSBzY2hlbWE7XG4gICAgICAgIGlmICghb3B0aW9uYWwpIHtcbiAgICAgICAgICAgIHJlcXVpcmVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnb2JqZWN0JywgcHJvcGVydGllcywgcmVxdWlyZWQsIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBmYWxzZSB9O1xufVxuZnVuY3Rpb24gY29udmVydFByb3BlcnR5KHZhbHVlKSB7XG4gICAgLy8gUmVtb3ZlIHdyYXBwZXIgZGVjb3JhdG9ycyAoYnJhbmQsIHRyYW5zZm9ybSwgZXRjLikgYmVmb3JlIGF0dGVtcHRpbmcgdG9cbiAgICAvLyBjbGFzc2lmeSB0aGUgbm9kZSwgdHJhY2tpbmcgd2hldGhlciB3ZSBjcm9zc2VkIGFuIGBvcHRpb25hbGAgYm91bmRhcnkgc28gd2VcbiAgICAvLyBjYW4gcG9wdWxhdGUgdGhlIGByZXF1aXJlZGAgYXJyYXkgbGF0ZXIuXG4gICAgbGV0IGN1cnJlbnQgPSB1bndyYXBEZWNvcmF0b3JzKHZhbHVlKTtcbiAgICBsZXQgb3B0aW9uYWwgPSBmYWxzZTtcbiAgICB3aGlsZSAoT1BUSU9OQUxfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBvcHRpb25hbCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKGN1cnJlbnQpO1xuICAgICAgICBjb25zdCBuZXh0ID0gdW53cmFwRGVjb3JhdG9ycyhkZWY/LmlubmVyVHlwZSk7XG4gICAgICAgIGlmICghbmV4dCB8fCBuZXh0ID09PSBjdXJyZW50KSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHsgc2NoZW1hOiBjb252ZXJ0U2NoZW1hKGN1cnJlbnQpLCBvcHRpb25hbCB9O1xufVxuZnVuY3Rpb24gY29udmVydFNjaGVtYSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHVud3JhcHBlZCA9IHVud3JhcERlY29yYXRvcnModmFsdWUpO1xuICAgIGNvbnN0IHR5cGUgPSByZWFkWm9kVHlwZSh1bndyYXBwZWQpO1xuICAgIGNvbnN0IGRlZiA9IHJlYWRab2REZWZpbml0aW9uKHVud3JhcHBlZCk7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlIGluIFNJTVBMRV9UWVBFX01BUFBJTkcpIHtcbiAgICAgICAgcmV0dXJuIFNJTVBMRV9UWVBFX01BUFBJTkdbdHlwZV07XG4gICAgfVxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkT2JqZWN0U2NoZW1hKHVud3JhcHBlZCk7XG4gICAgICAgIGNhc2UgJ2FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEFycmF5U2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3R1cGxlJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFR1cGxlU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3VuaW9uJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFVuaW9uU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ2ludGVyc2VjdGlvbic6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbGl0ZXJhbCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRMaXRlcmFsKGRlZik7XG4gICAgICAgIGNhc2UgJ2VudW0nOlxuICAgICAgICBjYXNlICduYXRpdmVlbnVtJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZEVudW0oZGVmKTtcbiAgICAgICAgY2FzZSAncmVjb3JkJzpcbiAgICAgICAgICAgIHJldHVybiBidWlsZFJlY29yZFNjaGVtYShkZWYpO1xuICAgICAgICBjYXNlICdtYXAnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTWFwU2NoZW1hKGRlZik7XG4gICAgICAgIGNhc2UgJ3NldCc6XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZXRTY2hlbWEoZGVmKTtcbiAgICAgICAgY2FzZSAnbnVsbGFibGUnOlxuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTnVsbGFibGVTY2hlbWEoZGVmKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLy8gLS0tIEpTT04gU2NoZW1hIGJ1aWxkZXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGJ1aWxkQXJyYXlTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgaXRlbXMgPSBjb252ZXJ0U2NoZW1hKGV4dHJhY3RGaXJzdChkZWYsICdlbGVtZW50JywgJ2l0ZW1zJywgJ3R5cGUnKSk7XG4gICAgcmV0dXJuIGl0ZW1zID8geyB0eXBlOiAnYXJyYXknLCBpdGVtcyB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRUdXBsZVNjaGVtYShkZWYpIHtcbiAgICBjb25zdCBpdGVtcyA9IGNvZXJjZUFycmF5KGRlZj8uaXRlbXMpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGNvbnZlcnRTY2hlbWEoaXRlbSkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBpdGVtcyxcbiAgICAgICAgbWluSXRlbXM6IGl0ZW1zLmxlbmd0aCxcbiAgICB9O1xuICAgIGlmICghZGVmPy5yZXN0KSB7XG4gICAgICAgIHNjaGVtYS5tYXhJdGVtcyA9IGl0ZW1zLmxlbmd0aDtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVtYTtcbn1cbmZ1bmN0aW9uIGJ1aWxkVW5pb25TY2hlbWEoZGVmKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvZXJjZUFycmF5KGRlZj8ub3B0aW9ucyA/PyBkZWY/LnNjaGVtYXMpXG4gICAgICAgIC5tYXAoKG9wdGlvbikgPT4gY29udmVydFNjaGVtYShvcHRpb24pKVxuICAgICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIHJldHVybiBvcHRpb25zLmxlbmd0aCA/IHsgYW55T2Y6IG9wdGlvbnMgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkSW50ZXJzZWN0aW9uU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGxlZnQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ubGVmdCk7XG4gICAgY29uc3QgcmlnaHQgPSBjb252ZXJ0U2NoZW1hKGRlZj8ucmlnaHQpO1xuICAgIHJldHVybiBsZWZ0ICYmIHJpZ2h0ID8geyBhbGxPZjogW2xlZnQsIHJpZ2h0XSB9IDogdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gYnVpbGRSZWNvcmRTY2hlbWEoZGVmKSB7XG4gICAgY29uc3QgdmFsdWVTY2hlbWEgPSBjb252ZXJ0U2NoZW1hKGRlZj8udmFsdWVUeXBlID8/IGRlZj8udmFsdWVzKTtcbiAgICByZXR1cm4gdmFsdWVTY2hlbWFcbiAgICAgICAgPyB7IHR5cGU6ICdvYmplY3QnLCBhZGRpdGlvbmFsUHJvcGVydGllczogdmFsdWVTY2hlbWEgfVxuICAgICAgICA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkTWFwU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSA/PyBkZWY/LnZhbHVlcyk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEgfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGJ1aWxkU2V0U2NoZW1hKGRlZikge1xuICAgIGNvbnN0IHZhbHVlU2NoZW1hID0gY29udmVydFNjaGVtYShkZWY/LnZhbHVlVHlwZSk7XG4gICAgcmV0dXJuIHZhbHVlU2NoZW1hXG4gICAgICAgID8geyB0eXBlOiAnYXJyYXknLCBpdGVtczogdmFsdWVTY2hlbWEsIHVuaXF1ZUl0ZW1zOiB0cnVlIH1cbiAgICAgICAgOiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBidWlsZE51bGxhYmxlU2NoZW1hKGRlZikge1xuICAgIGNvbnN0IGlubmVyID0gY29udmVydFNjaGVtYShkZWY/LmlubmVyVHlwZSA/PyBkZWY/LnR5cGUpO1xuICAgIHJldHVybiBpbm5lciA/IHsgYW55T2Y6IFtpbm5lciwgeyB0eXBlOiAnbnVsbCcgfV0gfSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIHVud3JhcERlY29yYXRvcnModmFsdWUpIHtcbiAgICBsZXQgY3VycmVudCA9IHZhbHVlO1xuICAgIHdoaWxlIChERUNPUkFUT1JfV1JBUFBFUlMuaGFzKHJlYWRab2RUeXBlKGN1cnJlbnQpID8/ICcnKSkge1xuICAgICAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjdXJyZW50KTtcbiAgICAgICAgY29uc3QgbmV4dCA9IGRlZj8uaW5uZXJUeXBlID8/XG4gICAgICAgICAgICBkZWY/LnNjaGVtYSA/P1xuICAgICAgICAgICAgZGVmPy5iYXNlID8/XG4gICAgICAgICAgICBkZWY/LnR5cGUgPz9cbiAgICAgICAgICAgIGRlZj8ud3JhcHBlZCA/P1xuICAgICAgICAgICAgZGVmPy51bmRlcmx5aW5nO1xuICAgICAgICBpZiAoIW5leHQgfHwgbmV4dCA9PT0gY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50O1xufVxuZnVuY3Rpb24gZXh0cmFjdEZpcnN0KGRlZiwgLi4ua2V5cykge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgaWYgKGtleSBpbiBkZWYgJiYgZGVmW2tleV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZltrZXldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBjb2VyY2VBcnJheSh2YWx1ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gW10gOiBbdmFsdWVdO1xufVxuZnVuY3Rpb24gYnVpbGRMaXRlcmFsKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxpdGVyYWwgPSBleHRyYWN0Rmlyc3QoZGVmLCAndmFsdWUnLCAnbGl0ZXJhbCcpO1xuICAgIGlmIChsaXRlcmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uc3Q6IGxpdGVyYWwsXG4gICAgICAgIHR5cGU6IGxpdGVyYWwgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgbGl0ZXJhbCxcbiAgICB9O1xufVxuZnVuY3Rpb24gYnVpbGRFbnVtKGRlZikge1xuICAgIGlmICghZGVmKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRlZi52YWx1ZXMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi52YWx1ZXMgfTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVmLm9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IGRlZi5vcHRpb25zIH07XG4gICAgfVxuICAgIGlmIChkZWYudmFsdWVzICYmIHR5cGVvZiBkZWYudmFsdWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4geyBlbnVtOiBPYmplY3QudmFsdWVzKGRlZi52YWx1ZXMpIH07XG4gICAgfVxuICAgIGlmIChkZWYuZW51bSAmJiB0eXBlb2YgZGVmLmVudW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiB7IGVudW06IE9iamVjdC52YWx1ZXMoZGVmLmVudW0pIH07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiByZWFkU2hhcGUoaW5wdXQpIHtcbiAgICBpZiAodHlwZW9mIGlucHV0ICE9PSAnb2JqZWN0JyB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBjYW5kaWRhdGUgPSBpbnB1dDtcbiAgICBpZiAoY2FuZGlkYXRlLnNoYXBlICYmIHR5cGVvZiBjYW5kaWRhdGUuc2hhcGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjYW5kaWRhdGUuc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2FuZGlkYXRlLnNoYXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gY2FuZGlkYXRlLnNoYXBlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBkZWYgPSByZWFkWm9kRGVmaW5pdGlvbihjYW5kaWRhdGUpO1xuICAgIGNvbnN0IHNoYXBlID0gZGVmPy5zaGFwZTtcbiAgICBpZiAoc2hhcGUgJiYgdHlwZW9mIHNoYXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gc2hhcGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2hhcGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBzaGFwZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZEpzb25TY2hlbWFDb21wYXQubWpzLm1hcCIsImltcG9ydCB7IHpvZFJlc3BvbnNlc0Z1bmN0aW9uLCB6b2RUZXh0Rm9ybWF0IH0gZnJvbSAnb3BlbmFpL2hlbHBlcnMvem9kJztcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyB6b2RKc29uU2NoZW1hQ29tcGF0LCBoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUsIH0gZnJvbSBcIi4vem9kSnNvblNjaGVtYUNvbXBhdC5tanNcIjtcbmltcG9ydCB7IGFzWm9kVHlwZSB9IGZyb20gXCIuL3pvZENvbXBhdC5tanNcIjtcbmNvbnN0IHpvZFJlc3BvbnNlc0Z1bmN0aW9uQ29tcGF0ID0gem9kUmVzcG9uc2VzRnVuY3Rpb247XG4vLyBUaGUgYC5zY2hlbWFgIHBheWxvYWQgaXMgYWxsIHdlIG5lZWQsIHNvIGEgbGlnaHR3ZWlnaHQgc2lnbmF0dXJlIGtlZXBzIHRoZSBjb21waWxlciBoYXBweS5cbmNvbnN0IHpvZFRleHRGb3JtYXRDb21wYXQgPSB6b2RUZXh0Rm9ybWF0O1xuLy8gb3BlbmFpL2hlbHBlcnMvem9kIGNhbm5vdCBlbWl0IHN0cmljdCBzY2hlbWFzIGZvciBldmVyeSBab2QgcnVudGltZVxuLy8gKG5vdGFibHkgWm9kIHY0KSwgc28gd2UgZGVsZWdhdGUgdG8gYSBzbWFsbCBsb2NhbCBjb252ZXJ0ZXIgbGl2aW5nIGluXG4vLyB6b2RKc29uU2NoZW1hQ29tcGF0LnRzIHdoZW5ldmVyIGl0cyBvdXRwdXQgaXMgbWlzc2luZyB0aGUgcmVxdWlyZWQgSlNPTiBTY2hlbWEgYml0cy5cbmZ1bmN0aW9uIGJ1aWxkSnNvblNjaGVtYUZyb21ab2QoaW5wdXRUeXBlKSB7XG4gICAgcmV0dXJuIHpvZEpzb25TY2hlbWFDb21wYXQoaW5wdXRUeXBlKTtcbn1cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0byBhIGZ1bmN0aW9uIHRvb2wgbmFtZSBieSByZXBsYWNpbmcgc3BhY2VzIHdpdGggdW5kZXJzY29yZXMgYW5kXG4gKiBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlcy5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgZnVuY3Rpb24gdG9vbCBuYW1lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9GdW5jdGlvblRvb2xOYW1lKG5hbWUpIHtcbiAgICAvLyBSZXBsYWNlIHNwYWNlcyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzL2csICdfJyk7XG4gICAgLy8gUmVwbGFjZSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgd2l0aCB1bmRlcnNjb3Jlc1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xuICAgIC8vIEVuc3VyZSB0aGUgbmFtZSBpcyBub3QgZW1wdHlcbiAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20gYW4gaW5wdXQgdHlwZS4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBab2RPYmplY3QsIHdlIHdpbGwgY29udmVydFxuICogaXQgaW50byBhIEpTT04gU2NoZW1hIGFuZCB1c2UgWm9kIGFzIHBhcnNlci4gSWYgdGhlIGlucHV0IHR5cGUgaXMgYSBKU09OIHNjaGVtYSwgd2UgdXNlIHRoZVxuICogSlNPTi5wYXJzZSBmdW5jdGlvbiB0byBnZXQgdGhlIHBhcnNlci5cbiAqIEBwYXJhbSBpbnB1dFR5cGUgLSBUaGUgaW5wdXQgdHlwZSB0byBnZXQgdGhlIHNjaGVtYSBhbmQgcGFyc2VyIGZyb20uXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB0b29sLlxuICogQHJldHVybnMgVGhlIHNjaGVtYSBhbmQgcGFyc2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShpbnB1dFR5cGUsIG5hbWUpIHtcbiAgICBjb25zdCBwYXJzZXIgPSAoaW5wdXQpID0+IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgIGlmIChpc1pvZE9iamVjdChpbnB1dFR5cGUpKSB7XG4gICAgICAgIGNvbnN0IHVzZUZhbGxiYWNrID0gKG9yaWdpbmFsRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrU2NoZW1hID0gYnVpbGRKc29uU2NoZW1hRnJvbVpvZChpbnB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyOiAocmF3SW5wdXQpID0+IGlucHV0VHlwZS5wYXJzZShKU09OLnBhcnNlKHJhd0lucHV0KSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICAgID8gYCBVcHN0cmVhbSBoZWxwZXIgZXJyb3I6ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgVW5hYmxlIHRvIGNvbnZlcnQgdGhlIHByb3ZpZGVkIFpvZCBzY2hlbWEgdG8gSlNPTiBTY2hlbWEuIEVuc3VyZSB0aGF0IHRoZSBcXGB6b2RcXGAgcGFja2FnZSBpcyBhdmFpbGFibGUgYXQgcnVudGltZSBvciBwcm92aWRlIGEgSlNPTiBzY2hlbWEgb2JqZWN0IGluc3RlYWQuJHtlcnJvck1lc3NhZ2V9YCk7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBmb3JtYXR0ZWRGdW5jdGlvbjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvcm1hdHRlZEZ1bmN0aW9uID0gem9kUmVzcG9uc2VzRnVuY3Rpb25Db21wYXQoe1xuICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogYXNab2RUeXBlKGlucHV0VHlwZSksXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNKc29uU2NoZW1hT2JqZWN0U2hhcGUoZm9ybWF0dGVkRnVuY3Rpb24ucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgIHBhcnNlcjogZm9ybWF0dGVkRnVuY3Rpb24uJHBhcnNlUmF3LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2soKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGlucHV0VHlwZSA9PT0gJ29iamVjdCcgJiYgaW5wdXRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzY2hlbWE6IGlucHV0VHlwZSxcbiAgICAgICAgICAgIHBhcnNlcixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFVzZXJFcnJvcignSW5wdXQgdHlwZSBpcyBub3QgYSBab2RPYmplY3Qgb3IgYSB2YWxpZCBKU09OIHNjaGVtYScpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgYWdlbnQgb3V0cHV0IHR5cGUgcHJvdmlkZWQgdG8gYSBzZXJpYWxpemFibGUgdmVyc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKG91dHB1dFR5cGUpIHtcbiAgICBpZiAob3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgfVxuICAgIGlmIChpc1pvZE9iamVjdChvdXRwdXRUeXBlKSkge1xuICAgICAgICBjb25zdCB1c2VGYWxsYmFjayA9IChleGlzdGluZywgb3JpZ2luYWxFcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tTY2hlbWEgPSBidWlsZEpzb25TY2hlbWFGcm9tWm9kKG91dHB1dFR5cGUpO1xuICAgICAgICAgICAgaWYgKGZhbGxiYWNrU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogZXhpc3Rpbmc/LnR5cGUgPz8gJ2pzb25fc2NoZW1hJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZXhpc3Rpbmc/Lm5hbWUgPz8gJ291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHN0cmljdDogZXhpc3Rpbmc/LnN0cmljdCA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgc2NoZW1hOiBmYWxsYmFja1NjaGVtYSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gb3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIEVycm9yXG4gICAgICAgICAgICAgICAgPyBgIFVwc3RyZWFtIGhlbHBlciBlcnJvcjogJHtvcmlnaW5hbEVycm9yLm1lc3NhZ2V9YFxuICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBVbmFibGUgdG8gY29udmVydCB0aGUgcHJvdmlkZWQgWm9kIHNjaGVtYSB0byBKU09OIFNjaGVtYS4gRW5zdXJlIHRoYXQgdGhlIFxcYHpvZFxcYCBwYWNrYWdlIGlzIGF2YWlsYWJsZSBhdCBydW50aW1lIG9yIHByb3ZpZGUgYSBKU09OIHNjaGVtYSBvYmplY3QgaW5zdGVhZC4ke2Vycm9yTWVzc2FnZX1gKTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IHpvZFRleHRGb3JtYXRDb21wYXQoYXNab2RUeXBlKG91dHB1dFR5cGUpLCAnb3V0cHV0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sodW5kZWZpbmVkLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0pzb25TY2hlbWFPYmplY3RTaGFwZShvdXRwdXQuc2NoZW1hKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBvdXRwdXQubmFtZSxcbiAgICAgICAgICAgICAgICBzdHJpY3Q6IG91dHB1dC5zdHJpY3QgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlRmFsbGJhY2sob3V0cHV0KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFR5cGU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29scy5tanMubWFwIiwiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHZhbCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAodHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gcGFyc2UodmFsKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWwpKSB7XG4gICAgcmV0dXJuIG9wdGlvbnMubG9uZyA/IGZtdExvbmcodmFsKSA6IGZtdFNob3J0KHZhbCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgICd2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIHZhbGlkIG51bWJlci4gdmFsPScgK1xuICAgICAgSlNPTi5zdHJpbmdpZnkodmFsKVxuICApO1xufTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgZ2l2ZW4gYHN0cmAgYW5kIHJldHVybiBtaWxsaXNlY29uZHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7TnVtYmVyfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2Uoc3RyKSB7XG4gIHN0ciA9IFN0cmluZyhzdHIpO1xuICBpZiAoc3RyLmxlbmd0aCA+IDEwMCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbWF0Y2ggPSAvXigtPyg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8d2Vla3M/fHd8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoXG4gICAgc3RyXG4gICk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG4gPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgdmFyIHR5cGUgPSAobWF0Y2hbMl0gfHwgJ21zJykudG9Mb3dlckNhc2UoKTtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAneWVhcnMnOlxuICAgIGNhc2UgJ3llYXInOlxuICAgIGNhc2UgJ3lycyc6XG4gICAgY2FzZSAneXInOlxuICAgIGNhc2UgJ3knOlxuICAgICAgcmV0dXJuIG4gKiB5O1xuICAgIGNhc2UgJ3dlZWtzJzpcbiAgICBjYXNlICd3ZWVrJzpcbiAgICBjYXNlICd3JzpcbiAgICAgIHJldHVybiBuICogdztcbiAgICBjYXNlICdkYXlzJzpcbiAgICBjYXNlICdkYXknOlxuICAgIGNhc2UgJ2QnOlxuICAgICAgcmV0dXJuIG4gKiBkO1xuICAgIGNhc2UgJ2hvdXJzJzpcbiAgICBjYXNlICdob3VyJzpcbiAgICBjYXNlICdocnMnOlxuICAgIGNhc2UgJ2hyJzpcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuICogaDtcbiAgICBjYXNlICdtaW51dGVzJzpcbiAgICBjYXNlICdtaW51dGUnOlxuICAgIGNhc2UgJ21pbnMnOlxuICAgIGNhc2UgJ21pbic6XG4gICAgY2FzZSAnbSc6XG4gICAgICByZXR1cm4gbiAqIG07XG4gICAgY2FzZSAnc2Vjb25kcyc6XG4gICAgY2FzZSAnc2Vjb25kJzpcbiAgICBjYXNlICdzZWNzJzpcbiAgICBjYXNlICdzZWMnOlxuICAgIGNhc2UgJ3MnOlxuICAgICAgcmV0dXJuIG4gKiBzO1xuICAgIGNhc2UgJ21pbGxpc2Vjb25kcyc6XG4gICAgY2FzZSAnbWlsbGlzZWNvbmQnOlxuICAgIGNhc2UgJ21zZWNzJzpcbiAgICBjYXNlICdtc2VjJzpcbiAgICBjYXNlICdtcyc6XG4gICAgICByZXR1cm4gbjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFNob3J0IGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdFNob3J0KG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGQpICsgJ2QnO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBoKSArICdoJztcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbSkgKyAnbSc7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIHMpICsgJ3MnO1xuICB9XG4gIHJldHVybiBtcyArICdtcyc7XG59XG5cbi8qKlxuICogTG9uZyBmb3JtYXQgZm9yIGBtc2AuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IG1zXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBmbXRMb25nKG1zKSB7XG4gIHZhciBtc0FicyA9IE1hdGguYWJzKG1zKTtcbiAgaWYgKG1zQWJzID49IGQpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgZCwgJ2RheScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBoKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIGgsICdob3VyJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IG0pIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgbSwgJ21pbnV0ZScpO1xuICB9XG4gIGlmIChtc0FicyA+PSBzKSB7XG4gICAgcmV0dXJuIHBsdXJhbChtcywgbXNBYnMsIHMsICdzZWNvbmQnKTtcbiAgfVxuICByZXR1cm4gbXMgKyAnIG1zJztcbn1cblxuLyoqXG4gKiBQbHVyYWxpemF0aW9uIGhlbHBlci5cbiAqL1xuXG5mdW5jdGlvbiBwbHVyYWwobXMsIG1zQWJzLCBuLCBuYW1lKSB7XG4gIHZhciBpc1BsdXJhbCA9IG1zQWJzID49IG4gKiAxLjU7XG4gIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gbikgKyAnICcgKyBuYW1lICsgKGlzUGx1cmFsID8gJ3MnIDogJycpO1xufVxuIiwiXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbW1vbiBsb2dpYyBmb3IgYm90aCB0aGUgTm9kZS5qcyBhbmQgd2ViIGJyb3dzZXJcbiAqIGltcGxlbWVudGF0aW9ucyBvZiBgZGVidWcoKWAuXG4gKi9cblxuZnVuY3Rpb24gc2V0dXAoZW52KSB7XG5cdGNyZWF0ZURlYnVnLmRlYnVnID0gY3JlYXRlRGVidWc7XG5cdGNyZWF0ZURlYnVnLmRlZmF1bHQgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuY29lcmNlID0gY29lcmNlO1xuXHRjcmVhdGVEZWJ1Zy5kaXNhYmxlID0gZGlzYWJsZTtcblx0Y3JlYXRlRGVidWcuZW5hYmxlID0gZW5hYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGVkID0gZW5hYmxlZDtcblx0Y3JlYXRlRGVidWcuaHVtYW5pemUgPSByZXF1aXJlKCdtcycpO1xuXHRjcmVhdGVEZWJ1Zy5kZXN0cm95ID0gZGVzdHJveTtcblxuXHRPYmplY3Qua2V5cyhlbnYpLmZvckVhY2goa2V5ID0+IHtcblx0XHRjcmVhdGVEZWJ1Z1trZXldID0gZW52W2tleV07XG5cdH0pO1xuXG5cdC8qKlxuXHQqIFRoZSBjdXJyZW50bHkgYWN0aXZlIGRlYnVnIG1vZGUgbmFtZXMsIGFuZCBuYW1lcyB0byBza2lwLlxuXHQqL1xuXG5cdGNyZWF0ZURlYnVnLm5hbWVzID0gW107XG5cdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0LyoqXG5cdCogTWFwIG9mIHNwZWNpYWwgXCIlblwiIGhhbmRsaW5nIGZ1bmN0aW9ucywgZm9yIHRoZSBkZWJ1ZyBcImZvcm1hdFwiIGFyZ3VtZW50LlxuXHQqXG5cdCogVmFsaWQga2V5IG5hbWVzIGFyZSBhIHNpbmdsZSwgbG93ZXIgb3IgdXBwZXItY2FzZSBsZXR0ZXIsIGkuZS4gXCJuXCIgYW5kIFwiTlwiLlxuXHQqL1xuXHRjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzID0ge307XG5cblx0LyoqXG5cdCogU2VsZWN0cyBhIGNvbG9yIGZvciBhIGRlYnVnIG5hbWVzcGFjZVxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2UgVGhlIG5hbWVzcGFjZSBzdHJpbmcgZm9yIHRoZSBkZWJ1ZyBpbnN0YW5jZSB0byBiZSBjb2xvcmVkXG5cdCogQHJldHVybiB7TnVtYmVyfFN0cmluZ30gQW4gQU5TSSBjb2xvciBjb2RlIGZvciB0aGUgZ2l2ZW4gbmFtZXNwYWNlXG5cdCogQGFwaSBwcml2YXRlXG5cdCovXG5cdGZ1bmN0aW9uIHNlbGVjdENvbG9yKG5hbWVzcGFjZSkge1xuXHRcdGxldCBoYXNoID0gMDtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXNwYWNlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRoYXNoID0gKChoYXNoIDw8IDUpIC0gaGFzaCkgKyBuYW1lc3BhY2UuY2hhckNvZGVBdChpKTtcblx0XHRcdGhhc2ggfD0gMDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNyZWF0ZURlYnVnLmNvbG9yc1tNYXRoLmFicyhoYXNoKSAlIGNyZWF0ZURlYnVnLmNvbG9ycy5sZW5ndGhdO1xuXHR9XG5cdGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yID0gc2VsZWN0Q29sb3I7XG5cblx0LyoqXG5cdCogQ3JlYXRlIGEgZGVidWdnZXIgd2l0aCB0aGUgZ2l2ZW4gYG5hbWVzcGFjZWAuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG5cdCogQHJldHVybiB7RnVuY3Rpb259XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gY3JlYXRlRGVidWcobmFtZXNwYWNlKSB7XG5cdFx0bGV0IHByZXZUaW1lO1xuXHRcdGxldCBlbmFibGVPdmVycmlkZSA9IG51bGw7XG5cdFx0bGV0IG5hbWVzcGFjZXNDYWNoZTtcblx0XHRsZXQgZW5hYmxlZENhY2hlO1xuXG5cdFx0ZnVuY3Rpb24gZGVidWcoLi4uYXJncykge1xuXHRcdFx0Ly8gRGlzYWJsZWQ/XG5cdFx0XHRpZiAoIWRlYnVnLmVuYWJsZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBzZWxmID0gZGVidWc7XG5cblx0XHRcdC8vIFNldCBgZGlmZmAgdGltZXN0YW1wXG5cdFx0XHRjb25zdCBjdXJyID0gTnVtYmVyKG5ldyBEYXRlKCkpO1xuXHRcdFx0Y29uc3QgbXMgPSBjdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO1xuXHRcdFx0c2VsZi5kaWZmID0gbXM7XG5cdFx0XHRzZWxmLnByZXYgPSBwcmV2VGltZTtcblx0XHRcdHNlbGYuY3VyciA9IGN1cnI7XG5cdFx0XHRwcmV2VGltZSA9IGN1cnI7XG5cblx0XHRcdGFyZ3NbMF0gPSBjcmVhdGVEZWJ1Zy5jb2VyY2UoYXJnc1swXSk7XG5cblx0XHRcdGlmICh0eXBlb2YgYXJnc1swXSAhPT0gJ3N0cmluZycpIHtcblx0XHRcdFx0Ly8gQW55dGhpbmcgZWxzZSBsZXQncyBpbnNwZWN0IHdpdGggJU9cblx0XHRcdFx0YXJncy51bnNoaWZ0KCclTycpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcHBseSBhbnkgYGZvcm1hdHRlcnNgIHRyYW5zZm9ybWF0aW9uc1xuXHRcdFx0bGV0IGluZGV4ID0gMDtcblx0XHRcdGFyZ3NbMF0gPSBhcmdzWzBdLnJlcGxhY2UoLyUoW2EtekEtWiVdKS9nLCAobWF0Y2gsIGZvcm1hdCkgPT4ge1xuXHRcdFx0XHQvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZXNjYXBlZCAlIHRoZW4gZG9uJ3QgaW5jcmVhc2UgdGhlIGFycmF5IGluZGV4XG5cdFx0XHRcdGlmIChtYXRjaCA9PT0gJyUlJykge1xuXHRcdFx0XHRcdHJldHVybiAnJSc7XG5cdFx0XHRcdH1cblx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0Y29uc3QgZm9ybWF0dGVyID0gY3JlYXRlRGVidWcuZm9ybWF0dGVyc1tmb3JtYXRdO1xuXHRcdFx0XHRpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNvbnN0IHZhbCA9IGFyZ3NbaW5kZXhdO1xuXHRcdFx0XHRcdG1hdGNoID0gZm9ybWF0dGVyLmNhbGwoc2VsZiwgdmFsKTtcblxuXHRcdFx0XHRcdC8vIE5vdyB3ZSBuZWVkIHRvIHJlbW92ZSBgYXJnc1tpbmRleF1gIHNpbmNlIGl0J3MgaW5saW5lZCBpbiB0aGUgYGZvcm1hdGBcblx0XHRcdFx0XHRhcmdzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gQXBwbHkgZW52LXNwZWNpZmljIGZvcm1hdHRpbmcgKGNvbG9ycywgZXRjLilcblx0XHRcdGNyZWF0ZURlYnVnLmZvcm1hdEFyZ3MuY2FsbChzZWxmLCBhcmdzKTtcblxuXHRcdFx0Y29uc3QgbG9nRm4gPSBzZWxmLmxvZyB8fCBjcmVhdGVEZWJ1Zy5sb2c7XG5cdFx0XHRsb2dGbi5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHRkZWJ1Zy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG5cdFx0ZGVidWcudXNlQ29sb3JzID0gY3JlYXRlRGVidWcudXNlQ29sb3JzKCk7XG5cdFx0ZGVidWcuY29sb3IgPSBjcmVhdGVEZWJ1Zy5zZWxlY3RDb2xvcihuYW1lc3BhY2UpO1xuXHRcdGRlYnVnLmV4dGVuZCA9IGV4dGVuZDtcblx0XHRkZWJ1Zy5kZXN0cm95ID0gY3JlYXRlRGVidWcuZGVzdHJveTsgLy8gWFhYIFRlbXBvcmFyeS4gV2lsbCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZGVidWcsICdlbmFibGVkJywge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG5cdFx0XHRnZXQ6ICgpID0+IHtcblx0XHRcdFx0aWYgKGVuYWJsZU92ZXJyaWRlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVuYWJsZU92ZXJyaWRlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChuYW1lc3BhY2VzQ2FjaGUgIT09IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMpIHtcblx0XHRcdFx0XHRuYW1lc3BhY2VzQ2FjaGUgPSBjcmVhdGVEZWJ1Zy5uYW1lc3BhY2VzO1xuXHRcdFx0XHRcdGVuYWJsZWRDYWNoZSA9IGNyZWF0ZURlYnVnLmVuYWJsZWQobmFtZXNwYWNlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbmFibGVkQ2FjaGU7XG5cdFx0XHR9LFxuXHRcdFx0c2V0OiB2ID0+IHtcblx0XHRcdFx0ZW5hYmxlT3ZlcnJpZGUgPSB2O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRW52LXNwZWNpZmljIGluaXRpYWxpemF0aW9uIGxvZ2ljIGZvciBkZWJ1ZyBpbnN0YW5jZXNcblx0XHRpZiAodHlwZW9mIGNyZWF0ZURlYnVnLmluaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGNyZWF0ZURlYnVnLmluaXQoZGVidWcpO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWJ1Zztcblx0fVxuXG5cdGZ1bmN0aW9uIGV4dGVuZChuYW1lc3BhY2UsIGRlbGltaXRlcikge1xuXHRcdGNvbnN0IG5ld0RlYnVnID0gY3JlYXRlRGVidWcodGhpcy5uYW1lc3BhY2UgKyAodHlwZW9mIGRlbGltaXRlciA9PT0gJ3VuZGVmaW5lZCcgPyAnOicgOiBkZWxpbWl0ZXIpICsgbmFtZXNwYWNlKTtcblx0XHRuZXdEZWJ1Zy5sb2cgPSB0aGlzLmxvZztcblx0XHRyZXR1cm4gbmV3RGVidWc7XG5cdH1cblxuXHQvKipcblx0KiBFbmFibGVzIGEgZGVidWcgbW9kZSBieSBuYW1lc3BhY2VzLiBUaGlzIGNhbiBpbmNsdWRlIG1vZGVzXG5cdCogc2VwYXJhdGVkIGJ5IGEgY29sb24gYW5kIHdpbGRjYXJkcy5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlKG5hbWVzcGFjZXMpIHtcblx0XHRjcmVhdGVEZWJ1Zy5zYXZlKG5hbWVzcGFjZXMpO1xuXHRcdGNyZWF0ZURlYnVnLm5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzO1xuXG5cdFx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0XHRjcmVhdGVEZWJ1Zy5za2lwcyA9IFtdO1xuXG5cdFx0Y29uc3Qgc3BsaXQgPSAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnID8gbmFtZXNwYWNlcyA6ICcnKVxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL1xccysvZywgJywnKVxuXHRcdFx0LnNwbGl0KCcsJylcblx0XHRcdC5maWx0ZXIoQm9vbGVhbik7XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIHNwbGl0KSB7XG5cdFx0XHRpZiAobnNbMF0gPT09ICctJykge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5za2lwcy5wdXNoKG5zLnNsaWNlKDEpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNyZWF0ZURlYnVnLm5hbWVzLnB1c2gobnMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIGdpdmVuIHN0cmluZyBtYXRjaGVzIGEgbmFtZXNwYWNlIHRlbXBsYXRlLCBob25vcmluZ1xuXHQgKiBhc3Rlcmlza3MgYXMgd2lsZGNhcmRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0ZnVuY3Rpb24gbWF0Y2hlc1RlbXBsYXRlKHNlYXJjaCwgdGVtcGxhdGUpIHtcblx0XHRsZXQgc2VhcmNoSW5kZXggPSAwO1xuXHRcdGxldCB0ZW1wbGF0ZUluZGV4ID0gMDtcblx0XHRsZXQgc3RhckluZGV4ID0gLTE7XG5cdFx0bGV0IG1hdGNoSW5kZXggPSAwO1xuXG5cdFx0d2hpbGUgKHNlYXJjaEluZGV4IDwgc2VhcmNoLmxlbmd0aCkge1xuXHRcdFx0aWYgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSBzZWFyY2hbc2VhcmNoSW5kZXhdIHx8IHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpKSB7XG5cdFx0XHRcdC8vIE1hdGNoIGNoYXJhY3RlciBvciBwcm9jZWVkIHdpdGggd2lsZGNhcmRcblx0XHRcdFx0aWYgKHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdFx0XHRzdGFySW5kZXggPSB0ZW1wbGF0ZUluZGV4O1xuXHRcdFx0XHRcdG1hdGNoSW5kZXggPSBzZWFyY2hJbmRleDtcblx0XHRcdFx0XHR0ZW1wbGF0ZUluZGV4Kys7IC8vIFNraXAgdGhlICcqJ1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlYXJjaEluZGV4Kys7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0YXJJbmRleCAhPT0gLTEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZWdhdGVkLWNvbmRpdGlvblxuXHRcdFx0XHQvLyBCYWNrdHJhY2sgdG8gdGhlIGxhc3QgJyonIGFuZCB0cnkgdG8gbWF0Y2ggbW9yZSBjaGFyYWN0ZXJzXG5cdFx0XHRcdHRlbXBsYXRlSW5kZXggPSBzdGFySW5kZXggKyAxO1xuXHRcdFx0XHRtYXRjaEluZGV4Kys7XG5cdFx0XHRcdHNlYXJjaEluZGV4ID0gbWF0Y2hJbmRleDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gTm8gbWF0Y2hcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBIYW5kbGUgdHJhaWxpbmcgJyonIGluIHRlbXBsYXRlXG5cdFx0d2hpbGUgKHRlbXBsYXRlSW5kZXggPCB0ZW1wbGF0ZS5sZW5ndGggJiYgdGVtcGxhdGVbdGVtcGxhdGVJbmRleF0gPT09ICcqJykge1xuXHRcdFx0dGVtcGxhdGVJbmRleCsrO1xuXHRcdH1cblxuXHRcdHJldHVybiB0ZW1wbGF0ZUluZGV4ID09PSB0ZW1wbGF0ZS5sZW5ndGg7XG5cdH1cblxuXHQvKipcblx0KiBEaXNhYmxlIGRlYnVnIG91dHB1dC5cblx0KlxuXHQqIEByZXR1cm4ge1N0cmluZ30gbmFtZXNwYWNlc1xuXHQqIEBhcGkgcHVibGljXG5cdCovXG5cdGZ1bmN0aW9uIGRpc2FibGUoKSB7XG5cdFx0Y29uc3QgbmFtZXNwYWNlcyA9IFtcblx0XHRcdC4uLmNyZWF0ZURlYnVnLm5hbWVzLFxuXHRcdFx0Li4uY3JlYXRlRGVidWcuc2tpcHMubWFwKG5hbWVzcGFjZSA9PiAnLScgKyBuYW1lc3BhY2UpXG5cdFx0XS5qb2luKCcsJyk7XG5cdFx0Y3JlYXRlRGVidWcuZW5hYmxlKCcnKTtcblx0XHRyZXR1cm4gbmFtZXNwYWNlcztcblx0fVxuXG5cdC8qKlxuXHQqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gbW9kZSBuYW1lIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCogQHJldHVybiB7Qm9vbGVhbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGVkKG5hbWUpIHtcblx0XHRmb3IgKGNvbnN0IHNraXAgb2YgY3JlYXRlRGVidWcuc2tpcHMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgc2tpcCkpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZvciAoY29uc3QgbnMgb2YgY3JlYXRlRGVidWcubmFtZXMpIHtcblx0XHRcdGlmIChtYXRjaGVzVGVtcGxhdGUobmFtZSwgbnMpKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8qKlxuXHQqIENvZXJjZSBgdmFsYC5cblx0KlxuXHQqIEBwYXJhbSB7TWl4ZWR9IHZhbFxuXHQqIEByZXR1cm4ge01peGVkfVxuXHQqIEBhcGkgcHJpdmF0ZVxuXHQqL1xuXHRmdW5jdGlvbiBjb2VyY2UodmFsKSB7XG5cdFx0aWYgKHZhbCBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gdmFsLnN0YWNrIHx8IHZhbC5tZXNzYWdlO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0LyoqXG5cdCogWFhYIERPIE5PVCBVU0UuIFRoaXMgaXMgYSB0ZW1wb3Jhcnkgc3R1YiBmdW5jdGlvbi5cblx0KiBYWFggSXQgV0lMTCBiZSByZW1vdmVkIGluIHRoZSBuZXh0IG1ham9yIHJlbGVhc2UuXG5cdCovXG5cdGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdH1cblxuXHRjcmVhdGVEZWJ1Zy5lbmFibGUoY3JlYXRlRGVidWcubG9hZCgpKTtcblxuXHRyZXR1cm4gY3JlYXRlRGVidWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0dXA7XG4iLCIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSB3ZWIgYnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBgZGVidWcoKWAuXG4gKi9cblxuZXhwb3J0cy5mb3JtYXRBcmdzID0gZm9ybWF0QXJncztcbmV4cG9ydHMuc2F2ZSA9IHNhdmU7XG5leHBvcnRzLmxvYWQgPSBsb2FkO1xuZXhwb3J0cy51c2VDb2xvcnMgPSB1c2VDb2xvcnM7XG5leHBvcnRzLnN0b3JhZ2UgPSBsb2NhbHN0b3JhZ2UoKTtcbmV4cG9ydHMuZGVzdHJveSA9ICgoKSA9PiB7XG5cdGxldCB3YXJuZWQgPSBmYWxzZTtcblxuXHRyZXR1cm4gKCkgPT4ge1xuXHRcdGlmICghd2FybmVkKSB7XG5cdFx0XHR3YXJuZWQgPSB0cnVlO1xuXHRcdFx0Y29uc29sZS53YXJuKCdJbnN0YW5jZSBtZXRob2QgYGRlYnVnLmRlc3Ryb3koKWAgaXMgZGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcuIEl0IHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uIG9mIGBkZWJ1Z2AuJyk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuLyoqXG4gKiBDb2xvcnMuXG4gKi9cblxuZXhwb3J0cy5jb2xvcnMgPSBbXG5cdCcjMDAwMENDJyxcblx0JyMwMDAwRkYnLFxuXHQnIzAwMzNDQycsXG5cdCcjMDAzM0ZGJyxcblx0JyMwMDY2Q0MnLFxuXHQnIzAwNjZGRicsXG5cdCcjMDA5OUNDJyxcblx0JyMwMDk5RkYnLFxuXHQnIzAwQ0MwMCcsXG5cdCcjMDBDQzMzJyxcblx0JyMwMENDNjYnLFxuXHQnIzAwQ0M5OScsXG5cdCcjMDBDQ0NDJyxcblx0JyMwMENDRkYnLFxuXHQnIzMzMDBDQycsXG5cdCcjMzMwMEZGJyxcblx0JyMzMzMzQ0MnLFxuXHQnIzMzMzNGRicsXG5cdCcjMzM2NkNDJyxcblx0JyMzMzY2RkYnLFxuXHQnIzMzOTlDQycsXG5cdCcjMzM5OUZGJyxcblx0JyMzM0NDMDAnLFxuXHQnIzMzQ0MzMycsXG5cdCcjMzNDQzY2Jyxcblx0JyMzM0NDOTknLFxuXHQnIzMzQ0NDQycsXG5cdCcjMzNDQ0ZGJyxcblx0JyM2NjAwQ0MnLFxuXHQnIzY2MDBGRicsXG5cdCcjNjYzM0NDJyxcblx0JyM2NjMzRkYnLFxuXHQnIzY2Q0MwMCcsXG5cdCcjNjZDQzMzJyxcblx0JyM5OTAwQ0MnLFxuXHQnIzk5MDBGRicsXG5cdCcjOTkzM0NDJyxcblx0JyM5OTMzRkYnLFxuXHQnIzk5Q0MwMCcsXG5cdCcjOTlDQzMzJyxcblx0JyNDQzAwMDAnLFxuXHQnI0NDMDAzMycsXG5cdCcjQ0MwMDY2Jyxcblx0JyNDQzAwOTknLFxuXHQnI0NDMDBDQycsXG5cdCcjQ0MwMEZGJyxcblx0JyNDQzMzMDAnLFxuXHQnI0NDMzMzMycsXG5cdCcjQ0MzMzY2Jyxcblx0JyNDQzMzOTknLFxuXHQnI0NDMzNDQycsXG5cdCcjQ0MzM0ZGJyxcblx0JyNDQzY2MDAnLFxuXHQnI0NDNjYzMycsXG5cdCcjQ0M5OTAwJyxcblx0JyNDQzk5MzMnLFxuXHQnI0NDQ0MwMCcsXG5cdCcjQ0NDQzMzJyxcblx0JyNGRjAwMDAnLFxuXHQnI0ZGMDAzMycsXG5cdCcjRkYwMDY2Jyxcblx0JyNGRjAwOTknLFxuXHQnI0ZGMDBDQycsXG5cdCcjRkYwMEZGJyxcblx0JyNGRjMzMDAnLFxuXHQnI0ZGMzMzMycsXG5cdCcjRkYzMzY2Jyxcblx0JyNGRjMzOTknLFxuXHQnI0ZGMzNDQycsXG5cdCcjRkYzM0ZGJyxcblx0JyNGRjY2MDAnLFxuXHQnI0ZGNjYzMycsXG5cdCcjRkY5OTAwJyxcblx0JyNGRjk5MzMnLFxuXHQnI0ZGQ0MwMCcsXG5cdCcjRkZDQzMzJ1xuXTtcblxuLyoqXG4gKiBDdXJyZW50bHkgb25seSBXZWJLaXQtYmFzZWQgV2ViIEluc3BlY3RvcnMsIEZpcmVmb3ggPj0gdjMxLFxuICogYW5kIHRoZSBGaXJlYnVnIGV4dGVuc2lvbiAoYW55IEZpcmVmb3ggdmVyc2lvbikgYXJlIGtub3duXG4gKiB0byBzdXBwb3J0IFwiJWNcIiBDU1MgY3VzdG9taXphdGlvbnMuXG4gKlxuICogVE9ETzogYWRkIGEgYGxvY2FsU3RvcmFnZWAgdmFyaWFibGUgdG8gZXhwbGljaXRseSBlbmFibGUvZGlzYWJsZSBjb2xvcnNcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29tcGxleGl0eVxuZnVuY3Rpb24gdXNlQ29sb3JzKCkge1xuXHQvLyBOQjogSW4gYW4gRWxlY3Ryb24gcHJlbG9hZCBzY3JpcHQsIGRvY3VtZW50IHdpbGwgYmUgZGVmaW5lZCBidXQgbm90IGZ1bGx5XG5cdC8vIGluaXRpYWxpemVkLiBTaW5jZSB3ZSBrbm93IHdlJ3JlIGluIENocm9tZSwgd2UnbGwganVzdCBkZXRlY3QgdGhpcyBjYXNlXG5cdC8vIGV4cGxpY2l0bHlcblx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5wcm9jZXNzICYmICh3aW5kb3cucHJvY2Vzcy50eXBlID09PSAncmVuZGVyZXInIHx8IHdpbmRvdy5wcm9jZXNzLl9fbndqcykpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIEludGVybmV0IEV4cGxvcmVyIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0IGNvbG9ycy5cblx0aWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC8oZWRnZXx0cmlkZW50KVxcLyhcXGQrKS8pKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0bGV0IG07XG5cblx0Ly8gSXMgd2Via2l0PyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNjQ1OTYwNi8zNzY3NzNcblx0Ly8gZG9jdW1lbnQgaXMgdW5kZWZpbmVkIGluIHJlYWN0LW5hdGl2ZTogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0LW5hdGl2ZS9wdWxsLzE2MzJcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJldHVybi1hc3NpZ25cblx0cmV0dXJuICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLldlYmtpdEFwcGVhcmFuY2UpIHx8XG5cdFx0Ly8gSXMgZmlyZWJ1Zz8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzk4MTIwLzM3Njc3M1xuXHRcdCh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY29uc29sZSAmJiAod2luZG93LmNvbnNvbGUuZmlyZWJ1ZyB8fCAod2luZG93LmNvbnNvbGUuZXhjZXB0aW9uICYmIHdpbmRvdy5jb25zb2xlLnRhYmxlKSkpIHx8XG5cdFx0Ly8gSXMgZmlyZWZveCA+PSB2MzE/XG5cdFx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9Ub29scy9XZWJfQ29uc29sZSNTdHlsaW5nX21lc3NhZ2VzXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgKG0gPSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSkgJiYgcGFyc2VJbnQobVsxXSwgMTApID49IDMxKSB8fFxuXHRcdC8vIERvdWJsZSBjaGVjayB3ZWJraXQgaW4gdXNlckFnZW50IGp1c3QgaW4gY2FzZSB3ZSBhcmUgaW4gYSB3b3JrZXJcblx0XHQodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudCAmJiBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2FwcGxld2Via2l0XFwvKFxcZCspLykpO1xufVxuXG4vKipcbiAqIENvbG9yaXplIGxvZyBhcmd1bWVudHMgaWYgZW5hYmxlZC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGZvcm1hdEFyZ3MoYXJncykge1xuXHRhcmdzWzBdID0gKHRoaXMudXNlQ29sb3JzID8gJyVjJyA6ICcnKSArXG5cdFx0dGhpcy5uYW1lc3BhY2UgK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICcgJWMnIDogJyAnKSArXG5cdFx0YXJnc1swXSArXG5cdFx0KHRoaXMudXNlQ29sb3JzID8gJyVjICcgOiAnICcpICtcblx0XHQnKycgKyBtb2R1bGUuZXhwb3J0cy5odW1hbml6ZSh0aGlzLmRpZmYpO1xuXG5cdGlmICghdGhpcy51c2VDb2xvcnMpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRjb25zdCBjID0gJ2NvbG9yOiAnICsgdGhpcy5jb2xvcjtcblx0YXJncy5zcGxpY2UoMSwgMCwgYywgJ2NvbG9yOiBpbmhlcml0Jyk7XG5cblx0Ly8gVGhlIGZpbmFsIFwiJWNcIiBpcyBzb21ld2hhdCB0cmlja3ksIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb3RoZXJcblx0Ly8gYXJndW1lbnRzIHBhc3NlZCBlaXRoZXIgYmVmb3JlIG9yIGFmdGVyIHRoZSAlYywgc28gd2UgbmVlZCB0b1xuXHQvLyBmaWd1cmUgb3V0IHRoZSBjb3JyZWN0IGluZGV4IHRvIGluc2VydCB0aGUgQ1NTIGludG9cblx0bGV0IGluZGV4ID0gMDtcblx0bGV0IGxhc3RDID0gMDtcblx0YXJnc1swXS5yZXBsYWNlKC8lW2EtekEtWiVdL2csIG1hdGNoID0+IHtcblx0XHRpZiAobWF0Y2ggPT09ICclJScpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aW5kZXgrKztcblx0XHRpZiAobWF0Y2ggPT09ICclYycpIHtcblx0XHRcdC8vIFdlIG9ubHkgYXJlIGludGVyZXN0ZWQgaW4gdGhlICpsYXN0KiAlY1xuXHRcdFx0Ly8gKHRoZSB1c2VyIG1heSBoYXZlIHByb3ZpZGVkIHRoZWlyIG93bilcblx0XHRcdGxhc3RDID0gaW5kZXg7XG5cdFx0fVxuXHR9KTtcblxuXHRhcmdzLnNwbGljZShsYXN0QywgMCwgYyk7XG59XG5cbi8qKlxuICogSW52b2tlcyBgY29uc29sZS5kZWJ1ZygpYCB3aGVuIGF2YWlsYWJsZS5cbiAqIE5vLW9wIHdoZW4gYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBhIFwiZnVuY3Rpb25cIi5cbiAqIElmIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYXZhaWxhYmxlLCBmYWxscyBiYWNrXG4gKiB0byBgY29uc29sZS5sb2dgLlxuICpcbiAqIEBhcGkgcHVibGljXG4gKi9cbmV4cG9ydHMubG9nID0gY29uc29sZS5kZWJ1ZyB8fCBjb25zb2xlLmxvZyB8fCAoKCkgPT4ge30pO1xuXG4vKipcbiAqIFNhdmUgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VzXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2F2ZShuYW1lc3BhY2VzKSB7XG5cdHRyeSB7XG5cdFx0aWYgKG5hbWVzcGFjZXMpIHtcblx0XHRcdGV4cG9ydHMuc3RvcmFnZS5zZXRJdGVtKCdkZWJ1ZycsIG5hbWVzcGFjZXMpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2UucmVtb3ZlSXRlbSgnZGVidWcnKTtcblx0XHR9XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG59XG5cbi8qKlxuICogTG9hZCBgbmFtZXNwYWNlc2AuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSByZXR1cm5zIHRoZSBwcmV2aW91c2x5IHBlcnNpc3RlZCBkZWJ1ZyBtb2Rlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGxvYWQoKSB7XG5cdGxldCByO1xuXHR0cnkge1xuXHRcdHIgPSBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnZGVidWcnKSB8fCBleHBvcnRzLnN0b3JhZ2UuZ2V0SXRlbSgnREVCVUcnKSA7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJpbXBvcnQgeyBsb2FkRW52IGFzIF9sb2FkRW52LCBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG4vKipcbiAqIExvYWRzIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHRoZSBwcm9jZXNzIGVudmlyb25tZW50LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiBfbG9hZEVudigpO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYSBmbGFnIGlzIGVuYWJsZWQgaW4gdGhlIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmbGFnTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmbGFnIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBmbGFnIGlzIGVuYWJsZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc0VuYWJsZWQoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuICh0eXBlb2YgZW52ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAoZW52W2ZsYWdOYW1lXSA9PT0gJ3RydWUnIHx8IGVudltmbGFnTmFtZV0gPT09ICcxJykpO1xufVxuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNpbmcgPSB7XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobG9hZEVudigpLk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIC8vIGRpc2FibGluZyBieSBkZWZhdWx0IGluIHRlc3RzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RJU0FCTEVfVFJBQ0lORycpO1xuICAgIH0sXG59O1xuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dpbmcgPSB7XG4gICAgZ2V0IGRvbnRMb2dNb2RlbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfTU9ERUxfREFUQScpO1xuICAgIH0sXG4gICAgZ2V0IGRvbnRMb2dUb29sRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19UT09MX0RBVEEnKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIiwiaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IGxvZ2dpbmcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIExMTSBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ01vZGVsRGF0YSA9IGxvZ2dpbmcuZG9udExvZ01vZGVsRGF0YTtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgdG9vbCBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ1Rvb2xEYXRhID0gbG9nZ2luZy5kb250TG9nVG9vbERhdGE7XG4vKipcbiAqIEdldCBhIGxvZ2dlciBmb3IgYSBnaXZlbiBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSBuYW1lc3BhY2UgLSB0aGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIGxvZ2dlci5cbiAqIEByZXR1cm5zIEEgbG9nZ2VyIG9iamVjdCB3aXRoIGBkZWJ1Z2AgYW5kIGBlcnJvcmAgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lc3BhY2UgPSAnb3BlbmFpLWFnZW50cycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIGRlYnVnOiBkZWJ1ZyhuYW1lc3BhY2UpLFxuICAgICAgICBlcnJvcjogY29uc29sZS5lcnJvcixcbiAgICAgICAgd2FybjogY29uc29sZS53YXJuLFxuICAgICAgICBkb250TG9nTW9kZWxEYXRhLFxuICAgICAgICBkb250TG9nVG9vbERhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6Y29yZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJjb25zdCBCWVRFX1BSRVZJRVdfTElNSVQgPSAyMDtcbmV4cG9ydCBmdW5jdGlvbiB0b1NtYXJ0U3RyaW5nKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5QnVmZmVyTGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2YWx1ZSkpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcodmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlLCBzbWFydFN0cmluZ1JlcGxhY2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnW29iamVjdCB3aXRoIGNpcmN1bGFyIHJlZmVyZW5jZXNdJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJMaWtlKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNoYXJlZEFycmF5QnVmZmVyQ3RvciA9IGdsb2JhbFRoaXMuU2hhcmVkQXJyYXlCdWZmZXI7XG4gICAgcmV0dXJuIEJvb2xlYW4oc2hhcmVkQXJyYXlCdWZmZXJDdG9yICYmIHZhbHVlIGluc3RhbmNlb2Ygc2hhcmVkQXJyYXlCdWZmZXJDdG9yKTtcbn1cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KHZhbHVlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdCdWZmZXInICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSkpO1xufVxuZnVuY3Rpb24gZm9ybWF0Qnl0ZUFycmF5KGJ5dGVzKSB7XG4gICAgaWYgKGJ5dGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJ1tieXRlIGFycmF5ICgwIGJ5dGVzKV0nO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aWV3TGVuZ3RoID0gTWF0aC5taW4oYnl0ZXMubGVuZ3RoLCBCWVRFX1BSRVZJRVdfTElNSVQpO1xuICAgIGNvbnN0IHByZXZpZXdQYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldmlld0xlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByZXZpZXdQYXJ0cy5wdXNoKGZvcm1hdEJ5dGUoYnl0ZXNbaV0pKTtcbiAgICB9XG4gICAgY29uc3QgZWxsaXBzaXMgPSBieXRlcy5sZW5ndGggPiBCWVRFX1BSRVZJRVdfTElNSVQgPyAnIOKApicgOiAnJztcbiAgICBjb25zdCBwcmV2aWV3ID0gcHJldmlld1BhcnRzLmpvaW4oJyAnKTtcbiAgICByZXR1cm4gYFtieXRlIGFycmF5ICR7cHJldmlld30ke2VsbGlwc2lzfSAoJHtieXRlcy5sZW5ndGh9IGJ5dGVzKV1gO1xufVxuZnVuY3Rpb24gZm9ybWF0Qnl0ZShieXRlKSB7XG4gICAgcmV0dXJuIGAweCR7Ynl0ZS50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKX1gO1xufVxuZnVuY3Rpb24gc21hcnRTdHJpbmdSZXBsYWNlcihfa2V5LCBuZXN0ZWRWYWx1ZSkge1xuICAgIGlmIChpc0FycmF5QnVmZmVyTGlrZShuZXN0ZWRWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheShuZXN0ZWRWYWx1ZSkpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUJ1ZmZlclZpZXcobmVzdGVkVmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBuZXN0ZWRWYWx1ZTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVBcnJheShuZXcgVWludDhBcnJheSh2aWV3LmJ1ZmZlciwgdmlldy5ieXRlT2Zmc2V0LCB2aWV3LmJ5dGVMZW5ndGgpKTtcbiAgICB9XG4gICAgaWYgKGlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90KG5lc3RlZFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0Qnl0ZUFycmF5KFVpbnQ4QXJyYXkuZnJvbShuZXN0ZWRWYWx1ZS5kYXRhKSk7XG4gICAgfVxuICAgIHJldHVybiBuZXN0ZWRWYWx1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNtYXJ0U3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuLyoqXG4gKiBFeHBvc2VzIGEgY29tcHV0ZXIgdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wdXRlciB0b29sIGxpa2Ugc3BlY2lmeWluZyB0aGUgbG9jYXRpb24gb2YgeW91ciBhZ2VudFxuICogQHJldHVybnMgYSBjb21wdXRlciB0b29sIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVyVG9vbChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdjb21wdXRlcl91c2VfcHJldmlldycsXG4gICAgICAgIGNvbXB1dGVyOiBvcHRpb25zLmNvbXB1dGVyLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBob3N0ZWQgTUNQIHRvb2wgZGVmaW5pdGlvbi5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIENvbmZpZ3VyYXRpb24gZm9yIHRoZSBob3N0ZWQgTUNQIHRvb2wsIGluY2x1ZGluZyBzZXJ2ZXIgY29ubmVjdGlvbiBkZXRhaWxzXG4gKiBhbmQgYXBwcm92YWwgcmVxdWlyZW1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdGVkTWNwVG9vbChvcHRpb25zKSB7XG4gICAgaWYgKCdzZXJ2ZXJVcmwnIGluIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gdGhlIE1DUCBzZXJ2ZXJzIGNvbWFwdGlibGUgd2l0aCB0aGUgc3BlY2lmaWNhdGlvblxuICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgICBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ25ldmVyJ1xuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcCcsXG4gICAgICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IG9wdGlvbnMuYXV0aG9yaXphdGlvbixcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgICAgICBzZXJ2ZXJfbGFiZWw6IG9wdGlvbnMuc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ2Nvbm5lY3RvcklkJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIC8vIE9wZW5BSSdzIGNvbm5lY3RvcnNcbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IG9wdGlvbnMuY29ubmVjdG9ySWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIHJlcXVpcmVfYXBwcm92YWw6ICduZXZlcicsXG4gICAgICAgICAgICAgICAgYWxsb3dlZF90b29sczogdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIob3B0aW9ucy5hbGxvd2VkVG9vbHMpLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBjb25uZWN0b3JfaWQ6IG9wdGlvbnMuY29ubmVjdG9ySWQsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogb3B0aW9ucy5hdXRob3JpemF0aW9uLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHRoZSBNQ1Agc2VydmVycyBjb21hcHRpYmxlIHdpdGggdGhlIHNwZWNpZmljYXRpb25cbiAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiAnbmV2ZXInLFxuICAgICAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogdHlwZW9mIG9wdGlvbnMucmVxdWlyZUFwcHJvdmFsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/ICdhbHdheXMnXG4gICAgICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgICAgIG9uX2FwcHJvdmFsOiBvcHRpb25zLm9uQXBwcm92YWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sJyxcbiAgICAgICAgICAgIG5hbWU6ICdob3N0ZWRfbWNwJyxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBkZWZhdWx0IGZ1bmN0aW9uIHRvIGludm9rZSB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBydW5uaW5nIHRoZSB0b29sLlxuICpcbiAqIEFsd2F5cyByZXR1cm5zIGBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBydW5uaW5nIHRoZSB0b29sLiBQbGVhc2UgdHJ5IGFnYWluLiBFcnJvcjogPGVycm9yIGRldGFpbHM+YFxuICpcbiAqIEBwYXJhbSBjb250ZXh0IEFuIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IFJ1bkNvbnRleHRcbiAqIEBwYXJhbSBlcnJvciBUaGUgZXJyb3IgdGhhdCBvY2N1cnJlZFxuICovXG5mdW5jdGlvbiBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb24oY29udGV4dCwgZXJyb3IpIHtcbiAgICBjb25zdCBkZXRhaWxzID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnRvU3RyaW5nKCkgOiBTdHJpbmcoZXJyb3IpO1xuICAgIHJldHVybiBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6ICR7ZGV0YWlsc31gO1xufVxuLyoqXG4gKiBFeHBvc2VzIGEgZnVuY3Rpb24gdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBmb3IgdGhlIHRvb2xcbiAqIEByZXR1cm5zIEEgbmV3IHRvb2xcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IG5hbWUgPSBvcHRpb25zLm5hbWVcbiAgICAgICAgPyB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5uYW1lKVxuICAgICAgICA6IHRvRnVuY3Rpb25Ub29sTmFtZShvcHRpb25zLmV4ZWN1dGUubmFtZSk7XG4gICAgY29uc3QgdG9vbEVycm9yRnVuY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5lcnJvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IGRlZmF1bHRUb29sRXJyb3JGdW5jdGlvblxuICAgICAgICA6IG9wdGlvbnMuZXJyb3JGdW5jdGlvbjtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb29sIG5hbWUgY2Fubm90IGJlIGVtcHR5LiBFaXRoZXIgbmFtZSB5b3VyIGZ1bmN0aW9uIG9yIHByb3ZpZGUgYSBuYW1lIGluIHRoZSBvcHRpb25zLicpO1xuICAgIH1cbiAgICBjb25zdCBzdHJpY3RNb2RlID0gb3B0aW9ucy5zdHJpY3QgPz8gdHJ1ZTtcbiAgICBpZiAoIXN0cmljdE1vZGUgJiYgaXNab2RPYmplY3Qob3B0aW9ucy5wYXJhbWV0ZXJzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdTdHJpY3QgbW9kZSBpcyByZXF1aXJlZCBmb3IgWm9kIHBhcmFtZXRlcnMnKTtcbiAgICB9XG4gICAgY29uc3QgeyBwYXJzZXIsIHNjaGVtYTogcGFyYW1ldGVycyB9ID0gZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZShvcHRpb25zLnBhcmFtZXRlcnMsIG5hbWUpO1xuICAgIGFzeW5jIGZ1bmN0aW9uIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQsIGRldGFpbHMpIHtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBwYXJzZWRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKGlucHV0KSk7XG4gICAgICAgIGlmIChlcnJvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCAke25hbWV9OiAke2lucHV0fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSW52YWxpZCBKU09OIGlucHV0IGZvciB0b29sJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgSW52b2tpbmcgdG9vbCAke25hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfSB3aXRoIGlucHV0ICR7aW5wdXR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3B0aW9ucy5leGVjdXRlKHBhcnNlZCwgcnVuQ29udGV4dCwgZGV0YWlscyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgaWYgKGxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IGNvbXBsZXRlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBUb29sICR7bmFtZX0gcmV0dXJuZWQ6ICR7c3RyaW5nUmVzdWx0fWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGZ1bmN0aW9uIGludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykge1xuICAgICAgICByZXR1cm4gX2ludm9rZShydW5Db250ZXh0LCBpbnB1dCwgZGV0YWlscykuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAodG9vbEVycm9yRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgY3VycmVudFNwYW4/LnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIHJ1bm5pbmcgdG9vbCAobm9uLWZhdGFsKScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0b29sRXJyb3JGdW5jdGlvbihydW5Db250ZXh0LCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSB0eXBlb2Ygb3B0aW9ucy5uZWVkc0FwcHJvdmFsID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gb3B0aW9ucy5uZWVkc0FwcHJvdmFsXG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICBjb25zdCBpc0VuYWJsZWQgPSB0eXBlb2Ygb3B0aW9ucy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyBhc3luYyAocnVuQ29udGV4dCwgYWdlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IG9wdGlvbnMuaXNFbmFibGVkO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJlZGljYXRlKHsgcnVuQ29udGV4dCwgYWdlbnQgfSk7XG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIDogYXN5bmMgKCkgPT4gdHlwZW9mIG9wdGlvbnMuaXNFbmFibGVkID09PSAnYm9vbGVhbicgPyBvcHRpb25zLmlzRW5hYmxlZCA6IHRydWU7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgIHN0cmljdDogc3RyaWN0TW9kZSxcbiAgICAgICAgaW52b2tlLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICBpc0VuYWJsZWQsXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkUmVxdWlyZUFwcHJvdmFsKHJlcXVpcmVBcHByb3ZhbCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChyZXF1aXJlQXBwcm92YWwuYWx3YXlzKSB7XG4gICAgICAgIHJlc3VsdC5hbHdheXMgPSB7IHRvb2xfbmFtZXM6IHJlcXVpcmVBcHByb3ZhbC5hbHdheXMudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIGlmIChyZXF1aXJlQXBwcm92YWwubmV2ZXIpIHtcbiAgICAgICAgcmVzdWx0Lm5ldmVyID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwubmV2ZXIudG9vbE5hbWVzIH07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihhbGxvd2VkVG9vbHMpIHtcbiAgICBpZiAodHlwZW9mIGFsbG93ZWRUb29scyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsb3dlZFRvb2xzKSkge1xuICAgICAgICByZXR1cm4geyB0b29sX25hbWVzOiBhbGxvd2VkVG9vbHMgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzPy50b29sTmFtZXMgPz8gW10gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2wubWpzLm1hcCIsImltcG9ydCB7IHRvb2wgfSBmcm9tIFwiLi90b29sLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgTUNQU2VydmVyU3RkaW8gYXMgVW5kZXJseWluZ01DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIE1DUFNlcnZlclNTRSBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU1NFLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCB3aXRoTUNQTGlzdFRvb2xzU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBsb2dnZXIgYXMgZ2xvYmFsTG9nZ2VyLCBnZXRMb2dnZXIgfSBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgZGVidWcgZnJvbSAnZGVidWcnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RkaW8tbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVFJFQU1BQkxFX0hUVFBfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0cmVhbWFibGUtaHR0cC1tY3AtY2xpZW50JztcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NTRV9NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3NlLW1jcC1jbGllbnQnO1xuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdGRpbyB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1RESU9fTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSk7XG4gICAgICAgIHRoaXMuY2FjaGVUb29sc0xpc3QgPSBvcHRpb25zLmNhY2hlVG9vbHNMaXN0ID8/IGZhbHNlO1xuICAgICAgICB0aGlzLnRvb2xGaWx0ZXIgPSBvcHRpb25zLnRvb2xGaWx0ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBkZWJ1ZyBtZXNzYWdlIHdoZW4gZGVidWcgbG9nZ2luZyBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSBidWlsZE1lc3NhZ2UgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqL1xuICAgIGRlYnVnTG9nKGJ1aWxkTWVzc2FnZSkge1xuICAgICAgICBpZiAoZGVidWcuZW5hYmxlZCh0aGlzLmxvZ2dlci5uYW1lc3BhY2UpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHdoZW4gdGhpcyBpcyB0cnVlLCB0aGUgZnVuY3Rpb24gdG8gYnVpbGQgdGhlIHN0cmluZyBpcyBjYWxsZWRcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLmRlYnVnKGJ1aWxkTWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICB0b29sRmlsdGVyO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFzZU1DUFNlcnZlclNTRSB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIHRvb2xGaWx0ZXI7XG4gICAgbG9nZ2VyO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIgPVxuICAgICAgICAgICAgb3B0aW9ucy5sb2dnZXIgPz8gZ2V0TG9nZ2VyKERFRkFVTFRfU1NFX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy50b29sRmlsdGVyID0gb3B0aW9ucy50b29sRmlsdGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1pbmltdW0gTUNQIHRvb2wgZGF0YSBkZWZpbml0aW9uLlxuICogVGhpcyB0eXBlIGRlZmluaXRpb24gZG9lcyBub3QgaW50ZW5kIHRvIGNvdmVyIGFsbCBwb3NzaWJsZSBwcm9wZXJ0aWVzLlxuICogSXQgc3VwcG9ydHMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIFNESy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUFRvb2wgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb2JqZWN0JyksXG4gICAgICAgIHByb3BlcnRpZXM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICByZXF1aXJlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHouYm9vbGVhbigpLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIFB1YmxpYyBpbnRlcmZhY2Ugb2YgYW4gTUNQIHNlcnZlciB0aGF0IHByb3ZpZGVzIHRvb2xzLlxuICogWW91IGNhbiB1c2UgdGhpcyBjbGFzcyB0byBwYXNzIE1DUCBzZXJ2ZXIgc2V0dGluZ3MgdG8geW91ciBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0ZGlvIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8ob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclNTRSBleHRlbmRzIEJhc2VNQ1BTZXJ2ZXJTU0Uge1xuICAgIHVuZGVybHlpbmc7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nID0gbmV3IFVuZGVybHlpbmdNQ1BTZXJ2ZXJTU0Uob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb29sc0NhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLmludmFsaWRhdGVUb29sc0NhY2hlKCk7XG4gICAgfVxufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCBmbGF0dGVucyBhbGwgdG9vbHMgZnJvbSBtdWx0aXBsZSBNQ1Agc2VydmVycy5cbiAqIExvZ3MgYW5kIHNraXBzIGFueSBzZXJ2ZXJzIHRoYXQgZmFpbCB0byByZXNwb25kLlxuICovXG5jb25zdCBfY2FjaGVkVG9vbHMgPSB7fTtcbi8qKlxuICogUmVtb3ZlIGNhY2hlZCB0b29scyBmb3IgdGhlIGdpdmVuIHNlcnZlciBzbyB0aGUgbmV4dCBsb29rdXAgZmV0Y2hlcyBmcmVzaCBkYXRhLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXJOYW1lIC0gTmFtZSBvZiB0aGUgTUNQIHNlcnZlciB3aG9zZSBjYWNoZSBzaG91bGQgYmUgY2xlYXJlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlKHNlcnZlck5hbWUpIHtcbiAgICBkZWxldGUgX2NhY2hlZFRvb2xzW3NlcnZlck5hbWVdO1xufVxuLyoqXG4gKiBGZXRjaGVzIGFsbCBmdW5jdGlvbiB0b29scyBmcm9tIGEgc2luZ2xlIE1DUCBzZXJ2ZXIuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyKHsgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0LCBydW5Db250ZXh0LCBhZ2VudCwgfSkge1xuICAgIGlmIChzZXJ2ZXIuY2FjaGVUb29sc0xpc3QgJiYgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSkge1xuICAgICAgICByZXR1cm4gX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXS5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aE1DUExpc3RUb29sc1NwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgY29uc3QgZmV0Y2hlZE1jcFRvb2xzID0gYXdhaXQgc2VydmVyLmxpc3RUb29scygpO1xuICAgICAgICBsZXQgbWNwVG9vbHMgPSBmZXRjaGVkTWNwVG9vbHM7XG4gICAgICAgIGlmIChydW5Db250ZXh0ICYmIGFnZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0geyBydW5Db250ZXh0LCBhZ2VudCwgc2VydmVyTmFtZTogc2VydmVyLm5hbWUgfTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkVG9vbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbCBvZiBmZXRjaGVkTWNwVG9vbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBzZXJ2ZXIudG9vbEZpbHRlcjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGF3YWl0IGZpbHRlcihjb250ZXh0LCB0b29sKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxMb2dnZXIuZGVidWcoYE1DUCBUb29sIChzZXJ2ZXI6ICR7c2VydmVyLm5hbWV9LCB0b29sOiAke3Rvb2wubmFtZX0pIGlzIGJsb2NrZWQgYnkgdGhlIGNhbGxhYmxlIGZpbHRlci5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbG93ZWRUb29sTmFtZXMgPSBmaWx0ZXIuYWxsb3dlZFRvb2xOYW1lcyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrZWRUb29sTmFtZXMgPSBmaWx0ZXIuYmxvY2tlZFRvb2xOYW1lcyA/PyBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkVG9vbE5hbWVzLmxlbmd0aCA+IDAgfHwgYmxvY2tlZFRvb2xOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGFsbG93ZWRUb29sTmFtZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFsbG93ZWRUb29sTmFtZXMuaW5jbHVkZXModG9vbC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvY2tlZCA9IGJsb2NrZWRUb29sTmFtZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGJsb2NrZWRUb29sTmFtZXMuaW5jbHVkZXModG9vbC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWxsb3dlZCB8fCBibG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbG9iYWxMb2dnZXIuZGVidWcoYE1DUCBUb29sIChzZXJ2ZXI6ICR7c2VydmVyLm5hbWV9LCB0b29sOiAke3Rvb2wubmFtZX0pIGlzIGJsb2NrZWQgYnkgdGhlIHN0YXRpYyBmaWx0ZXIuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWFsbG93ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbExvZ2dlci5kZWJ1ZyhgTUNQIFRvb2wgKHNlcnZlcjogJHtzZXJ2ZXIubmFtZX0sIHRvb2w6ICR7dG9vbC5uYW1lfSkgaXMgbm90IGFsbG93ZWQgYnkgdGhlIHN0YXRpYyBmaWx0ZXIuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbHRlcmVkVG9vbHMucHVzaCh0b29sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1jcFRvb2xzID0gZmlsdGVyZWRUb29scztcbiAgICAgICAgfVxuICAgICAgICBzcGFuLnNwYW5EYXRhLnJlc3VsdCA9IG1jcFRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgY29uc3QgdG9vbHMgPSBtY3BUb29scy5tYXAoKHQpID0+IG1jcFRvRnVuY3Rpb25Ub29sKHQsIHNlcnZlciwgY29udmVydFNjaGVtYXNUb1N0cmljdCkpO1xuICAgICAgICBpZiAoc2VydmVyLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICBfY2FjaGVkVG9vbHNbc2VydmVyLm5hbWVdID0gbWNwVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvb2xzO1xuICAgIH0sIHsgZGF0YTogeyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH0gfSk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwVG9vbHMobWNwU2VydmVyc09yT3B0cywgcnVuQ29udGV4dCwgYWdlbnQsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIGNvbnN0IG9wdHMgPSBBcnJheS5pc0FycmF5KG1jcFNlcnZlcnNPck9wdHMpXG4gICAgICAgID8ge1xuICAgICAgICAgICAgbWNwU2VydmVyczogbWNwU2VydmVyc09yT3B0cyxcbiAgICAgICAgICAgIHJ1bkNvbnRleHQsXG4gICAgICAgICAgICBhZ2VudCxcbiAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QsXG4gICAgICAgIH1cbiAgICAgICAgOiBtY3BTZXJ2ZXJzT3JPcHRzO1xuICAgIGNvbnN0IHsgbWNwU2VydmVycywgY29udmVydFNjaGVtYXNUb1N0cmljdDogY29udmVydFNjaGVtYXNUb1N0cmljdEZyb21PcHRzID0gZmFsc2UsIHJ1bkNvbnRleHQ6IHJ1bkNvbnRleHRGcm9tT3B0cywgYWdlbnQ6IGFnZW50RnJvbU9wdHMsIH0gPSBvcHRzO1xuICAgIGNvbnN0IGFsbFRvb2xzID0gW107XG4gICAgY29uc3QgdG9vbE5hbWVzID0gbmV3IFNldCgpO1xuICAgIGZvciAoY29uc3Qgc2VydmVyIG9mIG1jcFNlcnZlcnMpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbHMgPSBhd2FpdCBnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlcih7XG4gICAgICAgICAgICBzZXJ2ZXIsXG4gICAgICAgICAgICBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0OiBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMsXG4gICAgICAgICAgICBydW5Db250ZXh0OiBydW5Db250ZXh0RnJvbU9wdHMsXG4gICAgICAgICAgICBhZ2VudDogYWdlbnRGcm9tT3B0cyxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xOYW1lcyA9IG5ldyBTZXQoc2VydmVyVG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0aW9uID0gWy4uLnNlcnZlclRvb2xOYW1lc10uZmlsdGVyKChuKSA9PiB0b29sTmFtZXMuaGFzKG4pKTtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBEdXBsaWNhdGUgdG9vbCBuYW1lcyBmb3VuZCBhY3Jvc3MgTUNQIHNlcnZlcnM6ICR7aW50ZXJzZWN0aW9uLmpvaW4oJywgJyl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHNlcnZlclRvb2xzKSB7XG4gICAgICAgICAgICB0b29sTmFtZXMuYWRkKHQubmFtZSk7XG4gICAgICAgICAgICBhbGxUb29scy5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhbGxUb29scztcbn1cbi8qKlxuICogQ29udmVydHMgYW4gTUNQIHRvb2wgZGVmaW5pdGlvbiB0byBhIGZ1bmN0aW9uIHRvb2wgZm9yIHRoZSBBZ2VudHMgU0RLLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWNwVG9GdW5jdGlvblRvb2wobWNwVG9vbCwgc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gaW52b2tlKGlucHV0LCBfY29udGV4dCkge1xuICAgICAgICBsZXQgYXJncyA9IHt9O1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgYXJncyA9IEpTT04ucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXJncyA9IGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgICAgICBjdXJyZW50U3Bhbi5zcGFuRGF0YVsnbWNwX2RhdGEnXSA9IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBzZXJ2ZXIuY2FsbFRvb2wobWNwVG9vbC5uYW1lLCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQubGVuZ3RoID09PSAxID8gY29udGVudFswXSA6IGNvbnRlbnQ7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgLi4ubWNwVG9vbC5pbnB1dFNjaGVtYSxcbiAgICAgICAgdHlwZTogbWNwVG9vbC5pbnB1dFNjaGVtYT8udHlwZSA/PyAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucHJvcGVydGllcyA/PyB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IG1jcFRvb2wuaW5wdXRTY2hlbWE/LnJlcXVpcmVkID8/IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogbWNwVG9vbC5pbnB1dFNjaGVtYT8uYWRkaXRpb25hbFByb3BlcnRpZXMgPz8gZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoY29udmVydFNjaGVtYXNUb1N0cmljdCB8fCBzY2hlbWEuYWRkaXRpb25hbFByb3BlcnRpZXMgPT09IHRydWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmljdFNjaGVtYSA9IGVuc3VyZVN0cmljdEpzb25TY2hlbWEoc2NoZW1hKTtcbiAgICAgICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG1jcFRvb2wuZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogc3RyaWN0U2NoZW1hLFxuICAgICAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZ2xvYmFsTG9nZ2VyLndhcm4oYEVycm9yIGNvbnZlcnRpbmcgTUNQIHNjaGVtYSB0byBzdHJpY3QgbW9kZTogJHtlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5vblN0cmljdFNjaGVtYSA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgbmFtZTogbWNwVG9vbC5uYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgcGFyYW1ldGVyczogbm9uU3RyaWN0U2NoZW1hLFxuICAgICAgICBzdHJpY3Q6IGZhbHNlLFxuICAgICAgICBleGVjdXRlOiBpbnZva2UsXG4gICAgfSk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhlIGdpdmVuIEpTT04gc2NoZW1hIGlzIHN0cmljdCAobm8gYWRkaXRpb25hbCBwcm9wZXJ0aWVzLCByZXF1aXJlZCBmaWVsZHMgc2V0KS5cbiAqL1xuZnVuY3Rpb24gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpIHtcbiAgICBjb25zdCBvdXQgPSB7XG4gICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKCFvdXQucmVxdWlyZWQpXG4gICAgICAgIG91dC5yZXF1aXJlZCA9IFtdO1xuICAgIHJldHVybiBvdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tY3AubWpzLm1hcCIsIi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbVwiIC8+XG4vLyBVc2UgZnVuY3Rpb24gaW5zdGVhZCBvZiBleHBvcnRpbmcgdGhlIHZhbHVlIHRvIHByZXZlbnRcbi8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBpc3N1ZXMgY2F1c2VkIGJ5IG90aGVyIGV4cG9ydHMgaW4gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJ1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRFbnYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuZXhwb3J0IGNsYXNzIEJyb3dzZXJFdmVudEVtaXR0ZXIge1xuICAgICN0YXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICAjbGlzdGVuZXJXcmFwcGVycyA9IG5ldyBNYXAoKTtcbiAgICBvbih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsZXQgbGlzdGVuZXJzRm9yVHlwZSA9IHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuZ2V0KGV2ZW50VHlwZSk7XG4gICAgICAgIGlmICghbGlzdGVuZXJzRm9yVHlwZSkge1xuICAgICAgICAgICAgbGlzdGVuZXJzRm9yVHlwZSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIHRoaXMuI2xpc3RlbmVyV3JhcHBlcnMuc2V0KGV2ZW50VHlwZSwgbGlzdGVuZXJzRm9yVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHdyYXBwZXJzID0gbGlzdGVuZXJzRm9yVHlwZS5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAoIXdyYXBwZXJzKSB7XG4gICAgICAgICAgICB3cmFwcGVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUuc2V0KGxpc3RlbmVyLCB3cmFwcGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlciA9ICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSk7XG4gICAgICAgIHdyYXBwZXJzLmFkZCh3cmFwcGVyKTtcbiAgICAgICAgdGhpcy4jdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCB3cmFwcGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBldmVudFR5cGUgPSB0eXBlO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gdGhpcy4jbGlzdGVuZXJXcmFwcGVycy5nZXQoZXZlbnRUeXBlKTtcbiAgICAgICAgY29uc3Qgd3JhcHBlcnMgPSBsaXN0ZW5lcnNGb3JUeXBlPy5nZXQobGlzdGVuZXIpO1xuICAgICAgICBpZiAod3JhcHBlcnM/LnNpemUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgd3JhcHBlciBvZiB3cmFwcGVycykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgd3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlPy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGU/LnNpemUgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNsaXN0ZW5lcldyYXBwZXJzLmRlbGV0ZShldmVudFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IGFyZ3MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLiN0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgaGFuZGxlciA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9mZih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uKHR5cGUsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59XG5leHBvcnQgeyBCcm93c2VyRXZlbnRFbWl0dGVyIGFzIFJ1bnRpbWVFdmVudEVtaXR0ZXIgfTtcbmV4cG9ydCBjb25zdCByYW5kb21VVUlEID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCkge1xuICAgICAgICByZXR1cm4gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICB9XG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgUmVhZGFibGUgPSBjbGFzcyBSZWFkYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBwaXBlVG8oX2Rlc3RpbmF0aW9uLCBfb3B0aW9ucykgeyB9XG4gICAgcGlwZVRocm91Z2goX3RyYW5zZm9ybSwgX29wdGlvbnMpIHsgfVxufTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbSA9IGdsb2JhbFRoaXMuUmVhZGFibGVTdHJlYW07XG5leHBvcnQgY29uc3QgUmVhZGFibGVTdHJlYW1Db250cm9sbGVyID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbURlZmF1bHRDb250cm9sbGVyO1xuZXhwb3J0IGNvbnN0IFRyYW5zZm9ybVN0cmVhbSA9IGdsb2JhbFRoaXMuVHJhbnNmb3JtU3RyZWFtO1xuZXhwb3J0IGNsYXNzIEFzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBjb250ZXh0ID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHJ1bihjb250ZXh0LCBmbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gICAgZ2V0U3RvcmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQ7XG4gICAgfVxuICAgIGVudGVyV2l0aChjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCB7IE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC1zZXJ2ZXIvYnJvd3Nlci5tanNcIjtcbmNsYXNzIEJyb3dzZXJUaW1lciB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcykge1xuICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dChjYWxsYmFjaywgbXMpO1xuICAgICAgICB0aW1lb3V0LnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnJlZiA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHRpbWVvdXQudW5yZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0LnVucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC5oYXNSZWYgPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQuaGFzUmVmID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5oYXNSZWYgOiAoKSA9PiB0cnVlO1xuICAgICAgICB0aW1lb3V0LnJlZnJlc2ggPVxuICAgICAgICAgICAgdHlwZW9mIHRpbWVvdXQucmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmcmVzaCA6ICgpID0+IHRpbWVvdXQ7XG4gICAgICAgIHJldHVybiB0aW1lb3V0O1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG59XG5jb25zdCB0aW1lciA9IG5ldyBCcm93c2VyVGltZXIoKTtcbmV4cG9ydCB7IHRpbWVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub24odHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIG9mZih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXI7XG4gICAgfVxuICAgIGVtaXQodHlwZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5ldmVudEVtaXR0ZXIuZW1pdCh0eXBlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgZW1pdHRlciB0aGF0IGV2ZXJ5IEFnZW50IGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgYWdlbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudEhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBSdW5uZXIgaW5zdGFuY2UgaW5oZXJpdHMgZnJvbSBhbmQgdGhhdCBlbWl0cyBldmVudHMgZm9yIHRoZSBsaWZlY3ljbGVcbiAqIG9mIHRoZSBvdmVyYWxsIHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bkhvb2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUubWpzLm1hcCIsImltcG9ydCB7IGxvYWRFbnYgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG5leHBvcnQgY29uc3QgT1BFTkFJX0RFRkFVTFRfTU9ERUxfRU5WX1ZBUklBQkxFX05BTUUgPSAnT1BFTkFJX0RFRkFVTFRfTU9ERUwnO1xuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIG1vZGVsIG5hbWUgaXMgYSBHUFQtNSBtb2RlbCBhbmQgcmVhc29uaW5nIHNldHRpbmdzIGFyZSByZXF1aXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKG1vZGVsTmFtZSkge1xuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aCgnZ3B0LTUtY2hhdCcpKSB7XG4gICAgICAgIC8vIGdwdC01LWNoYXQtbGF0ZXN0IGRvZXMgbm90IHJlcXVpcmUgcmVhc29uaW5nIHNldHRpbmdzXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gbWF0Y2hlcyBhbnkgb2YgZ3B0LTUgbW9kZWxzXG4gICAgcmV0dXJuIG1vZGVsTmFtZS5zdGFydHNXaXRoKCdncHQtNScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIFRydWUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbC5cbiAqIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgdGhlIGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MgYXJlIGNvbXBhdGlibGUgd2l0aCBHUFQtNSBtb2RlbHMuXG4gKiBJZiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBub3QgYSBHUFQtNSBtb2RlbCwgdGhlIG1vZGVsIHNldHRpbmdzIGFyZSBjb21wYXRpYmxlIHdpdGggb3RoZXIgbW9kZWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNHcHQ1RGVmYXVsdCgpIHtcbiAgICByZXR1cm4gZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQoZ2V0RGVmYXVsdE1vZGVsKCkpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWwoKSB7XG4gICAgY29uc3QgZW52ID0gbG9hZEVudigpO1xuICAgIHJldHVybiAoZW52W09QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FXT8udG9Mb3dlckNhc2UoKSA/PyAnZ3B0LTQuMScpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWZhdWx0IG1vZGVsIHNldHRpbmdzLlxuICogSWYgdGhlIGRlZmF1bHQgbW9kZWwgaXMgYSBHUFQtNSBtb2RlbCwgcmV0dXJucyB0aGUgR1BULTUgZGVmYXVsdCBtb2RlbCBzZXR0aW5ncy5cbiAqIE90aGVyd2lzZSwgcmV0dXJucyB0aGUgbGVnYWN5IGRlZmF1bHQgbW9kZWwgc2V0dGluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncyhtb2RlbCkge1xuICAgIGNvbnN0IF9tb2RlbCA9IG1vZGVsID8/IGdldERlZmF1bHRNb2RlbCgpO1xuICAgIGlmIChncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZChfbW9kZWwpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyBXZSBjaG9zZSBcImxvd1wiIGluc3RlYWQgb2YgXCJtaW5pbWFsXCIgYmVjYXVzZSBzb21lIG9mIHRoZSBidWlsdC1pbiB0b29sc1xuICAgICAgICAgICAgLy8gKGUuZy4sIGZpbGUgc2VhcmNoLCBpbWFnZSBnZW5lcmF0aW9uLCBldGMuKSBkbyBub3Qgc3VwcG9ydCBcIm1pbmltYWxcIlxuICAgICAgICAgICAgLy8gSWYgeW91IHdhbnQgdG8gdXNlIFwibWluaW1hbFwiIHJlYXNvbmluZyBlZmZvcnQsIHlvdSBjYW4gcGFzcyB5b3VyIG93biBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgcmVhc29uaW5nOiB7IGVmZm9ydDogJ2xvdycgfSxcbiAgICAgICAgICAgIHRleHQ6IHsgdmVyYm9zaXR5OiAnbG93JyB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZhdWx0TW9kZWwubWpzLm1hcCIsImltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBhZGRFcnJvclRvQ3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogR2VuZXJhdGVzIHRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuIGFzIHRvb2wgb3V0cHV0IHRvIHRoZSBtb2RlbCB0aGF0IHJlcXVlc3RlZCB0aGUgaGFuZG9mZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmZXJNZXNzYWdlKGFnZW50KSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsgYXNzaXN0YW50OiBhZ2VudC5uYW1lIH0pO1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBuYW1lIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAqXG4gKiBAcGFyYW0gYWdlbnQgVGhlIGFnZW50IHRvIHRyYW5zZmVyIHRvXG4gKiBAcmV0dXJucyBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sTmFtZShhZ2VudCkge1xuICAgIHJldHVybiBgdHJhbnNmZXJfdG9fJHt0b0Z1bmN0aW9uVG9vbE5hbWUoYWdlbnQubmFtZSl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGVzIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZlxuICovXG5mdW5jdGlvbiBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCkge1xuICAgIHJldHVybiBgSGFuZG9mZiB0byB0aGUgJHthZ2VudC5uYW1lfSBhZ2VudCB0byBoYW5kbGUgdGhlIHJlcXVlc3QuICR7YWdlbnQuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnfWA7XG59XG5leHBvcnQgY2xhc3MgSGFuZG9mZiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIHRvb2xOYW1lO1xuICAgIC8qKlxuICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbERlc2NyaXB0aW9uO1xuICAgIC8qKlxuICAgICAqIFRoZSBKU09OIHNjaGVtYSBmb3IgdGhlIGhhbmRvZmYgaW5wdXQuIENhbiBiZSBlbXB0eSBpZiB0aGUgaGFuZG9mZiBkb2VzIG5vdCB0YWtlIGFuIGlucHV0XG4gICAgICovXG4gICAgaW5wdXRKc29uU2NoZW1hID0ge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgaW5wdXQgSlNPTiBzY2hlbWEgaXMgaW4gc3RyaWN0IG1vZGUuIFdlICoqc3Ryb25nbHkqKiByZWNvbW1lbmQgc2V0dGluZyB0aGlzIHRvXG4gICAgICogdHJ1ZSwgYXMgaXQgaW5jcmVhc2VzIHRoZSBsaWtlbGlob29kIG9mIGNvcnJlY3QgSlNPTiBpbnB1dC5cbiAgICAgKi9cbiAgICBzdHJpY3RKc29uU2NoZW1hID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBUaGUgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSBoYW5kb2ZmLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgYXJlOlxuICAgICAqIDEuIFRoZSBoYW5kb2ZmIHJ1biBjb250ZXh0XG4gICAgICogMi4gVGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBMTE0sIGFzIGEgSlNPTiBzdHJpbmcuIEVtcHR5IHN0cmluZyBpZiBpbnB1dEpzb25TY2hlbWEgaXMgZW1wdHkuXG4gICAgICpcbiAgICAgKiBNdXN0IHJldHVybiBhbiBhZ2VudFxuICAgICAqL1xuICAgIG9uSW52b2tlSGFuZG9mZjtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50TmFtZTtcbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZmlsdGVycyB0aGUgaW5wdXRzIHRoYXQgYXJlIHBhc3NlZCB0byB0aGUgbmV4dCBhZ2VudC4gQnkgZGVmYXVsdCwgdGhlIG5ldyBhZ2VudFxuICAgICAqIHNlZXMgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzdG9yeS4gSW4gc29tZSBjYXNlcywgeW91IG1heSB3YW50IHRvIGZpbHRlciBpbnB1dHMgZS5nLiB0b1xuICAgICAqIHJlbW92ZSBvbGRlciBpbnB1dHMsIG9yIHJlbW92ZSB0b29scyBmcm9tIGV4aXN0aW5nIGlucHV0cy5cbiAgICAgKlxuICAgICAqIFRoZSBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgdGhlIGVudGlyZSBjb252ZXJzYXRpb24gaGlzc3Rvcnkgc28gZmFyLCBpbmNsdWRpbmcgdGhlIGlucHV0IGl0ZW1cbiAgICAgKiB0aGF0IHRyaWdnZXJlZCB0aGUgaGFuZG9mZiBhbmQgYSB0b29sIGNhbGwgb3V0cHV0IGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBoYW5kb2ZmIHRvb2wncyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBZb3UgYXJlIGZyZWUgdG8gbW9kaWZ5IHRoZSBpbnB1dCBoaXN0b3J5IG9yIG5ldyBpdGVtcyBhcyB5b3Ugc2VlIGZpdC4gVGhlIG5leHQgYWdlbnQgdGhhdCBydW5zXG4gICAgICogd2lsbCByZWNlaXZlIGBoYW5kb2ZmSW5wdXREYXRhLmFsbEl0ZW1zXG4gICAgICovXG4gICAgaW5wdXRGaWx0ZXI7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IHRoYXQgaXMgYmVpbmcgaGFuZGVkIG9mZiB0by5cbiAgICAgKi9cbiAgICBhZ2VudDtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG9vbCBkZWZpbml0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW52b2tlIHRoZSBoYW5kb2ZmLlxuICAgICAqL1xuICAgIGdldEhhbmRvZmZBc0Z1bmN0aW9uVG9vbCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnRvb2xOYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdGhpcy5pbnB1dEpzb25TY2hlbWEsXG4gICAgICAgICAgICBzdHJpY3Q6IHRoaXMuc3RyaWN0SnNvblNjaGVtYSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaXNFbmFibGVkID0gYXN5bmMgKCkgPT4gdHJ1ZTtcbiAgICBjb25zdHJ1Y3RvcihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKSB7XG4gICAgICAgIHRoaXMuYWdlbnROYW1lID0gYWdlbnQubmFtZTtcbiAgICAgICAgdGhpcy5vbkludm9rZUhhbmRvZmYgPSBvbkludm9rZUhhbmRvZmY7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KTtcbiAgICAgICAgdGhpcy50b29sRGVzY3JpcHRpb24gPSBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCk7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoYW5kb2ZmIGZyb20gYW4gYWdlbnQuIEhhbmRvZmZzIGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgd2hlbiB5b3UgcGFzcyBhbiBhZ2VudFxuICogaW50byB0aGUgYGhhbmRvZmZzYCBvcHRpb24gb2YgdGhlIGBBZ2VudGAgY29uc3RydWN0b3IuIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb25cbiAqIHRvIGNyZWF0ZSBhIGhhbmRvZmYgbWFudWFsbHksIGdpdmluZyB5b3UgbW9yZSBjb250cm9sIG92ZXIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRJbnB1dFR5cGUgVGhlIGlucHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRvZmYoYWdlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IHBhcnNlciA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoYXNPbkhhbmRvZmYgPSAhIWNvbmZpZy5vbkhhbmRvZmY7XG4gICAgY29uc3QgaGFzSW5wdXRUeXBlID0gISFjb25maWcuaW5wdXRUeXBlO1xuICAgIGNvbnN0IGhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlID0gaGFzT25IYW5kb2ZmID09PSBoYXNJbnB1dFR5cGU7XG4gICAgaWYgKCFoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGVpdGhlciBib3RoIGBvbkhhbmRvZmZgIGFuZCBgaW5wdXRUeXBlYCBvciBuZWl0aGVyLicpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBvbkludm9rZUhhbmRvZmYoY29udGV4dCwgaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIpIHtcbiAgICAgICAgICAgIGlmICghaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEhhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0IGJ1dCBnb3Q6ICR7aW5wdXRKc29uU3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IGBpbnB1dCBpcyBlbXB0eWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHRoYXQgaXQncyB2YWxpZCBpbnB1dCBidXQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VyKGlucHV0SnNvblN0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkhhbmRvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZihjb250ZXh0LCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIEpTT04gcHJvdmlkZWRgLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBJbnZhbGlkIEpTT04gd2hlbiBwYXJzaW5nOiAke2lucHV0SnNvblN0cmluZ30uIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIEpTT04gcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmY/Lihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRvZmYgPSBuZXcgSGFuZG9mZihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKTtcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5pc0VuYWJsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY29uc3QgcHJlZGljYXRlID0gY29uZmlnLmlzRW5hYmxlZDtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoeyBydW5Db250ZXh0LCBhZ2VudCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmVkaWNhdGUoeyBydW5Db250ZXh0LCBhZ2VudCB9KTtcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWcuaXNFbmFibGVkID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgaGFuZG9mZi5pc0VuYWJsZWQgPSBhc3luYyAoKSA9PiBjb25maWcuaXNFbmFibGVkO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmlucHV0VHlwZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGNvbmZpZy5pbnB1dFR5cGUsIGhhbmRvZmYudG9vbE5hbWUpO1xuICAgICAgICBoYW5kb2ZmLmlucHV0SnNvblNjaGVtYSA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgIGhhbmRvZmYuc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgICAgIHBhcnNlciA9IHJlc3VsdC5wYXJzZXI7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbE5hbWVPdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xOYW1lID0gY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sRGVzY3JpcHRpb24gPSBjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEZpbHRlciA9IGNvbmZpZy5pbnB1dEZpbHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmY7XG59XG4vKipcbiAqIFJldHVybnMgYSBoYW5kb2ZmIGZvciB0aGUgZ2l2ZW4gYWdlbnQuIElmIHRoZSBhZ2VudCBpcyBhbHJlYWR5IHdyYXBwZWQgaW50byBhIGhhbmRvZmYsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGEgbmV3IGhhbmRvZmYgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kb2ZmKGFnZW50KSB7XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSGFuZG9mZikge1xuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmKGFnZW50KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRvZmYubWpzLm1hcCIsIi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0TWVzc2FnZVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0TWVzc2FnZSkge1xuICAgIGlmIChvdXRwdXRNZXNzYWdlLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAob3V0cHV0TWVzc2FnZS5yb2xlICE9PSAnYXNzaXN0YW50Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0SXRlbSA9IG91dHB1dE1lc3NhZ2UuY29udGVudFtvdXRwdXRNZXNzYWdlLmNvbnRlbnQubGVuZ3RoIC0gMV07XG4gICAgaWYgKGxhc3RJdGVtLnR5cGUgIT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGxhc3RJdGVtLnRleHQ7XG59XG4vKipcbiAqIEdldCB0aGUgbGFzdCB0ZXh0IGZyb20gdGhlIG91dHB1dCBtZXNzYWdlLlxuICogQHBhcmFtIG91dHB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE91dHB1dFRleHQob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC5vdXRwdXQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIChnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG91dHB1dC5vdXRwdXRbb3V0cHV0Lm91dHB1dC5sZW5ndGggLSAxXSkgfHwgJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWVzc2FnZXMubWpzLm1hcCIsImltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmltcG9ydCB7IGdldEFsbE1jcFRvb2xzIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuaW1wb3J0IHsgZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MsIGdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkLCBpc0dwdDVEZWZhdWx0LCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmltcG9ydCB7IHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmltcG9ydCB7IGdldEhhbmRvZmYgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVubmVyIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRPdXRwdXRUZXh0IH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBpc0FnZW50VG9vbElucHV0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IGlzWm9kT2JqZWN0IH0gZnJvbSBcIi4vdXRpbHMvdHlwZUd1YXJkcy5tanNcIjtcbmltcG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vLyBQZXItcHJvY2VzcywgZXBoZW1lcmFsIG1hcCBsaW5raW5nIGEgZnVuY3Rpb24gdG9vbCBjYWxsIHRvIGl0cyBuZXN0ZWRcbi8vIEFnZW50IHJ1biByZXN1bHQgd2l0aGluIHRoZSBzYW1lIHJ1bjsgZW50cnkgaXMgcmVtb3ZlZCBhZnRlciBjb25zdW1wdGlvbi5cbmNvbnN0IGFnZW50VG9vbFJ1blJlc3VsdHMgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIHNhdmVBZ2VudFRvb2xSdW5SZXN1bHQodG9vbENhbGwsIHJ1blJlc3VsdCkge1xuICAgIGlmICh0b29sQ2FsbCkge1xuICAgICAgICBhZ2VudFRvb2xSdW5SZXN1bHRzLnNldCh0b29sQ2FsbCwgcnVuUmVzdWx0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sQ2FsbCkge1xuICAgIGNvbnN0IHJ1blJlc3VsdCA9IGFnZW50VG9vbFJ1blJlc3VsdHMuZ2V0KHRvb2xDYWxsKTtcbiAgICBpZiAocnVuUmVzdWx0KSB7XG4gICAgICAgIGFnZW50VG9vbFJ1blJlc3VsdHMuZGVsZXRlKHRvb2xDYWxsKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1blJlc3VsdDtcbn1cbi8vIFRoZSBwYXJhbWV0ZXIgdHlwZSBmbyBuZWVkQXBwcm92YWwgZnVuY3Rpb24gZm9yIHRoZSB0b29sIGNyZWF0ZWQgYnkgQWdlbnQuYXNUb29sKCkgbWV0aG9kXG5jb25zdCBBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSA9IHoub2JqZWN0KHsgaW5wdXQ6IHouc3RyaW5nKCkgfSk7XG4vKipcbiAqIFRoZSBjbGFzcyByZXByZXNlbnRpbmcgYW4gQUkgYWdlbnQgY29uZmlndXJlZCB3aXRoIGluc3RydWN0aW9ucywgdG9vbHMsIGd1YXJkcmFpbHMsIGhhbmRvZmZzIGFuZCBtb3JlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCBwYXNzaW5nIGBpbnN0cnVjdGlvbnNgLCB3aGljaCBpcyB0aGUgXCJzeXN0ZW0gcHJvbXB0XCIgZm9yIHRoZSBhZ2VudC4gSW5cbiAqIGFkZGl0aW9uLCB5b3UgY2FuIHBhc3MgYGhhbmRvZmZEZXNjcmlwdGlvbmAsIHdoaWNoIGlzIGEgaHVtYW4tcmVhZGFibGUgZGVzY3JpcHRpb24gb2YgdGhlXG4gKiBhZ2VudCwgdXNlZCB3aGVuIHRoZSBhZ2VudCBpcyB1c2VkIGluc2lkZSB0b29scy9oYW5kb2Zmcy5cbiAqXG4gKiBBZ2VudHMgYXJlIGdlbmVyaWMgb24gdGhlIGNvbnRleHQgdHlwZS4gVGhlIGNvbnRleHQgaXMgYSAobXV0YWJsZSkgb2JqZWN0IHlvdSBjcmVhdGUuIEl0IGlzXG4gKiBwYXNzZWQgdG8gdG9vbCBmdW5jdGlvbnMsIGhhbmRvZmZzLCBndWFyZHJhaWxzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZ2VudCBleHRlbmRzIEFnZW50SG9va3Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBBZ2VudCB3aXRoIGhhbmRvZmZzIGFuZCBhdXRvbWF0aWNhbGx5IGluZmVyIHRoZSB1bmlvbiB0eXBlIGZvciBUT3V0cHV0IGZyb20gdGhlIGhhbmRvZmYgYWdlbnRzJyBvdXRwdXQgdHlwZXMuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICBoYW5kb2ZmczogY29uZmlnLmhhbmRvZmZzLFxuICAgICAgICAgICAgb3V0cHV0VHlwZTogY29uZmlnLm91dHB1dFR5cGUsXG4gICAgICAgICAgICBoYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBERUZBVUxUX01PREVMX1BMQUNFSE9MREVSID0gJyc7XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgcHJvbXB0O1xuICAgIGhhbmRvZmZEZXNjcmlwdGlvbjtcbiAgICBoYW5kb2ZmcztcbiAgICBtb2RlbDtcbiAgICBtb2RlbFNldHRpbmdzO1xuICAgIHRvb2xzO1xuICAgIG1jcFNlcnZlcnM7XG4gICAgaW5wdXRHdWFyZHJhaWxzO1xuICAgIG91dHB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0VHlwZSA9ICd0ZXh0JztcbiAgICB0b29sVXNlQmVoYXZpb3I7XG4gICAgcmVzZXRUb29sQ2hvaWNlO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5uYW1lICE9PSAnc3RyaW5nJyB8fCBjb25maWcubmFtZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdBZ2VudCBtdXN0IGhhdmUgYSBuYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IGNvbmZpZy5uYW1lO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGNvbmZpZy5pbnN0cnVjdGlvbnMgPz8gQWdlbnQuREVGQVVMVF9NT0RFTF9QTEFDRUhPTERFUjtcbiAgICAgICAgdGhpcy5wcm9tcHQgPSBjb25maWcucHJvbXB0O1xuICAgICAgICB0aGlzLmhhbmRvZmZEZXNjcmlwdGlvbiA9IGNvbmZpZy5oYW5kb2ZmRGVzY3JpcHRpb24gPz8gJyc7XG4gICAgICAgIHRoaXMuaGFuZG9mZnMgPSBjb25maWcuaGFuZG9mZnMgPz8gW107XG4gICAgICAgIHRoaXMubW9kZWwgPSBjb25maWcubW9kZWwgPz8gJyc7XG4gICAgICAgIHRoaXMubW9kZWxTZXR0aW5ncyA9IGNvbmZpZy5tb2RlbFNldHRpbmdzID8/IGdldERlZmF1bHRNb2RlbFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMudG9vbHMgPSBjb25maWcudG9vbHMgPz8gW107XG4gICAgICAgIHRoaXMubWNwU2VydmVycyA9IGNvbmZpZy5tY3BTZXJ2ZXJzID8/IFtdO1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlscyA9IGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlscyA9IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdO1xuICAgICAgICBpZiAoY29uZmlnLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VHlwZSA9IGNvbmZpZy5vdXRwdXRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9vbFVzZUJlaGF2aW9yID0gY29uZmlnLnRvb2xVc2VCZWhhdmlvciA/PyAncnVuX2xsbV9hZ2Fpbic7XG4gICAgICAgIHRoaXMucmVzZXRUb29sQ2hvaWNlID0gY29uZmlnLnJlc2V0VG9vbENob2ljZSA/PyB0cnVlO1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIFRoZSB1c2VyIHNldHMgYSBub24tZGVmYXVsdCBtb2RlbFxuICAgICAgICBjb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgaXMgZ3B0LTVcbiAgICAgICAgICAgIGlzR3B0NURlZmF1bHQoKSAmJlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIHNwZWNpZmllZCBtb2RlbCBpcyBub3QgYSBncHQtNSBtb2RlbFxuICAgICAgICAgICAgKHR5cGVvZiBjb25maWcubW9kZWwgIT09ICdzdHJpbmcnIHx8XG4gICAgICAgICAgICAgICAgIWdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKGNvbmZpZy5tb2RlbCkpICYmXG4gICAgICAgICAgICAvLyBUaGUgbW9kZWwgc2V0dGluZ3MgYXJlIG5vdCBjdXN0b21pemVkIGZvciB0aGUgc3BlY2lmaWVkIG1vZGVsXG4gICAgICAgICAgICBjb25maWcubW9kZWxTZXR0aW5ncyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIHNjZW5hcmlvLCB3ZSBzaG91bGQgdXNlIGEgZ2VuZXJpYyBtb2RlbCBzZXR0aW5nc1xuICAgICAgICAgICAgLy8gYmVjYXVzZSBub24tZ3B0LTUgbW9kZWxzIGFyZSBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSBkZWZhdWx0IGdwdC01IG1vZGVsIHNldHRpbmdzLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QtZWZmb3J0IGF0dGVtcHQgdG8gbWFrZSB0aGUgYWdlbnQgd29yayB3aXRoIG5vbi1ncHQtNSBtb2RlbHMuXG4gICAgICAgICAgICB0aGlzLm1vZGVsU2V0dGluZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICAvLyAtLS0gUnVudGltZSB3YXJuaW5nIGZvciBoYW5kb2ZmIG91dHB1dCB0eXBlIGNvbXBhdGliaWxpdHkgLS0tXG4gICAgICAgIGlmIChjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBjb25maWcuaGFuZG9mZk91dHB1dFR5cGVXYXJuaW5nRW5hYmxlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZG9mZnMgJiYgdGhpcy5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0VHlwZXMgPSBuZXcgU2V0KFtKU09OLnN0cmluZ2lmeSh0aGlzLm91dHB1dFR5cGUpXSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBoIG9mIHRoaXMuaGFuZG9mZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCdvdXRwdXRUeXBlJyBpbiBoICYmIGgub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGgub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCdhZ2VudCcgaW4gaCAmJiBoLmFnZW50Lm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFR5cGVzLmFkZChKU09OLnN0cmluZ2lmeShoLmFnZW50Lm91dHB1dFR5cGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0VHlwZXMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFtBZ2VudF0gV2FybmluZzogSGFuZG9mZiBhZ2VudHMgaGF2ZSBkaWZmZXJlbnQgb3V0cHV0IHR5cGVzOiAke0FycmF5LmZyb20ob3V0cHV0VHlwZXMpLmpvaW4oJywgJyl9LiBZb3UgY2FuIG1ha2UgaXQgdHlwZS1zYWZlIGJ5IHVzaW5nIEFnZW50LmNyZWF0ZSh7IC4uLiB9KSBtZXRob2QgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT3V0cHV0IHNjaGVtYSBuYW1lLlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRTY2hlbWFOYW1lKCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuICdab2RPdXRwdXQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBjb3B5IG9mIHRoZSBhZ2VudCwgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzIGNoYW5nZWQuIEZvciBleGFtcGxlLCB5b3UgY291bGQgZG86XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBuZXdBZ2VudCA9IGFnZW50LmNsb25lKHsgaW5zdHJ1Y3Rpb25zOiAnTmV3IGluc3RydWN0aW9ucycgfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBBIHBhcnRpYWwgY29uZmlndXJhdGlvbiB0byBjaGFuZ2UuXG4gICAgICogQHJldHVybnMgQSBuZXcgYWdlbnQgd2l0aCB0aGUgZ2l2ZW4gY2hhbmdlcy5cbiAgICAgKi9cbiAgICBjbG9uZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoaXMgYWdlbnQgaW50byBhIHRvb2wsIGNhbGxhYmxlIGJ5IG90aGVyIGFnZW50cy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gaGFuZG9mZnMgaW4gdHdvIHdheXM6XG4gICAgICogMS4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgcmVjZWl2ZXMgdGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiAgICByZWNlaXZlcyBnZW5lcmF0ZWQgaW5wdXQuXG4gICAgICogMi4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgdGFrZXMgb3ZlciB0aGUgY29udmVyc2F0aW9uLiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnQgaXNcbiAgICAgKiAgICBjYWxsZWQgYXMgYSB0b29sLCBhbmQgdGhlIGNvbnZlcnNhdGlvbiBpcyBjb250aW51ZWQgYnkgdGhlIG9yaWdpbmFsIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgdG9vbC5cbiAgICAgKiBAcmV0dXJucyBBIHRvb2wgdGhhdCBydW5zIHRoZSBhZ2VudCBhbmQgcmV0dXJucyB0aGUgb3V0cHV0IHRleHQuXG4gICAgICovXG4gICAgYXNUb29sKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyB0b29sTmFtZSwgdG9vbERlc2NyaXB0aW9uLCBjdXN0b21PdXRwdXRFeHRyYWN0b3IsIG5lZWRzQXBwcm92YWwsIHJ1bkNvbmZpZywgcnVuT3B0aW9ucywgaXNFbmFibGVkLCB9ID0gb3B0aW9ucztcbiAgICAgICAgcmV0dXJuIHRvb2woe1xuICAgICAgICAgICAgbmFtZTogdG9vbE5hbWUgPz8gdG9GdW5jdGlvblRvb2xOYW1lKHRoaXMubmFtZSksXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbERlc2NyaXB0aW9uID8/ICcnLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogQWdlbnRBc1Rvb2xOZWVkQXBwcm92YWxTY2hhbWUsXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgICAgICAgICAgaXNFbmFibGVkLFxuICAgICAgICAgICAgZXhlY3V0ZTogYXN5bmMgKGRhdGEsIGNvbnRleHQsIGRldGFpbHMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQWdlbnRUb29sSW5wdXQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignQWdlbnQgdG9vbCBjYWxsZWQgd2l0aCBpbnZhbGlkIGlucHV0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBSdW5uZXIocnVuQ29uZmlnID8/IHt9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBydW5uZXIucnVuKHRoaXMsIGRhdGEuaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKHJ1bk9wdGlvbnMgPz8ge30pLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VzU3RvcEF0VG9vbE5hbWVzID0gdHlwZW9mIHRoaXMudG9vbFVzZUJlaGF2aW9yID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRvb2xVc2VCZWhhdmlvciAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICAgICAnc3RvcEF0VG9vbE5hbWVzJyBpbiB0aGlzLnRvb2xVc2VCZWhhdmlvcjtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1c3RvbU91dHB1dEV4dHJhY3RvciAhPT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgICAgICB1c2VzU3RvcEF0VG9vbE5hbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgWW91J3JlIHBhc3NpbmcgdGhlIGFnZW50IChuYW1lOiAke3RoaXMubmFtZX0pIHdpdGggdG9vbFVzZUJlaGF2aW9yLnN0b3BBdFRvb2xOYW1lcyBjb25maWd1cmVkIGFzIGEgdG9vbCB0byBhIGRpZmZlcmVudCBhZ2VudDsgdGhpcyBtYXkgbm90IHdvcmsgYXMgeW91IGV4cGVjdC4gWW91IG1heSB3YW50IHRvIGhhdmUgYSB3cmFwcGVyIGZ1bmN0aW9uIHRvb2wgdG8gY29uc2lzdGVudGx5IHJldHVybiB0aGUgZmluYWwgb3V0cHV0LmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUZXh0ID0gdHlwZW9mIGN1c3RvbU91dHB1dEV4dHJhY3RvciA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICA/IGF3YWl0IGN1c3RvbU91dHB1dEV4dHJhY3Rvcihjb21wbGV0ZWRSZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0T3V0cHV0VGV4dChjb21wbGV0ZWRSZXN1bHQucmF3UmVzcG9uc2VzW2NvbXBsZXRlZFJlc3VsdC5yYXdSZXNwb25zZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgIGlmIChkZXRhaWxzPy50b29sQ2FsbCkge1xuICAgICAgICAgICAgICAgICAgICBzYXZlQWdlbnRUb29sUnVuUmVzdWx0KGRldGFpbHMudG9vbENhbGwsIGNvbXBsZXRlZFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRUZXh0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHN5c3RlbSBwcm9tcHQgZm9yIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgaW5zdHJ1Y3Rpb25zLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFN5c3RlbVByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbnN0cnVjdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluc3RydWN0aW9ucyhydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByb21wdCB0ZW1wbGF0ZSBmb3IgdGhlIGFnZW50LCBpZiBkZWZpbmVkLlxuICAgICAqXG4gICAgICogSWYgdGhlIGFnZW50IGhhcyBhIGZ1bmN0aW9uIGFzIGl0cyBwcm9tcHQsIHRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGVcbiAgICAgKiBydW5Db250ZXh0IGFuZCB0aGUgYWdlbnQgaW5zdGFuY2UuXG4gICAgICovXG4gICAgYXN5bmMgZ2V0UHJvbXB0KHJ1bkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb21wdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvbXB0KHJ1bkNvbnRleHQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnByb21wdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmV0Y2hlcyB0aGUgYXZhaWxhYmxlIHRvb2xzIGZyb20gdGhlIE1DUCBzZXJ2ZXJzLlxuICAgICAqIEByZXR1cm5zIHRoZSBNQ1AgcG93ZXJlZCB0b29sc1xuICAgICAqL1xuICAgIGFzeW5jIGdldE1jcFRvb2xzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgaWYgKHRoaXMubWNwU2VydmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QWxsTWNwVG9vbHMoe1xuICAgICAgICAgICAgICAgIG1jcFNlcnZlcnM6IHRoaXMubWNwU2VydmVycyxcbiAgICAgICAgICAgICAgICBydW5Db250ZXh0LFxuICAgICAgICAgICAgICAgIGFnZW50OiB0aGlzLFxuICAgICAgICAgICAgICAgIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3Q6IGZhbHNlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBTGwgYWdlbnQgdG9vbHMsIGluY2x1ZGluZyB0aGUgTUNQbCBhbmQgZnVuY3Rpb24gdG9vbHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhbGwgY29uZmlndXJlZCB0b29sc1xuICAgICAqL1xuICAgIGFzeW5jIGdldEFsbFRvb2xzKHJ1bkNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgbWNwVG9vbHMgPSBhd2FpdCB0aGlzLmdldE1jcFRvb2xzKHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBlbmFibGVkVG9vbHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgdGhpcy50b29scykge1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF5YmVJc0VuYWJsZWQgPSBjYW5kaWRhdGUuaXNFbmFibGVkO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuYWJsZWQgPSB0eXBlb2YgbWF5YmVJc0VuYWJsZWQgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICAgICAgPyBhd2FpdCBtYXliZUlzRW5hYmxlZChydW5Db250ZXh0LCB0aGlzKVxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBtYXliZUlzRW5hYmxlZCA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1heWJlSXNFbmFibGVkXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVuYWJsZWRUb29scy5wdXNoKGNhbmRpZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5tY3BUb29scywgLi4uZW5hYmxlZFRvb2xzXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaGFuZG9mZnMgdGhhdCBzaG91bGQgYmUgZXhwb3NlZCB0byB0aGUgbW9kZWwgZm9yIHRoZSBjdXJyZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIEhhbmRvZmZzIHRoYXQgcHJvdmlkZSBhbiBgaXNFbmFibGVkYCBmdW5jdGlvbiByZXR1cm5pbmcgYGZhbHNlYCBhcmUgb21pdHRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRFbmFibGVkSGFuZG9mZnMocnVuQ29udGV4dCkge1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHRoaXMuaGFuZG9mZnM/Lm1hcCgoaCkgPT4gZ2V0SGFuZG9mZihoKSkgPz8gW107XG4gICAgICAgIGNvbnN0IGVuYWJsZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBoYW5kb2ZmIG9mIGhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgaGFuZG9mZi5pc0VuYWJsZWQoeyBydW5Db250ZXh0LCBhZ2VudDogdGhpcyB9KSkge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW5hYmxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0LlxuICAgICAqL1xuICAgIHByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vdXRwdXRUeXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRoaXMub3V0cHV0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLnBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBvdXRwdXQgdHlwZTogJHt0aGlzLm91dHB1dFR5cGV9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBhZ2VudCwgd2hpY2ggaXMgc2VyaWFsaXphYmxlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSBhZ2VudCdzIG5hbWUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFnZW50Lm1qcy5tYXAiLCIvKipcbiAqIERlZmluZXMgYW4gaW5wdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVJbnB1dEd1YXJkcmFpbCh7IG5hbWUsIGV4ZWN1dGUsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBndWFyZHJhaWxGdW5jdGlvbjogZXhlY3V0ZSxcbiAgICAgICAgYXN5bmMgcnVuKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICdpbnB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKHsgbmFtZSwgZXhlY3V0ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdvdXRwdXQnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBndWFyZHJhaWxGdW5jdGlvbjogZXhlY3V0ZSxcbiAgICAgICAgYXN5bmMgcnVuKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICdvdXRwdXQnLCBuYW1lIH0sXG4gICAgICAgICAgICAgICAgYWdlbnQ6IGFyZ3MuYWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IGFyZ3MuYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBhd2FpdCBleGVjdXRlKGFyZ3MpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJsZXQgREVGQVVMVF9QUk9WSURFUjtcbi8qKlxuICogU2V0IHRoZSBtb2RlbCBwcm92aWRlciB1c2VkIHdoZW4gbm8gZXhwbGljaXQgcHJvdmlkZXIgaXMgc3VwcGxpZWQuXG4gKlxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIHVzZSBieSBkZWZhdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIocHJvdmlkZXIpIHtcbiAgICBERUZBVUxUX1BST1ZJREVSID0gcHJvdmlkZXI7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIuXG4gKlxuICogQHJldHVybnMgVGhlIGRlZmF1bHQgbW9kZWwgcHJvdmlkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpIHtcbiAgICBpZiAodHlwZW9mIERFRkFVTFRfUFJPVklERVIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZGVmYXVsdCBtb2RlbCBwcm92aWRlciBzZXQuIE1ha2Ugc3VyZSB0byBzZXQgYSBwcm92aWRlciB1c2luZyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciBiZWZvcmUgY2FsbGluZyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciBvciBwYXNzIGFuIGV4cGxpY2l0IHByb3ZpZGVyLicpO1xuICAgIH1cbiAgICByZXR1cm4gREVGQVVMVF9QUk9WSURFUjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3ZpZGVycy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTaGFyZWQgYmFzZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVyeSBpdGVtIGluIHRoZSBwcm90b2NvbCBwcm92aWRlcyBhIGBwcm92aWRlckRhdGFgIGZpZWxkIHRvIGFjY29tbW9kYXRlIGN1c3RvbSBmdW5jdGlvbmFsaXR5XG4gKiBvciBuZXcgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCBTaGFyZWRCYXNlID0gei5vYmplY3Qoe1xuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgb3B0aW9uYWwgcHJvdmlkZXIgc3BlY2lmaWMgZGF0YS4gVXNlZCBmb3IgY3VzdG9tIGZ1bmN0aW9uYWxpdHkgb3IgbW9kZWwgcHJvdmlkZXJcbiAgICAgKiBzcGVjaWZpYyBmaWVsZHMuXG4gICAgICovXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaGFzIGEgc2hhcmVkIG9mIHNoYXJlZCBpdGVtIGRhdGEgaW5jbHVkaW5nIGFuIG9wdGlvbmFsIElELlxuICovXG5leHBvcnQgY29uc3QgSXRlbUJhc2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW4gSUQgdG8gaWRlbnRpZnkgdGhlIGl0ZW0uIFRoaXMgaXMgb3B0aW9uYWwgYnkgZGVmYXVsdC4gSWYgYSBtb2RlbCBwcm92aWRlciBhYnNvbHV0ZWx5XG4gICAgICogcmVxdWlyZXMgdGhpcyBmaWVsZCwgaXQgd2lsbCBiZSB2YWxpZGF0ZWQgb24gdGhlIG1vZGVsIGxldmVsLlxuICAgICAqL1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENvbnRlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWZ1c2FsID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVmdXNhbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZWZ1c2FsIGV4cGxhbmF0aW9uIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlZnVzYWw6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFJlYXNvbmluZ1RleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmdfdGV4dCcpLFxuICAgIC8qKlxuICAgICAqIEEgdGV4dCBpbnB1dCBmb3IgZXhhbXBsZSBhIG1lc3NhZ2UgZnJvbSBhIHVzZXJcbiAgICAgKi9cbiAgICB0ZXh0OiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgSW5wdXRJbWFnZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ltYWdlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGltYWdlIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgcHJvdmlkZWQgaW5saW5lIChgaW1hZ2VgKSwgYXMgYSBVUkwsIG9yIGJ5IHJlZmVyZW5jZSB0byBhXG4gICAgICogcHJldmlvdXNseSB1cGxvYWRlZCBPcGVuQUkgZmlsZS5cbiAgICAgKi9cbiAgICBpbWFnZTogelxuICAgICAgICAvLyAxLiBpbWFnZSBkYXRhXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAvLyAyLmZpbGUgSUQgZm9yIHRoZSBpbWFnZVxuICAgICAgICAub3Ioei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQnKSB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdFaXRoZXIgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSwgYSBkYXRhIFVSTCwgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELicpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSBsZXZlbCBvZiBkZXRhaWwgcmVxdWVzdGVkIGZvciBpbWFnZSB1bmRlcnN0YW5kaW5nIHRhc2tzLlxuICAgICAqIEZ1dHVyZSBtb2RlbHMgbWF5IGFkZCBuZXcgdmFsdWVzLCB0aGVyZWZvcmUgdGhpcyBhY2NlcHRzIGFueSBzdHJpbmcuXG4gICAgICovXG4gICAgZGV0YWlsOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbnB1dEZpbGUgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9maWxlJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZpbGUgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSByYXcgZGF0YSwgYSBVUkwsIG9yIGFuIE9wZW5BSSBmaWxlIElELlxuICAgICAqL1xuICAgIGZpbGU6IHpcbiAgICAgICAgLy8gMS4gZmlsZSBkYXRhXG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ0VpdGhlciBiYXNlNjQgZW5jb2RlZCBmaWxlIGRhdGEgb3IgYSBwdWJsaWNseSBhY2Nlc3NpYmxlIGZpbGUgVVJMJylcbiAgICAgICAgLy8gMi4gZmlsZSBJRFxuICAgICAgICAub3Ioei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQnKSB9KSlcbiAgICAgICAgLy8gMy4gcHVibGljbHkgYWNjZXNzaWJsZSBmaWxlIFVSTFxuICAgICAgICAub3Ioei5vYmplY3QoeyB1cmw6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgZmlsZSBVUkwnKSB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdDb250ZW50cyBvZiB0aGUgZmlsZSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuJylcbiAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogT3B0aW9uYWwgZmlsZW5hbWUgbWV0YWRhdGEgd2hlbiB1cGxvYWRpbmcgZmlsZSBkYXRhIGlubGluZS5cbiAgICAgKi9cbiAgICBmaWxlbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgQXVkaW9Db250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnYXVkaW8nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXVkaW8gaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBhdWRpbyBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBhdWRpbzogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLm9yKHoub2JqZWN0KHtcbiAgICAgICAgaWQ6IHouc3RyaW5nKCksXG4gICAgfSkpXG4gICAgICAgIC5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBmaWxlIGlkJyksXG4gICAgLyoqXG4gICAgICogVGhlIGZvcm1hdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgZm9ybWF0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNjcmlwdCBvZiB0aGUgYXVkaW8uXG4gICAgICovXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBJbWFnZUNvbnRlbnQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGJhc2U2NCBlbmNvZGVkIGltYWdlIGRhdGEgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuY29uc3QgSW1hZ2VEYXRhT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGRhdGE6IHpcbiAgICAgICAgLnVuaW9uKFt6LnN0cmluZygpLCB6Lmluc3RhbmNlb2YoVWludDhBcnJheSldKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBpbWFnZSBkYXRhLCBvciByYXcgYnl0ZXMgdGhhdCB3aWxsIGJlIGJhc2U2NCBlbmNvZGVkIGF1dG9tYXRpY2FsbHkuJyksXG4gICAgbWVkaWFUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IEltYWdlVXJsT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVybDogelxuICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgLmRlc2NyaWJlKCdQdWJsaWNseSBhY2Nlc3NpYmxlIFVSTCBwb2ludGluZyB0byB0aGUgaW1hZ2UgY29udGVudCcpLFxufSk7XG5jb25zdCBJbWFnZUZpbGVJZE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBmaWxlSWQ6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnT3BlbkFJIGZpbGUgSUQgcmVmZXJlbmNpbmcgdXBsb2FkZWQgaW1hZ2UgY29udGVudCcpLFxufSk7XG5jb25zdCBJbWFnZU9iamVjdFNjaGVtYSA9IHpcbiAgICAudW5pb24oW0ltYWdlRGF0YU9iamVjdFNjaGVtYSwgSW1hZ2VVcmxPYmplY3RTY2hlbWEsIEltYWdlRmlsZUlkT2JqZWN0U2NoZW1hXSlcbiAgICAuZGVzY3JpYmUoJ0lubGluZSBpbWFnZSBkYXRhIG9yIHJlZmVyZW5jZXMgdG8gdXBsb2FkZWQgY29udGVudC4nKTtcbmNvbnN0IEZpbGVEYXRhT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGRhdGE6IHpcbiAgICAgICAgLnVuaW9uKFt6LnN0cmluZygpLCB6Lmluc3RhbmNlb2YoVWludDhBcnJheSldKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGZpbGUgZGF0YSwgb3IgcmF3IGJ5dGVzIHRoYXQgd2lsbCBiZSBlbmNvZGVkIGF1dG9tYXRpY2FsbHkuJyksXG4gICAgbWVkaWFUeXBlOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ0lBTkEgbWVkaWEgdHlwZSBkZXNjcmliaW5nIHRoZSBmaWxlIGNvbnRlbnRzJyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ0ZpbGVuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5saW5lIGRhdGEnKSxcbn0pO1xuY29uc3QgRmlsZVVybE9iamVjdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB1cmw6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1B1YmxpY2x5IGFjY2Vzc2libGUgVVJMIGZvciB0aGUgZmlsZSBjb250ZW50JyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgRmlsZUlkT2JqZWN0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdPcGVuQUkgZmlsZSBJRCByZWZlcmVuY2luZyB1cGxvYWRlZCBjb250ZW50JyksXG4gICAgZmlsZW5hbWU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgRmlsZVJlZmVyZW5jZVNjaGVtYSA9IHpcbiAgICAudW5pb24oW1xuICAgIHouc3RyaW5nKCkuZGVzY3JpYmUoJ0V4aXN0aW5nIGRhdGEgVVJMIG9yIGJhc2U2NCBzdHJpbmcnKSxcbiAgICBGaWxlRGF0YU9iamVjdFNjaGVtYSxcbiAgICBGaWxlVXJsT2JqZWN0U2NoZW1hLFxuICAgIEZpbGVJZE9iamVjdFNjaGVtYSxcbl0pXG4gICAgLmRlc2NyaWJlKCdJbmxpbmUgZGF0YSAod2l0aCBtZXRhZGF0YSkgb3IgcmVmZXJlbmNlcyBwb2ludGluZyB0byBmaWxlIGNvbnRlbnRzLicpO1xuY29uc3QgelN0cmluZ1dpdGhIaW50cyA9ICguLi5faGludHMpID0+IHouc3RyaW5nKCk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dEltYWdlID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBJbmxpbmUgaW1hZ2UgY29udGVudCBvciBhIHJlZmVyZW5jZSB0byBhbiB1cGxvYWRlZCBmaWxlLiBBY2NlcHRzIGEgVVJML2RhdGEgVVJMIHN0cmluZyBvciBhblxuICAgICAqIG9iamVjdCBkZXNjcmliaW5nIHRoZSBkYXRhL3VybC9maWxlSWQgc291cmNlLlxuICAgICAqL1xuICAgIGltYWdlOiB6LnN0cmluZygpLm9yKEltYWdlT2JqZWN0U2NoZW1hKS5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIHRoZSByZXF1ZXN0ZWQgbGV2ZWwgb2YgZGV0YWlsIGZvciB2aXNpb24gbW9kZWxzLlxuICAgICAqIFVzZSBhIHN0cmluZyB0byBhdm9pZCBjb25zdHJhaW5pbmcgZnV0dXJlIG1vZGVsIGNhcGFiaWxpdGllcy5cbiAgICAgKi9cbiAgICBkZXRhaWw6IHpTdHJpbmdXaXRoSGludHMoJ2xvdycsICdoaWdoJywgJ2F1dG8nKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dEZpbGVDb250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZmlsZScpLFxuICAgIC8qKlxuICAgICAqIEZpbGUgb3V0cHV0IHJlZmVyZW5jZS4gUHJvdmlkZSBlaXRoZXIgYSBzdHJpbmcgKGRhdGEgVVJMIC8gYmFzZTY0KSwgYSBkYXRhIG9iamVjdCAocmVxdWlyZXNcbiAgICAgKiBtZWRpYVR5cGUgKyBmaWxlbmFtZSksIG9yIGFuIG9iamVjdCBwb2ludGluZyB0byBhbiB1cGxvYWRlZCBmaWxlL1VSTC5cbiAgICAgKi9cbiAgICBmaWxlOiBGaWxlUmVmZXJlbmNlU2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJUb29sT3V0cHV0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfc2NyZWVuc2hvdCcpLFxuICAgIC8qKlxuICAgICAqIEEgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhIFVSTCByZXByZXNlbnRpbmcgdGhlIHNjcmVlbnNob3QuXG4gICAgICovXG4gICAgZGF0YTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBVUkwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVyQWN0aW9ucyA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdzY3JlZW5zaG90JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgICAgIGJ1dHRvbjogei5lbnVtKFsnbGVmdCcsICdyaWdodCcsICd3aGVlbCcsICdiYWNrJywgJ2ZvcndhcmQnXSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RvdWJsZV9jbGljaycpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdzY3JvbGwnKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3g6IHoubnVtYmVyKCksXG4gICAgICAgIHNjcm9sbF95OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0eXBlJyksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3dhaXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbW92ZScpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdrZXlwcmVzcycpLFxuICAgICAgICBrZXlzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdkcmFnJyksXG4gICAgICAgIHBhdGg6IHouYXJyYXkoei5vYmplY3QoeyB4OiB6Lm51bWJlcigpLCB5OiB6Lm51bWJlcigpIH0pKSxcbiAgICB9KSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWVzc2FnZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEFzc2lzdGFudENvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBPdXRwdXRUZXh0LFxuICAgIFJlZnVzYWwsXG4gICAgQXVkaW9Db250ZW50LFxuICAgIEltYWdlQ29udGVudCxcbl0pO1xuY29uc3QgTWVzc2FnZUJhc2UgPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIC8qKlxuICAgICAqIEFueSBpdGVtIHdpdGhvdXQgYSB0eXBlIGlzIHRyZWF0ZWQgYXMgYSBtZXNzYWdlXG4gICAgICovXG4gICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJykub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEFzc2lzdGFudE1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBtZXNzYWdlIGZyb20gdGhlIGFzc2lzdGFudCAoaS5lLiB0aGUgbW9kZWwpXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShBc3Npc3RhbnRDb250ZW50KSxcbn0pO1xuZXhwb3J0IGNvbnN0IFVzZXJDb250ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgSW5wdXRUZXh0LFxuICAgIElucHV0SW1hZ2UsXG4gICAgSW5wdXRGaWxlLFxuICAgIEF1ZGlvQ29udGVudCxcbl0pO1xuZXhwb3J0IGNvbnN0IFVzZXJNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSB1c2VyXG4gICAgICovXG4gICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShVc2VyQ29udGVudCkub3Ioei5zdHJpbmcoKSksXG59KTtcbmNvbnN0IFN5c3RlbU1lc3NhZ2VJdGVtID0gTWVzc2FnZUJhc2UuZXh0ZW5kKHtcbiAgICAvLyB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAvKipcbiAgICAgKiBSZXByZXNlbnRpbmcgYSBzeXN0ZW0gbWVzc2FnZSB0byB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UuXG4gICAgICovXG4gICAgY29udGVudDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IE1lc3NhZ2VJdGVtID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgU3lzdGVtTWVzc2FnZUl0ZW0sXG4gICAgQXNzaXN0YW50TWVzc2FnZUl0ZW0sXG4gICAgVXNlck1lc3NhZ2VJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBUb29sIGNhbGwgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBIb3N0ZWRUb29sQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2xfY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbC4gRm9yIGV4YW1wbGUgYHdlYl9zZWFyY2hfY2FsbGAgb3IgYGZpbGVfc2VhcmNoX2NhbGxgXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGhvc3RlZCB0b29sJyksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5kZXNjcmliZSgnVGhlIGFyZ3VtZW50cyBvZiB0aGUgaG9zdGVkIHRvb2wgY2FsbCcpXG4gICAgICAgIC5vcHRpb25hbCgpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcHJpbWFyeSBvdXRwdXQgb2YgdGhlIHRvb2wgY2FsbC4gQWRkaXRpb25hbCBvdXRwdXQgbWlnaHQgYmUgaW4gdGhlIGBwcm92aWRlckRhdGFgIGZpZWxkLlxuICAgICAqL1xuICAgIG91dHB1dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgRnVuY3Rpb25DYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdmdW5jdGlvbl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSB0b29sIGNhbGwuIFJlcXVpcmVkIHRvIG1hdGNoIHVwIHRoZSByZXNwZWN0aXZlIHRvb2wgY2FsbCByZXN1bHQuXG4gICAgICovXG4gICAgY2FsbElkOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBuYW1lOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24nKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSkub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFRvb2xDYWxsT3V0cHV0Q29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIFRvb2xPdXRwdXRUZXh0LFxuICAgIFRvb2xPdXRwdXRJbWFnZSxcbiAgICBUb29sT3V0cHV0RmlsZUNvbnRlbnQsXG5dKTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBJbnB1dFRleHQsXG4gICAgSW5wdXRJbWFnZSxcbiAgICBJbnB1dEZpbGUsXG5dKTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogelxuICAgICAgICAudW5pb24oW1xuICAgICAgICB6LnN0cmluZygpLFxuICAgICAgICBUb29sQ2FsbE91dHB1dENvbnRlbnQsXG4gICAgICAgIHouYXJyYXkoVG9vbENhbGxTdHJ1Y3R1cmVkT3V0cHV0KSxcbiAgICBdKVxuICAgICAgICAuZGVzY3JpYmUoJ091dHB1dCByZXR1cm5lZCBieSB0aGUgdG9vbCBjYWxsLiBTdXBwb3J0cyBwbGFpbiBzdHJpbmdzLCBsZWdhY3kgVG9vbE91dHB1dCBpdGVtcywgb3Igc3RydWN0dXJlZCBpbnB1dF8qIGl0ZW1zLicpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJVc2VDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBieSB0aGUgY29tcHV0ZXIuXG4gICAgICovXG4gICAgYWN0aW9uOiBjb21wdXRlckFjdGlvbnMsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlckNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiBDb21wdXRlclRvb2xPdXRwdXQsXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgcmVhc29uaW5nIHRleHQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmF3Q29udGVudDogei5hcnJheShSZWFzb25pbmdUZXh0KS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIFRoaXMgaXMgYSBjYXRjaCBhbGwgZm9yIGl0ZW1zIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgYSBtb2RlbCBtaWdodCByZXR1cm4gYW4gaXRlbSB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbCB1c2luZyB0aGlzIHR5cGUuXG4gKlxuICogSW4gdGhhdCBjYXNlIGV2ZXJ5dGhpbmcgcmV0dXJuZWQgZnJvbSB0aGUgbW9kZWwgc2hvdWxkIGJlIHBhc3NlZCBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gKlxuICogVGhpcyBlbmFibGVzIG5ldyBmZWF0dXJlcyB0byBiZSBhZGRlZCB0byBiZSBhZGRlZCBieSBhIG1vZGVsIHByb3ZpZGVyIHdpdGhvdXQgYnJlYWtpbmcgdGhlIHByb3RvY29sLlxuICovXG5leHBvcnQgY29uc3QgVW5rbm93bkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndW5rbm93bicpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKb2luZWQgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IE91dHB1dE1vZGVsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBVc2FnZURhdGEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0cmVhbSBldmVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBuZXcgb3V0cHV0IHRleHQgaXMgYXZhaWxhYmxlIHRvIHN0cmVhbSB0byB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0X2RlbHRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIGRlbHRhIHRleHQgdGhhdCB3YXMgc3RyZWFtZWQgYnkgdGhlIG1vZGVsdG8gdGhlIHVzZXIuXG4gICAgICovXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSBuZXcgcmVzcG9uc2UgaXMgc3RhcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Vfc3RhcnRlZCcpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgcmVzcG9uc2UgaXMgY29tcGxldGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX2RvbmUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVzcG9uc2U6IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJRCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1c2FnZSBkYXRhIGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICB1c2FnZTogVXNhZ2VEYXRhLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dDogei5hcnJheShPdXRwdXRNb2RlbEl0ZW0pLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGZvciBldmVyeSBpdGVtIHRoYXQgZ2V0cyBzdHJlYW1lZCB0byB0aGUgbW9kZWwuIFVzZWQgdG8gZXhwb3NlIHRoZSByYXcgZXZlbnRzXG4gKiBmcm9tIHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtb2RlbCcpLFxuICAgIGV2ZW50OiB6LmFueSgpLmRlc2NyaWJlKCdUaGUgZXZlbnQgZnJvbSB0aGUgbW9kZWwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgU3RyZWFtRXZlbnRUZXh0U3RyZWFtLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQsXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQsXG4gICAgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSxcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdG9jb2wubWpzLm1hcCIsImltcG9ydCB7IFVzYWdlRGF0YSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBUcmFja3MgdG9rZW4gdXNhZ2UgYW5kIHJlcXVlc3QgY291bnRzIGZvciBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHRvIHRoZSBMTE0gQVBJLlxuICAgICAqL1xuICAgIHJlcXVlc3RzO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCwgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICB0b3RhbFRva2VucztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IGlucHV0Py5yZXF1ZXN0cyA/PyAxO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2VucyA9IGlucHV0Py5vdXRwdXRUb2tlbnMgPz8gaW5wdXQ/Lm91dHB1dF90b2tlbnMgPz8gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSBpbnB1dD8udG90YWxUb2tlbnMgPz8gaW5wdXQ/LnRvdGFsX3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnNEZXRhaWxzID0gaW5wdXQ/LmlucHV0VG9rZW5zRGV0YWlscyA/PyBpbnB1dD8uaW5wdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0VG9rZW5zRGV0YWlsc1xuICAgICAgICAgICAgICAgID8gW2lucHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzID8/IGlucHV0Py5vdXRwdXRfdG9rZW5zX2RldGFpbHM7XG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMgPSBvdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBbb3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zICs9IG5ld1VzYWdlLmlucHV0VG9rZW5zO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyArPSBuZXdVc2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnM7XG4gICAgICAgIGlmIChuZXdVc2FnZS5pbnB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscy5wdXNoKC4uLm5ld1VzYWdlLmlucHV0VG9rZW5zRGV0YWlscyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld1VzYWdlLm91dHB1dFRva2Vuc0RldGFpbHMpIHtcbiAgICAgICAgICAgIC8vIFRoZSB0eXBlIGRvZXMgbm90IGFsbG93IHVuZGVmaW5lZCwgYnV0IGl0IGNvdWxkIGhhcHBlbiBydW50aW1lXG4gICAgICAgICAgICB0aGlzLm91dHB1dFRva2Vuc0RldGFpbHMucHVzaCguLi5uZXdVc2FnZS5vdXRwdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCB7IFVzYWdlRGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXNhZ2UubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbi8qKlxuICogQSBjb250ZXh0IG9iamVjdCB0aGF0IGlzIHBhc3NlZCB0byB0aGUgYFJ1bm5lci5ydW4oKWAgbWV0aG9kLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQ29udGV4dCB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnRleHQgb2JqZWN0IHlvdSBwYXNzZWQgdG8gdGhlIGBSdW5uZXIucnVuKClgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBjb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBvZiB0aGUgYWdlbnQgcnVuIHNvIGZhci4gRm9yIHN0cmVhbWVkIHJlc3BvbnNlcywgdGhlIHVzYWdlIHdpbGwgYmUgc3RhbGUgdW50aWwgdGhlXG4gICAgICogbGFzdCBjaHVuayBvZiB0aGUgc3RyZWFtIGlzIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICB1c2FnZTtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0b29sIG5hbWVzIHRvIHdoZXRoZXIgdGhleSBoYXZlIGJlZW4gYXBwcm92ZWQuXG4gICAgICovXG4gICAgI2FwcHJvdmFscztcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0ID0ge30pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy51c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYnVpbGQgdGhlIGFwcHJvdmFscyBtYXAgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gcmVidWlsZC5cbiAgICAgKi9cbiAgICBfcmVidWlsZEFwcHJvdmFscyhhcHByb3ZhbHMpIHtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWwgLSBEZXRhaWxzIGFib3V0IHRoZSB0b29sIGNhbGwgYmVpbmcgZXZhbHVhdGVkLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgdG9vbCBjYWxsIGhhcyBiZWVuIGFwcHJvdmVkLCBgZmFsc2VgIGlmIGJsb2NrZWQgYW5kIGB1bmRlZmluZWRgIGlmIG5vdCB5ZXQgYXBwcm92ZWQgb3IgcmVqZWN0ZWQuXG4gICAgICovXG4gICAgaXNUb29sQXBwcm92ZWQoYXBwcm92YWwpIHtcbiAgICAgICAgY29uc3QgeyB0b29sTmFtZSwgY2FsbElkIH0gPSBhcHByb3ZhbDtcbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpO1xuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUgJiYgYXBwcm92YWxFbnRyeS5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1Rvb2wgaXMgcGVybWFuZW50bHkgYXBwcm92ZWQgYW5kIHJlamVjdGVkIGF0IHRoZSBzYW1lIHRpbWUuIEFwcHJvdmFsIHRha2VzIHByZWNlZGVuY2UnKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5hcHByb3ZlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LnJlamVjdGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbENhbGxBcHByb3ZhbCA9IEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQpXG4gICAgICAgICAgICA/IGFwcHJvdmFsRW50cnkuYXBwcm92ZWQuaW5jbHVkZXMoY2FsbElkKVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgY29uc3QgaW5kaXZpZHVhbENhbGxSZWplY3Rpb24gPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LnJlamVjdGVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsICYmIGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihgVG9vbCBjYWxsICR7Y2FsbElkfSBpcyBib3RoIGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlYCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZSBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIGFwcHJvdmFsIGJlaGF2aW9yIG9wdGlvbnMuXG4gICAgICovXG4gICAgYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c0FwcHJvdmUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwge1xuICAgICAgICAgICAgICAgIGFwcHJvdmVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKSA/PyB7XG4gICAgICAgICAgICBhcHByb3ZlZDogW10sXG4gICAgICAgICAgICByZWplY3RlZDogW10sXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnkuYXBwcm92ZWQpKSB7XG4gICAgICAgICAgICAvLyBmdW5jdGlvbiB0b29sIGhhcyBjYWxsX2lkLCBob3N0ZWQgdG9vbCBjYWxsIGhhcyBpZFxuICAgICAgICAgICAgY29uc3QgY2FsbElkID0gJ2NhbGxJZCcgaW4gYXBwcm92YWxJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICA/IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmNhbGxJZCAvLyBmdW5jdGlvbiB0b29sc1xuICAgICAgICAgICAgICAgIDogYXBwcm92YWxJdGVtLnJhd0l0ZW0uaWQ7IC8vIGhvc3RlZCB0b29sc1xuICAgICAgICAgICAgYXBwcm92YWxFbnRyeS5hcHByb3ZlZC5wdXNoKGNhbGxJZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jYXBwcm92YWxzLnNldCh0b29sTmFtZSwgYXBwcm92YWxFbnRyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcHByb3ZhbEl0ZW0gLSBUaGUgdG9vbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKi9cbiAgICByZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgeyBhbHdheXNSZWplY3QgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lO1xuICAgICAgICBpZiAoYWx3YXlzUmVqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlamVjdGVkOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5yZWplY3RlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LnJlamVjdGVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgdXNhZ2U6IHRoaXMudXNhZ2UsXG4gICAgICAgICAgICBhcHByb3ZhbHM6IE9iamVjdC5mcm9tRW50cmllcyh0aGlzLiNhcHByb3ZhbHMuZW50cmllcygpKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5Db250ZXh0Lm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplVG9vbCh0b29sKSB7XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogdG9vbC5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgc3RyaWN0OiB0b29sLnN0cmljdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgICAgIGVudmlyb25tZW50OiB0b29sLmNvbXB1dGVyLmVudmlyb25tZW50LFxuICAgICAgICAgICAgZGltZW5zaW9uczogdG9vbC5jb21wdXRlci5kaW1lbnNpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIHByb3ZpZGVyRGF0YTogdG9vbC5wcm92aWRlckRhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVIYW5kb2ZmKGgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0b29sTmFtZTogaC50b29sTmFtZSxcbiAgICAgICAgdG9vbERlc2NyaXB0aW9uOiBoLnRvb2xEZXNjcmlwdGlvbixcbiAgICAgICAgaW5wdXRKc29uU2NoZW1hOiBoLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgc3RyaWN0SnNvblNjaGVtYTogaC5zdHJpY3RKc29uU2NoZW1hLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXJpYWxpemUubWpzLm1hcCIsImltcG9ydCB7IHRvU21hcnRTdHJpbmcgfSBmcm9tIFwiLi91dGlscy9zbWFydFN0cmluZy5tanNcIjtcbmV4cG9ydCBjbGFzcyBSdW5JdGVtQmFzZSB7XG4gICAgdHlwZSA9ICdiYXNlX2l0ZW0nO1xuICAgIHJhd0l0ZW07XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgcmF3SXRlbTogdGhpcy5yYXdJdGVtLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5NZXNzYWdlT3V0cHV0SXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgY29udGVudCgpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAnJztcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMucmF3SXRlbS5jb250ZW50KSB7XG4gICAgICAgICAgICBpZiAocGFydC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgY29udGVudCArPSBwYXJ0LnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blRvb2xDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAndG9vbF9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgb3V0cHV0O1xuICAgIHR5cGUgPSAndG9vbF9jYWxsX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCwgb3V0cHV0KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICBvdXRwdXQ6IHRvU21hcnRTdHJpbmcodGhpcy5vdXRwdXQpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5SZWFzb25pbmdJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdyZWFzb25pbmdfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5IYW5kb2ZmQ2FsbEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfY2FsbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgc291cmNlQWdlbnQ7XG4gICAgdGFyZ2V0QWdlbnQ7XG4gICAgdHlwZSA9ICdoYW5kb2ZmX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBzb3VyY2VBZ2VudCwgdGFyZ2V0QWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5zb3VyY2VBZ2VudCA9IHNvdXJjZUFnZW50O1xuICAgICAgICB0aGlzLnRhcmdldEFnZW50ID0gdGFyZ2V0QWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgc291cmNlQWdlbnQ6IHRoaXMuc291cmNlQWdlbnQudG9KU09OKCksXG4gICAgICAgICAgICB0YXJnZXRBZ2VudDogdGhpcy50YXJnZXRBZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbEFwcHJvdmFsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAndG9vbF9hcHByb3ZhbF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBFeHRyYWN0IGFsbCB0ZXh0IG91dHB1dCBmcm9tIGEgbGlzdCBvZiBydW4gaXRlbXMgYnkgY29uY2F0ZW5hdGluZyB0aGUgY29udGVudCBvZiBhbGxcbiAqIG1lc3NhZ2Ugb3V0cHV0IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSBpdGVtcyAtIFRoZSBsaXN0IG9mIHJ1biBpdGVtcyB0byBleHRyYWN0IHRleHQgZnJvbS5cbiAqIEByZXR1cm5zIEEgc3RyaW5nIG9mIGFsbCB0aGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgcnVuIGl0ZW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cmFjdEFsbFRleHRPdXRwdXQoaXRlbXMpIHtcbiAgICByZXR1cm4gaXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSAnbWVzc2FnZV9vdXRwdXRfaXRlbScpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0uY29udGVudClcbiAgICAgICAgLmpvaW4oJycpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXRlbXMubWpzLm1hcCIsImltcG9ydCB7IHJlc2V0Q3VycmVudFNwYW4sIHNldEN1cnJlbnRTcGFuLCB3aXRoTmV3U3BhbkNvbnRleHQsIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmZ1bmN0aW9uIF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3Bhbikge1xuICAgIHJldHVybiBhc3luYyAoZm4sIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgYSBuZXcgc3BhbiBjb250ZXh0IHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBwcmV2aW91cyBzcGFuIGlzIGNvcnJlY3RseSByZXNldFxuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBjcmVhdGVTcGFuKC4uLmFyZ3MpO1xuICAgICAgICAgICAgc2V0Q3VycmVudFNwYW4oc3Bhbik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgZm4oc3Bhbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3IuZGF0YSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoUmVzcG9uc2VTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBjcmVhdGVHZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgcmVzcG9uc2Ugc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbnNlU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICBvcHRpb25zID0ge307XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgcmVzcG9uc2Ugc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIHJlc3BvbnNlLCBwcmltYXJpbHkgdGhlIHJlc3BvbnNlIGlkZW50aWZpZXIuXG4gKiBJZiB5b3UgbmVlZCB0byBjYXB0dXJlIGRldGFpbGVkIGdlbmVyYXRpb24gaW5mb3JtYXRpb24gc3VjaCBhcyBpbnB1dC9vdXRwdXQgbWVzc2FnZXMsXG4gKiBtb2RlbCBjb25maWd1cmF0aW9uLCBvciB1c2FnZSBkYXRhLCB1c2UgYGdlbmVyYXRpb25TcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoUmVzcG9uc2VTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVSZXNwb25zZVNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYWdlbnQgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoQWdlbnRTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGFnZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBZ2VudFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2FnZW50JyxcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnM/LmRhdGE/Lm5hbWUgPz8gJ0FnZW50JyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhBZ2VudFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUFnZW50U3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhGdW5jdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgZnVuY3Rpb24gc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZ1bmN0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgaW5wdXQ6IG9wdGlvbnM/LmRhdGE/LmlucHV0ID8/ICcnLFxuICAgICAgICAgICAgb3V0cHV0OiBvcHRpb25zPy5kYXRhPy5vdXRwdXQgPz8gJycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBmdW5jdGlvbiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoRnVuY3Rpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVGdW5jdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhIYW5kb2ZmU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBoYW5kb2ZmIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVIYW5kb2ZmU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7IHR5cGU6ICdoYW5kb2ZmJywgLi4ub3B0aW9ucz8uZGF0YSB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBoYW5kb2ZmIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhIYW5kb2ZmU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlSGFuZG9mZlNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZ2VuZXJhdGlvbiBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyXG4gKiB1c2UgYHdpdGhHZW5lcmF0aW9uU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgZ2VuZXJhdGlvbiwgaW5jbHVkaW5nIGlucHV0L291dHB1dCBtZXNzYWdlXG4gKiBzZXF1ZW5jZXMsIG1vZGVsIGluZm9ybWF0aW9uLCBhbmQgdXNhZ2UgZGF0YS4gSWYgeW91IG9ubHkgbmVlZCB0byBjYXB0dXJlIGEgbW9kZWwgcmVzcG9uc2VcbiAqIGlkZW50aWZpZXIsIGNvbnNpZGVyIHVzaW5nIGBjcmVhdGVSZXNwb25zZVNwYW4oKWAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdlbmVyYXRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdnZW5lcmF0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKiBBdXRvbWF0aWNhbGx5IGNyZWF0ZSBhIGdlbmVyYXRpb24gc3BhbiwgcnVuIGZuIGFuZCBjbG9zZSB0aGUgc3BhbiAqL1xuZXhwb3J0IGNvbnN0IHdpdGhHZW5lcmF0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR2VuZXJhdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgY3VzdG9tIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXIgdXNlXG4gKiBgd2l0aEN1c3RvbVNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VzdG9tJyxcbiAgICAgICAgICAgIGRhdGE6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhDdXN0b21TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVDdXN0b21TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGd1YXJkcmFpbCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhHdWFyZHJhaWxTcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUd1YXJkcmFpbFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2d1YXJkcmFpbCcsXG4gICAgICAgICAgICB0cmlnZ2VyZWQ6IGZhbHNlLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhHdWFyZHJhaWxTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVHdWFyZHJhaWxTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHRyYW5zY3JpcHRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3RyYW5zY3JpcHRpb24nLFxuICAgICAgICAgICAgLi4ub3B0aW9ucy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFRyYW5zY3JpcHRpb25TcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVUcmFuc2NyaXB0aW9uU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3BlZWNoJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVTcGVlY2hTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IHNwZWVjaCBncm91cCBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTcGVlY2hHcm91cFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaF9ncm91cCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aFNwZWVjaEdyb3VwU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoR3JvdXBTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IE1DUCBsaXN0IHRvb2xzIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1DUExpc3RUb29sc1NwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ21jcF90b29scycsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG5leHBvcnQgY29uc3Qgd2l0aE1DUExpc3RUb29sc1NwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZU1DUExpc3RUb29sc1NwYW4pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlU3BhbnMubWpzLm1hcCIsIi8qKlxuICogRW5jb2RlIGEgVWludDhBcnJheSBpbnRvIGEgYmFzZTY0IHN0cmluZyBpbiBib3RoIE5vZGUgYW5kIGJyb3dzZXIgZW52aXJvbm1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpIHtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBjb25zdCBnbG9iYWxCdWZmZXIgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5CdWZmZXJcbiAgICAgICAgPyBnbG9iYWxUaGlzLkJ1ZmZlclxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICBpZiAoZ2xvYmFsQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxCdWZmZXIuZnJvbShkYXRhKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgfVxuICAgIGxldCBiaW5hcnkgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcy5idG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUaGlzLmJ0b2EoYmluYXJ5KTtcbiAgICB9XG4gICAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0nO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBiaW5hcnkubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGMxID0gYmluYXJ5LmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgY29uc3QgYzIgPSBiaW5hcnkuY2hhckNvZGVBdChpKyspO1xuICAgICAgICBjb25zdCBjMyA9IGJpbmFyeS5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGNvbnN0IGVuYzEgPSBjMSA+PiAyO1xuICAgICAgICBjb25zdCBlbmMyID0gKChjMSAmIDB4MykgPDwgNCkgfCAoYzIgPj4gNCk7XG4gICAgICAgIGNvbnN0IGVuYzMgPSBpc05hTihjMikgPyA2NCA6ICgoYzIgJiAweGYpIDw8IDIpIHwgKGMzID4+IDYpO1xuICAgICAgICBjb25zdCBlbmM0ID0gaXNOYU4oYzMpID8gNjQgOiBjMyAmIDB4M2Y7XG4gICAgICAgIHJlc3VsdCArPVxuICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzEpICtcbiAgICAgICAgICAgICAgICBjaGFycy5jaGFyQXQoZW5jMikgK1xuICAgICAgICAgICAgICAgIGNoYXJzLmNoYXJBdChlbmMzKSArXG4gICAgICAgICAgICAgICAgY2hhcnMuY2hhckF0KGVuYzQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmFzZTY0Lm1qcy5tYXAiLCIvKipcbiAqIFN0cmVhbWluZyBldmVudCBmcm9tIHRoZSBMTE0uIFRoZXNlIGFyZSBgcmF3YCBldmVudHMsIGkuZS4gdGhleSBhcmUgZGlyZWN0bHkgcGFzc2VkIHRocm91Z2ggZnJvbVxuICogdGhlIExMTS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQge1xuICAgIGRhdGE7XG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgICAqL1xuICAgIHR5cGUgPSAncmF3X21vZGVsX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRhdGEgVGhlIHJhdyByZXNwb25zZXMgc3RyZWFtIGV2ZW50cyBmcm9tIHRoZSBMTE0uXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cbn1cbi8qKlxuICogU3RyZWFtaW5nIGV2ZW50cyB0aGF0IHdyYXAgYSBgUnVuSXRlbWAuIEFzIHRoZSBhZ2VudCBwcm9jZXNzZXMgdGhlIExMTSByZXNwb25zZSwgaXQgd2lsbCBnZW5lcmF0ZVxuICogdGhlc2UgZXZlbnRzIGZyb20gbmV3IG1lc3NhZ2VzLCB0b29sIGNhbGxzLCB0b29sIG91dHB1dHMsIGhhbmRvZmZzLCBldGMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5JdGVtU3RyZWFtRXZlbnQge1xuICAgIG5hbWU7XG4gICAgaXRlbTtcbiAgICB0eXBlID0gJ3J1bl9pdGVtX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBpdGVtIHRoYXQgd2FzIGNyZWF0ZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobmFtZSwgaXRlbSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLml0ZW0gPSBpdGVtO1xuICAgIH1cbn1cbi8qKlxuICogRXZlbnQgdGhhdCBub3RpZmllcyB0aGF0IHRoZXJlIGlzIGEgbmV3IGFnZW50IHJ1bm5pbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCB7XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdhZ2VudF91cGRhdGVkX3N0cmVhbV9ldmVudCc7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGFnZW50IFRoZSBuZXcgYWdlbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhZ2VudCkge1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBjb25zdW1lQWdlbnRUb29sUnVuUmVzdWx0LCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZW5jb2RlVWludDhBcnJheVRvQmFzZTY0IH0gZnJvbSBcIi4vdXRpbHMvYmFzZTY0Lm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1bkl0ZW1TdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy9pbmRleC5tanNcIjtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzTW9kZWxSZXNwb25zZShtb2RlbFJlc3BvbnNlLCBhZ2VudCwgdG9vbHMsIGhhbmRvZmZzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICBjb25zdCBydW5IYW5kb2ZmcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkZ1bmN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bkNvbXB1dGVyQWN0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMgPSBbXTtcbiAgICBjb25zdCB0b29sc1VzZWQgPSBbXTtcbiAgICBjb25zdCBoYW5kb2ZmTWFwID0gbmV3IE1hcChoYW5kb2Zmcy5tYXAoKGgpID0+IFtoLnRvb2xOYW1lLCBoXSkpO1xuICAgIGNvbnN0IGZ1bmN0aW9uTWFwID0gbmV3IE1hcCh0b29scy5maWx0ZXIoKHQpID0+IHQudHlwZSA9PT0gJ2Z1bmN0aW9uJykubWFwKCh0KSA9PiBbdC5uYW1lLCB0XSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbCA9IHRvb2xzLmZpbmQoKHQpID0+IHQudHlwZSA9PT0gJ2NvbXB1dGVyJyk7XG4gICAgY29uc3QgbWNwVG9vbE1hcCA9IG5ldyBNYXAodG9vbHNcbiAgICAgICAgLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnaG9zdGVkX3Rvb2wnICYmIHQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwJylcbiAgICAgICAgLm1hcCgodCkgPT4gdClcbiAgICAgICAgLm1hcCgodCkgPT4gW3QucHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbCwgdF0pKTtcbiAgICBmb3IgKGNvbnN0IG91dHB1dCBvZiBtb2RlbFJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKG91dHB1dC5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBvdXRwdXQubmFtZTtcbiAgICAgICAgICAgIHRvb2xzVXNlZC5wdXNoKHRvb2xOYW1lKTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhPy50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnIHx8XG4gICAgICAgICAgICAgICAgb3V0cHV0Lm5hbWUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBIb3N0ZWQgcmVtb3RlIE1DUCBzZXJ2ZXIncyBhcHByb3ZhbCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJMYWJlbCA9IHByb3ZpZGVyRGF0YS5zZXJ2ZXJfbGFiZWw7XG4gICAgICAgICAgICAgICAgY29uc3QgbWNwU2VydmVyVG9vbCA9IG1jcFRvb2xNYXAuZ2V0KG1jcFNlcnZlckxhYmVsKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1jcFNlcnZlclRvb2wgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgTUNQIHNlcnZlciAoJHttY3BTZXJ2ZXJMYWJlbH0pIG5vdCBmb3VuZCBpbiBBZ2VudCAoJHthZ2VudC5uYW1lfSlgO1xuICAgICAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWNwX3NlcnZlcl9sYWJlbDogbWNwU2VydmVyTGFiZWwgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERvIHRoaXMgYXBwcm92YWwgbGF0ZXI6XG4gICAgICAgICAgICAgICAgLy8gV2Ugc3VwcG9ydCBib3RoIG9uQXBwcm92YWwgY2FsbGJhY2sgKGxpa2UgdGhlIFB5dGhvbiBTREsgZG9lcykgYW5kIEhJVEwgcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgdXNlIHRoaXMgbmFtZSB0byBhbGlnbiB3aXRoIHRoZSBuYW1lIHNlbnQgZnJvbSB0aGUgc2VydmVyc1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm92aWRlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb3ZpZGVyRGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpO1xuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJdGVtOiBhcHByb3ZhbEl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIG1jcFRvb2w6IG1jcFNlcnZlclRvb2wsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFtY3BTZXJ2ZXJUb29sLnByb3ZpZGVyRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIG9uQXBwcm92YWwgZnVuY3Rpb24gZXhpc3RzLCBpdCBjb25maXJtcyB0aGUgYXBwcm92YWwgcmlnaHQgYWZ0ZXIgdGhpcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGh1cywgdGhpcyBhcHByb3ZhbCBpdGVtIG11c3QgYmUgYXBwZW5kZWQgb25seSBmb3IgdGhlIG5leHQgdHVybiBpbnRlcnJ1cHRpb24gcGF0dGVybnMuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0cHV0LnR5cGUgPT09ICdyZWFzb25pbmcnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5SZWFzb25pbmdJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ2NvbXB1dGVyX2NhbGwnKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2goJ2NvbXB1dGVyX3VzZScpO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgcHJvZHVjZWQgY29tcHV0ZXIgYWN0aW9uIHdpdGhvdXQgYSBjb21wdXRlciB0b29sLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSAhPT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0b29sc1VzZWQucHVzaChvdXRwdXQubmFtZSk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBoYW5kb2ZmTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgIGlmIChoYW5kb2ZmKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5IYW5kb2ZmQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuSGFuZG9mZnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBoYW5kb2ZmOiBoYW5kb2ZmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvbk1hcC5nZXQob3V0cHV0Lm5hbWUpO1xuICAgICAgICAgICAgaWYgKCFmdW5jdGlvblRvb2wpIHtcbiAgICAgICAgICAgICAgICBhZGRFcnJvclRvQ3VycmVudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVG9vbCAke291dHB1dC5uYW1lfSBub3QgZm91bmQgaW4gYWdlbnQgJHthZ2VudC5uYW1lfS5gLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKG91dHB1dCwgYWdlbnQpKTtcbiAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIHRvb2w6IGZ1bmN0aW9uVG9vbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5ld0l0ZW1zOiBpdGVtcyxcbiAgICAgICAgaGFuZG9mZnM6IHJ1bkhhbmRvZmZzLFxuICAgICAgICBmdW5jdGlvbnM6IHJ1bkZ1bmN0aW9ucyxcbiAgICAgICAgY29tcHV0ZXJBY3Rpb25zOiBydW5Db21wdXRlckFjdGlvbnMsXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMsXG4gICAgICAgIHRvb2xzVXNlZDogdG9vbHNVc2VkLFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICBydW5GdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkNvbXB1dGVyQWN0aW9ucy5sZW5ndGggPiAwKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IG5leHRTdGVwU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9oYW5kb2ZmJyksXG4gICAgICAgIG5ld0FnZW50OiB6LmFueSgpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyksXG4gICAgICAgIG91dHB1dDogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX3J1bl9hZ2FpbicpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyksXG4gICAgICAgIGRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuXSk7XG5jbGFzcyBTaW5nbGVTdGVwUmVzdWx0IHtcbiAgICBvcmlnaW5hbElucHV0O1xuICAgIG1vZGVsUmVzcG9uc2U7XG4gICAgcHJlU3RlcEl0ZW1zO1xuICAgIG5ld1N0ZXBJdGVtcztcbiAgICBuZXh0U3RlcDtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5wdXQgaXRlbXMgaS5lLiB0aGUgaXRlbXMgYmVmb3JlIHJ1bigpIHdhcyBjYWxsZWQuIE1heSBiZSBtdXRlZCBieSBoYW5kb2ZmIGlucHV0IGZpbHRlcnNcbiAgICAgKi9cbiAgICBvcmlnaW5hbElucHV0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBjdXJyZW50IHN0ZXBcbiAgICAgKi9cbiAgICBtb2RlbFJlc3BvbnNlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYmVmb3JlIHRoZSBjdXJyZW50IHN0ZXAgd2FzIGV4ZWN1dGVkXG4gICAgICovXG4gICAgcHJlU3RlcEl0ZW1zLCBcbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgYWZ0ZXIgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBuZXdTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXh0IHN0ZXAgdG8gZXhlY3V0ZVxuICAgICAqL1xuICAgIG5leHRTdGVwKSB7XG4gICAgICAgIHRoaXMub3JpZ2luYWxJbnB1dCA9IG9yaWdpbmFsSW5wdXQ7XG4gICAgICAgIHRoaXMubW9kZWxSZXNwb25zZSA9IG1vZGVsUmVzcG9uc2U7XG4gICAgICAgIHRoaXMucHJlU3RlcEl0ZW1zID0gcHJlU3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5ld1N0ZXBJdGVtcyA9IG5ld1N0ZXBJdGVtcztcbiAgICAgICAgdGhpcy5uZXh0U3RlcCA9IG5leHRTdGVwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIChpLmUuIGV2ZXJ5dGhpbmcgZ2VuZXJhdGVkIGFmdGVyIG9yaWdpbmFsSW5wdXQpXG4gICAgICovXG4gICAgZ2V0IGdlbmVyYXRlZEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVTdGVwSXRlbXMuY29uY2F0KHRoaXMubmV3U3RlcEl0ZW1zKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVSZXNldFRvb2xDaG9pY2UoYWdlbnQsIHRvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKSB7XG4gICAgaWYgKGFnZW50LnJlc2V0VG9vbENob2ljZSAmJiB0b29sVXNlVHJhY2tlci5oYXNVc2VkVG9vbHMoYWdlbnQpKSB7XG4gICAgICAgIHJldHVybiB7IC4uLm1vZGVsU2V0dGluZ3MsIHRvb2xDaG9pY2U6IHVuZGVmaW5lZCB9O1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxTZXR0aW5ncztcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKGFnZW50LCBvcmlnaW5hbElucHV0LCBvcmlnaW5hbFByZVN0ZXBJdGVtcywgbmV3UmVzcG9uc2UsIHByb2Nlc3NlZFJlc3BvbnNlLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgLy8gY2FsbF9pZHMgZm9yIGZ1bmN0aW9uIHRvb2xzXG4gICAgY29uc3QgZnVuY3Rpb25DYWxsSWRzID0gb3JpZ2luYWxQcmVTdGVwSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xBcHByb3ZhbEl0ZW0gJiZcbiAgICAgICAgJ2NhbGxJZCcgaW4gaXRlbS5yYXdJdGVtICYmXG4gICAgICAgIGl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpXG4gICAgICAgIC5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbS5jYWxsSWQpO1xuICAgIC8vIFJ1biBmdW5jdGlvbiB0b29scyB0aGF0IHJlcXVpcmUgYXBwcm92YWwgYWZ0ZXIgdGhleSBnZXQgdGhlaXIgYXBwcm92YWwgcmVzdWx0c1xuICAgIGNvbnN0IGZ1bmN0aW9uVG9vbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5mdW5jdGlvbnMuZmlsdGVyKChydW4pID0+IHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uQ2FsbElkcy5pbmNsdWRlcyhydW4udG9vbENhbGwuY2FsbElkKTtcbiAgICB9KTtcbiAgICBjb25zdCBmdW5jdGlvblJlc3VsdHMgPSBhd2FpdCBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIGZ1bmN0aW9uVG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpO1xuICAgIC8vIENyZWF0ZSB0aGUgaW5pdGlhbCBzZXQgb2YgdGhlIG91dHB1dCBpdGVtc1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKTtcbiAgICAvLyBSdW4gTUNQIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgbWNwQXBwcm92YWxSdW5zID0gcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gKHJ1bi5yZXF1ZXN0SXRlbS50eXBlID09PSAndG9vbF9hcHByb3ZhbF9pdGVtJyAmJlxuICAgICAgICAgICAgcnVuLnJlcXVlc3RJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2hvc3RlZF90b29sX2NhbGwnICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcpO1xuICAgIH0pO1xuICAgIGZvciAoY29uc3QgcnVuIG9mIG1jcEFwcHJvdmFsUnVucykge1xuICAgICAgICAvLyB0aGUgYXBwcm92YWxfcmVxdWVzdF9pZCBcIm1jcHJfMTIzLi4uXCJcbiAgICAgICAgY29uc3QgYXBwcm92YWxSZXF1ZXN0SWQgPSBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5pZDtcbiAgICAgICAgY29uc3QgYXBwcm92ZWQgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGl0ZW0gbmFtZSBtdXN0IGJlIHRoZSBzYW1lIHdpdGggdGhlIG9uZSBzZW50IGZyb20gUmVzcG9uc2VzIEFQSSBzZXJ2ZXJcbiAgICAgICAgICAgIHRvb2xOYW1lOiBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS5uYW1lLFxuICAgICAgICAgICAgY2FsbElkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYXBwcm92ZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZTogYXBwcm92ZWQsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0SWQsXG4gICAgICAgICAgICAgICAgcmVhc29uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gVGVsbCBSZXNwb25zZXMgQVBJIHNlcnZlciB0aGUgYXBwcm92YWwgcmVzdWx0IGluIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hlY2tUb29sT3V0cHV0ID0gYXdhaXQgY2hlY2tGb3JGaW5hbE91dHB1dEZyb21Ub29scyhhZ2VudCwgZnVuY3Rpb25SZXN1bHRzLCBzdGF0ZSk7XG4gICAgLy8gRXhjbHVkZSB0aGUgdG9vbCBhcHByb3ZhbCBpdGVtcywgd2hpY2ggc2hvdWxkIG5vdCBiZSBzZW50IHRvIFJlc3BvbnNlcyBBUEksXG4gICAgLy8gZnJvbSB0aGUgU2luZ2xlU3RlcFJlc3VsdCdzIHByZVN0ZXBJdGVtc1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICByZXR1cm4gIShpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgfSk7XG4gICAgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ZpbmFsT3V0cHV0KSB7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY2hlY2tUb29sT3V0cHV0LmlzSW50ZXJydXB0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW50ZXJydXB0aW9uczogY2hlY2tUb29sT3V0cHV0LmludGVycnVwdGlvbnMsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gd2Ugb25seSByYW4gbmV3IHRvb2xzIGFuZCBzaWRlIGVmZmVjdHMuIFdlIG5lZWQgdG8gcnVuIHRoZSByZXN0IG9mIHRoZSBhZ2VudFxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBjb25zdCBwcmVTdGVwSXRlbXMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtcztcbiAgICBsZXQgbmV3SXRlbXMgPSBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcztcbiAgICBjb25zdCBbZnVuY3Rpb25SZXN1bHRzLCBjb21wdXRlclJlc3VsdHNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucywgcnVubmVyLCBzdGF0ZSksXG4gICAgICAgIGV4ZWN1dGVDb21wdXRlckFjdGlvbnMoYWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCksXG4gICAgXSk7XG4gICAgbmV3SXRlbXMgPSBuZXdJdGVtcy5jb25jYXQoZnVuY3Rpb25SZXN1bHRzLm1hcCgocikgPT4gci5ydW5JdGVtKSk7XG4gICAgbmV3SXRlbXMgPSBuZXdJdGVtcy5jb25jYXQoY29tcHV0ZXJSZXN1bHRzKTtcbiAgICAvLyBydW4gaG9zdGVkIE1DUCBhcHByb3ZhbCByZXF1ZXN0c1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHByb3ZhbFJlcXVlc3Qgb2YgcHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cykge1xuICAgICAgICAgICAgY29uc3QgdG9vbERhdGEgPSBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbFxuICAgICAgICAgICAgICAgIC5wcm92aWRlckRhdGE7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0RGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGlmICh0b29sRGF0YS5vbl9hcHByb3ZhbCkge1xuICAgICAgICAgICAgICAgIC8vIHN5bmNocm9ub3VzbHkgaGFuZGxlIHRoZSBhcHByb3ZhbCBwcm9jZXNzIGhlcmVcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbFJlc3VsdCA9IGF3YWl0IHRvb2xEYXRhLm9uX2FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBhcHByb3ZhbFJlcXVlc3QucmVxdWVzdEl0ZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzcG9uc2VEYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZhbFJlc3VsdC5hcHByb3ZlLFxuICAgICAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBhcHByb3ZhbFJlc3VsdC5yZWFzb24sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdtY3BfYXBwcm92YWxfcmVzcG9uc2UnLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IGFwcHJvdmFsUmVzcG9uc2VEYXRhLFxuICAgICAgICAgICAgICAgIH0sIGFnZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWNlaXZlIGEgdXNlcidzIGFwcHJvdmFsIG9uIHRoZSBuZXh0IHR1cm5cbiAgICAgICAgICAgICAgICBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX21jcF90b29sX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlcXVlc3REYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcmVxdWVzdERhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHJlcXVlc3REYXRhLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogcmVxdWVzdERhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0sIGFnZW50KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0cy5wdXNoKGFwcHJvdmFsSXRlbSk7XG4gICAgICAgICAgICAgICAgLy8gbmV3SXRlbXMucHVzaChhcHByb3ZhbEl0ZW0ucnVuSXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJvY2VzcyBoYW5kb2Zmc1xuICAgIGlmIChwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBleGVjdXRlSGFuZG9mZkNhbGxzKGFnZW50LCBvcmlnaW5hbElucHV0LCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMsIHJ1bm5lciwgc3RhdGUuX2NvbnRleHQpO1xuICAgIH1cbiAgICBjb25zdCBjaGVja1Rvb2xPdXRwdXQgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICBpZiAoY2hlY2tUb29sT3V0cHV0LmlzRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNJbnRlcnJ1cHRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zOiBjaGVja1Rvb2xPdXRwdXQuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgbW9kZWwgaXNzdWVkIGFueSB0b29sIGNhbGxzIG9yIGhhbmRvZmZzIGluIHRoaXMgdHVybixcbiAgICAvLyB3ZSBtdXN0IE5PVCB0cmVhdCBhbnkgYXNzaXN0YW50IG1lc3NhZ2UgaW4gdGhlIHNhbWUgdHVybiBhcyB0aGUgZmluYWwgb3V0cHV0LlxuICAgIC8vIFdlIHNob3VsZCBydW4gdGhlIGxvb3AgYWdhaW4gc28gdGhlIG1vZGVsIGNhbiBzZWUgdGhlIHRvb2wgcmVzdWx0cyBhbmQgcmVzcG9uZC5cbiAgICBjb25zdCBoYWRUb29sQ2FsbHNPckFjdGlvbnMgPSAocHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zPy5sZW5ndGggPz8gMCkgPiAwIHx8XG4gICAgICAgIChwcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHM/Lmxlbmd0aCA/PyAwKSA+IDAgfHxcbiAgICAgICAgKHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzPy5sZW5ndGggPz8gMCkgPiAwO1xuICAgIGlmIChoYWRUb29sQ2FsbHNPckFjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgLy8gTm8gdG9vbCBjYWxscy9hY3Rpb25zIGluIHRoaXMgdHVybjsgc2FmZSB0byBjb25zaWRlciBhIHBsYWluIGFzc2lzdGFudCBtZXNzYWdlIGFzIGZpbmFsLlxuICAgIGNvbnN0IG1lc3NhZ2VJdGVtcyA9IG5ld0l0ZW1zLmZpbHRlcigoaXRlbSkgPT4gaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKTtcbiAgICAvLyB3ZSB3aWxsIHVzZSB0aGUgbGFzdCBjb250ZW50IG91dHB1dCBhcyB0aGUgZmluYWwgb3V0cHV0XG4gICAgY29uc3QgcG90ZW50aWFsRmluYWxPdXRwdXQgPSBtZXNzYWdlSXRlbXMubGVuZ3RoID4gMFxuICAgICAgICA/IGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UobWVzc2FnZUl0ZW1zW21lc3NhZ2VJdGVtcy5sZW5ndGggLSAxXS5yYXdJdGVtKVxuICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAvLyBpZiB0aGVyZSBpcyBubyBvdXRwdXQgd2UganVzdCBydW4gYWdhaW5cbiAgICBpZiAodHlwZW9mIHBvdGVudGlhbEZpbmFsT3V0cHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBjb25zdCBoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscyA9IGZ1bmN0aW9uUmVzdWx0cy5zb21lKChyZXN1bHQpID0+IHJlc3VsdC5ydW5JdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSk7XG4gICAgaWYgKCFoYXNQZW5kaW5nVG9vbHNPckFwcHJvdmFscykge1xuICAgICAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhZ2VudC5vdXRwdXRUeXBlICE9PSAndGV4dCcgJiYgcG90ZW50aWFsRmluYWxPdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIFN0cnVjdHVyZWQgb3V0cHV0IHNjaGVtYSA9PiBhbHdheXMgbGVhZHMgdG8gYSBmaW5hbCBvdXRwdXQgaWYgd2UgaGF2ZSB0ZXh0LlxuICAgICAgICAgICAgY29uc3QgeyBwYXJzZXIgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoYWdlbnQub3V0cHV0VHlwZSwgJ2ZpbmFsX291dHB1dCcpO1xuICAgICAgICAgICAgY29uc3QgW2Vycm9yXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihwb3RlbnRpYWxGaW5hbE91dHB1dCkpO1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgb3V0cHV0IHR5cGUnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIG91dHB1dCB0eXBlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLCBvdXRwdXQ6IHBvdGVudGlhbEZpbmFsT3V0cHV0IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xDYWxsLCBvdXRwdXQpIHtcbiAgICBjb25zdCBtYXliZVN0cnVjdHVyZWRPdXRwdXRzID0gbm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXRzKG91dHB1dCk7XG4gICAgaWYgKG1heWJlU3RydWN0dXJlZE91dHB1dHMpIHtcbiAgICAgICAgY29uc3Qgc3RydWN0dXJlZEl0ZW1zID0gbWF5YmVTdHJ1Y3R1cmVkT3V0cHV0cy5tYXAoY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICBvdXRwdXQ6IHN0cnVjdHVyZWRJdGVtcyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgdGV4dDogdG9TbWFydFN0cmluZyhvdXRwdXQpLFxuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEFjY2VwdHMgd2hhdGV2ZXIgdGhlIHRvb2wgcmV0dXJuZWQgYW5kIGF0dGVtcHRzIHRvIGNvZXJjZSBpdCBpbnRvIHRoZSBzdHJ1Y3R1cmVkIHByb3RvY29sXG4gKiBzaGFwZXMgd2UgZXhwb3NlIHRvIGRvd25zdHJlYW0gbW9kZWwgYWRhcHRlcnMgKGlucHV0X3RleHQvaW5wdXRfaW1hZ2UvaW5wdXRfZmlsZSkuIFRvb2xzIGFyZVxuICogYWxsb3dlZCB0byByZXR1cm4gZWl0aGVyIGEgc2luZ2xlIHN0cnVjdHVyZWQgb2JqZWN0IG9yIGFuIGFycmF5IG9mIHRoZW07IGFueXRoaW5nIGVsc2UgZmFsbHNcbiAqIGJhY2sgdG8gdGhlIGxlZ2FjeSBzdHJpbmcgcGlwZWxpbmUuXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0cyhvdXRwdXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvdXRwdXQpKSB7XG4gICAgICAgIGNvbnN0IHN0cnVjdHVyZWQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG91dHB1dCkge1xuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVN0cnVjdHVyZWRUb29sT3V0cHV0KGl0ZW0pO1xuICAgICAgICAgICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJ1Y3R1cmVkLnB1c2gobm9ybWFsaXplZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cnVjdHVyZWQ7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dChvdXRwdXQpO1xuICAgIHJldHVybiBub3JtYWxpemVkID8gW25vcm1hbGl6ZWRdIDogbnVsbDtcbn1cbi8qKlxuICogQmVzdC1lZmZvcnQgbm9ybWFsaXphdGlvbiBvZiBhIHNpbmdsZSB0b29sIG91dHB1dCBpdGVtLiBJZiB0aGUgb2JqZWN0IGFscmVhZHkgbWF0Y2hlcyB0aGVcbiAqIHByb3RvY29sIHNoYXBlIHdlIHNpbXBseSBjYXN0IGl0OyBvdGhlcndpc2Ugd2UgY29weSB0aGUgcmVjb2duaXNlZCBmaWVsZHMgaW50byB0aGUgY2Fub25pY2FsXG4gKiBzdHJ1Y3R1cmUuIFJldHVybmluZyBudWxsIGxldHMgdGhlIGNhbGxlciBrbm93IHdlIHNob3VsZCByZXZlcnQgdG8gcGxhaW4tc3RyaW5nIGhhbmRsaW5nLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dCh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ3RleHQnICYmIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICd0ZXh0JywgdGV4dDogdmFsdWUudGV4dCB9O1xuICAgICAgICBpZiAoaXNSZWNvcmQodmFsdWUucHJvdmlkZXJEYXRhKSkge1xuICAgICAgICAgICAgb3V0cHV0LnByb3ZpZGVyRGF0YSA9IHZhbHVlLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7IHR5cGU6ICdpbWFnZScgfTtcbiAgICAgICAgbGV0IGltYWdlU3RyaW5nO1xuICAgICAgICBsZXQgaW1hZ2VGaWxlSWQ7XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKHZhbHVlLm1lZGlhVHlwZSlcbiAgICAgICAgICAgID8gdmFsdWUubWVkaWFUeXBlXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgaW1hZ2VGaWVsZCA9IHZhbHVlLmltYWdlO1xuICAgICAgICBpZiAodHlwZW9mIGltYWdlRmllbGQgPT09ICdzdHJpbmcnICYmIGltYWdlRmllbGQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBpbWFnZUZpZWxkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzUmVjb3JkKGltYWdlRmllbGQpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IGltYWdlRmllbGQ7XG4gICAgICAgICAgICBjb25zdCBpbmxpbmVNZWRpYVR5cGUgPSBpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLm1lZGlhVHlwZSlcbiAgICAgICAgICAgICAgICA/IGltYWdlT2JqLm1lZGlhVHlwZVxuICAgICAgICAgICAgICAgIDogZmFsbGJhY2tJbWFnZU1lZGlhVHlwZTtcbiAgICAgICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLnVybCkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IGltYWdlT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZVN0cmluZyA9IHRvSW5saW5lSW1hZ2VTdHJpbmcoaW1hZ2VPYmouZGF0YSwgaW5saW5lTWVkaWFUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGltYWdlT2JqLmRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmXG4gICAgICAgICAgICAgICAgaW1hZ2VPYmouZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKGltYWdlT2JqLmRhdGEsIGlubGluZU1lZGlhVHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWltYWdlU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlSWQgPSAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5maWxlSWQpICYmIGltYWdlT2JqLmZpbGVJZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouaWQpICYmIGltYWdlT2JqLmlkKSB8fFxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlRmlsZUlkID0gY2FuZGlkYXRlSWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW1hZ2VTdHJpbmcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS5pbWFnZVVybCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmltYWdlVXJsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGltYWdlU3RyaW5nID0gdmFsdWUuaW1hZ2VVcmw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbWFnZUZpbGVJZCAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlLmZpbGVJZCA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmZpbGVJZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbWFnZUZpbGVJZCA9IHZhbHVlLmZpbGVJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWltYWdlU3RyaW5nICYmXG4gICAgICAgICAgICB0eXBlb2YgdmFsdWUuZGF0YSA9PT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSBmYWxsYmFja0ltYWdlTWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgPyB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgOiB2YWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbWFnZVN0cmluZyAmJlxuICAgICAgICAgICAgdmFsdWUuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiZcbiAgICAgICAgICAgIHZhbHVlLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaW1hZ2VTdHJpbmcgPSB0b0lubGluZUltYWdlU3RyaW5nKHZhbHVlLmRhdGEsIGZhbGxiYWNrSW1hZ2VNZWRpYVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUuZGV0YWlsID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5kZXRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IHZhbHVlLmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdHJpbmcpIHtcbiAgICAgICAgICAgIG91dHB1dC5pbWFnZSA9IGltYWdlU3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGltYWdlRmlsZUlkKSB7XG4gICAgICAgICAgICBvdXRwdXQuaW1hZ2UgPSB7IGZpbGVJZDogaW1hZ2VGaWxlSWQgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlY29yZCh2YWx1ZS5wcm92aWRlckRhdGEpKSB7XG4gICAgICAgICAgICBvdXRwdXQucHJvdmlkZXJEYXRhID0gdmFsdWUucHJvdmlkZXJEYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgY29uc3QgZmlsZVZhbHVlID0gbm9ybWFsaXplRmlsZVZhbHVlKHZhbHVlKTtcbiAgICAgICAgaWYgKCFmaWxlVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHsgdHlwZTogJ2ZpbGUnLCBmaWxlOiBmaWxlVmFsdWUgfTtcbiAgICAgICAgaWYgKGlzUmVjb3JkKHZhbHVlLnByb3ZpZGVyRGF0YSkpIHtcbiAgICAgICAgICAgIG91dHB1dC5wcm92aWRlckRhdGEgPSB2YWx1ZS5wcm92aWRlckRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgdGhlIG5vcm1hbGl6ZWQgdG9vbCBvdXRwdXQgaW50byB0aGUgcHJvdG9jb2wgYGlucHV0XypgIGl0ZW1zLiBUaGlzIGlzIHRoZSBsYXN0IGhvcFxuICogYmVmb3JlIHdlIGhhbmQgdGhlIGRhdGEgdG8gbW9kZWwtc3BlY2lmaWMgYWRhcHRlcnMsIHNvIHdlIGdlbmVyYXRlIHRoZSBleGFjdCBzY2hlbWEgZXhwZWN0ZWQgYnlcbiAqIHRoZSBwcm90b2NvbCBkZWZpbml0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY29udmVydFN0cnVjdHVyZWRUb29sT3V0cHV0VG9JbnB1dEl0ZW0ob3V0cHV0KSB7XG4gICAgaWYgKG91dHB1dC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X3RleHQnLFxuICAgICAgICAgICAgdGV4dDogb3V0cHV0LnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyB0eXBlOiAnaW5wdXRfaW1hZ2UnIH07XG4gICAgICAgIGlmICh0eXBlb2Ygb3V0cHV0LmRldGFpbCA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmRldGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXN1bHQuZGV0YWlsID0gb3V0cHV0LmRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dC5pbWFnZSA9PT0gJ3N0cmluZycgJiYgb3V0cHV0LmltYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlY29yZChvdXRwdXQuaW1hZ2UpKSB7XG4gICAgICAgICAgICBjb25zdCBpbWFnZU9iaiA9IG91dHB1dC5pbWFnZTtcbiAgICAgICAgICAgIGNvbnN0IGlubGluZU1lZGlhVHlwZSA9IGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmoubWVkaWFUeXBlKVxuICAgICAgICAgICAgICAgID8gaW1hZ2VPYmoubWVkaWFUeXBlXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai51cmwpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0gaW1hZ2VPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNOb25FbXB0eVN0cmluZyhpbWFnZU9iai5kYXRhKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbWFnZSA9XG4gICAgICAgICAgICAgICAgICAgIGlubGluZU1lZGlhVHlwZSAmJiAhaW1hZ2VPYmouZGF0YS5zdGFydHNXaXRoKCdkYXRhOicpXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFzRGF0YVVybChpbWFnZU9iai5kYXRhLCBpbmxpbmVNZWRpYVR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGltYWdlT2JqLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbWFnZU9iai5kYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSAmJlxuICAgICAgICAgICAgICAgIGltYWdlT2JqLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZVVpbnQ4QXJyYXlUb0Jhc2U2NChpbWFnZU9iai5kYXRhKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW1hZ2UgPSBhc0RhdGFVcmwoYmFzZTY0LCBpbmxpbmVNZWRpYVR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcoaW1hZ2VPYmouZmlsZUlkKSAmJiBpbWFnZU9iai5maWxlSWQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChpc05vbkVtcHR5U3RyaW5nKGltYWdlT2JqLmlkKSAmJiBpbWFnZU9iai5pZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2VkSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmltYWdlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBpZiAob3V0cHV0LnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHR5cGU6ICdpbnB1dF9maWxlJyB9O1xuICAgICAgICBjb25zdCBmaWxlVmFsdWUgPSBvdXRwdXQuZmlsZTtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWxlVmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZSA9IGZpbGVWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChmaWxlVmFsdWUgJiYgdHlwZW9mIGZpbGVWYWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlY29yZCA9IGZpbGVWYWx1ZTtcbiAgICAgICAgICAgIGlmICgnZGF0YScgaW4gcmVjb3JkICYmIHJlY29yZC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVkaWFUeXBlID0gcmVjb3JkLm1lZGlhVHlwZSA/PyAndGV4dC9wbGFpbic7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmZpbGUgPSBhc0RhdGFVcmwocmVjb3JkLmRhdGEsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQocmVjb3JkLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsZSA9IGFzRGF0YVVybChiYXNlNjQsIG1lZGlhVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlY29yZC51cmwgPT09ICdzdHJpbmcnICYmIHJlY29yZC51cmwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyB1cmw6IHJlY29yZC51cmwgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZmVyZW5jZWRJZCA9ICh0eXBlb2YgcmVjb3JkLmlkID09PSAnc3RyaW5nJyAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuaWQpIHx8XG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVjb3JkLmZpbGVJZCA9PT0gJ3N0cmluZycgJiYgcmVjb3JkLmZpbGVJZC5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlY29yZC5maWxlSWRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBpZiAocmVmZXJlbmNlZElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5maWxlID0geyBpZDogcmVmZXJlbmNlZElkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZWNvcmQuZmlsZW5hbWUgPT09ICdzdHJpbmcnICYmIHJlY29yZC5maWxlbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gcmVjb3JkLmZpbGVuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvdXRwdXQucHJvdmlkZXJEYXRhKSB7XG4gICAgICAgICAgICByZXN1bHQucHJvdmlkZXJEYXRhID0gb3V0cHV0LnByb3ZpZGVyRGF0YTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBleGhhdXN0aXZlQ2hlY2sgPSBvdXRwdXQ7XG4gICAgcmV0dXJuIGV4aGF1c3RpdmVDaGVjaztcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGRpcmVjdEZpbGUgPSB2YWx1ZS5maWxlO1xuICAgIGlmICh0eXBlb2YgZGlyZWN0RmlsZSA9PT0gJ3N0cmluZycgJiYgZGlyZWN0RmlsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiBkaXJlY3RGaWxlO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkT2JqZWN0ID0gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZShkaXJlY3RGaWxlKTtcbiAgICBpZiAobm9ybWFsaXplZE9iamVjdCkge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplZE9iamVjdDtcbiAgICB9XG4gICAgY29uc3QgbGVnYWN5VmFsdWUgPSBub3JtYWxpemVMZWdhY3lGaWxlVmFsdWUodmFsdWUpO1xuICAgIGlmIChsZWdhY3lWYWx1ZSkge1xuICAgICAgICByZXR1cm4gbGVnYWN5VmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghaXNSZWNvcmQodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoJ2RhdGEnIGluIHZhbHVlICYmIHZhbHVlLmRhdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBkYXRhVmFsdWUgPSB2YWx1ZS5kYXRhO1xuICAgICAgICBjb25zdCBoYXNTdHJpbmdEYXRhID0gdHlwZW9mIGRhdGFWYWx1ZSA9PT0gJ3N0cmluZycgJiYgZGF0YVZhbHVlLmxlbmd0aCA+IDA7XG4gICAgICAgIGNvbnN0IGhhc0JpbmFyeURhdGEgPSBkYXRhVmFsdWUgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIGRhdGFWYWx1ZS5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoIWhhc1N0cmluZ0RhdGEgJiYgIWhhc0JpbmFyeURhdGEpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5tZWRpYVR5cGUpIHx8XG4gICAgICAgICAgICAhaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlbmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiB0eXBlb2YgZGF0YVZhbHVlID09PSAnc3RyaW5nJyA/IGRhdGFWYWx1ZSA6IG5ldyBVaW50OEFycmF5KGRhdGFWYWx1ZSksXG4gICAgICAgICAgICBtZWRpYVR5cGU6IHZhbHVlLm1lZGlhVHlwZSxcbiAgICAgICAgICAgIGZpbGVuYW1lOiB2YWx1ZS5maWxlbmFtZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUudXJsKSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUudXJsIH07XG4gICAgICAgIGlmIChpc05vbkVtcHR5U3RyaW5nKHZhbHVlLmZpbGVuYW1lKSkge1xuICAgICAgICAgICAgcmVzdWx0LmZpbGVuYW1lID0gdmFsdWUuZmlsZW5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgcmVmZXJlbmNlZElkID0gKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuaWQpICYmIHZhbHVlLmlkKSB8fFxuICAgICAgICAoaXNOb25FbXB0eVN0cmluZyh2YWx1ZS5maWxlSWQpICYmIHZhbHVlLmZpbGVJZCk7XG4gICAgaWYgKHJlZmVyZW5jZWRJZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiByZWZlcmVuY2VkSWQgfTtcbiAgICAgICAgaWYgKGlzTm9uRW1wdHlTdHJpbmcodmFsdWUuZmlsZW5hbWUpKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSB2YWx1ZS5maWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUxlZ2FjeUZpbGVWYWx1ZSh2YWx1ZSkge1xuICAgIGNvbnN0IGZpbGVuYW1lID0gdHlwZW9mIHZhbHVlLmZpbGVuYW1lID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlbmFtZS5sZW5ndGggPiAwXG4gICAgICAgID8gdmFsdWUuZmlsZW5hbWVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdHlwZW9mIHZhbHVlLm1lZGlhVHlwZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubWVkaWFUeXBlLmxlbmd0aCA+IDBcbiAgICAgICAgPyB2YWx1ZS5tZWRpYVR5cGVcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZS5maWxlRGF0YSA9PT0gJ3N0cmluZycgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IHZhbHVlLmZpbGVEYXRhLCBtZWRpYVR5cGUsIGZpbGVuYW1lIH07XG4gICAgfVxuICAgIGlmICh2YWx1ZS5maWxlRGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgdmFsdWUuZmlsZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoIW1lZGlhVHlwZSB8fCAhZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG5ldyBVaW50OEFycmF5KHZhbHVlLmZpbGVEYXRhKSwgbWVkaWFUeXBlLCBmaWxlbmFtZSB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHZhbHVlLmZpbGVVcmwgPT09ICdzdHJpbmcnICYmIHZhbHVlLmZpbGVVcmwubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IHVybDogdmFsdWUuZmlsZVVybCB9O1xuICAgICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgICAgIHJlc3VsdC5maWxlbmFtZSA9IGZpbGVuYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdmFsdWUuZmlsZUlkID09PSAnc3RyaW5nJyAmJiB2YWx1ZS5maWxlSWQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7IGlkOiB2YWx1ZS5maWxlSWQgfTtcbiAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICByZXN1bHQuZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGlzUmVjb3JkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc05vbkVtcHR5U3RyaW5nKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUubGVuZ3RoID4gMDtcbn1cbmZ1bmN0aW9uIHRvSW5saW5lSW1hZ2VTdHJpbmcoZGF0YSwgbWVkaWFUeXBlKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAobWVkaWFUeXBlICYmICFkYXRhLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgIHJldHVybiBhc0RhdGFVcmwoZGF0YSwgbWVkaWFUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlVWludDhBcnJheVRvQmFzZTY0KGRhdGEpO1xuICAgIHJldHVybiBhc0RhdGFVcmwoYmFzZTY0LCBtZWRpYVR5cGUpO1xufVxuZnVuY3Rpb24gYXNEYXRhVXJsKGJhc2U2NCwgbWVkaWFUeXBlKSB7XG4gICAgcmV0dXJuIG1lZGlhVHlwZSA/IGBkYXRhOiR7bWVkaWFUeXBlfTtiYXNlNjQsJHtiYXNlNjR9YCA6IGJhc2U2NDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMoYWdlbnQsIHRvb2xSdW5zLCBydW5uZXIsIHN0YXRlKSB7XG4gICAgYXN5bmMgZnVuY3Rpb24gcnVuU2luZ2xlVG9vbCh0b29sUnVuKSB7XG4gICAgICAgIGxldCBwYXJzZWRBcmdzID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sUnVuLnRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sUnVuLnRvb2wubmVlZHNBcHByb3ZhbChzdGF0ZS5fY29udGV4dCwgcGFyc2VkQXJncywgdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSBzdGF0ZS5fY29udGV4dC5pc1Rvb2xBcHByb3ZlZCh7XG4gICAgICAgICAgICAgICAgdG9vbE5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbFJ1bi50b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyByZWplY3RlZFxuICAgICAgICAgICAgICAgIHJldHVybiB3aXRoRnVuY3Rpb25TcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgVG9vbCBleGVjdXRpb24gZm9yICR7dG9vbFJ1bi50b29sQ2FsbC5jYWxsSWR9IHdhcyBtYW51YWxseSByZWplY3RlZCBieSB1c2VyLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bkl0ZW06IG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKHRvb2xSdW4udG9vbENhbGwsIHJlc3BvbnNlKSwgYWdlbnQsIHJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFwcHJvdmFsICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcyBhcHByb3ZhbCBwcm9jZXNzIG5lZWRzIHRvIGJlIGRvbmUgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9hcHByb3ZhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLmlucHV0ID0gdG9vbFJ1bi50b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGw6IHRvb2xSdW4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbE91dHB1dCA9IGF3YWl0IHRvb2xSdW4udG9vbC5pbnZva2Uoc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzLCB7IHRvb2xDYWxsOiB0b29sUnVuLnRvb2xDYWxsIH0pO1xuICAgICAgICAgICAgICAgIC8vIFVzZSBzdHJpbmcgZGF0YSBmb3IgdHJhY2luZyBhbmQgZXZlbnQgZW1pdHRlclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcodG9vbE91dHB1dCk7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbDogdG9vbFJ1bi50b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICBpZiAocnVubmVyLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEub3V0cHV0ID0gc3RyaW5nUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvblJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgIHRvb2w6IHRvb2xSdW4udG9vbCxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiB0b29sT3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCB0b29sT3V0cHV0KSwgYWdlbnQsIHRvb2xPdXRwdXQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkUnVuUmVzdWx0ID0gY29uc3VtZUFnZW50VG9vbFJ1blJlc3VsdCh0b29sUnVuLnRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAobmVzdGVkUnVuUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmFnZW50UnVuUmVzdWx0ID0gbmVzdGVkUnVuUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gbmVzdGVkUnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXN0ZWRJbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uUmVzdWx0LmludGVycnVwdGlvbnMgPSBuZXN0ZWRJbnRlcnJ1cHRpb25zO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvblJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgcnVubmluZyB0b29sJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbF9uYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBTdHJpbmcoZXJyb3IpLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHRvb2xSdW5zLm1hcChydW5TaW5nbGVUb29sKSk7XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgVG9vbENhbGxFcnJvcihgRmFpbGVkIHRvIHJ1biBmdW5jdGlvbiB0b29sczogJHtlfWAsIGUsIHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG4vLyBJbnRlcm5hbCBoZWxwZXI6IGRpc3BhdGNoIGEgY29tcHV0ZXIgYWN0aW9uIGFuZCByZXR1cm4gYSBzY3JlZW5zaG90IChzeW5jL2FzeW5jKVxuYXN5bmMgZnVuY3Rpb24gX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpIHtcbiAgICBjb25zdCBhY3Rpb24gPSB0b29sQ2FsbC5hY3Rpb247XG4gICAgbGV0IHNjcmVlbnNob3Q7XG4gICAgLy8gRGlzcGF0Y2ggYmFzZWQgb24gYWN0aW9uIHR5cGUgc3RyaW5nIChhc3N1bWUgYWN0aW9uLnR5cGUgZXhpc3RzKVxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuY2xpY2soYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uYnV0dG9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb3VibGVfY2xpY2snOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZG91YmxlQ2xpY2soYWN0aW9uLngsIGFjdGlvbi55KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkcmFnJzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLmRyYWcoYWN0aW9uLnBhdGgubWFwKChwKSA9PiBbcC54LCBwLnldKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAna2V5cHJlc3MnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIua2V5cHJlc3MoYWN0aW9uLmtleXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdmUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIubW92ZShhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3NjcmVlbnNob3QnOlxuICAgICAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzY3JvbGwnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuc2Nyb2xsKGFjdGlvbi54LCBhY3Rpb24ueSwgYWN0aW9uLnNjcm9sbF94LCBhY3Rpb24uc2Nyb2xsX3kpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIudHlwZShhY3Rpb24udGV4dCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnd2FpdCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci53YWl0KCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGFjdGlvbjsgLy8gZW5zdXJlcyB0aGF0IHdlIGhhbmRsZSBldmVyeSBhY3Rpb24gd2Uga25vdyBvZlxuICAgICAgICAgICAgLy8gVW5rbm93biBhY3Rpb24sIGp1c3QgdGFrZSBzY3JlZW5zaG90XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICB9XG4gICAgLy8gQWx3YXlzIHJldHVybiBzY3JlZW5zaG90IGFzIGJhc2U2NCBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGNvbXB1dGVyLnNjcmVlbnNob3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgc2NyZWVuc2hvdCA9IGF3YWl0IGNvbXB1dGVyLnNjcmVlbnNob3QoKTtcbiAgICAgICAgaWYgKHR5cGVvZiBzY3JlZW5zaG90ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHNjcmVlbnNob3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdDb21wdXRlciBkb2VzIG5vdCBpbXBsZW1lbnQgc2NyZWVuc2hvdCgpJyk7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgYWN0aW9ucywgcnVubmVyLCBydW5Db250ZXh0LCBjdXN0b21Mb2dnZXIgPSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBfbG9nZ2VyID0gY3VzdG9tTG9nZ2VyID8/IGxvZ2dlcjtcbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICBjb25zdCBjb21wdXRlciA9IGFjdGlvbi5jb21wdXRlci5jb21wdXRlcjtcbiAgICAgICAgY29uc3QgdG9vbENhbGwgPSBhY3Rpb24udG9vbENhbGw7XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX3N0YXJ0IChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhZ2VudCwgYWN0aW9uLmNvbXB1dGVyLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0eXBlb2YgYWdlbnQuZW1pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSdW4gdGhlIGFjdGlvbiBhbmQgZ2V0IHNjcmVlbnNob3RcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IF9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QoY29tcHV0ZXIsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZXhlY3V0ZSBjb21wdXRlciBhY3Rpb246JywgZXJyKTtcbiAgICAgICAgICAgIG91dHB1dCA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhvb2tzOiBvbl90b29sX2VuZCAoZ2xvYmFsICsgYWdlbnQpXG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhY3Rpb24uY29tcHV0ZXIsIG91dHB1dCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWN0aW9uLmNvbXB1dGVyLCBvdXRwdXQsIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsd2F5cyByZXR1cm4gYSBzY3JlZW5zaG90IGFzIGEgYmFzZTY0IGRhdGEgVVJMXG4gICAgICAgIGNvbnN0IGltYWdlVXJsID0gb3V0cHV0ID8gYGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwke291dHB1dH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHJhd0l0ZW0gPSB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXJfY2FsbF9yZXN1bHQnLFxuICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICBvdXRwdXQ6IHsgdHlwZTogJ2NvbXB1dGVyX3NjcmVlbnNob3QnLCBkYXRhOiBpbWFnZVVybCB9LFxuICAgICAgICB9O1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShyYXdJdGVtLCBhZ2VudCwgaW1hZ2VVcmwpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUhhbmRvZmZDYWxscyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBydW5IYW5kb2ZmcywgcnVubmVyLCBydW5Db250ZXh0KSB7XG4gICAgbmV3U3RlcEl0ZW1zID0gWy4uLm5ld1N0ZXBJdGVtc107XG4gICAgaWYgKHJ1bkhhbmRvZmZzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBsb2dnZXIud2FybignSW5jb3JyZWN0bHkgY2FsbGVkIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMgd2l0aCBubyBoYW5kb2Zmcy4gVGhpcyBzaG91bGQgbm90IGhhcHBlbi4gTW92aW5nIG9uLicpO1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbiAgICB9XG4gICAgaWYgKHJ1bkhhbmRvZmZzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gbXVsdGlwbGUgaGFuZG9mZnMuIElnbm9yaW5nIGFsbCBidXQgdGhlIGZpcnN0IG9uZSBieSBhZGRpbmcgcmVqZWN0IHJlc3BvbnNlcyBmb3IgdGhvc2VcbiAgICAgICAgY29uc3Qgb3V0cHV0TWVzc2FnZSA9ICdNdWx0aXBsZSBoYW5kb2ZmcyBkZXRlY3RlZCwgaWdub3JpbmcgdGhpcyBvbmUuJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBydW5IYW5kb2Zmcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmV3U3RlcEl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0ocnVuSGFuZG9mZnNbaV0udG9vbENhbGwsIG91dHB1dE1lc3NhZ2UpLCBhZ2VudCwgb3V0cHV0TWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFjdHVhbEhhbmRvZmYgPSBydW5IYW5kb2Zmc1swXTtcbiAgICByZXR1cm4gd2l0aEhhbmRvZmZTcGFuKGFzeW5jIChoYW5kb2ZmU3BhbikgPT4ge1xuICAgICAgICBjb25zdCBoYW5kb2ZmID0gYWN0dWFsSGFuZG9mZi5oYW5kb2ZmO1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IGF3YWl0IGhhbmRvZmYub25JbnZva2VIYW5kb2ZmKHJ1bkNvbnRleHQsIGFjdHVhbEhhbmRvZmYudG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgaGFuZG9mZlNwYW4uc3BhbkRhdGEudG9fYWdlbnQgPSBuZXdBZ2VudC5uYW1lO1xuICAgICAgICBpZiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdGVkQWdlbnRzID0gcnVuSGFuZG9mZnMubWFwKChoKSA9PiBoLmhhbmRvZmYuYWdlbnROYW1lKTtcbiAgICAgICAgICAgIGhhbmRvZmZTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTXVsdGlwbGUgaGFuZG9mZnMgcmVxdWVzdGVkJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZF9hZ2VudHM6IHJlcXVlc3RlZEFnZW50cyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3U3RlcEl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShhY3R1YWxIYW5kb2ZmLnRvb2xDYWxsLCBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpKSwgYWdlbnQsIG5ld0FnZW50KSk7XG4gICAgICAgIHJ1bm5lci5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgYWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHJ1bkNvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgY29uc3QgaW5wdXRGaWx0ZXIgPSBoYW5kb2ZmLmlucHV0RmlsdGVyID8/IHJ1bm5lci5jb25maWcuaGFuZG9mZklucHV0RmlsdGVyO1xuICAgICAgICBpZiAoaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnRmlsdGVyaW5nIGlucHV0cyBmb3IgaGFuZG9mZicpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnB1dEZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGhhbmRvZmZTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgaW5wdXQgZmlsdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsczogJ25vdCBjYWxsYWJsZScsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoYW5kb2ZmSW5wdXREYXRhID0ge1xuICAgICAgICAgICAgICAgIGlucHV0SGlzdG9yeTogQXJyYXkuaXNBcnJheShvcmlnaW5hbElucHV0KVxuICAgICAgICAgICAgICAgICAgICA/IFsuLi5vcmlnaW5hbElucHV0XVxuICAgICAgICAgICAgICAgICAgICA6IG9yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgcHJlSGFuZG9mZkl0ZW1zOiBbLi4ucHJlU3RlcEl0ZW1zXSxcbiAgICAgICAgICAgICAgICBuZXdJdGVtczogWy4uLm5ld1N0ZXBJdGVtc10sXG4gICAgICAgICAgICAgICAgcnVuQ29udGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGlucHV0RmlsdGVyKGhhbmRvZmZJbnB1dERhdGEpO1xuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dCA9IGZpbHRlcmVkLmlucHV0SGlzdG9yeTtcbiAgICAgICAgICAgIHByZVN0ZXBJdGVtcyA9IGZpbHRlcmVkLnByZUhhbmRvZmZJdGVtcztcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcyA9IGZpbHRlcmVkLm5ld0l0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJywgbmV3QWdlbnQgfSk7XG4gICAgfSwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBmcm9tX2FnZW50OiBhZ2VudC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuY29uc3QgTk9UX0ZJTkFMX09VVFBVVCA9IHtcbiAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIHRvb2xSZXN1bHRzLCBzdGF0ZSkge1xuICAgIGlmICh0b29sUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiB0b29sUmVzdWx0cykge1xuICAgICAgICBpZiAocmVzdWx0LnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2gocmVzdWx0LnJ1bkl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHQudHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdC5pbnRlcnJ1cHRpb25zKSkge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnMucHVzaCguLi5yZXN1bHQuaW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuYWdlbnRSdW5SZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXN0ZWRJbnRlcnJ1cHRpb25zID0gcmVzdWx0LmFnZW50UnVuUmVzdWx0LmludGVycnVwdGlvbnM7XG4gICAgICAgICAgICAgICAgaWYgKG5lc3RlZEludGVycnVwdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zLnB1c2goLi4ubmVzdGVkSW50ZXJydXB0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG5mdW5jdGlvbiBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnbWVzc2FnZV9vdXRwdXRfY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZkNhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9yZXF1ZXN0ZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1bkhhbmRvZmZPdXRwdXRJdGVtKSB7XG4gICAgICAgIHJldHVybiAnaGFuZG9mZl9vY2N1cnJlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxJdGVtKSB7XG4gICAgICAgIHJldHVybiAndG9vbF9jYWxsZWQnO1xuICAgIH1cbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfb3V0cHV0JztcbiAgICB9XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5SZWFzb25pbmdJdGVtKSB7XG4gICAgICAgIHJldHVybiAncmVhc29uaW5nX2l0ZW1fY3JlYXRlZCc7XG4gICAgfVxuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSkge1xuICAgICAgICByZXR1cm4gJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJztcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKSB7XG4gICAgY29uc3QgaXRlbU5hbWUgPSBnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lKGl0ZW0pO1xuICAgIGlmICghaXRlbU5hbWUpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ1Vua25vd24gaXRlbSB0eXBlOiAnLCBpdGVtKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkl0ZW1TdHJlYW1FdmVudChpdGVtTmFtZSwgaXRlbSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmVhbVN0ZXBJdGVtc1RvUnVuUmVzdWx0KHJlc3VsdCwgaXRlbXMpIHtcbiAgICAvLyBQcmVzZXJ2ZSB0aGUgb3JkZXIgaW4gd2hpY2ggaXRlbXMgd2VyZSBnZW5lcmF0ZWQgYnkgZW5xdWV1ZWluZyBlYWNoIG9uZVxuICAgIC8vIGltbWVkaWF0ZWx5IG9uIHRoZSBzdHJlYW1lZCByZXN1bHQuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGVucXVldWVSdW5JdGVtU3RyZWFtRXZlbnQocmVzdWx0LCBpdGVtKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgc3RlcCwgb3B0aW9ucykge1xuICAgIC8vIHNraXBJdGVtcyBjb250YWlucyBydW4gaXRlbXMgdGhhdCB3ZXJlIGFscmVhZHkgc3RyZWFtZWQgc28gd2UgYXZvaWRcbiAgICAvLyBlbnF1ZXVlaW5nIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGluc3RhbmNlLlxuICAgIGNvbnN0IHNraXBwZWRJdGVtcyA9IG9wdGlvbnM/LnNraXBJdGVtcztcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RlcC5uZXdTdGVwSXRlbXMpIHtcbiAgICAgICAgaWYgKHNraXBwZWRJdGVtcz8uaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbnF1ZXVlUnVuSXRlbVN0cmVhbUV2ZW50KHJlc3VsdCwgaXRlbSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFnZW50VG9vbFVzZVRyYWNrZXIge1xuICAgICNhZ2VudFRvVG9vbHMgPSBuZXcgTWFwKCk7XG4gICAgYWRkVG9vbFVzZShhZ2VudCwgdG9vbE5hbWVzKSB7XG4gICAgICAgIHRoaXMuI2FnZW50VG9Ub29scy5zZXQoYWdlbnQsIHRvb2xOYW1lcyk7XG4gICAgfVxuICAgIGhhc1VzZWRUb29scyhhZ2VudCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jYWdlbnRUb1Rvb2xzLmhhcyhhZ2VudCk7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKHRoaXMuI2FnZW50VG9Ub29scy5lbnRyaWVzKCkpLm1hcCgoW2FnZW50LCB0b29sTmFtZXNdKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gW2FnZW50Lm5hbWUsIHRvb2xOYW1lc107XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5JbXBsZW1lbnRhdGlvbi5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCBSdW5SZWFzb25pbmdJdGVtLCBSdW5IYW5kb2ZmQ2FsbEl0ZW0sIFJ1bkhhbmRvZmZPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgeyBBZ2VudFRvb2xVc2VUcmFja2VyLCBuZXh0U3RlcFNjaGVtYSwgfSBmcm9tIFwiLi9ydW5JbXBsZW1lbnRhdGlvbi5tanNcIjtcbmltcG9ydCB7IFN5c3RlbUVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBoYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCAqIGFzIHByb3RvY29sIGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbi8qKlxuICogVGhlIHNjaGVtYSB2ZXJzaW9uIG9mIHRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS4gVGhpcyBpcyB1c2VkIHRvIGVuc3VyZSB0aGF0IHRoZSBzZXJpYWxpemVkXG4gKiBydW4gc3RhdGUgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgdGhlIFNESy5cbiAqIElmIGFueXRoaW5nIGluIHRoaXMgc2NoZW1hIGNoYW5nZXMsIHRoZSB2ZXJzaW9uIHdpbGwgaGF2ZSB0byBiZSBpbmNyZW1lbnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04gPSAnMS4wJztcbmNvbnN0ICRzY2hlbWFWZXJzaW9uID0gei5saXRlcmFsKENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pO1xuY29uc3Qgc2VyaWFsaXplZEFnZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG5hbWU6IHouc3RyaW5nKCksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRTcGFuQmFzZSA9IHoub2JqZWN0KHtcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgndHJhY2Uuc3BhbicpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHRyYWNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcmVudF9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHN0YXJ0ZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlbmRlZF9hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIGVycm9yOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBtZXNzYWdlOiB6LnN0cmluZygpLFxuICAgICAgICBkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHNwYW5fZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IFNlcmlhbGl6ZWRTcGFuID0gc2VyaWFsaXplZFNwYW5CYXNlLmV4dGVuZCh7XG4gICAgcHJldmlvdXNfc3Bhbjogei5sYXp5KCgpID0+IFNlcmlhbGl6ZWRTcGFuKS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCB1c2FnZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICByZXF1ZXN0czogei5udW1iZXIoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG59KTtcbmNvbnN0IG1vZGVsUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXNhZ2U6IHVzYWdlU2NoZW1hLFxuICAgIG91dHB1dDogei5hcnJheShwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0pLFxuICAgIHJlc3BvbnNlSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcm92aWRlckRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZV9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuVG9vbENhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ19pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlJlYXNvbmluZ0l0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgc291cmNlQWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgdGFyZ2V0QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9hcHByb3ZhbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbl0pO1xuY29uc3Qgc2VyaWFsaXplZFRyYWNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZScpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHdvcmtmbG93X25hbWU6IHouc3RyaW5nKCksXG4gICAgZ3JvdXBfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuZXdJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICB0b29sc1VzZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgaGFuZG9mZnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgaGFuZG9mZjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgZnVuY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHRvb2w6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGNvbXB1dGVyQWN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBjb21wdXRlcjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFsd2F5cyBleGlzdHMgYnV0IG1hcmtlZCBhcyBvcHRpb25hbCBmb3IgZWFybHkgdmVyc2lvbiBjb21wYXRpYmlsaXR5OyB3aGVuIHJlbGVhc2luZyAxLjAsIHdlIGNhbiByZW1vdmUgdGhlIG51bGxhYmxlIGFuZCBvcHRpb25hbFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBIb3N0ZWRNQ1BUb29sXG4gICAgICAgIG1jcFRvb2w6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaG9zdGVkX3Rvb2wnKSxcbiAgICAgICAgICAgIG5hbWU6IHoubGl0ZXJhbCgnaG9zdGVkX21jcCcpLFxuICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICAgICAgfSksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0cmlwd2lyZVRyaWdnZXJlZDogei5ib29sZWFuKCksXG4gICAgb3V0cHV0SW5mbzogei5hbnkoKSxcbn0pO1xuY29uc3QgaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXQnKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5jb25zdCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgZ3VhcmRyYWlsOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgYWdlbnRPdXRwdXQ6IHouYW55KCksXG4gICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvdXRwdXQ6IGd1YXJkcmFpbEZ1bmN0aW9uT3V0cHV0U2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgU2VyaWFsaXplZFJ1blN0YXRlID0gei5vYmplY3Qoe1xuICAgICRzY2hlbWFWZXJzaW9uLFxuICAgIGN1cnJlbnRUdXJuOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgIG9yaWdpbmFsSW5wdXQ6IHouc3RyaW5nKCkub3Ioei5hcnJheShwcm90b2NvbC5Nb2RlbEl0ZW0pKSxcbiAgICBtb2RlbFJlc3BvbnNlczogei5hcnJheShtb2RlbFJlc3BvbnNlU2NoZW1hKSxcbiAgICBjb250ZXh0OiB6Lm9iamVjdCh7XG4gICAgICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICAgICAgYXBwcm92YWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm9iamVjdCh7XG4gICAgICAgICAgICBhcHByb3ZlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgICAgICByZWplY3RlZDogei5hcnJheSh6LnN0cmluZygpKS5vcih6LmJvb2xlYW4oKSksXG4gICAgICAgIH0pKSxcbiAgICAgICAgY29udGV4dDogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG4gICAgdG9vbFVzZVRyYWNrZXI6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYXJyYXkoei5zdHJpbmcoKSkpLFxuICAgIG1heFR1cm5zOiB6Lm51bWJlcigpLFxuICAgIGN1cnJlbnRBZ2VudFNwYW46IFNlcmlhbGl6ZWRTcGFuLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBub0FjdGl2ZUFnZW50UnVuOiB6LmJvb2xlYW4oKSxcbiAgICBpbnB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkoaW5wdXRHdWFyZHJhaWxSZXN1bHRTY2hlbWEpLFxuICAgIG91dHB1dEd1YXJkcmFpbFJlc3VsdHM6IHouYXJyYXkob3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBjdXJyZW50U3RlcDogbmV4dFN0ZXBTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBsYXN0TW9kZWxSZXNwb25zZTogbW9kZWxSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIGdlbmVyYXRlZEl0ZW1zOiB6LmFycmF5KGl0ZW1TY2hlbWEpLFxuICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgdHJhY2U6IHNlcmlhbGl6ZWRUcmFjZVNjaGVtYS5udWxsYWJsZSgpLFxufSk7XG4vKipcbiAqIFNlcmlhbGl6YWJsZSBzbmFwc2hvdCBvZiBhbiBhZ2VudCdzIHJ1biwgaW5jbHVkaW5nIGNvbnRleHQsIHVzYWdlIGFuZCB0cmFjZS5cbiAqIFdoaWxlIHRoaXMgY2xhc3MgaGFzIHB1YmxpY2x5IHdyaXRhYmxlIHByb3BlcnRpZXMgKHByZWZpeGVkIHdpdGggYF9gKSwgdGhleSBhcmUgbm90IG1lYW50IHRvIGJlXG4gKiB1c2VkIGRpcmVjdGx5LiBUbyByZWFkIHRoZXNlIHByb3BlcnRpZXMsIHVzZSB0aGUgYFJ1blJlc3VsdGAgaW5zdGVhZC5cbiAqXG4gKiBNYW5pcHVsYXRpb24gb2YgdGhlIHN0YXRlIGRpcmVjdGx5IGNhbiBsZWFkIHRvIHVuZXhwZWN0ZWQgYmVoYXZpb3IgYW5kIHNob3VsZCBiZSBhdm9pZGVkLlxuICogSW5zdGVhZCwgdXNlIHRoZSBgYXBwcm92ZWAgYW5kIGByZWplY3RgIG1ldGhvZHMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5TdGF0ZSB7XG4gICAgLyoqXG4gICAgICogQ3VycmVudCB0dXJuIG51bWJlciBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50VHVybiA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGFnZW50IGN1cnJlbnRseSBoYW5kbGluZyB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnQ7XG4gICAgLyoqXG4gICAgICogT3JpZ2luYWwgdXNlciBpbnB1dCBwcmlvciB0byBhbnkgcHJvY2Vzc2luZy5cbiAgICAgKi9cbiAgICBfb3JpZ2luYWxJbnB1dDtcbiAgICAvKipcbiAgICAgKiBSZXNwb25zZXMgZnJvbSB0aGUgbW9kZWwgc28gZmFyLlxuICAgICAqL1xuICAgIF9tb2RlbFJlc3BvbnNlcztcbiAgICAvKipcbiAgICAgKiBBY3RpdmUgdHJhY2luZyBzcGFuIGZvciB0aGUgY3VycmVudCBhZ2VudCBpZiB0cmFjaW5nIGlzIGVuYWJsZWQuXG4gICAgICovXG4gICAgX2N1cnJlbnRBZ2VudFNwYW47XG4gICAgLyoqXG4gICAgICogUnVuIGNvbnRleHQgdHJhY2tpbmcgYXBwcm92YWxzLCB1c2FnZSwgYW5kIG90aGVyIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIF9jb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyB3aGF0IHRvb2xzIGVhY2ggYWdlbnQgaGFzIHVzZWQuXG4gICAgICovXG4gICAgX3Rvb2xVc2VUcmFja2VyO1xuICAgIC8qKlxuICAgICAqIEl0ZW1zIGdlbmVyYXRlZCBieSB0aGUgYWdlbnQgZHVyaW5nIHRoZSBydW4uXG4gICAgICovXG4gICAgX2dlbmVyYXRlZEl0ZW1zO1xuICAgIC8qKlxuICAgICAqIE1heGltdW0gYWxsb3dlZCB0dXJucyBiZWZvcmUgZm9yY2luZyB0ZXJtaW5hdGlvbi5cbiAgICAgKi9cbiAgICBfbWF4VHVybnM7XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgcnVuIGhhcyBhbiBhY3RpdmUgYWdlbnQgc3RlcCBpbiBwcm9ncmVzcy5cbiAgICAgKi9cbiAgICBfbm9BY3RpdmVBZ2VudFJ1biA9IHRydWU7XG4gICAgLyoqXG4gICAgICogTGFzdCBtb2RlbCByZXNwb25zZSBmb3IgdGhlIHByZXZpb3VzIHR1cm4uXG4gICAgICovXG4gICAgX2xhc3RUdXJuUmVzcG9uc2U7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIGlucHV0IGd1YXJkcmFpbHMgYXBwbGllZCB0byB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9pbnB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogUmVzdWx0cyBmcm9tIG91dHB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAvKipcbiAgICAgKiBOZXh0IHN0ZXAgY29tcHV0ZWQgZm9yIHRoZSBhZ2VudCB0byB0YWtlLlxuICAgICAqL1xuICAgIF9jdXJyZW50U3RlcCA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBQYXJzZWQgbW9kZWwgcmVzcG9uc2UgYWZ0ZXIgYXBwbHlpbmcgZ3VhcmRyYWlscyBhbmQgdG9vbHMuXG4gICAgICovXG4gICAgX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHVuZGVmaW5lZDtcbiAgICAvKipcbiAgICAgKiBUcmFjZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBydW4gaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF90cmFjZSA9IG51bGw7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCwgb3JpZ2luYWxJbnB1dCwgc3RhcnRpbmdBZ2VudCwgbWF4VHVybnMpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX29yaWdpbmFsSW5wdXQgPSBzdHJ1Y3R1cmVkQ2xvbmUob3JpZ2luYWxJbnB1dCk7XG4gICAgICAgIHRoaXMuX21vZGVsUmVzcG9uc2VzID0gW107XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2N1cnJlbnRBZ2VudCA9IHN0YXJ0aW5nQWdlbnQ7XG4gICAgICAgIHRoaXMuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgdGhpcy5fZ2VuZXJhdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbWF4VHVybnMgPSBtYXhUdXJucztcbiAgICAgICAgdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBbXTtcbiAgICAgICAgdGhpcy5fdHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgcnVuLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dCh0aGlzLl9vcmlnaW5hbElucHV0LCB0aGlzLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYWxsIGludGVycnVwdGlvbnMgaWYgdGhlIGN1cnJlbnQgc3RlcCBpcyBhbiBpbnRlcnJ1cHRpb24gb3RoZXJ3aXNlIHJldHVybnMgYW4gZW1wdHkgYXJyYXkuXG4gICAgICovXG4gICAgZ2V0SW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHByb3ZlcyBhIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIGFnZW50IHRocm91Z2ggYW4gaW50ZXJydXB0aW9uIGFuZCBhcHByb3ZhbCBpdGVtIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBUbyBhcHByb3ZlIHRoZSByZXF1ZXN0IHVzZSB0aGlzIG1ldGhvZCBhbmQgdGhlbiBydW4gdGhlIGFnZW50IGFnYWluIHdpdGggdGhlIHNhbWUgc3RhdGUgb2JqZWN0XG4gICAgICogdG8gY29udGludWUgdGhlIGV4ZWN1dGlvbi5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBvbmx5IGFwcHJvdmUgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNBcHByb3ZlYCBvcHRpb24gdG8gYHRydWVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGNhbGwgYXBwcm92YWwgaXRlbSB0byBhcHByb3ZlLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgdGhlIGFwcHJvdmFsLlxuICAgICAqL1xuICAgIGFwcHJvdmUoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNBcHByb3ZlOiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0cyBhIHRvb2wgY2FsbCByZXF1ZXN0ZWQgYnkgdGhlIGFnZW50IHRocm91Z2ggYW4gaW50ZXJydXB0aW9uIGFuZCBhcHByb3ZhbCBpdGVtIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBUbyByZWplY3QgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgcmVqZWN0IHRoZSBjdXJyZW50IHRvb2wgY2FsbC4gVG8gYWxsb3cgdGhlIHRvb2wgdG8gYmUgdXNlZCBtdWx0aXBsZVxuICAgICAqIHRpbWVzIHRocm91Z2hvdXQgdGhlIHJ1biwgc2V0IHRoZSBgYWx3YXlzUmVqZWN0YCBvcHRpb24gdG8gYHRydWVgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGNhbGwgYXBwcm92YWwgaXRlbSB0byByZWplY3QuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgcmVqZWN0aW9uLlxuICAgICAqL1xuICAgIHJlamVjdChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c1JlamVjdDogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLl9jb250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgSlNPTiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgSlNPTiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHJlc3VtZSB0aGUgcnVuIGxhdGVyLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHNlcmlhbGl6ZWQgcnVuIHN0YXRlLlxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgICAgICAgJHNjaGVtYVZlcnNpb246IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04sXG4gICAgICAgICAgICBjdXJyZW50VHVybjogdGhpcy5fY3VycmVudFR1cm4sXG4gICAgICAgICAgICBjdXJyZW50QWdlbnQ6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9jdXJyZW50QWdlbnQubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcmlnaW5hbElucHV0OiB0aGlzLl9vcmlnaW5hbElucHV0LFxuICAgICAgICAgICAgbW9kZWxSZXNwb25zZXM6IHRoaXMuX21vZGVsUmVzcG9uc2VzLm1hcCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdHM6IHJlc3BvbnNlLnVzYWdlLnJlcXVlc3RzLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLmlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zOiByZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogcmVzcG9uc2UudXNhZ2UudG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0LFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUlkOiByZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLl9jb250ZXh0LnRvSlNPTigpLFxuICAgICAgICAgICAgdG9vbFVzZVRyYWNrZXI6IHRoaXMuX3Rvb2xVc2VUcmFja2VyLnRvSlNPTigpLFxuICAgICAgICAgICAgbWF4VHVybnM6IHRoaXMuX21heFR1cm5zLFxuICAgICAgICAgICAgY3VycmVudEFnZW50U3BhbjogdGhpcy5fY3VycmVudEFnZW50U3Bhbj8udG9KU09OKCksXG4gICAgICAgICAgICBub0FjdGl2ZUFnZW50UnVuOiB0aGlzLl9ub0FjdGl2ZUFnZW50UnVuLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMsXG4gICAgICAgICAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgICAgIGFnZW50OiByLmFnZW50LnRvSlNPTigpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgY3VycmVudFN0ZXA6IHRoaXMuX2N1cnJlbnRTdGVwLFxuICAgICAgICAgICAgbGFzdE1vZGVsUmVzcG9uc2U6IHRoaXMuX2xhc3RUdXJuUmVzcG9uc2UsXG4gICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogdGhpcy5fZ2VuZXJhdGVkSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnRvSlNPTigpKSxcbiAgICAgICAgICAgIGxhc3RQcm9jZXNzZWRSZXNwb25zZTogdGhpcy5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLFxuICAgICAgICAgICAgdHJhY2U6IHRoaXMuX3RyYWNlID8gdGhpcy5fdHJhY2UudG9KU09OKCkgOiBudWxsLFxuICAgICAgICB9O1xuICAgICAgICAvLyBwYXJzaW5nIHRoZSBzY2hlbWEgdG8gZW5zdXJlIHRoZSBvdXRwdXQgaXMgdmFsaWQgZm9yIHJlcGFyc2luZ1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTZXJpYWxpemVkUnVuU3RhdGUuc2FmZVBhcnNlKG91dHB1dCk7XG4gICAgICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW1FcnJvcihgRmFpbGVkIHRvIHNlcmlhbGl6ZSBydW4gc3RhdGUuICR7cGFyc2VkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIHNlcmlhbGl6ZSB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXN1bWUgdGhlIHJ1biBsYXRlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBzZXJpYWxpemVkIHJ1biBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudG9KU09OKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXNlcmlhbGl6ZXMgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gZGVzZXJpYWxpemUgYSBydW4gc3RhdGUgZnJvbSBhIHN0cmluZyB0aGF0IHdhcyBzZXJpYWxpemVkIHVzaW5nIHRoZVxuICAgICAqIGB0b1N0cmluZ2AgbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tU3RyaW5nKGluaXRpYWxBZ2VudCwgc3RyKSB7XG4gICAgICAgIGNvbnN0IFtwYXJzaW5nRXJyb3IsIGpzb25SZXN1bHRdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gSlNPTi5wYXJzZShzdHIpKTtcbiAgICAgICAgaWYgKHBhcnNpbmdFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgRmFpbGVkIHRvIHBhcnNlIHJ1biBzdGF0ZS4gJHtwYXJzaW5nRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHBhcnNpbmdFcnJvci5tZXNzYWdlIDogU3RyaW5nKHBhcnNpbmdFcnJvcil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNjaGVtYVZlcnNpb24gPSBqc29uUmVzdWx0LiRzY2hlbWFWZXJzaW9uO1xuICAgICAgICBpZiAoIWN1cnJlbnRTY2hlbWFWZXJzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdSdW4gc3RhdGUgaXMgbWlzc2luZyBzY2hlbWEgdmVyc2lvbicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50U2NoZW1hVmVyc2lvbiAhPT0gQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgUnVuIHN0YXRlIHNjaGVtYSB2ZXJzaW9uICR7Y3VycmVudFNjaGVtYVZlcnNpb259IGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2UgdmVyc2lvbiAke0NVUlJFTlRfU0NIRU1BX1ZFUlNJT059YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGVKc29uID0gU2VyaWFsaXplZFJ1blN0YXRlLnBhcnNlKEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGNvbnN0IGFnZW50TWFwID0gYnVpbGRBZ2VudE1hcChpbml0aWFsQWdlbnQpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBSZWJ1aWxkIHRoZSBjb250ZXh0XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgUnVuQ29udGV4dChzdGF0ZUpzb24uY29udGV4dC5jb250ZXh0KTtcbiAgICAgICAgY29udGV4dC5fcmVidWlsZEFwcHJvdmFscyhzdGF0ZUpzb24uY29udGV4dC5hcHByb3ZhbHMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyBGaW5kIHRoZSBjdXJyZW50IGFnZW50IGZyb20gdGhlIGluaXRpYWwgYWdlbnRcbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gYWdlbnRNYXAuZ2V0KHN0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZSk7XG4gICAgICAgIGlmICghY3VycmVudEFnZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBBZ2VudCAke3N0YXRlSnNvbi5jdXJyZW50QWdlbnQubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdGUgPSBuZXcgUnVuU3RhdGUoY29udGV4dCwgJycsIGN1cnJlbnRBZ2VudCwgc3RhdGVKc29uLm1heFR1cm5zKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuID0gc3RhdGVKc29uLmN1cnJlbnRUdXJuO1xuICAgICAgICAvLyByZWJ1aWxkIHRvb2wgdXNlIHRyYWNrZXJcbiAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyID0gbmV3IEFnZW50VG9vbFVzZVRyYWNrZXIoKTtcbiAgICAgICAgZm9yIChjb25zdCBbYWdlbnROYW1lLCB0b29sTmFtZXNdIG9mIE9iamVjdC5lbnRyaWVzKHN0YXRlSnNvbi50b29sVXNlVHJhY2tlcikpIHtcbiAgICAgICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGFnZW50TWFwLmdldChhZ2VudE5hbWUpLCB0b29sTmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlYnVpbGQgY3VycmVudCBhZ2VudCBzcGFuXG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgaWYgKCFzdGF0ZUpzb24udHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2UgaXMgbm90IHNldCwgc2tpcHBpbmcgdHJhY2luZyBzZXR1cCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJhY2UgPSBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgICAgIHRyYWNlSWQ6IHN0YXRlSnNvbi50cmFjZT8uaWQsXG4gICAgICAgICAgICAgICAgbmFtZTogc3RhdGVKc29uLnRyYWNlPy53b3JrZmxvd19uYW1lLFxuICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHN0YXRlSnNvbi50cmFjZT8uZ3JvdXBfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBzdGF0ZUpzb24udHJhY2U/Lm1ldGFkYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgc3RhdGUuX3RyYWNlID0gdHJhY2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBzdGF0ZUpzb24ubm9BY3RpdmVBZ2VudFJ1bjtcbiAgICAgICAgc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9XG4gICAgICAgICAgICBzdGF0ZUpzb24uaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgICAgICBzdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cyA9IHN0YXRlSnNvbi5vdXRwdXRHdWFyZHJhaWxSZXN1bHRzLm1hcCgocikgPT4gKHtcbiAgICAgICAgICAgIC4uLnIsXG4gICAgICAgICAgICBhZ2VudDogYWdlbnRNYXAuZ2V0KHIuYWdlbnQubmFtZSksXG4gICAgICAgIH0pKTtcbiAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gc3RhdGVKc29uLmN1cnJlbnRTdGVwO1xuICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHN0YXRlSnNvbi5vcmlnaW5hbElucHV0O1xuICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMgPSBzdGF0ZUpzb24ubW9kZWxSZXNwb25zZXMubWFwKGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSk7XG4gICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlXG4gICAgICAgICAgICA/IGRlc2VyaWFsaXplTW9kZWxSZXNwb25zZShzdGF0ZUpzb24ubGFzdE1vZGVsUmVzcG9uc2UpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gc3RhdGVKc29uLmdlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSk7XG4gICAgICAgIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlXG4gICAgICAgICAgICA/IGF3YWl0IGRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UoYWdlbnRNYXAsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgICAgIG5ld0FnZW50OiBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRTdGVwLm5ld0FnZW50Lm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHF1ZXVlID0gW2luaXRpYWxBZ2VudF07XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKG1hcC5oYXMoY3VycmVudEFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0KGN1cnJlbnRBZ2VudC5uYW1lLCBjdXJyZW50QWdlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRvZmYgb2YgY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZG9mZiBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kb2ZmLmFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYuYWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmLmFnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuKSB7XG4gICAgY29uc3Qgc3BhbkRhdGEgPSBzZXJpYWxpemVkU3Bhbi5zcGFuX2RhdGE7XG4gICAgY29uc3QgcHJldmlvdXNTcGFuID0gc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhblxuICAgICAgICA/IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhbilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzZXJpYWxpemVkU3Bhbi5pZCxcbiAgICAgICAgdHJhY2VJZDogc2VyaWFsaXplZFNwYW4udHJhY2VfaWQsXG4gICAgICAgIHBhcmVudElkOiBzZXJpYWxpemVkU3Bhbi5wYXJlbnRfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLnN0YXJ0ZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBlbmRlZEF0OiBzZXJpYWxpemVkU3Bhbi5lbmRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHNwYW5EYXRhLFxuICAgIH0sIHRyYWNlKTtcbiAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHByZXZpb3VzU3BhbjtcbiAgICByZXR1cm4gc3Bhbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UpIHtcbiAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgIHVzYWdlLnJlcXVlc3RzID0gc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UucmVxdWVzdHM7XG4gICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5pbnB1dFRva2VucztcbiAgICB1c2FnZS5vdXRwdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgdXNhZ2UudG90YWxUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS50b3RhbFRva2VucztcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgICAgICBwcm92aWRlckRhdGE6IHNlcmlhbGl6ZWRNb2RlbFJlc3BvbnNlLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplSXRlbShzZXJpYWxpemVkSXRlbSwgYWdlbnRNYXApIHtcbiAgICBzd2l0Y2ggKHNlcmlhbGl6ZWRJdGVtLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWVzc2FnZV9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSksIHNlcmlhbGl6ZWRJdGVtLm91dHB1dCk7XG4gICAgICAgIGNhc2UgJ3JlYXNvbmluZ19pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVhc29uaW5nSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX2NhbGxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uYWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICdoYW5kb2ZmX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLnNvdXJjZUFnZW50Lm5hbWUpLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0udGFyZ2V0QWdlbnQubmFtZSkpO1xuICAgICAgICBjYXNlICd0b29sX2FwcHJvdmFsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZShhZ2VudE1hcCwgY3VycmVudEFnZW50LCBjb250ZXh0LCBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRBbGxUb29scyhjb250ZXh0KTtcbiAgICBjb25zdCB0b29scyA9IG5ldyBNYXAoYWxsVG9vbHNcbiAgICAgICAgLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAubWFwKCh0b29sKSA9PiBbdG9vbC5uYW1lLCB0b29sXSkpO1xuICAgIGNvbnN0IGNvbXB1dGVyVG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2NvbXB1dGVyJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBoYW5kb2ZmcyA9IG5ldyBNYXAoY3VycmVudEFnZW50LmhhbmRvZmZzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgaWYgKGVudHJ5IGluc3RhbmNlb2YgQWdlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBbZW50cnkubmFtZSwgaGFuZG9mZihlbnRyeSldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbZW50cnkudG9vbE5hbWUsIGVudHJ5XTtcbiAgICB9KSk7XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBuZXdJdGVtczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zLm1hcCgoaXRlbSkgPT4gZGVzZXJpYWxpemVJdGVtKGl0ZW0sIGFnZW50TWFwKSksXG4gICAgICAgIHRvb2xzVXNlZDogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCxcbiAgICAgICAgaGFuZG9mZnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5oYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZG9mZnMuaGFzKGhhbmRvZmYuaGFuZG9mZi50b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBIYW5kb2ZmICR7aGFuZG9mZi5oYW5kb2ZmLnRvb2xOYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGhhbmRvZmYudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgaGFuZG9mZjogaGFuZG9mZnMuZ2V0KGhhbmRvZmYuaGFuZG9mZi50b29sTmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSxcbiAgICAgICAgZnVuY3Rpb25zOiBhd2FpdCBQcm9taXNlLmFsbChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLm1hcChhc3luYyAoZnVuY3Rpb25DYWxsKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRvb2xzLmhhcyhmdW5jdGlvbkNhbGwudG9vbC5uYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFRvb2wgJHtmdW5jdGlvbkNhbGwudG9vbC5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IGZ1bmN0aW9uQ2FsbC50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB0b29sOiB0b29scy5nZXQoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSksXG4gICAgICAgIGNvbXB1dGVyQWN0aW9uczogc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmNvbXB1dGVyQWN0aW9ucy5tYXAoKGNvbXB1dGVyQWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IGNvbXB1dGVyQWN0aW9uLmNvbXB1dGVyLm5hbWU7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbHMuaGFzKHRvb2xOYW1lKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYENvbXB1dGVyIHRvb2wgJHt0b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBjb21wdXRlckFjdGlvbi50b29sQ2FsbCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29scy5nZXQodG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIG1jcEFwcHJvdmFsUmVxdWVzdHM6IChzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UubWNwQXBwcm92YWxSZXF1ZXN0cyA/PyBbXSkubWFwKChhcHByb3ZhbFJlcXVlc3QpID0+ICh7XG4gICAgICAgICAgICByZXF1ZXN0SXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtXG4gICAgICAgICAgICAgICAgLnJhd0l0ZW0sIGN1cnJlbnRBZ2VudCksXG4gICAgICAgICAgICBtY3BUb29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgfSkpLFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICBoYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdC5oYW5kb2Zmcy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0LmZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcmVzdWx0Lm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5jb21wdXRlckFjdGlvbnMubGVuZ3RoID4gMCk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1blN0YXRlLm1qcy5tYXAiLCJpbXBvcnQgeyBBZ2VudCB9IGZyb20gXCIuL2FnZW50Lm1qc1wiO1xuaW1wb3J0IHsgZGVmaW5lSW5wdXRHdWFyZHJhaWwsIGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuUmVzdWx0LCBTdHJlYW1lZFJ1blJlc3VsdCB9IGZyb20gXCIuL3Jlc3VsdC5tanNcIjtcbmltcG9ydCB7IFJ1bkhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBzZXJpYWxpemVUb29sLCBzZXJpYWxpemVIYW5kb2ZmIH0gZnJvbSBcIi4vdXRpbHMvc2VyaWFsaXplLm1qc1wiO1xuaW1wb3J0IHsgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IsIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIE1heFR1cm5zRXhjZWVkZWRFcnJvciwgTW9kZWxCZWhhdmlvckVycm9yLCBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgVXNlckVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IGFkZFN0ZXBUb1J1blJlc3VsdCwgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cywgZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMsIG1heWJlUmVzZXRUb29sQ2hvaWNlLCBwcm9jZXNzTW9kZWxSZXNwb25zZSwgc3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBnZXRPckNyZWF0ZVRyYWNlLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB3aXRoVHJhY2UsIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgY3JlYXRlQWdlbnRTcGFuLCB3aXRoR3VhcmRyYWlsU3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQsIFJ1blJhd01vZGVsU3RyZWFtRXZlbnQgfSBmcm9tIFwiLi9ldmVudHMubWpzXCI7XG5pbXBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuaW1wb3J0IHsgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuaW1wb3J0IHsgY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgaXNHcHQ1RGVmYXVsdCB9IGZyb20gXCIuL2RlZmF1bHRNb2RlbC5tanNcIjtcbmNvbnN0IERFRkFVTFRfTUFYX1RVUk5TID0gMTA7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhY2luZyh0cmFjaW5nRGlzYWJsZWQsIHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICBpZiAodHJhY2luZ0Rpc2FibGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAnZW5hYmxlZF93aXRob3V0X2RhdGEnO1xufVxuZnVuY3Rpb24gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KSB7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbElucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gW3sgdHlwZTogJ21lc3NhZ2UnLCByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG9yaWdpbmFsSW5wdXQgfV07XG4gICAgfVxuICAgIHJldHVybiBbLi4ub3JpZ2luYWxJbnB1dF07XG59XG4vKipcbiAqIEludGVybmFsIG1vZHVsZSBmb3IgdHJhY2tpbmcgdGhlIGl0ZW1zIGluIHR1cm5zIGFuZCBlbnN1cmluZyB0aGF0IHdlIGRvbid0IHNlbmQgZHVwbGljYXRlIGl0ZW1zLlxuICogVGhpcyBsb2dpYyBpcyB2aXRhbCBmb3IgcHJvcGVybHkgaGFuZGxpbmcgdGhlIGl0ZW1zIHRvIHNlbmQgZHVyaW5nIG11bHRpcGxlIHR1cm5zXG4gKiB3aGVuIHlvdSB1c2UgZWl0aGVyIGBjb252ZXJzYXRpb25JZGAgb3IgYHByZXZpb3VzUmVzcG9uc2VJZGAuXG4gKiBCb3RoIHNjZW5hcmlvcyBleHBlY3QgYW4gYWdlbnQgbG9vcCB0byBzZW5kIG9ubHkgbmV3IGl0ZW1zIGZvciBlYWNoIFJlc3BvbnNlcyBBUEkgY2FsbC5cbiAqXG4gKiBzZWUgYWxzbzogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXNcbiAqL1xuY2xhc3MgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlciB7XG4gICAgLy8gQ29udmVyc2F0aW9uIElEOlxuICAgIC8vIC0gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjdXNpbmctdGhlLWNvbnZlcnNhdGlvbnMtYXBpXG4gICAgLy8gLSBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9hcGktcmVmZXJlbmNlL2NvbnZlcnNhdGlvbnMvY3JlYXRlXG4gICAgY29udmVyc2F0aW9uSWQ7XG4gICAgLy8gUHJldmlvdXMgUmVzcG9uc2UgSUQ6XG4gICAgLy8gaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvZ3VpZGVzL2NvbnZlcnNhdGlvbi1zdGF0ZT9hcGktbW9kZT1yZXNwb25zZXMjcGFzc2luZy1jb250ZXh0LWZyb20tdGhlLXByZXZpb3VzLXJlc3BvbnNlXG4gICAgcHJldmlvdXNSZXNwb25zZUlkO1xuICAgIC8vIFVzaW5nIHRoaXMgZmxhZyBiZWNhdXNlIFdlYWtTZXQgZG9lcyBub3QgcHJvdmlkZSBhIHdheSB0byBjaGVjayBpdHMgc2l6ZVxuICAgIHNlbnRJbml0aWFsSW5wdXQgPSBmYWxzZTtcbiAgICAvLyBUaGUgaXRlbXMgYWxyZWFkeSBzZW50IHRvIHRoZSBtb2RlbDsgdXNpbmcgV2Vha1NldCBmb3IgbWVtb3J5IGVmZmljaWVuY3lcbiAgICBzZW50SXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIC8vIFRoZSBpdGVtcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXI7IHVzaW5nIFdlYWtTZXQgZm9yIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgc2VydmVySXRlbXMgPSBuZXcgV2Vha1NldCgpO1xuICAgIGNvbnN0cnVjdG9yKHsgY29udmVyc2F0aW9uSWQsIHByZXZpb3VzUmVzcG9uc2VJZCwgfSkge1xuICAgICAgICB0aGlzLmNvbnZlcnNhdGlvbklkID0gY29udmVyc2F0aW9uSWQgPz8gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IHByZXZpb3VzUmVzcG9uc2VJZCA/PyB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZS1wb3B1bGF0ZXMgdHJhY2tlciBjYWNoZXMgZnJvbSBhbiBleGlzdGluZyBSdW5TdGF0ZSB3aGVuIHJlc3VtaW5nIHNlcnZlci1tYW5hZ2VkIHJ1bnMuXG4gICAgICovXG4gICAgcHJpbWVGcm9tU3RhdGUoeyBvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcywgbW9kZWxSZXNwb25zZXMsIH0pIHtcbiAgICAgICAgaWYgKHRoaXMuc2VudEluaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0b0FnZW50SW5wdXRMaXN0KG9yaWdpbmFsSW5wdXQpKSB7XG4gICAgICAgICAgICBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbnRJdGVtcy5hZGQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZW50SW5pdGlhbElucHV0ID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbGF0ZXN0UmVzcG9uc2UgPSBtb2RlbFJlc3BvbnNlc1ttb2RlbFJlc3BvbnNlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgZm9yIChjb25zdCByZXNwb25zZSBvZiBtb2RlbFJlc3BvbnNlcykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlc3BvbnNlLm91dHB1dCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbklkICYmIGxhdGVzdFJlc3BvbnNlPy5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IGxhdGVzdFJlc3BvbnNlLnJlc3BvbnNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCByYXdJdGVtID0gaXRlbS5yYXdJdGVtO1xuICAgICAgICAgICAgaWYgKCFyYXdJdGVtIHx8IHR5cGVvZiByYXdJdGVtICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW50SXRlbXMuYWRkKHJhd0l0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHRyYWNrU2VydmVySXRlbXMobW9kZWxSZXNwb25zZSkge1xuICAgICAgICBpZiAoIW1vZGVsUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgbW9kZWxSZXNwb25zZS5vdXRwdXQpIHtcbiAgICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySXRlbXMuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb252ZXJzYXRpb25JZCAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3BvbnNlSWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgbW9kZWxSZXNwb25zZS5yZXNwb25zZUlkKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpb3VzUmVzcG9uc2VJZCA9IG1vZGVsUmVzcG9uc2UucmVzcG9uc2VJZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcmVwYXJlSW5wdXQob3JpZ2luYWxJbnB1dCwgZ2VuZXJhdGVkSXRlbXMpIHtcbiAgICAgICAgY29uc3QgaW5wdXRJdGVtcyA9IFtdO1xuICAgICAgICBpZiAoIXRoaXMuc2VudEluaXRpYWxJbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbEl0ZW1zID0gdG9BZ2VudElucHV0TGlzdChvcmlnaW5hbElucHV0KTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpbml0aWFsSXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpbnB1dEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VudEl0ZW1zLmFkZChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNlbnRJbml0aWFsSW5wdXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBnZW5lcmF0ZWRJdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3Rvb2xfYXBwcm92YWxfaXRlbScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJhd0l0ZW0gPSBpdGVtLnJhd0l0ZW07XG4gICAgICAgICAgICBpZiAoIXJhd0l0ZW0gfHwgdHlwZW9mIHJhd0l0ZW0gIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5zZW50SXRlbXMuaGFzKHJhd0l0ZW0pIHx8IHRoaXMuc2VydmVySXRlbXMuaGFzKHJhd0l0ZW0pKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnB1dEl0ZW1zLnB1c2gocmF3SXRlbSk7XG4gICAgICAgICAgICB0aGlzLnNlbnRJdGVtcy5hZGQocmF3SXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGlucHV0SXRlbXM7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFR1cm5JbnB1dChvcmlnaW5hbElucHV0LCBnZW5lcmF0ZWRJdGVtcykge1xuICAgIGNvbnN0IHJhd0l0ZW1zID0gZ2VuZXJhdGVkSXRlbXNcbiAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlICE9PSAndG9vbF9hcHByb3ZhbF9pdGVtJykgLy8gZG9uJ3QgaW5jbHVkZSBhcHByb3ZhbCBpdGVtcyB0byBhdm9pZCBkb3VibGUgZnVuY3Rpb24gY2FsbHNcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtKTtcbiAgICByZXR1cm4gWy4uLnRvQWdlbnRJbnB1dExpc3Qob3JpZ2luYWxJbnB1dCksIC4uLnJhd0l0ZW1zXTtcbn1cbi8qKlxuICogQSBSdW5uZXIgaXMgcmVzcG9uc2libGUgZm9yIHJ1bm5pbmcgYW4gYWdlbnQgd29ya2Zsb3cuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uZXIgZXh0ZW5kcyBSdW5Ib29rcyB7XG4gICAgY29uZmlnO1xuICAgIGlucHV0R3VhcmRyYWlsRGVmcztcbiAgICBvdXRwdXRHdWFyZHJhaWxEZWZzO1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICAgICAgbW9kZWxQcm92aWRlcjogY29uZmlnLm1vZGVsUHJvdmlkZXIgPz8gZ2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIoKSxcbiAgICAgICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgICAgICBtb2RlbFNldHRpbmdzOiBjb25maWcubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgIGhhbmRvZmZJbnB1dEZpbHRlcjogY29uZmlnLmhhbmRvZmZJbnB1dEZpbHRlcixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsczogY29uZmlnLmlucHV0R3VhcmRyYWlscyxcbiAgICAgICAgICAgIG91dHB1dEd1YXJkcmFpbHM6IGNvbmZpZy5vdXRwdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgdHJhY2luZ0Rpc2FibGVkOiBjb25maWcudHJhY2luZ0Rpc2FibGVkID8/IGZhbHNlLFxuICAgICAgICAgICAgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YTogY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEgPz8gdHJ1ZSxcbiAgICAgICAgICAgIHdvcmtmbG93TmFtZTogY29uZmlnLndvcmtmbG93TmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnLFxuICAgICAgICAgICAgdHJhY2VJZDogY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBncm91cElkOiBjb25maWcuZ3JvdXBJZCxcbiAgICAgICAgICAgIHRyYWNlTWV0YWRhdGE6IGNvbmZpZy50cmFjZU1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlucHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcuaW5wdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMgPSAoY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbE5vblN0cmVhbShzdGFydGluZ0FnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gd2l0aE5ld1NwYW5Db250ZXh0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGhhdmUgYSBzYXZlZCBzdGF0ZSB3ZSB1c2UgdGhhdCBvbmUsIG90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgICAgICBjb25zdCBpc1Jlc3VtZWRTdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGU7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlzUmVzdW1lZFN0YXRlXG4gICAgICAgICAgICAgICAgPyBpbnB1dFxuICAgICAgICAgICAgICAgIDogbmV3IFJ1blN0YXRlKG9wdGlvbnMuY29udGV4dCBpbnN0YW5jZW9mIFJ1bkNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgOiBuZXcgUnVuQ29udGV4dChvcHRpb25zLmNvbnRleHQpLCBpbnB1dCwgc3RhcnRpbmdBZ2VudCwgb3B0aW9ucy5tYXhUdXJucyA/PyBERUZBVUxUX01BWF9UVVJOUyk7XG4gICAgICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gb3B0aW9ucy5jb252ZXJzYXRpb25JZCB8fCBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZFxuICAgICAgICAgICAgICAgID8gbmV3IFNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIoe1xuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25JZDogb3B0aW9ucy5jb252ZXJzYXRpb25JZCxcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgJiYgaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgICAgICBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyLnByaW1lRnJvbVN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxJbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlZEl0ZW1zOiBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsUmVzcG9uc2VzOiBzdGF0ZS5fbW9kZWxSZXNwb25zZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGxpY3RseU1vZGVsU2V0ID0gKHN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5tb2RlbCAhPT0gJycpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jb25maWcubW9kZWwgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmNvbmZpZy5tb2RlbCAhPT0gJycpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBzZWxlY3RNb2RlbChzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGhhdmUgYSBjdXJyZW50IHN0ZXAsIHdlIHRyZWF0IHRoaXMgYXMgYSBuZXcgcnVuXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlLl9jdXJyZW50U3RlcCA/PyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0NvbnRpbnVpbmcgZnJvbSBpbnRlcnJ1cHRpb24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgfHwgIXN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR1cm5SZXN1bHQubmV4dFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZXN1bHQoc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX3J1bl9hZ2FpbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnMoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gY3JlYXRlQWdlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90eXBlOiBzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dFNjaGVtYU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiBzZXJpYWxpemVUb29sKHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zcGFuRGF0YS50b29scyA9IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA+IHN0YXRlLl9tYXhUdXJucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IG1heF90dXJuczogc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1heFR1cm5zRXhjZWVkZWRFcnJvcihgTWF4IHR1cm5zICgke3N0YXRlLl9tYXhUdXJuc30pIGV4Y2VlZGVkYCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSdW5uaW5nIGFnZW50ICR7c3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3N0YXRlLl9jdXJyZW50VHVybn0pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuSW5wdXRHdWFyZHJhaWxzKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJlcGFyZUlucHV0KHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRUdXJuSW5wdXQoc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhZ2VudE1vZGVsU2V0dGluZ3MgPSBzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzID0gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgYWdlbnRNb2RlbFNldHRpbmdzLCBtb2RlbCwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzID0gbWF5YmVSZXNldFRvb2xDaG9pY2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVzcG9uc2VJZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnByZXZpb3VzUmVzcG9uc2VJZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udmVyc2F0aW9uSWQgPSBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyPy5jb252ZXJzYXRpb25JZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29udmVyc2F0aW9uSWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGF3YWl0IG1vZGVsLmdldFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0U3lzdGVtUHJvbXB0KHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHBsaWNpdCBhZ2VudC9ydW4gY29uZmlnIG1vZGVscyBzaG91bGQgdGFrZSBwcmVjZWRlbmNlIG92ZXIgcHJvbXB0IGRlZmF1bHRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihleHBsaWN0bHlNb2RlbFNldCA/IHsgb3ZlcnJpZGVQcm9tcHRNb2RlbDogdHJ1ZSB9IDoge30pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvbklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY29udGV4dC51c2FnZS5hZGQoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UudXNhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnRyYWNrU2VydmVySXRlbXMoc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzTW9kZWxSZXNwb25zZShzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgdG9vbHMsIGhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5SZXN1bHQgPSBhd2FpdCBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudCA9IHN0YXRlLl9jdXJyZW50U3RlcC5uZXdBZ2VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3BhbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlJ3ZlIHByb2Nlc3NlZCB0aGUgaGFuZG9mZiwgc28gd2UgbmVlZCB0byBydW4gdGhlIGxvb3AgYWdhaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcnJ1cHRlZC4gRG9uJ3QgcnVuIGFueSBndWFyZHJhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJ1blJlc3VsdChzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycikgfSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlICE9PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGVuZCB0aGUgc3BhbiBpZiB0aGUgcnVuIHdhcyBpbnRlcnJ1cHRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jICNydW5JbnB1dEd1YXJkcmFpbHMoc3RhdGUpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzLmNvbmNhdChzdGF0ZS5fY3VycmVudEFnZW50LmlucHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lSW5wdXRHdWFyZHJhaWwpKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBpbnB1dDogc3RhdGUuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZ3VhcmRyYWlscy5tYXAoYXN5bmMgKGd1YXJkcmFpbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2l0aEd1YXJkcmFpbFNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGd1YXJkcmFpbC5ydW4oZ3VhcmRyYWlsQXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLnRyaWdnZXJlZCA9IHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9LCB7IGRhdGE6IHsgbmFtZTogZ3VhcmRyYWlsLm5hbWUgfSB9LCBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5vdXRwdXQudHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0d1YXJkcmFpbCB0cmlwd2lyZSB0cmlnZ2VyZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGd1YXJkcmFpbDogcmVzdWx0Lmd1YXJkcmFpbC5uYW1lIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgSW5wdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIElucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gcm9sbCBiYWNrIHRoZSBjdXJyZW50IHR1cm4gdG8gZW5hYmxlIHJlcnVuc1xuICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50VHVybi0tO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgSW5wdXQgZ3VhcmRyYWlsIGZhaWxlZCB0byBjb21wbGV0ZTogJHtlfWAsIGUsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjcnVuT3V0cHV0R3VhcmRyYWlscyhzdGF0ZSwgb3V0cHV0KSB7XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbHMgPSB0aGlzLm91dHB1dEd1YXJkcmFpbERlZnMuY29uY2F0KHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0R3VhcmRyYWlscy5tYXAoZGVmaW5lT3V0cHV0R3VhcmRyYWlsKSk7XG4gICAgICAgIGlmIChndWFyZHJhaWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGFnZW50T3V0cHV0ID0gc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQob3V0cHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICAgICAgYWdlbnQ6IHN0YXRlLl9jdXJyZW50QWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgY29udGV4dDogc3RhdGUuX2NvbnRleHQsXG4gICAgICAgICAgICAgICAgZGV0YWlsczogeyBtb2RlbFJlc3BvbnNlOiBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGd1YXJkcmFpbHMubWFwKGFzeW5jIChndWFyZHJhaWwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhHdWFyZHJhaWxTcGFuKGFzeW5jIChzcGFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS50cmlnZ2VyZWQgPSByZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfSwgeyBkYXRhOiB7IG5hbWU6IGd1YXJkcmFpbC5uYW1lIH0gfSwgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQub3V0cHV0LnRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdHdWFyZHJhaWwgdHJpcHdpcmUgdHJpZ2dlcmVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBndWFyZHJhaWw6IHJlc3VsdC5ndWFyZHJhaWwubmFtZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBPdXRwdXQgZ3VhcmRyYWlsIHRyaWdnZXJlZDogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8pfWAsIHJlc3VsdCwgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvcihgT3V0cHV0IGd1YXJkcmFpbCBmYWlsZWQgdG8gY29tcGxldGU6ICR7ZX1gLCBlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgYXN5bmMgI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSkge1xuICAgICAgICBjb25zdCBzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyID0gb3B0aW9ucy5jb252ZXJzYXRpb25JZCB8fCBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZFxuICAgICAgICAgICAgPyBuZXcgU2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcih7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQ6IG9wdGlvbnMuY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIgJiYgaXNSZXN1bWVkU3RhdGUpIHtcbiAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIucHJpbWVGcm9tU3RhdGUoe1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZWRJdGVtczogcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyxcbiAgICAgICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogcmVzdWx0LnN0YXRlLl9tb2RlbFJlc3BvbnNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEVuYWJsZWRIYW5kb2ZmcyhyZXN1bHQuc3RhdGUuX2NvbnRleHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKHJlc3VsdC5zdGF0ZS5fY29udGV4dCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VyaWFsaXplZFRvb2xzID0gdG9vbHMubWFwKCh0KSA9PiBzZXJpYWxpemVUb29sKHQpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkSGFuZG9mZnMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IHNlcmlhbGl6ZUhhbmRvZmYoaCkpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID8/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQ29udGludWluZyBmcm9tIGludGVycnVwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgIXJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdObyBtb2RlbCByZXNwb25zZSBmb3VuZCBpbiBwcmV2aW91cyBzdGF0ZScsIHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQsIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCwgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcywgcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgdHVyblJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0dXJuUmVzdWx0Lm5leHRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIHN0aWxsIGluIGFuIGludGVycnVwdGlvbiwgc28gd2UgbmVlZCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZk5hbWVzID0gaGFuZG9mZnMubWFwKChoKSA9PiBoLmFnZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBjcmVhdGVBZ2VudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiB0b29scy5tYXAoKHQpID0+IHQubmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90eXBlOiBjdXJyZW50QWdlbnQub3V0cHV0U2NoZW1hTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybiA+IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWF4X3R1cm5zOiByZXN1bHQuc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtyZXN1bHQuc3RhdGUuX21heFR1cm5zfSkgZXhjZWVkZWRgLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3Jlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBsaWN0bHlNb2RlbFNldCA9IChjdXJyZW50QWdlbnQubW9kZWwgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50QWdlbnQubW9kZWwgIT09ICcnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY29uZmlnLm1vZGVsICE9PSB1bmRlZmluZWQgJiYgdGhpcy5jb25maWcubW9kZWwgIT09ICcnKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1vZGVsID0gc2VsZWN0TW9kZWwoY3VycmVudEFnZW50Lm1vZGVsLCB0aGlzLmNvbmZpZy5tb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50QWdlbnQubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWdlbnRNb2RlbFNldHRpbmdzID0gY3VycmVudEFnZW50Lm1vZGVsU2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGluZ3MgPSBhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsKGV4cGxpY3RseU1vZGVsU2V0LCBhZ2VudE1vZGVsU2V0dGluZ3MsIG1vZGVsLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyA9IG1heWJlUmVzZXRUb29sQ2hvaWNlKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlci5wcmVwYXJlSW5wdXQocmVzdWx0LmlucHV0LCByZXN1bHQubmV3SXRlbXMpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGdldFR1cm5JbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzUmVzcG9uc2VJZCA9IHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnByZXZpb3VzUmVzcG9uc2VJZCA/P1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wcmV2aW91c1Jlc3BvbnNlSWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNhdGlvbklkID0gc2VydmVyQ29udmVyc2F0aW9uVHJhY2tlcj8uY29udmVyc2F0aW9uSWQgPz8gb3B0aW9ucy5jb252ZXJzYXRpb25JZDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBtb2RlbC5nZXRTdHJlYW1lZFJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogYXdhaXQgY3VycmVudEFnZW50LmdldFN5c3RlbVByb21wdChyZXN1bHQuc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0UHJvbXB0KHJlc3VsdC5zdGF0ZS5fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJlYW1pbmcgcmVxdWVzdHMgc2hvdWxkIGFsc28gaG9ub3IgZXhwbGljaXRseSBjaG9zZW4gbW9kZWxzLlxuICAgICAgICAgICAgICAgICAgICAgICAgLi4uKGV4cGxpY3RseU1vZGVsU2V0ID8geyBvdmVycmlkZVByb21wdE1vZGVsOiB0cnVlIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogdHVybklucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udmVyc2F0aW9uSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHM6IHNlcmlhbGl6ZWRUb29scyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkSGFuZG9mZnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlOiBjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUoY3VycmVudEFnZW50Lm91dHB1dFR5cGUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogZ2V0VHJhY2luZyh0aGlzLmNvbmZpZy50cmFjaW5nRGlzYWJsZWQsIHRoaXMuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC50eXBlID09PSAncmVzcG9uc2VfZG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkLnBhcnNlKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbFJlc3BvbnNlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogbmV3IFVzYWdlKHBhcnNlZC5yZXNwb25zZS51c2FnZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDogcGFyc2VkLnJlc3BvbnNlLm91dHB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIHVzZXIncyBjb2RlIGV4aXRzIGEgbG9vcCB0byBjb25zdW1lIHRoZSBzdHJlYW0sIHdlIG5lZWQgdG8gYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGxvb3AgdG8gcHJldmVudCBpbnRlcm5hbCBmYWxzZSBlcnJvcnMgYW5kIHVubmVjZXNzYXJ5IHByb2Nlc3NpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1blJhd01vZGVsU3RyZWFtRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaW5hbFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBkaWQgbm90IHByb2R1Y2UgYSBmaW5hbCByZXNwb25zZSEnLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IGZpbmFsUmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXI/LnRyYWNrU2VydmVySXRlbXMoZmluYWxSZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fbW9kZWxSZXNwb25zZXMucHVzaChyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHJlc3VsdC5zdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgY3VycmVudEFnZW50LCB0b29scywgaGFuZG9mZnMpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NlZFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZWNvcmQgdGhlIGl0ZW1zIGVtaXR0ZWQgZGlyZWN0bHkgZnJvbSB0aGUgbW9kZWwgcmVzcG9uc2Ugc28gd2UgZG8gbm90XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0cmVhbSB0aGVtIGFnYWluIGFmdGVyIHRvb2xzIGFuZCBvdGhlciBzaWRlIGVmZmVjdHMgZmluaXNoLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVUb29sSXRlbXMgPSBuZXcgU2V0KHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZVRvb2xJdGVtcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQocmVzdWx0LCBwcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwSXRlbXM6IHByZVRvb2xJdGVtcyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShjdXJyZW50QWdlbnQsIHByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhyZXN1bHQuc3RhdGUsIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgcmVzdWx0LnN0YXRlLl9jb250ZXh0LCByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgYXJlIGRvbmUgZm9yIG5vdy4gRG9uJ3QgcnVuIGFueSBvdXRwdXQgZ3VhcmRyYWlsc1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9oYW5kb2ZmJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXBcbiAgICAgICAgICAgICAgICAgICAgICAgID8ubmV3QWdlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5fYWRkSXRlbShuZXcgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdSdW5uaW5nIG5leHQgbG9vcCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW4gYWdlbnQgcnVuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBhc3luYyAjcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPz8ge307XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBvciByZXVzZSBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgaXNSZXN1bWVkU3RhdGUgPSBpbnB1dCBpbnN0YW5jZW9mIFJ1blN0YXRlO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSBpc1Jlc3VtZWRTdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIGFnZW50LCBvcHRpb25zLm1heFR1cm5zID8/IERFRkFVTFRfTUFYX1RVUk5TKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHN0cmVhbWVkIHJlc3VsdCB3aXRoIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgU3RyZWFtZWRSdW5SZXN1bHQoe1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNldHVwIGRlZmF1bHRzXG4gICAgICAgICAgICByZXN1bHQubWF4VHVybnMgPSBvcHRpb25zLm1heFR1cm5zID8/IHN0YXRlLl9tYXhUdXJucztcbiAgICAgICAgICAgIC8vIENvbnRpbnVlIHRoZSBzdHJlYW0gbG9vcCB3aXRob3V0IGJsb2NraW5nXG4gICAgICAgICAgICBjb25zdCBzdHJlYW1Mb29wUHJvbWlzZSA9IHRoaXMuI3J1blN0cmVhbUxvb3AocmVzdWx0LCBvcHRpb25zLCBpc1Jlc3VtZWRTdGF0ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9kb25lKCk7XG4gICAgICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0Ll9yYWlzZUVycm9yKGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgc3RyZWFtIGxvb3AgcHJvbWlzZSBzbyB0cmFjZSBlbmQgd2FpdHMgZm9yIHRoZSBsb29wIHRvIGNvbXBsZXRlXG4gICAgICAgICAgICByZXN1bHQuX3NldFN0cmVhbUxvb3BQcm9taXNlKHN0cmVhbUxvb3BQcm9taXNlKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zID0ge1xuICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICBjb250ZXh0OiB1bmRlZmluZWQsXG4gICAgfSkge1xuICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZSAmJiBpbnB1dC5fdHJhY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB3aXRoVHJhY2UoaW5wdXQuX3RyYWNlLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKGlucHV0Ll9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbFN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxOb25TdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0T3JDcmVhdGVUcmFjZShhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMuY29uZmlnLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLmNvbmZpZy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMuY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmxldCBfZGVmYXVsdFJ1bm5lciA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldERlZmF1bHRSdW5uZXIoKSB7XG4gICAgaWYgKF9kZWZhdWx0UnVubmVyKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbiAgICB9XG4gICAgX2RlZmF1bHRSdW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgcmV0dXJuIF9kZWZhdWx0UnVubmVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlbGVjdE1vZGVsKGFnZW50TW9kZWwsIHJ1bkNvbmZpZ01vZGVsKSB7XG4gICAgLy8gV2hlbiBpbml0aWFsaXppbmcgYW4gYWdlbnQgd2l0aG91dCBtb2RlbCBuYW1lLCB0aGUgbW9kZWwgcHJvcGVydHkgaXMgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy4gU28sXG4gICAgLy8gKiBhZ2VudE1vZGVsID09PSAnJyAmIHJ1bkNvbmZpZ01vZGVsIGV4aXN0cywgcnVuQ29uZmlnTW9kZWwgd2lsbCBiZSB1c2VkXG4gICAgLy8gKiBhZ2VudE1vZGVsIGlzIHNldCwgdGhlIGFnZW50TW9kZWwgd2lsbCBiZSB1c2VkIG92ZXIgcnVuQ29uZmlnTW9kZWxcbiAgICBpZiAoKHR5cGVvZiBhZ2VudE1vZGVsID09PSAnc3RyaW5nJyAmJlxuICAgICAgICBhZ2VudE1vZGVsICE9PSBBZ2VudC5ERUZBVUxUX01PREVMX1BMQUNFSE9MREVSKSB8fFxuICAgICAgICBhZ2VudE1vZGVsIC8vIGFueSB0cnV0aHkgdmFsdWVcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGFnZW50TW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBydW5Db25maWdNb2RlbCA/PyBhZ2VudE1vZGVsID8/IEFnZW50LkRFRkFVTFRfTU9ERUxfUExBQ0VIT0xERVI7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHJ1bm5lciA9IGdldERlZmF1bHRSdW5uZXIoKTtcbiAgICBpZiAob3B0aW9ucz8uc3RyZWFtKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXdhaXQgcnVubmVyLnJ1bihhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgIH1cbn1cbi8qKlxuICogV2hlbiB0aGUgZGVmYXVsdCBtb2RlbCBpcyBhIEdQVC01IHZhcmlhbnQsIGFnZW50cyBtYXkgY2FycnkgR1BULTUtc3BlY2lmaWMgcHJvdmlkZXJEYXRhXG4gKiAoZS5nLiwgcmVhc29uaW5nIGVmZm9ydCwgdGV4dCB2ZXJib3NpdHkpLiBJZiBhIHJ1biByZXNvbHZlcyB0byBhIG5vbi1HUFQtNSBtb2RlbCBhbmQgdGhlXG4gKiBhZ2VudCByZWxpZWQgb24gdGhlIGRlZmF1bHQgbW9kZWwgKGkuZS4sIG5vIGV4cGxpY2l0IG1vZGVsIHNldCksIHRoZXNlIEdQVC01LW9ubHkgc2V0dGluZ3NcbiAqIGFyZSBpbmNvbXBhdGlibGUgYW5kIHNob3VsZCBiZSBzdHJpcHBlZCB0byBhdm9pZCBydW50aW1lIGVycm9ycy5cbiAqL1xuZnVuY3Rpb24gYWRqdXN0TW9kZWxTZXR0aW5nc0Zvck5vbkdQVDVSdW5uZXJNb2RlbChleHBsaWN0bHlNb2RlbFNldCwgYWdlbnRNb2RlbFNldHRpbmdzLCBydW5uZXJNb2RlbCwgbW9kZWxTZXR0aW5ncykge1xuICAgIGlmIChcbiAgICAvLyBncHQtNSBpcyBlbmFibGVkIGZvciB0aGUgZGVmYXVsdCBtb2RlbCBmb3IgYWdlbnRzXG4gICAgaXNHcHQ1RGVmYXVsdCgpICYmXG4gICAgICAgIC8vIGV4cGxpY2l0bHkgc2V0IG1vZGVsIGZvciB0aGUgYWdlbnRcbiAgICAgICAgZXhwbGljdGx5TW9kZWxTZXQgJiZcbiAgICAgICAgLy8gdGhpcyBydW5uZXIgdXNlcyBhIG5vbi1ncHQtNSBtb2RlbFxuICAgICAgICAodHlwZW9mIHJ1bm5lck1vZGVsICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAgICAgIWdwdDVSZWFzb25pbmdTZXR0aW5nc1JlcXVpcmVkKHJ1bm5lck1vZGVsKSkgJiZcbiAgICAgICAgKGFnZW50TW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZyB8fFxuICAgICAgICAgICAgYWdlbnRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8udGV4dD8udmVyYm9zaXR5IHx8XG4gICAgICAgICAgICBhZ2VudE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy5yZWFzb25pbmdfZWZmb3J0KSkge1xuICAgICAgICBjb25zdCBjb3BpZWRNb2RlbFNldHRpbmdzID0geyAuLi5tb2RlbFNldHRpbmdzIH07XG4gICAgICAgIC8vIHRoZSBpbmNvbXBhdGlibGUgcGFyYW1ldGVycyBzaG91bGQgYmUgcmVtb3ZlZCB0byBhdm9pZCBydW50aW1lIGVycm9yc1xuICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5wcm92aWRlckRhdGE/LnJlYXNvbmluZztcbiAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucHJvdmlkZXJEYXRhPy50ZXh0Py52ZXJib3NpdHk7XG4gICAgICAgIGRlbGV0ZSBjb3BpZWRNb2RlbFNldHRpbmdzLnByb3ZpZGVyRGF0YT8ucmVhc29uaW5nX2VmZm9ydDtcbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nKSB7XG4gICAgICAgICAgICBkZWxldGUgY29waWVkTW9kZWxTZXR0aW5ncy5yZWFzb25pbmcuZWZmb3J0O1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MucmVhc29uaW5nLnN1bW1hcnk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dCkge1xuICAgICAgICAgICAgZGVsZXRlIGNvcGllZE1vZGVsU2V0dGluZ3MudGV4dC52ZXJib3NpdHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvcGllZE1vZGVsU2V0dGluZ3M7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBSZWFkYWJsZVN0cmVhbSBhcyBfUmVhZGFibGVTdHJlYW0sIFRyYW5zZm9ybVN0cmVhbSwgUmVhZGFibGUsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0VHVybklucHV0IH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBTdHJlYW1FdmVudFRleHRTdHJlYW0gfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmNsYXNzIFJ1blJlc3VsdEJhc2Uge1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGhpc3Rvcnkgb2YgdGhlIGFnZW50IHJ1bi4gVGhpcyBpbmNsdWRlcyB0aGUgaW5wdXQgaXRlbXMgYW5kIHRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZ1xuICAgICAqIHRoZSBhZ2VudCBydW4uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIGFzIGlucHV0cyBmb3IgdGhlIG5leHQgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gZ2V0VHVybklucHV0KHRoaXMuaW5wdXQsIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbmV3IGl0ZW1zIGdlbmVyYXRlZCBkdXJpbmcgdGhlIGFnZW50IHJ1bi4gVGhlc2UgaW5jbHVkZSB0aGluZ3MgbGlrZSBuZXcgbWVzc2FnZXMsIHRvb2xcbiAgICAgKiBjYWxscyBhbmQgdGhlaXIgb3V0cHV0cywgZXRjLlxuICAgICAqXG4gICAgICogSXQgZG9lcyBub3QgaW5jbHVkZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYWdlbnRzIGFuZCBpbnN0ZWFkIHJlcHJlc2VudHMgdGhlIG1vZGVsIGRhdGEuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG91dHB1dCBpbmNsdWRpbmcgdGhlIGFnZW50cywgdXNlIHRoZSBgbmV3SXRlbXNgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXQoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQoW10sIHRoaXMubmV3SXRlbXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGlucHV0IGl0ZW1zLlxuICAgICAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX29yaWdpbmFsSW5wdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBydW4gaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGlzIGFzc29jaWF0ZXMgdGhlIG1vZGVsIGRhdGEgd2l0aCB0aGUgYWdlbnRzLlxuICAgICAqXG4gICAgICogRm9yIHRoZSBtb2RlbCBkYXRhIHRoYXQgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4sIHVzZSB0aGUgYG91dHB1dGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG5ld0l0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByYXcgTExNIHJlc3BvbnNlcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCByYXdSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9tb2RlbFJlc3BvbnNlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgcmVzcG9uc2UgSUQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBkdXJpbmcgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICBnZXQgbGFzdFJlc3BvbnNlSWQoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IHRoaXMucmF3UmVzcG9uc2VzO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2VzICYmIHJlc3BvbnNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICA/IHJlc3BvbnNlc1tyZXNwb25zZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2VJZFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXN0IGFnZW50IHRoYXQgd2FzIHJ1blxuICAgICAqL1xuICAgIGdldCBsYXN0QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEd1YXJkcmFpbCByZXN1bHRzIGZvciB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0R3VhcmRyYWlsUmVzdWx0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2lucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBmaW5hbCBvdXRwdXQgb2YgdGhlIGFnZW50LlxuICAgICAqL1xuICAgIGdldCBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW55IGludGVycnVwdGlvbnMgdGhhdCBvY2N1cnJlZCBkdXJpbmcgdGhlIGFnZW50IHJ1biBmb3IgZXhhbXBsZSBmb3IgdG9vbCBhcHByb3ZhbHMuXG4gICAgICovXG4gICAgZ2V0IGludGVycnVwdGlvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAuZGF0YS5pbnRlcnJ1cHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuIElmIHRoZSBvdXRwdXQgdHlwZSB3YXMgc2V0IHRvIGFueXRoaW5nIG90aGVyIHRoYW4gYHRleHRgLFxuICAgICAqIHRoaXMgd2lsbCBiZSBwYXJzZWQgZWl0aGVyIGFzIEpTT04gb3IgdXNpbmcgdGhlIFpvZCBzY2hlbWEgeW91IHByb3ZpZGVkLlxuICAgICAqL1xuICAgIGdldCBmaW5hbE91dHB1dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50QWdlbnQucHJvY2Vzc0ZpbmFsT3V0cHV0KHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLndhcm4oJ0FjY2Vzc2VkIGZpbmFsT3V0cHV0IGJlZm9yZSBhZ2VudCBydW4gaXMgY29tcGxldGVkLicpO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogVGhlIHJlc3VsdCBvZiBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZSk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1biBpbiBzdHJlYW1pbmcgbW9kZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmVhbWVkUnVuUmVzdWx0IGV4dGVuZHMgUnVuUmVzdWx0QmFzZSB7XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgdGhhdCBpcyBydW5uaW5nXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFzdEFnZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCB0dXJuIG51bWJlclxuICAgICAqL1xuICAgIGN1cnJlbnRUdXJuID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgdGhhdCBjYW4gYmUgcnVuXG4gICAgICovXG4gICAgbWF4VHVybnM7XG4gICAgI2Vycm9yID0gbnVsbDtcbiAgICAjc2lnbmFsO1xuICAgICNyZWFkYWJsZUNvbnRyb2xsZXI7XG4gICAgI3JlYWRhYmxlU3RyZWFtO1xuICAgICNjb21wbGV0ZWRQcm9taXNlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZTtcbiAgICAjY29tcGxldGVkUHJvbWlzZVJlamVjdDtcbiAgICAjY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgI3N0cmVhbUxvb3BQcm9taXNlO1xuICAgIGNvbnN0cnVjdG9yKHJlc3VsdCA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHJlc3VsdC5zdGF0ZSk7XG4gICAgICAgIHRoaXMuI3NpZ25hbCA9IHJlc3VsdC5zaWduYWw7XG4gICAgICAgIHRoaXMuI3JlYWRhYmxlU3RyZWFtID0gbmV3IF9SZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydDogKGNvbnRyb2xsZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuI2NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy4jcmVhZGFibGVDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jcmVhZGFibGVTdHJlYW0ubG9ja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoYEZhaWxlZCB0byBjbG9zZSByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIHRoaXMuI3JlYWRhYmxlU3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKHRoaXMuI3NpZ25hbD8ucmVhc29uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgRmFpbGVkIHRvIGNhbmNlbCByZWFkYWJsZSBzdHJlYW0gb24gYWJvcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLiNzaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUFib3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBoYW5kbGVBYm9ydCwgeyBvbmNlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc3RyZWFtIG9mIG91dHB1dCBpdGVtc1xuICAgICAqL1xuICAgIF9hZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCkge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyPy5lbnF1ZXVlKGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkXG4gICAgICovXG4gICAgX2RvbmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5jYW5jZWxsZWQgJiYgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlPy4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBIYW5kbGVzIGFuIGVycm9yIGluIHRoZSBzdHJlYW0gbG9vcC5cbiAgICAgKi9cbiAgICBfcmFpc2VFcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2Vycm9yID0gZXJyO1xuICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0Py4oZXJyKTtcbiAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBSZXN1bHRlZCBpbiBhbiBlcnJvcjogJHtlfWApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzdHJlYW0gaGFzIGJlZW4gY2FuY2VsbGVkLlxuICAgICAqL1xuICAgIGdldCBjYW5jZWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjYW5jZWxsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgcmVhZGFibGUgc3RyZWFtLlxuICAgICAqIEByZXR1cm5zIEEgcmVhZGFibGUgc3RyZWFtIG9mIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgdG9TdHJlYW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXQgdGhpcyBwcm9taXNlIHRvIGVuc3VyZSB0aGF0IHRoZSBzdHJlYW0gaGFzIGJlZW4gY29tcGxldGVkIGlmIHlvdSBhcmUgbm90IGNvbnN1bWluZyB0aGVcbiAgICAgKiBzdHJlYW0gZGlyZWN0bHkuXG4gICAgICovXG4gICAgZ2V0IGNvbXBsZXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbXBsZXRlZFByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVycm9yIHRocm93biBkdXJpbmcgdGhlIHJ1biwgaWYgYW55LlxuICAgICAqL1xuICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2Vycm9yO1xuICAgIH1cbiAgICB0b1RleHRTdHJlYW0ob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuI3JlYWRhYmxlU3RyZWFtLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0oe1xuICAgICAgICAgICAgdHJhbnNmb3JtKGV2ZW50LCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdyYXdfbW9kZWxfc3RyZWFtX2V2ZW50JyAmJlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLnR5cGUgPT09ICdvdXRwdXRfdGV4dF9kZWx0YScpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IFN0cmVhbUV2ZW50VGV4dFN0cmVhbS5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKGl0ZW0uZGVsdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29tcGF0aWJsZVdpdGhOb2RlU3RyZWFtcykge1xuICAgICAgICAgICAgcmV0dXJuIFJlYWRhYmxlLmZyb21XZWIoc3RyZWFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmVhZGFibGVTdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFNldHMgdGhlIHN0cmVhbSBsb29wIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgaW50ZXJuYWwgc3RyZWFtIGxvb3AgZmluaXNoZXMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRlZmVyIHRyYWNlIGVuZCB1bnRpbCBhbGwgYWdlbnQgd29yayBpcyBjb21wbGV0ZS5cbiAgICAgKi9cbiAgICBfc2V0U3RyZWFtTG9vcFByb21pc2UocHJvbWlzZSkge1xuICAgICAgICB0aGlzLiNzdHJlYW1Mb29wUHJvbWlzZSA9IHByb21pc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgc3RyZWFtIGxvb3AgY29tcGxldGVzLlxuICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgdHJhY2luZyBzeXN0ZW0gdG8gd2FpdCBmb3IgYWxsIGFnZW50IHdvcmsgYmVmb3JlIGVuZGluZyB0aGUgdHJhY2UuXG4gICAgICovXG4gICAgX2dldFN0cmVhbUxvb3BQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RyZWFtTG9vcFByb21pc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdWx0Lm1qcy5tYXAiLCJpbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4uL3Jlc3VsdC5tanNcIjtcbmxldCBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xuZnVuY3Rpb24gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkge1xuICAgIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UgPz89IG5ldyBBc3luY0xvY2FsU3RvcmFnZSgpO1xuICAgIHJldHVybiBfY29udGV4dEFzeW5jTG9jYWxTdG9yYWdlO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHRyYWNlIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHRyYWNlIG9yIG51bGwgaWYgdGhlcmUgaXMgbm8gdHJhY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlPy50cmFjZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudFRyYWNlLnRyYWNlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgY3VycmVudCBzcGFuIGZyb20gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IHNwYW4gb3IgbnVsbCBpZiB0aGVyZSBpcyBubyBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50U3Bhbj8uc3Bhbikge1xuICAgICAgICByZXR1cm4gY3VycmVudFNwYW4uc3BhbjtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFRoaXMgaXMgYW4gQXN5bmNMb2NhbFN0b3JhZ2UgaW5zdGFuY2UgdGhhdCBzdG9yZXMgdGhlIGN1cnJlbnQgdHJhY2UuXG4gKiBJdCB3aWxsIGF1dG9tYXRpY2FsbHkgaGFuZGxlIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBkaWZmZXJlbnQgZXZlbnQgbG9vcCBleGVjdXRpb25zLlxuICpcbiAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgc2hvdWxkIGJlIHRoZSBvbmx5IHdheSB0aGF0IHRoaXMgY29udGV4dCBnZXRzIGludGVyZmFjZWQgd2l0aC5cbiAqL1xuZnVuY3Rpb24gX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikge1xuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgIGlmICghdHJhY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdHJhY2UgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0cmFjZS5zdGFydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmbih0cmFjZSk7XG4gICAgICAgIC8vIElmIHJlc3VsdCBpcyBhIFN0cmVhbWVkUnVuUmVzdWx0LCBkZWZlciB0cmFjZSBlbmQgdW50aWwgc3RyZWFtIGxvb3AgY29tcGxldGVzXG4gICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBTdHJlYW1lZFJ1blJlc3VsdCkge1xuICAgICAgICAgICAgY29uc3Qgc3RyZWFtTG9vcFByb21pc2UgPSByZXN1bHQuX2dldFN0cmVhbUxvb3BQcm9taXNlKCk7XG4gICAgICAgICAgICBpZiAoc3RyZWFtTG9vcFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1Mb29wUHJvbWlzZS5maW5hbGx5KCgpID0+IHRyYWNlLmVuZCgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3VsdHMsIGVuZCB0cmFjZSBzeW5jaHJvbm91c2x5XG4gICAgICAgIGF3YWl0IHRyYWNlLmVuZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgYSBuZXcgdHJhY2UgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uXG4gKiBwYXNzZWQgdG8gaXQuXG4gKlxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoVHJhY2UodHJhY2UsIGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBuZXdUcmFjZSA9IHR5cGVvZiB0cmFjZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlVHJhY2Uoe1xuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgICAgIG5hbWU6IHRyYWNlLFxuICAgICAgICB9KVxuICAgICAgICA6IHRyYWNlO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgYWN0aXZlIHRyYWNlIGluIHRoZSBleGVjdXRpb24gY29udGV4dC4gSWYgdGhlcmVcbiAqIGlzLCBpdCB3aWxsIHJ1biB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2l0aCB0aGUgZXhpc3RpbmcgdHJhY2UuIElmIHRoZXJlIGlzIG5vIHRyYWNlLCBpdCB3aWxsIGNyZWF0ZVxuICogYSBuZXcgb25lIGFuZCBhc3NpZ24gaXQgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnp1bmN0aW9uIHRvIHJ1biBhbmQgYXNzaWduIHRoZSB0cmFjZSBjb250ZXh0IHRvLlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgY3JlYXRpb24gb2YgdGhlIHRyYWNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZVRyYWNlKGZuLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICBpZiAoY3VycmVudFRyYWNlKSB7XG4gICAgICAgIC8vIGlmIHRoaXMgZXhlY3V0aW9uIGNvbnRleHQgYWxyZWFkeSBoYXMgYSB0cmFjZSBpbnN0YW5jZSBpbiBpdCB3ZSBqdXN0IGNvbnRpbnVlXG4gICAgICAgIHJldHVybiBhd2FpdCBmbigpO1xuICAgIH1cbiAgICBjb25zdCBuZXdUcmFjZSA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZShvcHRpb25zKTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKHsgdHJhY2U6IG5ld1RyYWNlIH0sIF93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUoZm4pKTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIHNldCB0aGUgY3VycmVudCBzcGFuIGluIHRoZSBleGVjdXRpb24gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gc3BhbiAtIFRoZSBzcGFuIHRvIHNldCBhcyB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q3VycmVudFNwYW4oc3Bhbikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChjb250ZXh0LnNwYW4pIHtcbiAgICAgICAgY29udGV4dC5zcGFuLnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQuc3BhbjtcbiAgICB9XG4gICAgY29udGV4dC5zcGFuID0gc3BhbjtcbiAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LnNwYW4gPSBjb250ZXh0LnByZXZpb3VzU3BhbjtcbiAgICAgICAgY29udGV4dC5wcmV2aW91c1NwYW4gPSBjb250ZXh0LnByZXZpb3VzU3Bhbj8ucHJldmlvdXNTcGFuO1xuICAgICAgICBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5lbnRlcldpdGgoY29udGV4dCk7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGFuIGVycm9yIHRvIHRoZSBjdXJyZW50IHNwYW4uXG4gKlxuICogQHBhcmFtIHNwYW5FcnJvciAtIFRoZSBlcnJvciB0byBhZGQgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVycm9yVG9DdXJyZW50U3BhbihzcGFuRXJyb3IpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuKSB7XG4gICAgICAgIGN1cnJlbnRTcGFuLnNldEVycm9yKHNwYW5FcnJvcik7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgY2xvbmUgdGhlIGN1cnJlbnQgY29udGV4dCBieSBjcmVhdGluZyBuZXcgaW5zdGFuY2VzIG9mIHRoZSB0cmFjZSwgc3BhbiwgYW5kXG4gKiBwcmV2aW91cyBzcGFuLlxuICpcbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdG8gY2xvbmUuXG4gKiBAcmV0dXJucyBBIGNsb25lIG9mIHRoZSBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVDdXJyZW50Q29udGV4dChjb250ZXh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHJhY2U6IGNvbnRleHQudHJhY2U/LmNsb25lKCksXG4gICAgICAgIHNwYW46IGNvbnRleHQuc3Bhbj8uY2xvbmUoKSxcbiAgICAgICAgcHJldmlvdXNTcGFuOiBjb250ZXh0LnByZXZpb3VzU3Bhbj8uY2xvbmUoKSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIGEgbmV3IHNwYW4gY29udGV4dC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIHdpdGggdGhlIG5ldyBzcGFuIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoTmV3U3BhbkNvbnRleHQoZm4pIHtcbiAgICBjb25zdCBjdXJyZW50Q29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjdXJyZW50Q29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGV4aXN0aW5nIHRyYWNlIGZvdW5kJyk7XG4gICAgfVxuICAgIGNvbnN0IGNvcHlPZkNvbnRleHQgPSBjbG9uZUN1cnJlbnRDb250ZXh0KGN1cnJlbnRDb250ZXh0KTtcbiAgICByZXR1cm4gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkucnVuKGNvcHlPZkNvbnRleHQsIGZuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHRpbWVyIGFzIF90aW1lciwgaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG4vKipcbiAqIFByaW50cyB0aGUgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgY29uc29sZVxuICovXG5leHBvcnQgY2xhc3MgQ29uc29sZVNwYW5FeHBvcnRlciB7XG4gICAgYXN5bmMgZXhwb3J0KGl0ZW1zKSB7XG4gICAgICAgIGlmICh0cmFjaW5nLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQuIFNraXBwaW5nIGV4cG9ydCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3RyYWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCB0cmFjZSB0cmFjZUlkPSR7aXRlbS50cmFjZUlkfSBuYW1lPSR7aXRlbS5uYW1lfSR7aXRlbS5ncm91cElkID8gYCBncm91cElkPSR7aXRlbS5ncm91cElkfWAgOiAnJ31gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwb3J0ZXJdIEV4cG9ydCBzcGFuOiAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhdGNoVHJhY2VQcm9jZXNzb3Ige1xuICAgICNtYXhRdWV1ZVNpemU7XG4gICAgI21heEJhdGNoU2l6ZTtcbiAgICAjc2NoZWR1bGVEZWxheTtcbiAgICAjZXhwb3J0VHJpZ2dlclNpemU7XG4gICAgI2V4cG9ydGVyO1xuICAgICNidWZmZXIgPSBbXTtcbiAgICAjdGltZXI7XG4gICAgI3RpbWVvdXQgPSBudWxsO1xuICAgICNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgI3RpbWVvdXRBYm9ydENvbnRyb2xsZXIgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGV4cG9ydGVyLCB7IG1heFF1ZXVlU2l6ZSA9IDEwMDAsIG1heEJhdGNoU2l6ZSA9IDEwMCwgc2NoZWR1bGVEZWxheSA9IDUwMDAsIC8vIDUgc2Vjb25kc1xuICAgIGV4cG9ydFRyaWdnZXJSYXRpbyA9IDAuOCwgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI21heFF1ZXVlU2l6ZSA9IG1heFF1ZXVlU2l6ZTtcbiAgICAgICAgdGhpcy4jbWF4QmF0Y2hTaXplID0gbWF4QmF0Y2hTaXplO1xuICAgICAgICB0aGlzLiNzY2hlZHVsZURlbGF5ID0gc2NoZWR1bGVEZWxheTtcbiAgICAgICAgdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUgPSBtYXhRdWV1ZVNpemUgKiBleHBvcnRUcmlnZ2VyUmF0aW87XG4gICAgICAgIHRoaXMuI2V4cG9ydGVyID0gZXhwb3J0ZXI7XG4gICAgICAgIHRoaXMuI3RpbWVyID0gX3RpbWVyO1xuICAgICAgICBpZiAoaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdBdXRvbWF0aWMgdHJhY2UgZXhwb3J0IGxvb3AgaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50LiBZb3UgbmVlZCB0byBtYW51YWxseSBjYWxsIGBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuZm9yY2VGbHVzaCgpYCB0byBleHBvcnQgdHJhY2VzLicpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgfVxuICAgIGFzeW5jICNzYWZlQWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoICsgMSA+IHRoaXMuI21heFF1ZXVlU2l6ZSkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdEcm9wcGluZyB0cmFjZSBiZWNhdXNlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIHRoZSBpdGVtIHRvIHRoZSBidWZmZXJcbiAgICAgICAgdGhpcy4jYnVmZmVyLnB1c2goaXRlbSk7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gdGhpcy4jZXhwb3J0VHJpZ2dlclNpemUpIHtcbiAgICAgICAgICAgIC8vIHN0YXJ0IGV4cG9ydGluZyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgICNydW5FeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiN0aW1lb3V0ID0gdGhpcy4jdGltZXIuc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBzY2hlZHVsZWQgZXhwb3J0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKCk7XG4gICAgICAgICAgICB0aGlzLiNydW5FeHBvcnRMb29wKCk7XG4gICAgICAgIH0sIHRoaXMuI3NjaGVkdWxlRGVsYXkpO1xuICAgICAgICAvLyBXZSBzZXQgdGhpcyBzbyB0aGF0IE5vZGUgbm8gbG9uZ2VyIGNvbnNpZGVycyB0aGlzIHBhcnQgb2YgdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXBzIHRoZVxuICAgICAgICAvLyBwcm9jZXNzIGFsaXZlIHVudGlsIHRoZSB0aW1lciBpcyBkb25lLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RpbWVvdXQudW5yZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVvdXQudW5yZWYoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyAjZXhwb3J0QmF0Y2hlcyhmb3JjZSA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBFeHBvcnRpbmcgYmF0Y2hlcy4gRm9yY2U6ICR7Zm9yY2V9LiBCdWZmZXIgc2l6ZTogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICBpZiAoZm9yY2UgfHwgdGhpcy4jYnVmZmVyLmxlbmd0aCA8IHRoaXMuI21heEJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9FeHBvcnQgPSBbLi4udGhpcy4jYnVmZmVyXTtcbiAgICAgICAgICAgIHRoaXMuI2J1ZmZlciA9IFtdO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRlci5leHBvcnQodG9FeHBvcnQpO1xuICAgICAgICAgICAgdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IHRoaXMuI2J1ZmZlci5zcGxpY2UoMCwgdGhpcy4jbWF4QmF0Y2hTaXplKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KGJhdGNoKTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0odHJhY2UpO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKF90cmFjZSkge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHRyYWNlcyBvbiBlbmQgYmVjYXVzZSB3ZSBhbHJlYWR5IHNlbmQgdGhlbSBvbiBzdGFydFxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChfc3Bhbikge1xuICAgICAgICAvLyBXZSBkb24ndCBzZW5kIHNwYW5zIG9uIHN0YXJ0IGJlY2F1c2Ugd2Ugc2VuZCB0aGVtIGF0IHRoZSBlbmRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2FmZUFkZEl0ZW0oc3Bhbik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGZvcmNlIHNodXRkb3duIHRoZSBIVFRQIHJlcXVlc3RcbiAgICAgICAgICAgICAgICB0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5hYm9ydCgpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIGdyYWNlZnVsbHknKTtcbiAgICAgICAgd2hpbGUgKHRoaXMuI2J1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFdhaXRpbmcgZm9yIGJ1ZmZlciB0byBlbXB0eS4gSXRlbXMgbGVmdDogJHt0aGlzLiNidWZmZXIubGVuZ3RofWApO1xuICAgICAgICAgICAgaWYgKCF0aGlzLiNleHBvcnRJblByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gY3VycmVudCBleHBvcnQgaW4gcHJvZ3Jlc3MuIEZvcmNpbmcgYWxsIGl0ZW1zIHRvIGJlIGV4cG9ydGVkXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLiN0aW1lb3V0QWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVGltZW91dCByZWFjaGVkLCBmb3JjZSBmbHVzaGluZycpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2luZyBzZXRUaW1lb3V0IHRvIGFkZCB0byB0aGUgZXZlbnQgbG9vcCBhbmQga2VlcCB0aGlzIGFsaXZlIHVudGlsIGRvbmVcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQnVmZmVyIGVtcHR5LiBFeGl0aW5nJyk7XG4gICAgICAgIGlmICh0aGlzLiN0aW1lciAmJiB0aGlzLiN0aW1lb3V0KSB7XG4gICAgICAgICAgICAvLyBtYWtpbmcgc3VyZSB0aGVyZSBhcmUgbm8gbW9yZSByZXF1ZXN0c1xuICAgICAgICAgICAgdGhpcy4jdGltZXIuY2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcyh0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBNdWx0aVRyYWNpbmdQcm9jZXNzb3Ige1xuICAgICNwcm9jZXNzb3JzID0gW107XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGlmIChwcm9jZXNzb3Iuc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzb3Iuc3RhcnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycy5wdXNoKHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1NodXR0aW5nIGRvd24gb2xkIHByb2Nlc3NvcnMnKTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgcHJvY2Vzc29yLnNodXRkb3duKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jcHJvY2Vzc29ycyA9IHByb2Nlc3NvcnM7XG4gICAgfVxuICAgIGFzeW5jIG9uVHJhY2VTdGFydCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblRyYWNlRW5kKHRyYWNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblRyYWNlRW5kKHRyYWNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5TdGFydChzcGFuKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5vblNwYW5TdGFydChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBvblNwYW5FbmQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuRW5kKHNwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5mb3JjZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgX2RlZmF1bHRFeHBvcnRlciA9IG51bGw7XG5sZXQgX2RlZmF1bHRQcm9jZXNzb3IgPSBudWxsO1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRFeHBvcnRlcigpIHtcbiAgICBpZiAoIV9kZWZhdWx0RXhwb3J0ZXIpIHtcbiAgICAgICAgX2RlZmF1bHRFeHBvcnRlciA9IG5ldyBDb25zb2xlU3BhbkV4cG9ydGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdEV4cG9ydGVyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRQcm9jZXNzb3IoKSB7XG4gICAgaWYgKCFfZGVmYXVsdFByb2Nlc3Nvcikge1xuICAgICAgICBfZGVmYXVsdFByb2Nlc3NvciA9IG5ldyBCYXRjaFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRFeHBvcnRlcigpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWZhdWx0UHJvY2Vzc29yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvY2Vzc29yLm1qcy5tYXAiLCJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuLyoqXG4gKiBHZW5lcmF0ZSBhbiBJU08gODYwMSB0aW1lc3RhbXAgb2YgdGhlIGN1cnJlbnQgdGltZS5cbiAqIEByZXR1cm5zIEFuIElTTyA4NjAxIHRpbWVzdGFtcC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRpbWVJc28oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSB0cmFjZSBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHRyYWNlX2AuXG4gKiBAcmV0dXJucyBBIHRyYWNlIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUcmFjZUlkKCkge1xuICAgIHJldHVybiBgdHJhY2VfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJyl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBzcGFuIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgc3Bhbl9gLlxuICogQHJldHVybnMgQSBzcGFuIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVTcGFuSWQoKSB7XG4gICAgcmV0dXJuIGBzcGFuXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpLnNsaWNlKDAsIDI0KX1gO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIGdyb3VwIElEIGJ5IGNyZWF0aW5nIGEgcmFuZG9tIFVVSUQgdjQgYW5kIHJlbW92aW5nIHRoZSBkYXNoZXMuIFRoaXMgaXMgdGhlIGVxdWl2YWxlbnRcbiAqIG9mIGB1dWlkNCgpLmhleGAgaW4gUHl0aG9uIGFuZCBwcmVmaXhpbmcgaXQgd2l0aCBgZ3JvdXBfYC5cbiAqIEByZXR1cm5zIEEgZ3JvdXAgSUQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIGBncm91cF8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogUmVtb3ZlIGZpZWxkcyB0aGF0IHN0YXJ0IHdpdGggYW4gdW5kZXJzY29yZSBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSBvYmogLSBUaGUgb2JqZWN0IHRvIHJlbW92ZSBwcml2YXRlIGZpZWxkcyBmcm9tLlxuICogQHJldHVybnMgQSBuZXcgb2JqZWN0IHdpdGggcHJpdmF0ZSBmaWVsZHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVByaXZhdGVGaWVsZHMob2JqKSB7XG4gICAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhvYmopLmZpbHRlcigoW2tleV0pID0+ICFrZXkuc3RhcnRzV2l0aCgnXycpKSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVTcGFuSWQsIHJlbW92ZVByaXZhdGVGaWVsZHMsIHRpbWVJc28gfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBTcGFuIHtcbiAgICB0eXBlID0gJ3RyYWNlLnNwYW4nO1xuICAgICNkYXRhO1xuICAgICN0cmFjZUlkO1xuICAgICNzcGFuSWQ7XG4gICAgI3BhcmVudElkO1xuICAgICNwcm9jZXNzb3I7XG4gICAgI3N0YXJ0ZWRBdDtcbiAgICAjZW5kZWRBdDtcbiAgICAjZXJyb3I7XG4gICAgI3ByZXZpb3VzU3BhbjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jdHJhY2VJZCA9IG9wdGlvbnMudHJhY2VJZDtcbiAgICAgICAgdGhpcy4jc3BhbklkID0gb3B0aW9ucy5zcGFuSWQgPz8gZ2VuZXJhdGVTcGFuSWQoKTtcbiAgICAgICAgdGhpcy4jZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLiNwYXJlbnRJZCA9IG9wdGlvbnMucGFyZW50SWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBvcHRpb25zLmVycm9yID8/IG51bGw7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWRBdCA9IG9wdGlvbnMuc3RhcnRlZEF0ID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2VuZGVkQXQgPSBvcHRpb25zLmVuZGVkQXQgPz8gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHRyYWNlSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFjZUlkO1xuICAgIH1cbiAgICBnZXQgc3BhbkRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNkYXRhO1xuICAgIH1cbiAgICBnZXQgc3BhbklkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3BhbklkO1xuICAgIH1cbiAgICBnZXQgcGFyZW50SWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwYXJlbnRJZDtcbiAgICB9XG4gICAgZ2V0IHByZXZpb3VzU3BhbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3ByZXZpb3VzU3BhbjtcbiAgICB9XG4gICAgc2V0IHByZXZpb3VzU3BhbihzcGFuKSB7XG4gICAgICAgIHRoaXMuI3ByZXZpb3VzU3BhbiA9IHNwYW47XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZEF0KSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignU3BhbiBhbHJlYWR5IHN0YXJ0ZWQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSB0aW1lSXNvKCk7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3Nvci5vblNwYW5TdGFydCh0aGlzKTtcbiAgICB9XG4gICAgZW5kKCkge1xuICAgICAgICBpZiAodGhpcy4jZW5kZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTcGFuIGFscmVhZHkgZmluaXNoZWQnLCB0aGlzLnNwYW5EYXRhKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuRW5kKHRoaXMpO1xuICAgIH1cbiAgICBzZXRFcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLiNlcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlcnJvcjtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWRBdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXJ0ZWRBdDtcbiAgICB9XG4gICAgZ2V0IGVuZGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNlbmRlZEF0O1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IG5ldyBTcGFuKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHNwYW5JZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICBwYXJlbnRJZDogdGhpcy5wYXJlbnRJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnNwYW5EYXRhLFxuICAgICAgICAgICAgc3RhcnRlZEF0OiB0aGlzLiNzdGFydGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZW5kZWRBdDogdGhpcy4jZW5kZWRBdCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBlcnJvcjogdGhpcy4jZXJyb3IgPz8gdW5kZWZpbmVkLFxuICAgICAgICB9LCB0aGlzLiNwcm9jZXNzb3IpO1xuICAgICAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHRoaXMucHJldmlvdXNTcGFuPy5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy5zcGFuSWQsXG4gICAgICAgICAgICB0cmFjZV9pZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50X2lkOiB0aGlzLnBhcmVudElkLFxuICAgICAgICAgICAgc3RhcnRlZF9hdDogdGhpcy5zdGFydGVkQXQsXG4gICAgICAgICAgICBlbmRlZF9hdDogdGhpcy5lbmRlZEF0LFxuICAgICAgICAgICAgc3Bhbl9kYXRhOiByZW1vdmVQcml2YXRlRmllbGRzKHRoaXMuc3BhbkRhdGEpLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuZXJyb3IsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BTcGFuIGV4dGVuZHMgU3BhbiB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgcHJvY2Vzc29yKSB7XG4gICAgICAgIHN1cGVyKHsgdHJhY2VJZDogJ25vLW9wJywgc3BhbklkOiAnbm8tb3AnLCBkYXRhIH0sIHByb2Nlc3Nvcik7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRFcnJvcigpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZhdWx0UHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgVHJhY2Uge1xuICAgIHR5cGUgPSAndHJhY2UnO1xuICAgIHRyYWNlSWQ7XG4gICAgbmFtZTtcbiAgICBncm91cElkID0gbnVsbDtcbiAgICBtZXRhZGF0YTtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLnRyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQgPz8gZ2VuZXJhdGVUcmFjZUlkKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IG9wdGlvbnMubmFtZSA/PyAnQWdlbnQgd29ya2Zsb3cnO1xuICAgICAgICB0aGlzLmdyb3VwSWQgPSBvcHRpb25zLmdyb3VwSWQgPz8gbnVsbDtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnMubWV0YWRhdGEgPz8ge307XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvciA/PyBkZWZhdWx0UHJvY2Vzc29yKCk7XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBvcHRpb25zLnN0YXJ0ZWQgPz8gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB0aGlzLiNwcm9jZXNzb3Iub25UcmFjZVN0YXJ0KHRoaXMpO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jc3RhcnRlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VFbmQodGhpcyk7XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRyYWNlKHtcbiAgICAgICAgICAgIHRyYWNlSWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIGdyb3VwSWQ6IHRoaXMuZ3JvdXBJZCA/PyB1bmRlZmluZWQsXG4gICAgICAgICAgICBtZXRhZGF0YTogdGhpcy5tZXRhZGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWQ6IHRoaXMuI3N0YXJ0ZWQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvYmplY3Q6IHRoaXMudHlwZSxcbiAgICAgICAgICAgIGlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICB3b3JrZmxvd19uYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cF9pZDogdGhpcy5ncm91cElkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZSBleHRlbmRzIFRyYWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoe30pO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFjZXMubWpzLm1hcCIsImltcG9ydCB7IGdldEN1cnJlbnRTcGFuLCBnZXRDdXJyZW50VHJhY2UgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgdHJhY2luZyB9IGZyb20gXCIuLi9jb25maWcubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IgfSBmcm9tIFwiLi9wcm9jZXNzb3IubWpzXCI7XG5pbXBvcnQgeyBOb29wU3BhbiwgU3BhbiB9IGZyb20gXCIuL3NwYW5zLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFRyYWNlLCBUcmFjZSB9IGZyb20gXCIuL3RyYWNlcy5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlUHJvdmlkZXIge1xuICAgICNtdWx0aVByb2Nlc3NvcjtcbiAgICAjZGlzYWJsZWQ7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yID0gbmV3IE11bHRpVHJhY2luZ1Byb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IHRyYWNpbmcuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuI2FkZENsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvciAtIFRoZSBwcm9jZXNzb3IgdG8gYWRkLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5hZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJvY2Vzc29ycyAtIFRoZSBsaXN0IG9mIHByb2Nlc3NvcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgY3VycmVudCB0cmFjZS5cbiAgICAgKi9cbiAgICBnZXRDdXJyZW50VHJhY2UoKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICB9XG4gICAgZ2V0Q3VycmVudFNwYW4oKSB7XG4gICAgICAgIHJldHVybiBnZXRDdXJyZW50U3BhbigpO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZChkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLiNkaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgICBzdGFydEV4cG9ydExvb3AoKSB7XG4gICAgICAgIHRoaXMuI211bHRpUHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgfVxuICAgIGNyZWF0ZVRyYWNlKHRyYWNlT3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHRyYWNlICVvJywgdHJhY2VPcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTm9vcFRyYWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhY2VJZCA9IHRyYWNlT3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICBjb25zdCBuYW1lID0gdHJhY2VPcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdDcmVhdGluZyB0cmFjZSAlcyB3aXRoIG5hbWUgJXMnLCB0cmFjZUlkLCBuYW1lKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7IC4uLnRyYWNlT3B0aW9ucywgbmFtZSwgdHJhY2VJZCB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGNyZWF0ZVNwYW4oc3Bhbk9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAodGhpcy4jZGlzYWJsZWQgfHwgc3Bhbk9wdGlvbnMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZCwgTm90IGNyZWF0aW5nIHNwYW4gJW8nLCBzcGFuT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyZW50SWQ7XG4gICAgICAgIGxldCB0cmFjZUlkO1xuICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gYWN0aXZlIHRyYWNlLiBNYWtlIHN1cmUgdG8gc3RhcnQgYSB0cmFjZSB3aXRoIGB3aXRoVHJhY2UoKWAgZmlyc3QuIFJldHVybmluZyBOb29wU3Bhbi4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50U3BhbiBpbnN0YW5jZW9mIE5vb3BTcGFuIHx8XG4gICAgICAgICAgICAgICAgY3VycmVudFRyYWNlIGluc3RhbmNlb2YgTm9vcFRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBQYXJlbnQgJHtjdXJyZW50U3Bhbn0gb3IgJHtjdXJyZW50VHJhY2V9IGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBjdXJyZW50VHJhY2UudHJhY2VJZDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVXNpbmcgcGFyZW50IHNwYW4gJXMnLCBjdXJyZW50U3Bhbi5zcGFuSWQpO1xuICAgICAgICAgICAgICAgIHBhcmVudElkID0gY3VycmVudFNwYW4uc3BhbklkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdObyBwYXJlbnQgc3BhbiwgdXNpbmcgY3VycmVudCB0cmFjZSAlcycsIGN1cnJlbnRUcmFjZS50cmFjZUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBUcmFjZSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUGFyZW50IHRyYWNlIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBTcGFuKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50IGluc3RhbmNlb2YgTm9vcFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCBzcGFuIGlzIG5vLW9wLCByZXR1cm5pbmcgTm9vcFNwYW4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudElkID0gcGFyZW50LnNwYW5JZDtcbiAgICAgICAgICAgIHRyYWNlSWQgPSBwYXJlbnQudHJhY2VJZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRyYWNlSWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignTm8gdHJhY2VJZCBmb3VuZC4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BTcGFuKHNwYW5PcHRpb25zLmRhdGEsIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoYENyZWF0aW5nIHNwYW4gJHtKU09OLnN0cmluZ2lmeShzcGFuT3B0aW9ucy5kYXRhKX0gd2l0aCBpZCAke3NwYW5PcHRpb25zLnNwYW5JZCA/PyB0cmFjZUlkfWApO1xuICAgICAgICByZXR1cm4gbmV3IFNwYW4oe1xuICAgICAgICAgICAgLi4uc3Bhbk9wdGlvbnMsXG4gICAgICAgICAgICB0cmFjZUlkLFxuICAgICAgICAgICAgcGFyZW50SWQsXG4gICAgICAgIH0sIHRoaXMuI211bHRpUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgYXN5bmMgc2h1dGRvd24odGltZW91dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXInKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLnNodXRkb3duKHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzaHV0dGluZyBkb3duIHRyYWNpbmcgcHJvdmlkZXIgJW8nLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEFkZHMgbGlzdGVuZXJzIHRvIGBwcm9jZXNzYCB0byBlbnN1cmUgYHNodXRkb3duYCBvY2N1cnMgYmVmb3JlIGV4aXQuICovXG4gICAgI2FkZENsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3Mub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vIGhhbmRsaW5nIE5vZGUuanMgcHJvY2VzcyB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgY29uc3QgY2xlYW51cCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2xlYW51cCB0aW1lb3V0LCBmb3JjaW5nIGV4aXQnKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2h1dGRvd24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gSGFuZGxlIG5vcm1hbCB0ZXJtaW5hdGlvblxuICAgICAgICAgICAgcHJvY2Vzcy5vbignYmVmb3JlRXhpdCcsIGNsZWFudXApO1xuICAgICAgICAgICAgLy8gSGFuZGxlIENUUkwrQyAoU0lHSU5UKVxuICAgICAgICAgICAgcHJvY2Vzcy5vbignU0lHSU5UJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IGNsZWFudXAoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscygnU0lHSU5UJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMTMwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzT3RoZXJMaXN0ZW5lcnNGb3JTaWduYWxzKCdTSUdURVJNJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCBhc3luYyAocmVhc29uLCBwcm9taXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcmVqZWN0aW9uJywgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cygndW5oYW5kbGVkUmVqZWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGFyZSBubyBvdGhlciBsaXN0ZW5lcnMsIGV4aXQgdGhlIHByb2Nlc3Mgb24gdGhpcyBTREsgc2lkZVxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZm9yY2VGbHVzaCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jbXVsdGlQcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yU2lnbmFscyhldmVudCkge1xuICAgIHJldHVybiBwcm9jZXNzLmxpc3RlbmVycyhldmVudCkubGVuZ3RoID4gMTtcbn1cbmZ1bmN0aW9uIGhhc090aGVyTGlzdGVuZXJzRm9yRXZlbnRzKGV2ZW50KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGggPiAxO1xufVxubGV0IEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkge1xuICAgIGlmICghR0xPQkFMX1RSQUNFX1BST1ZJREVSKSB7XG4gICAgICAgIEdMT0JBTF9UUkFDRV9QUk9WSURFUiA9IG5ldyBUcmFjZVByb3ZpZGVyKCk7XG4gICAgfVxuICAgIHJldHVybiBHTE9CQUxfVFJBQ0VfUFJPVklERVI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm92aWRlci5tanMubWFwIiwiaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0Q3VycmVudFNwYW4sIGdldEN1cnJlbnRUcmFjZSwgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhUcmFjZSwgfSBmcm9tIFwiLi9jb250ZXh0Lm1qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlU3BhbnMubWpzXCI7XG5leHBvcnQgeyBCYXRjaFRyYWNlUHJvY2Vzc29yLCBDb25zb2xlU3BhbkV4cG9ydGVyLCB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IE5vb3BTcGFuLCBTcGFuIH0gZnJvbSBcIi4vc3BhbnMubWpzXCI7XG5leHBvcnQgeyBOb29wVHJhY2UsIFRyYWNlIH0gZnJvbSBcIi4vdHJhY2VzLm1qc1wiO1xuZXhwb3J0IHsgZ2VuZXJhdGVHcm91cElkLCBnZW5lcmF0ZVNwYW5JZCwgZ2VuZXJhdGVUcmFjZUlkIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG4vKipcbiAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAqXG4gKiBAcGFyYW0gcHJvY2Vzc29yIC0gVGhlIHByb2Nlc3NvciB0byBhZGQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRUcmFjZVByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkucmVnaXN0ZXJQcm9jZXNzb3IocHJvY2Vzc29yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3JzIC0gVGhlIGxpc3Qgb2YgcHJvY2Vzc29ycyB0byBzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZVByb2Nlc3NvcnMocHJvY2Vzc29ycykge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5zZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGRpc2FibGVkIHN0YXRlIG9mIHRoZSB0cmFjaW5nIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSBkaXNhYmxlZCAtIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFjaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VHJhY2luZ0Rpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldERpc2FibGVkKGRpc2FibGVkKTtcbn1cbi8qKlxuICogU3RhcnQgdGhlIHRyYWNlIGV4cG9ydCBsb29wLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRUcmFjZUV4cG9ydExvb3AoKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnN0YXJ0RXhwb3J0TG9vcCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuZXhwb3J0IHsgQWdlbnRIb29rcyB9IGZyb20gXCIuL2xpZmVjeWNsZS5tanNcIjtcbmV4cG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmV4cG9ydCB7IGdldEFsbE1jcFRvb2xzLCBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZSwgbWNwVG9GdW5jdGlvblRvb2wsIE1DUFNlcnZlclN0ZGlvLCBNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgTUNQU2VydmVyU1NFLCB9IGZyb20gXCIuL21jcC5tanNcIjtcbmV4cG9ydCB7IGNyZWF0ZU1DUFRvb2xTdGF0aWNGaWx0ZXIsIH0gZnJvbSBcIi4vbWNwVXRpbC5tanNcIjtcbmV4cG9ydCB7IE9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FLCBncHQ1UmVhc29uaW5nU2V0dGluZ3NSZXF1aXJlZCwgZ2V0RGVmYXVsdE1vZGVsLCBnZXREZWZhdWx0TW9kZWxTZXR0aW5ncywgaXNHcHQ1RGVmYXVsdCwgfSBmcm9tIFwiLi9kZWZhdWx0TW9kZWwubWpzXCI7XG5leHBvcnQgeyBzZXREZWZhdWx0TW9kZWxQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVycy5tanNcIjtcbmV4cG9ydCB7IFJ1blJlc3VsdCwgU3RyZWFtZWRSdW5SZXN1bHQgfSBmcm9tIFwiLi9yZXN1bHQubWpzXCI7XG5leHBvcnQgeyBydW4sIFJ1bm5lciwgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5leHBvcnQgeyBSdW5Db250ZXh0IH0gZnJvbSBcIi4vcnVuQ29udGV4dC5tanNcIjtcbmV4cG9ydCB7IFJ1blN0YXRlIH0gZnJvbSBcIi4vcnVuU3RhdGUubWpzXCI7XG5leHBvcnQgeyBjb21wdXRlclRvb2wsIGhvc3RlZE1jcFRvb2wsIHRvb2wsIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYWNpbmcvaW5kZXgubWpzXCI7XG5leHBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyLCBUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vdHJhY2luZy9wcm92aWRlci5tanNcIjtcbmV4cG9ydCB7IFVzYWdlIH0gZnJvbSBcIi4vdXNhZ2UubWpzXCI7XG5leHBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbi8qKlxuICogQWRkIHRoZSBkZWZhdWx0IHByb2Nlc3Nvciwgd2hpY2ggZXhwb3J0cyB0cmFjZXMgYW5kIHNwYW5zIHRvIHRoZSBiYWNrZW5kIGluIGJhdGNoZXMuIFlvdSBjYW5cbiAqIGNoYW5nZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBieSBlaXRoZXI6XG4gKiAxLiBjYWxsaW5nIGFkZFRyYWNlUHJvY2Vzc29yLCB3aGljaCBhZGRzIGFkZGl0aW9uYWwgcHJvY2Vzc29ycywgb3JcbiAqIDIuIGNhbGxpbmcgc2V0VHJhY2VQcm9jZXNzb3JzLCB3aGljaCBzZXRzIHRoZSBwcm9jZXNzb3JzIGFuZCBkaXNjYXJkcyB0aGUgZGVmYXVsdCBvbmVcbiAqL1xuYWRkVHJhY2VQcm9jZXNzb3IoZGVmYXVsdFByb2Nlc3NvcigpKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4Lm1qcy5tYXAiLCJpbXBvcnQgTUVUQURBVEEgZnJvbSBcIi4vbWV0YWRhdGEubWpzXCI7XG5pbXBvcnQgeyBSdW5Ub29sQXBwcm92YWxJdGVtIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIENvbnZlcnRzIGEgYmFzZTY0IHN0cmluZyB0byBhbiBBcnJheUJ1ZmZlclxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NFxuICogQHJldHVybnMge0FycmF5QnVmZmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBBcnJheUJ1ZmZlciB0byBhIGJhc2U2NCBzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpKTtcbiAgICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIGFuIGF1ZGlvIG91dHB1dCBtZXNzYWdlXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBpdGVtID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICAhKCd0eXBlJyBpbiBpdGVtKSB8fFxuICAgICAgICB0eXBlb2YgaXRlbS50eXBlICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAhaXRlbS50eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoISgnY29udGVudCcgaW4gaXRlbSkgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXRlbS5jb250ZW50KSB8fFxuICAgICAgICBpdGVtLmNvbnRlbnQubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0Q29udGVudEl0ZW0gPSBpdGVtLmNvbnRlbnRbaXRlbS5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgIGlmICghKCd0eXBlJyBpbiBsYXN0Q29udGVudEl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbGFzdENvbnRlbnRJdGVtLnRleHQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGxhc3RDb250ZW50SXRlbS50ZXh0XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAnb3V0cHV0X2F1ZGlvJykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGxhc3RDb250ZW50SXRlbS50cmFuc2NyaXB0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENvbXBhcmUgdHdvIGNvbnZlcnNhdGlvbiBoaXN0b3JpZXMgdG8gZGV0ZXJtaW5lIHRoZSByZW1vdmFscywgYWRkaXRpb25zLCBhbmQgdXBkYXRlcy5cbiAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5LlxuICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkuXG4gKiBAcmV0dXJucyBBIGRpZmYgb2YgdGhlIHR3byBoaXN0b3JpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaWZmUmVhbHRpbWVIaXN0b3J5KG9sZEhpc3RvcnksIG5ld0hpc3RvcnkpIHtcbiAgICBjb25zdCByZW1vdmFscyA9IG9sZEhpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiAhbmV3SGlzdG9yeS5zb21lKChuZXdJdGVtKSA9PiBuZXdJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQpKTtcbiAgICBjb25zdCBhZGRpdGlvbnMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW9sZEhpc3Rvcnkuc29tZSgob2xkSXRlbSkgPT4gb2xkSXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgdXBkYXRlcyA9IG5ld0hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCAmJlxuICAgICAgICBKU09OLnN0cmluZ2lmeShvbGRJdGVtKSAhPT0gSlNPTi5zdHJpbmdpZnkoaXRlbSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmFscyxcbiAgICAgICAgYWRkaXRpb25zLFxuICAgICAgICB1cGRhdGVzLFxuICAgIH07XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIFdlYlJUQy5cbiAqIEByZXR1cm5zIFRydWUgaWYgV2ViUlRDIGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzV2ViUlRDU3VwcG9ydCgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd1snUlRDUGVlckNvbm5lY3Rpb24nXSAhPT0gJ3VuZGVmaW5lZCc7XG59XG4vKipcbiAqIFJlbW92ZXMgdGhlIGF1ZGlvIGRhdGEgZnJvbSBhbGwgY29udGVudCBpbiBhIG1lc3NhZ2UgYnkgc2V0dGluZyBpdCB0byBudWxsLlxuICogQHBhcmFtIGl0ZW1cbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBdWRpb0Zyb21Db250ZW50KGl0ZW0pIHtcbiAgICBpZiAoaXRlbS5yb2xlID09PSAnc3lzdGVtJykge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS50eXBlID09PSAnb3V0cHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICAvLyBNZXJnZSB0cmFuc2NyaXB0IGludG8gcGxhY2Vob2xkZXIgaW5wdXRfYXVkaW8gbWVzc2FnZVxuICAgIGlmIChldmVudC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSB7XG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtX2lkICYmXG4gICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSAnbWVzc2FnZScgJiZcbiAgICAgICAgICAgICAgICAncm9sZScgaW4gaXRlbSAmJlxuICAgICAgICAgICAgICAgIGl0ZW0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZENvbnRlbnQgPSBpdGVtLmNvbnRlbnQubWFwKChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2lucHV0X2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5lbnRyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0OiBldmVudC50cmFuc2NyaXB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdXBkYXRlZENvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgbmV3RXZlbnQgPSAhc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSAmJiBldmVudC50eXBlID09PSAnbWVzc2FnZSdcbiAgICAgICAgPyByZW1vdmVBdWRpb0Zyb21Db250ZW50KGV2ZW50KVxuICAgICAgICA6IGV2ZW50O1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBpdGVtXG4gICAgICAgIHJldHVybiBoaXN0b3J5Lm1hcCgoaXRlbSwgaWR4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaWR4ID09PSBleGlzdGluZ0luZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld0V2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV2ZW50LnByZXZpb3VzSXRlbUlkKSB7XG4gICAgICAgIC8vIEluc2VydCBhZnRlciBwcmV2aW91c0l0ZW1JZCBpZiBmb3VuZCwgZWxzZSBhdCBlbmRcbiAgICAgICAgY29uc3QgcHJldkluZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5wcmV2aW91c0l0ZW1JZCk7XG4gICAgICAgIGlmIChwcmV2SW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIC4uLmhpc3Rvcnkuc2xpY2UoMCwgcHJldkluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgbmV3RXZlbnQsXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZShwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFsuLi5oaXN0b3J5LCBuZXdFdmVudF07XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgaGVhZGVycyB0byB1c2UgZm9yIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjb25zdCBIRUFERVJTID0ge1xuICAgICdVc2VyLUFnZW50JzogYEFnZW50cy9KYXZhU2NyaXB0ICR7TUVUQURBVEEudmVyc2lvbn1gLFxuICAgICdYLU9wZW5BSS1BZ2VudHMtU0RLJzogYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gLFxufTtcbi8qKlxuICogQnJvd3NlciB3ZWJzb2NrZXQgaGVhZGVyXG4gKi9cbmV4cG9ydCBjb25zdCBXRUJTT0NLRVRfTUVUQSA9IGBvcGVuYWktYWdlbnRzLXNkay4ke01FVEFEQVRBLnZlcnNpb259YDtcbmV4cG9ydCBmdW5jdGlvbiByZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtKGFnZW50LCBpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIC4uLnJlc3QgfSA9IGl0ZW07XG4gICAgcmV0dXJuIG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKHtcbiAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBhcmd1bWVudHM6IEpTT04uc3RyaW5naWZ5KGFyZ3MpLFxuICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgIHByb3ZpZGVyRGF0YToge1xuICAgICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSxcbiAgICB9LCBhZ2VudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShpdGVtKSB7XG4gICAgY29uc3QgeyBuYW1lLCBhcmd1bWVudHM6IGFyZ3MsIHByb3ZpZGVyRGF0YSB9ID0gaXRlbS5yYXdJdGVtO1xuICAgIGNvbnN0IHsgaXRlbUlkLCBzZXJ2ZXJMYWJlbCwgLi4ucmVzdCB9ID0gcHJvdmlkZXJEYXRhID8/IHt9O1xuICAgIGlmICghaXRlbUlkIHx8ICFzZXJ2ZXJMYWJlbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXBwcm92YWwgaXRlbSBmb3IgUmVhbHRpbWUgTUNQIGFwcHJvdmFsIHJlcXVlc3QnKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgaXRlbUlkLFxuICAgICAgICBzZXJ2ZXJMYWJlbCxcbiAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYXJndW1lbnRzOiBhcmdzID8gSlNPTi5wYXJzZShhcmdzKSA6IHt9LFxuICAgICAgICBhcHByb3ZlZDogbnVsbCxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCB7IEFnZW50LCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuLyoqXG4gKiBBIHNwZWNpYWxpemVkIGFnZW50IGluc3RhbmNlIHRoYXQgaXMgbWVhbnQgdG8gYmUgdXNlZCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCB0byBidWlsZFxuICogdm9pY2UgYWdlbnRzLiBEdWUgdG8gdGhlIG5hdHVyZSBvZiB0aGlzIGFnZW50LCBzb21lIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBhcmUgbm90IHN1cHBvcnRlZFxuICogdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IHJlZ3VsYXIgYEFnZW50YCBpbnN0YW5jZXMuIEZvciBleGFtcGxlOlxuICogLSBgbW9kZWxgIGNob2ljZSBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYG1vZGVsU2V0dGluZ3NgIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgb3V0cHV0VHlwZWAgaXMgbm90IHN1cHBvcnRlZCBhcyBSZWFsdGltZUFnZW50cyBkbyBub3Qgc3VwcG9ydCBzdHJ1Y3R1cmVkIG91dHB1dHNcbiAqIC0gYHRvb2xVc2VCZWhhdmlvcmAgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGB2b2ljZWAgY2FuIGJlIGNvbmZpZ3VyZWQgb24gYW4gYEFnZW50YCBsZXZlbCBob3dldmVyIGl0IGNhbm5vdCBiZSBjaGFuZ2VkIGFmdGVyIHRoZSBmaXJzdFxuICogICAgYWdlbnQgd2l0aGluIGEgYFJlYWx0aW1lU2Vzc2lvbmAgc3Bva2VcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHNcbiAqIGNvbnN0IGFnZW50ID0gbmV3IFJlYWx0aW1lQWdlbnQoe1xuICogICBuYW1lOiAnbXktYWdlbnQnLFxuICogICBpbnN0cnVjdGlvbnM6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQgdGhhdCBjYW4gYW5zd2VyIHF1ZXN0aW9ucyBhbmQgaGVscCB3aXRoIHRhc2tzLicsXG4gKiB9KVxuICpcbiAqIGNvbnN0IHNlc3Npb24gPSBuZXcgUmVhbHRpbWVTZXNzaW9uKGFnZW50KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUmVhbHRpbWVBZ2VudCBleHRlbmRzIEFnZW50IHtcbiAgICAvKipcbiAgICAgKiBUaGUgdm9pY2UgaW50ZW5kZWQgdG8gYmUgdXNlZCBieSB0aGUgYWdlbnQuIElmIGFub3RoZXIgYWdlbnQgYWxyZWFkeSBzcG9rZSBkdXJpbmcgdGhlXG4gICAgICogUmVhbHRpbWVTZXNzaW9uLCBjaGFuZ2luZyB0aGUgdm9pY2UgZHVyaW5nIGEgaGFuZG9mZiB3aWxsIGZhaWwuXG4gICAgICovXG4gICAgdm9pY2U7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKGNvbmZpZyk7XG4gICAgICAgIHRoaXMudm9pY2UgPSBjb25maWcudm9pY2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhbHRpbWVBZ2VudC5tanMubWFwIiwiaW1wb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZWJvdW5jZVRleHRMZW5ndGg6IHNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA/PyAxMDAsXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCh7IHBvbGljeUhpbnQ6IHBvbGljeUhpbnRJbnB1dCwgLi4ub3B0aW9ucyB9KSB7XG4gICAgY29uc3QgYmFzZUd1YXJkcmFpbCA9IGRlZmluZU91dHB1dEd1YXJkcmFpbChvcHRpb25zKTtcbiAgICBjb25zdCBwb2xpY3lIaW50ID0gcG9saWN5SGludElucHV0ID8/IGJhc2VHdWFyZHJhaWwubmFtZTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5iYXNlR3VhcmRyYWlsLFxuICAgICAgICBwb2xpY3lIaW50LFxuICAgICAgICBydW46IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBiYXNlR3VhcmRyYWlsLnJ1bihhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxuICAgICAgICAgICAgICAgIGd1YXJkcmFpbDogeyAuLi5yZXN1bHQuZ3VhcmRyYWlsLCBwb2xpY3lIaW50IH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIEdlbmVyYXRlcyBhIG1lc3NhZ2UgdGhhdCBpbmZvcm1zIHRoZSBtb2RlbCBhYm91dCB3aHkgdGhlIGd1YXJkcmFpbCB3YXMgdHJpZ2dlcmVkIGFuZCB0b1xuICogY29ycmVjdCB0aGUgYmVoYXZpb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZShyZXN1bHQpIHtcbiAgICByZXR1cm4gYFxu4pqg77iPIFlvdXIgbGFzdCBhbnN3ZXIgd2FzIGJsb2NrZWQuIFxuRmFpbGVkIEd1YXJkcmFpbCBSZWFzb246ICR7cmVzdWx0Lmd1YXJkcmFpbC5wb2xpY3lIaW50fS4gXG5GYWlsdXJlIERldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvID8/IHt9KX0uIFxuUGxlYXNlIHJlc3BvbmQgYWdhaW4gZm9sbG93aW5nIHBvbGljeS4gQXBvbG9naXplIGZvciBub3QgYmVpbmcgYWJsZSB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uICh3aGlsZSBhdm9pZGluZyB0aGUgc3BlY2lmaWMgcmVhc29uKSBhbmQgZGl2ZXJ0IGRpc2N1c3Npb24gYmFjayB0byBhbiBhcHByb3ZlZCB0b3BpYyBpbW1lZGlhdGVseSBhbmQgbm90IGludml0ZSBtb3JlIGRpc2N1c3Npb24uXG5gLnRyaW0oKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWd1YXJkcmFpbC5tanMubWFwIiwiZnVuY3Rpb24gaXNEZWZpbmVkKGtleSwgb2JqZWN0KSB7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBmdWRnaW5nIHdpdGggdHlwZXMgaGVyZSBmb3IgdGhlIGluZGV4IHR5cGVzXG4gICAgcmV0dXJuIGtleSBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFtrZXldICE9PSAndW5kZWZpbmVkJztcbn1cbmZ1bmN0aW9uIGlzRGVwcmVjYXRlZENvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4gKGlzRGVmaW5lZCgnbW9kYWxpdGllcycsIGNvbmZpZykgfHxcbiAgICAgICAgaXNEZWZpbmVkKCdpbnB1dEF1ZGlvRm9ybWF0JywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ291dHB1dEF1ZGlvRm9ybWF0JywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ2lucHV0QXVkaW9UcmFuc2NyaXB0aW9uJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ3R1cm5EZXRlY3Rpb24nLCBjb25maWcpIHx8XG4gICAgICAgIGlzRGVmaW5lZCgnaW5wdXRBdWRpb05vaXNlUmVkdWN0aW9uJywgY29uZmlnKSB8fFxuICAgICAgICBpc0RlZmluZWQoJ3NwZWVkJywgY29uZmlnKSk7XG59XG4vKipcbiAqIENvbnZlcnQgYW55IGdpdmVuIGNvbmZpZyAob2xkIG9yIG5ldykgdG8gdGhlIG5ldyBHQSBjb25maWcgc2hhcGUuXG4gKiBJZiBhIG5ldyBjb25maWcgaXMgcHJvdmlkZWQsIGl0IHdpbGwgYmUgcmV0dXJuZWQgYXMtaXMgKG5vcm1hbGl6ZWQgc2hhbGxvd2x5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTmV3U2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICBpZiAoIWlzRGVwcmVjYXRlZENvbmZpZyhjb25maWcpKSB7XG4gICAgICAgIGNvbnN0IGlucHV0Q29uZmlnID0gY29uZmlnLmF1ZGlvPy5pbnB1dFxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBub3JtYWxpemVBdWRpb0Zvcm1hdChjb25maWcuYXVkaW8uaW5wdXQuZm9ybWF0KSxcbiAgICAgICAgICAgICAgICBub2lzZVJlZHVjdGlvbjogY29uZmlnLmF1ZGlvLmlucHV0Lm5vaXNlUmVkdWN0aW9uID8/IG51bGwsXG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogY29uZmlnLmF1ZGlvLmlucHV0LnRyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgdHVybkRldGVjdGlvbjogY29uZmlnLmF1ZGlvLmlucHV0LnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVxdWVzdGVkT3V0cHV0Vm9pY2UgPSBjb25maWcuYXVkaW8/Lm91dHB1dD8udm9pY2UgPz8gY29uZmlnLnZvaWNlO1xuICAgICAgICBjb25zdCBvdXRwdXRDb25maWcgPSBjb25maWcuYXVkaW8/Lm91dHB1dCB8fCB0eXBlb2YgcmVxdWVzdGVkT3V0cHV0Vm9pY2UgIT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IG5vcm1hbGl6ZUF1ZGlvRm9ybWF0KGNvbmZpZy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQpLFxuICAgICAgICAgICAgICAgIHZvaWNlOiByZXF1ZXN0ZWRPdXRwdXRWb2ljZSxcbiAgICAgICAgICAgICAgICBzcGVlZDogY29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnNwZWVkLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBjb25maWcuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgdG9vbENob2ljZTogY29uZmlnLnRvb2xDaG9pY2UsXG4gICAgICAgICAgICB0b29sczogY29uZmlnLnRvb2xzLFxuICAgICAgICAgICAgdHJhY2luZzogY29uZmlnLnRyYWNpbmcsXG4gICAgICAgICAgICBwcm92aWRlckRhdGE6IGNvbmZpZy5wcm92aWRlckRhdGEsXG4gICAgICAgICAgICBwcm9tcHQ6IGNvbmZpZy5wcm9tcHQsXG4gICAgICAgICAgICBvdXRwdXRNb2RhbGl0aWVzOiBjb25maWcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiBpbnB1dENvbmZpZyB8fCBvdXRwdXRDb25maWdcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGlucHV0Q29uZmlnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG91dHB1dENvbmZpZyxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG1vZGVsOiBjb25maWcubW9kZWwsXG4gICAgICAgIGluc3RydWN0aW9uczogY29uZmlnLmluc3RydWN0aW9ucyxcbiAgICAgICAgdG9vbENob2ljZTogY29uZmlnLnRvb2xDaG9pY2UsXG4gICAgICAgIHRvb2xzOiBjb25maWcudG9vbHMsXG4gICAgICAgIHRyYWNpbmc6IGNvbmZpZy50cmFjaW5nLFxuICAgICAgICBwcm92aWRlckRhdGE6IGNvbmZpZy5wcm92aWRlckRhdGEsXG4gICAgICAgIHByb21wdDogY29uZmlnLnByb21wdCxcbiAgICAgICAgb3V0cHV0TW9kYWxpdGllczogY29uZmlnLm1vZGFsaXRpZXMsXG4gICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLmlucHV0QXVkaW9Gb3JtYXQpLFxuICAgICAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBjb25maWcuaW5wdXRBdWRpb05vaXNlUmVkdWN0aW9uID8/IG51bGwsXG4gICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogY29uZmlnLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIHR1cm5EZXRlY3Rpb246IGNvbmZpZy50dXJuRGV0ZWN0aW9uLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogbm9ybWFsaXplQXVkaW9Gb3JtYXQoY29uZmlnLm91dHB1dEF1ZGlvRm9ybWF0KSxcbiAgICAgICAgICAgICAgICB2b2ljZTogY29uZmlnLnZvaWNlLFxuICAgICAgICAgICAgICAgIHNwZWVkOiBjb25maWcuc3BlZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQXVkaW9Gb3JtYXQoZm9ybWF0KSB7XG4gICAgaWYgKCFmb3JtYXQpXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgaWYgKHR5cGVvZiBmb3JtYXQgPT09ICdvYmplY3QnKVxuICAgICAgICByZXR1cm4gZm9ybWF0O1xuICAgIGNvbnN0IGYgPSBTdHJpbmcoZm9ybWF0KTtcbiAgICBpZiAoZiA9PT0gJ3BjbTE2JylcbiAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH07XG4gICAgaWYgKGYgPT09ICdnNzExX3VsYXcnKVxuICAgICAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtdScgfTtcbiAgICBpZiAoZiA9PT0gJ2c3MTFfYWxhdycpXG4gICAgICAgIHJldHVybiB7IHR5cGU6ICdhdWRpby9wY21hJyB9O1xuICAgIC8vIERlZmF1bHQgZmFsbGJhY2s6IGFzc3VtZSAyNGtIeiBQQ00gaWYgdW5rbm93biBzdHJpbmdcbiAgICByZXR1cm4geyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsaWVudE1lc3NhZ2VzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmV4cG9ydCBjb25zdCBiYXNlSXRlbVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3JvbGUnLCBbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgnc3lzdGVtJyksXG4gICAgICAgIGNvbnRlbnQ6IHouYXJyYXkoei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgICAgIHByZXZpb3VzSXRlbUlkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgICAgIHJvbGU6IHoubGl0ZXJhbCgndXNlcicpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCddKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pLm9yKHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW8nKSxcbiAgICAgICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICAgICAgfSkpKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdhc3Npc3RhbnQnKSxcbiAgICAgICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSwgdGV4dDogei5zdHJpbmcoKSB9KS5vcih6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG59KTtcbmV4cG9ydCBjb25zdCByZWFsdGltZU1jcENhbGxJdGVtID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5lbnVtKFsnbWNwX2NhbGwnLCAnbWNwX3Rvb2xfY2FsbCddKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdtY3BfYXBwcm92YWxfcmVxdWVzdCcpLFxuICAgIHNlcnZlckxhYmVsOiB6LnN0cmluZygpLFxuICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKSxcbiAgICBhcHByb3ZlZDogei5ib29sZWFuKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5jb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6cmVhbHRpbWUnKTtcbmV4cG9ydCBkZWZhdWx0IGxvZ2dlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG4vLyBFdmVudCBzY2hlbWFzIG1pcnJvcmluZyB0aGUgc3RydWN0dXJlcyBkZWZpbmVkIGluIHRoZSBPcGVuQUkgU0RLIHR5cGluZ3MuXG4vLyBNb3N0IGZpZWxkcyBmcm9tIHRoZSBpbnRlcmZhY2VzIGluIGByZWFsdGltZS5kLnRzYCBhcmUgY2FwdHVyZWQgaGVyZSB0b1xuLy8gcHJvdmlkZSBiZXR0ZXIgcnVudGltZSB2YWxpZGF0aW9uIHdoZW4gcGFyc2luZyBldmVudHMgZnJvbSB0aGUgc2VydmVyLlxuZXhwb3J0IGNvbnN0IHJlYWx0aW1lUmVzcG9uc2UgPSB6Lm9iamVjdCh7XG4gICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGNvbnZlcnNhdGlvbl9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWF4X291dHB1dF90b2tlbnM6IHoubnVtYmVyKCkub3Ioei5saXRlcmFsKCdpbmYnKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1ldGFkYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gR0EgcmVuYW1lOiBtb2RhbGl0aWVzIC0+IG91dHB1dF9tb2RhbGl0aWVzXG4gICAgb3V0cHV0X21vZGFsaXRpZXM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5yZXNwb25zZScpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXQ6IHouYXJyYXkoei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIC8vIEdBIGdyb3VwaW5nOiBhdWRpby5vdXRwdXQue2Zvcm1hdCx2b2ljZX1cbiAgICBhdWRpbzogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgb3V0cHV0OiB6XG4gICAgICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICAgIGZvcm1hdDogei5hbnkoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgICAgICB2b2ljZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgICAgIH0pXG4gICAgICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAgICAgLm51bGxhYmxlKCksXG4gICAgfSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgc3RhdHVzOiB6XG4gICAgICAgIC5lbnVtKFsnY29tcGxldGVkJywgJ2luY29tcGxldGUnLCAnZmFpbGVkJywgJ2NhbmNlbGxlZCcsICdpbl9wcm9ncmVzcyddKVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzdGF0dXNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHVzYWdlOiB6XG4gICAgICAgIC5vYmplY3Qoe1xuICAgICAgICBpbnB1dF90b2tlbnM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgaW5wdXRfdG9rZW5fZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbl9kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgfSlcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG59KTtcbi8vIEJhc2ljIGNvbnRlbnQgc2NoZW1hIHVzZWQgYnkgQ29udmVyc2F0aW9uSXRlbS5cbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ29udGVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0ZXh0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICB0eXBlOiB6LnVuaW9uKFtcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF90ZXh0JyksXG4gICAgICAgIHoubGl0ZXJhbCgnaW5wdXRfYXVkaW8nKSxcbiAgICAgICAgei5saXRlcmFsKCdpdGVtX3JlZmVyZW5jZScpLFxuICAgICAgICB6LmxpdGVyYWwoJ291dHB1dF90ZXh0JyksXG4gICAgICAgIHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvJyksXG4gICAgXSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtU2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNvbnRlbnQ6IHouYXJyYXkoY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgcm9sZTogei5lbnVtKFsndXNlcicsICdhc3Npc3RhbnQnLCAnc3lzdGVtJ10pLm9wdGlvbmFsKCksXG4gICAgc3RhdHVzOiB6LmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdpbl9wcm9ncmVzcyddKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHpcbiAgICAgICAgLmVudW0oW1xuICAgICAgICAnbWVzc2FnZScsXG4gICAgICAgICdmdW5jdGlvbl9jYWxsJyxcbiAgICAgICAgJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0JyxcbiAgICAgICAgJ21jcF9saXN0X3Rvb2xzJyxcbiAgICAgICAgJ21jcF90b29sX2NhbGwnLFxuICAgICAgICAnbWNwX2NhbGwnLFxuICAgICAgICAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLFxuICAgICAgICAnbWNwX2FwcHJvdmFsX3Jlc3BvbnNlJyxcbiAgICBdKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBhcHByb3ZlOiB6LmJvb2xlYW4oKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgcmVhc29uOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICBzZXJ2ZXJfbGFiZWw6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlcnJvcjogei5hbnkoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgdG9vbHM6IHpcbiAgICAgICAgLmFycmF5KHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLFxuICAgICAgICBpbnB1dF9zY2hlbWE6IHoucmVjb3JkKHouYW55KCkpLm9wdGlvbmFsKCksXG4gICAgfSlcbiAgICAgICAgLnBhc3N0aHJvdWdoKCkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnZlcnNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuY29udmVyc2F0aW9uJykub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuLy8gR0EgcmVuYW1lOiBjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkIC0+IGNvbnZlcnNhdGlvbi5pdGVtLmFkZGVkXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbi8vIEdBIGFkZGl0aW9uOiBjb252ZXJzYXRpb24uaXRlbS5kb25lXG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIGxvZ3Byb2JzOiB6LmFycmF5KHouYW55KCkpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uZmFpbGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGVycm9yOiB6Lm9iamVjdCh7XG4gICAgICAgIGNvZGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBwYXJhbTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0udHJ1bmNhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLmRlbGV0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgZXJyb3JFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Vycm9yJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBlcnJvcjogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuYXBwZW5kJyksXG4gICAgYXVkaW86IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNsZWFyJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmNvbW1pdHRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19zdGFydF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuc3BlZWNoX3N0b3BwZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGF1ZGlvX2VuZF9tczogei5udW1iZXIoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdGFydGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyU3RvcHBlZEV2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IG91dHB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmF0ZV9saW1pdHMudXBkYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJhdGVfbGltaXRzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgbGltaXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgbmFtZTogei5lbnVtKFsncmVxdWVzdHMnLCAndG9rZW5zJ10pLm9wdGlvbmFsKCksXG4gICAgICAgIHJlbWFpbmluZzogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICByZXNldF9zZWNvbmRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgfSkpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfYXVkaW8uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpby5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRlbHRhJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIC8vICBHQSBtYXkgaW50cm9kdWNlIHJlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRvbmVcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9hdWRpb190cmFuc2NyaXB0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNvbnRlbnRfcGFydC5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG4gICAgcGFydDogei5vYmplY3Qoe1xuICAgICAgICBhdWRpbzogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5lbnVtKFsndGV4dCcsICdhdWRpbyddKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNvbnRlbnRfcGFydC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNyZWF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZTogcmVhbHRpbWVSZXNwb25zZSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuZnVuY3Rpb25fY2FsbF9hcmd1bWVudHMuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjYWxsX2lkOiB6LnN0cmluZygpLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZVRleHREb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgLy8gTm8gcmVuYW1lIHNwZWNpZmllZCBmb3IgZG9uZTsga2VlcCByZXNwb25zZS50ZXh0LmRvbmVcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm91dHB1dF90ZXh0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VDYW5jZWxFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmNhbmNlbCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jcmVhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlOiB6LmFueSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdzZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9saXN0X3Rvb2xzLmluX3Byb2dyZXNzJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBtY3BMaXN0VG9vbHNDb21wbGV0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ21jcF9saXN0X3Rvb2xzLmNvbXBsZXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLm1jcF9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLFxuICAgIG9iZnVzY2F0aW9uOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UubWNwX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZU1jcENhbGxJblByb2dyZXNzRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbC5pbl9wcm9ncmVzcycpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VNY3BDYWxsQ29tcGxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5tY3BfY2FsbC5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IG1jcExpc3RUb29sc0ZhaWxlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWNwX2xpc3RfdG9vbHMuZmFpbGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8qKlxuICogVGhpcyBzY2hlbWEgaXMgdXNlZCBpZiBhbiBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQuIFRoZSBSZWFsdGltZSBBUEkgbWlnaHQgaW50cm9kdWNlXG4gKiBuZXcgZXZlbnRzIGF0IHNvbWUgcG9pbnQgYW5kIHdlIHNob3VsZCBoYW5kbGUgdGhlbSBncmFjZWZ1bGx5IGJ5IHRyZWF0aW5nIHRoZW0gYXMgZ2VuZXJpYyBldmVudHNcbiAqIG9ubHkgcmVxdWlyaW5nIGEgdHlwZSBhbmQgYW4gb3B0aW9uYWwgZXZlbnRfaWQuXG4gKi9cbmV4cG9ydCBjb25zdCBnZW5lcmljRXZlbnRTY2hlbWEgPSB6XG4gICAgLm9iamVjdCh7XG4gICAgdHlwZTogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KVxuICAgIC5wYXNzdGhyb3VnaCgpO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUFkZGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRGVsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSxcbiAgICBlcnJvckV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSxcbiAgICBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSxcbiAgICByYXRlTGltaXRzVXBkYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ29udGVudFBhcnREb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VGdW5jdGlvbkNhbGxBcmd1bWVudHNEZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERlbHRhRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICBtY3BMaXN0VG9vbHNJblByb2dyZXNzRXZlbnRTY2hlbWEsXG4gICAgbWNwTGlzdFRvb2xzQ29tcGxldGVkRXZlbnRTY2hlbWEsXG4gICAgbWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU1jcENhbGxBcmd1bWVudHNEb25lRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VNY3BDYWxsSW5Qcm9ncmVzc0V2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hLFxuXSk7XG5leHBvcnQgY29uc3QgcmVhbHRpbWVDbGllbnRFdmVudFNjaGVtYSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlRXZlbnRTY2hlbWEsXG4gICAgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hLFxuXSk7XG4vKipcbiAqIFBhcnNlcyBhIHJlYWx0aW1lIGV2ZW50IGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudCwgaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGEgZ2VuZXJpYyBldmVudC5cbiAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBwYXJzZS5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgZXZlbnQgb3IgbnVsbCBpZiB0aGUgZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KSB7XG4gICAgY29uc3QgcmF3ID0gSlNPTi5wYXJzZShldmVudC5kYXRhLnRvU3RyaW5nKCkpO1xuICAgIGNvbnN0IHBhcnNlZCA9IHJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHJhdyk7XG4gICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICBjb25zdCBnZW5lcmljUGFyc2VkID0gZ2VuZXJpY0V2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgICAgICBpZiAoZ2VuZXJpY1BhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBnZW5lcmljUGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGRhdGE6IG51bGwsIGlzR2VuZXJpYzogdHJ1ZSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBkYXRhOiBwYXJzZWQuZGF0YSwgaXNHZW5lcmljOiBmYWxzZSB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVFdmVudHMubWpzLm1hcCIsImltcG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIsIFVzYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyB0b05ld1Nlc3Npb25Db25maWcsIH0gZnJvbSBcIi4vY2xpZW50TWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtLCByZWFsdGltZU1jcENhbGxJdGVtLCByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLCByZWFsdGltZVRvb2xDYWxsSXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWFsdGltZUV2ZW50LCByZXNwb25zZURvbmVFdmVudFNjaGVtYSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IGFycmF5QnVmZmVyVG9CYXNlNjQsIGRpZmZSZWFsdGltZUhpc3RvcnkgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCB7IEV2ZW50RW1pdHRlckRlbGVnYXRlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG4vKipcbiAqIFRoZSBkZWZhdWx0IG1vZGVsIHRoYXQgaXMgdXNlZCBkdXJpbmcgdGhlIGNvbm5lY3Rpb24gaWYgbm8gbW9kZWwgaXMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCA9ICdncHQtcmVhbHRpbWUnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBzZXNzaW9uIGNvbmZpZyB0aGF0IGdldHMgc2VuZCBvdmVyIGR1cmluZyBzZXNzaW9uIGNvbm5lY3Rpb24gdW5sZXNzIG92ZXJyaWRkZW5cbiAqIGJ5IHRoZSB1c2VyLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcgPSB7XG4gICAgb3V0cHV0TW9kYWxpdGllczogWydhdWRpbyddLFxuICAgIGF1ZGlvOiB7XG4gICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHsgdHlwZTogJ2F1ZGlvL3BjbScsIHJhdGU6IDI0MDAwIH0sXG4gICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiB7IG1vZGVsOiAnZ3B0LTRvLW1pbmktdHJhbnNjcmliZScgfSxcbiAgICAgICAgICAgIHR1cm5EZXRlY3Rpb246IHsgdHlwZTogJ3NlbWFudGljX3ZhZCcgfSxcbiAgICAgICAgICAgIG5vaXNlUmVkdWN0aW9uOiBudWxsLFxuICAgICAgICB9LFxuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgIGZvcm1hdDogeyB0eXBlOiAnYXVkaW8vcGNtJywgcmF0ZTogMjQwMDAgfSxcbiAgICAgICAgICAgIHNwZWVkOiAxLFxuICAgICAgICB9LFxuICAgIH0sXG59O1xuZXhwb3J0IGNsYXNzIE9wZW5BSVJlYWx0aW1lQmFzZSBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICAjbW9kZWw7XG4gICAgI2FwaUtleTtcbiAgICAjdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgI3Jhd1Nlc3Npb25Db25maWcgPSBudWxsO1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI21vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50TW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICogKipOb3RlKio6IFRoZSBtb2RlbCBjYW5ub3QgYmUgY2hhbmdlZCBtaWQgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHNldCBjdXJyZW50TW9kZWwobW9kZWwpIHtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgZ2V0IF9yYXdTZXNzaW9uQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcmF3U2Vzc2lvbkNvbmZpZyA/PyBudWxsO1xuICAgIH1cbiAgICBhc3luYyBfZ2V0QXBpS2V5KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXkgPz8gdGhpcy4jYXBpS2V5O1xuICAgICAgICBpZiAodHlwZW9mIGFwaUtleSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGFwaUtleSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcGlLZXk7XG4gICAgfVxuICAgIF9vbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KGV2ZW50KTtcbiAgICAgICAgaWYgKHBhcnNlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnKicsIHBhcnNlZCk7XG4gICAgICAgIGlmIChpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBwYXJzZWQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQocGFyc2VkLnR5cGUsIHBhcnNlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuY3JlYXRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9zdGFydGVkJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9zdGFydGVkJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlckRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLnVwZGF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNyYXdTZXNzaW9uQ29uZmlnID0gcGFyc2VkLnNlc3Npb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/Lm91dHB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3VzYWdlX3VwZGF0ZScsIHVzYWdlKTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHVybl9kb25lJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZV9kb25lJyxcbiAgICAgICAgICAgICAgICByZXNwb25zZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS5pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLm91dHB1dCA/PyBbXSxcbiAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5pbnB1dF90b2tlbl9kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VuX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfdGV4dC5kZWx0YScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRlbHRhJykge1xuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmFkZGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZWQnKSB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgTUNQIGxpc3QgdG9vbHMgaXRlbXMgKG9ubHkgYWN0IHdoZW4gZG9uZSB0byBlbnN1cmUgdG9vbHMgYXJlIHByZXNlbnQpXG4gICAgICAgICAgICBpZiAocGFyc2VkLml0ZW0udHlwZSA9PT0gJ21jcF9saXN0X3Rvb2xzJyAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJMYWJlbCA9IHBhcnNlZC5pdGVtLnNlcnZlcl9sYWJlbCA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IChwYXJzZWQuaXRlbS50b29scyA/PyBbXSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtY3BfdG9vbHNfbGlzdGVkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29scyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBlbWl0dGluZyBtY3BfdG9vbHNfbGlzdGVkJywgZXJyLCBwYXJzZWQuaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBhZGQgdGhpcyBpdGVtIHRvIGhpc3Rvcnk7IGl0J3MgYSB0cmFuc3BvcnQtbGV2ZWwgc2lkZS1jaGFubmVsLlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uYWRkZWQnIHx8XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2FwcHJvdmFsX3JlcXVlc3QnICYmXG4gICAgICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BBcHByb3ZhbFJlcXVlc3QgPSByZWFsdGltZU1jcENhbGxBcHByb3ZhbFJlcXVlc3RJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlckxhYmVsOiBpdGVtLnNlcnZlcl9sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IEpTT04ucGFyc2UoaXRlbS5hcmd1bWVudHMgfHwgJ3t9JyksXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmVkOiBpdGVtLmFwcHJvdmVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCBtY3BBcHByb3ZhbFJlcXVlc3QpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX3Rvb2xfY2FsbCcgfHxcbiAgICAgICAgICAgICAgICBwYXJzZWQuaXRlbS50eXBlID09PSAnbWNwX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJ1xuICAgICAgICAgICAgICAgICAgICA/ICdjb21wbGV0ZWQnXG4gICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJztcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBwYXJzZWQuaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlZC5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcGFyc2VkLml0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kb25lJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgbWNwQ2FsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5tY3BfY2FsbC5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyxcbiAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdtY3BfbGlzdF90b29scy5pbl9wcm9ncmVzcycpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQ7XG4gICAgICAgICAgICBpZiAoaXRlbS5pdGVtX2lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScgfHxcbiAgICAgICAgICAgIHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uYWRkZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gcGFyc2VkLml0ZW07XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcgJiYgaXRlbS5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbENhbGwgPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsIC8vIHdlIHNldCBpdCB0byBpbl9wcm9ncmVzcyBmb3IgdGhlIFVJIGFzIGl0IHdpbGwgb25seSBiZSBjb21wbGV0ZWQgd2l0aCB0aGUgb3V0cHV0XG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogaXRlbS5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiBudWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCB0b29sQ2FsbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmdW5jdGlvbl9jYWxsJywge1xuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICBjYWxsSWQ6IGl0ZW0uY2FsbF9pZCA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyA/PyAnJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtY3BfdG9vbF9jYWxsJyB8fCBpdGVtLnR5cGUgPT09ICdtY3BfY2FsbCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BDYWxsID0gcmVhbHRpbWVNY3BDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogaXRlbS50eXBlLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gJ2NvbXBsZXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IGl0ZW0ub3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBtY3BDYWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFsdGltZUl0ZW0gPSByZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLm91dHB1dF9pdGVtLmRvbmUnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChpdGVtLnN0YXR1cyA/PyAnY29tcGxldGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogKGl0ZW0uc3RhdHVzID8/ICdpbl9wcm9ncmVzcycpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCByZWFsdGltZUl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBfb25FcnJvcihlcnJvcikge1xuICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX29uT3BlbigpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0ZWQnKTtcbiAgICB9XG4gICAgX29uQ2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBjcmVhdGUgYSBuZXcgaXRlbSBpbiB0aGUgY29udmVyc2F0aW9uIGFuZFxuICAgICAqIHRyaWdnZXIgYSByZXNwb25zZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIG1lc3NhZ2UgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3RoZXJFdmVudERhdGEgLSBBZGRpdGlvbmFsIGV2ZW50IGRhdGEgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kTWVzc2FnZShtZXNzYWdlLCBvdGhlckV2ZW50RGF0YSwgeyB0cmlnZ2VyUmVzcG9uc2UgPSB0cnVlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF90ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXVxuICAgICAgICAgICAgOiBtZXNzYWdlLmNvbnRlbnQubWFwKChjb250ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ2lucHV0X2ltYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2ltYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlX3VybDogY29udGVudC5pbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLihjb250ZW50LnByb3ZpZGVyRGF0YSA/PyB7fSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5vdGhlckV2ZW50RGF0YSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0cmlnZ2VyUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgICAgY29udGVudDogW3sgdHlwZTogJ2lucHV0X2ltYWdlJywgaW1hZ2UgfV0sXG4gICAgICAgIH0sIHt9LCB7IHRyaWdnZXJSZXNwb25zZSB9KTtcbiAgICB9XG4gICAgX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG5ld0NvbmZpZyA9IHRvTmV3U2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5ld0NvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogbmV3Q29uZmlnLm1vZGVsID8/IHRoaXMuI21vZGVsLFxuICAgICAgICAgICAgb3V0cHV0X21vZGFsaXRpZXM6IG5ld0NvbmZpZy5vdXRwdXRNb2RhbGl0aWVzID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcub3V0cHV0TW9kYWxpdGllcyxcbiAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py5mb3JtYXQgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5pbnB1dD8uZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBub2lzZV9yZWR1Y3Rpb246IG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/Lm5vaXNlUmVkdWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2NyaXB0aW9uOiBuZXdDb25maWcuYXVkaW8/LmlucHV0Py50cmFuc2NyaXB0aW9uID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnRyYW5zY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIHR1cm5fZGV0ZWN0aW9uOiBPcGVuQUlSZWFsdGltZUJhc2UuYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKG5ld0NvbmZpZy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24pID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8uaW5wdXQ/LnR1cm5EZXRlY3Rpb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8uZm9ybWF0ID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5mb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIHZvaWNlOiBuZXdDb25maWcuYXVkaW8/Lm91dHB1dD8udm9pY2UgPz9cbiAgICAgICAgICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmF1ZGlvPy5vdXRwdXQ/LnZvaWNlLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogbmV3Q29uZmlnLmF1ZGlvPy5vdXRwdXQ/LnNwZWVkID8/XG4gICAgICAgICAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5hdWRpbz8ub3V0cHV0Py5zcGVlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBuZXdDb25maWcudG9vbENob2ljZSA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLnRvb2xDaG9pY2UsXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihuZXdDb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG5ld0NvbmZpZy5wcm9tcHQpIHtcbiAgICAgICAgICAgIHNlc3Npb25EYXRhLnByb21wdCA9IHtcbiAgICAgICAgICAgICAgICBpZDogbmV3Q29uZmlnLnByb21wdC5wcm9tcHRJZCxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBuZXdDb25maWcucHJvbXB0LnZlcnNpb24sXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiBuZXdDb25maWcucHJvbXB0LnZhcmlhYmxlcyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5ld0NvbmZpZy50b29scyAmJiBuZXdDb25maWcudG9vbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgc2Vzc2lvbkRhdGEudG9vbHMgPSBuZXdDb25maWcudG9vbHMubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICBzdGF0aWMgYnVpbGRUdXJuRGV0ZWN0aW9uQ29uZmlnKGMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHR5cGUsIGNyZWF0ZVJlc3BvbnNlLCBjcmVhdGVfcmVzcG9uc2UsIGVhZ2VybmVzcywgaW50ZXJydXB0UmVzcG9uc2UsIGludGVycnVwdF9yZXNwb25zZSwgcHJlZml4UGFkZGluZ01zLCBwcmVmaXhfcGFkZGluZ19tcywgc2lsZW5jZUR1cmF0aW9uTXMsIHNpbGVuY2VfZHVyYXRpb25fbXMsIHRocmVzaG9sZCwgaWRsZVRpbWVvdXRNcywgaWRsZV90aW1lb3V0X21zLCAuLi5yZXN0IH0gPSBjO1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY3JlYXRlX3Jlc3BvbnNlOiBjcmVhdGVSZXNwb25zZSA/IGNyZWF0ZVJlc3BvbnNlIDogY3JlYXRlX3Jlc3BvbnNlLFxuICAgICAgICAgICAgZWFnZXJuZXNzLFxuICAgICAgICAgICAgaW50ZXJydXB0X3Jlc3BvbnNlOiBpbnRlcnJ1cHRSZXNwb25zZVxuICAgICAgICAgICAgICAgID8gaW50ZXJydXB0UmVzcG9uc2VcbiAgICAgICAgICAgICAgICA6IGludGVycnVwdF9yZXNwb25zZSxcbiAgICAgICAgICAgIHByZWZpeF9wYWRkaW5nX21zOiBwcmVmaXhQYWRkaW5nTXMgPyBwcmVmaXhQYWRkaW5nTXMgOiBwcmVmaXhfcGFkZGluZ19tcyxcbiAgICAgICAgICAgIHNpbGVuY2VfZHVyYXRpb25fbXM6IHNpbGVuY2VEdXJhdGlvbk1zXG4gICAgICAgICAgICAgICAgPyBzaWxlbmNlRHVyYXRpb25Nc1xuICAgICAgICAgICAgICAgIDogc2lsZW5jZV9kdXJhdGlvbl9tcyxcbiAgICAgICAgICAgIGlkbGVfdGltZW91dF9tczogaWRsZVRpbWVvdXRNcyA/IGlkbGVUaW1lb3V0TXMgOiBpZGxlX3RpbWVvdXRfbXMsXG4gICAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9O1xuICAgICAgICAvLyBSZW1vdmUgdW5kZWZpbmVkIHZhbHVlcyBmcm9tIHRoZSBjb25maWdcbiAgICAgICAgT2JqZWN0LmtleXMoY29uZmlnKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWdba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjb25maWdba2V5XTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjb25maWcpLmxlbmd0aCA+IDAgPyBjb25maWcgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGludGVybmFsIHRyYWNpbmcgY29uZmlnLiBUaGlzIGlzIHVzZWQgdG8gdHJhY2sgdGhlIHRyYWNpbmcgY29uZmlnIHRoYXQgaGFzIGJlZW4gc2V0XG4gICAgICogZHVyaW5nIHRoZSBzZXNzaW9uLmNyZWF0ZSBldmVudC5cbiAgICAgKi9cbiAgICBzZXQgX3RyYWNpbmdDb25maWcodHJhY2luZ0NvbmZpZykge1xuICAgICAgICB0aGlzLiN0cmFjaW5nQ29uZmlnID0gdHJhY2luZ0NvbmZpZztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdHJhY2luZyBjb25maWcgZm9yIHRoZSBzZXNzaW9uLiBUaGlzIHdpbGwgc2VuZCB0aGUgdHJhY2luZyBjb25maWcgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFjaW5nQ29uZmlnIC0gVGhlIHRyYWNpbmcgY29uZmlnIHRvIHNldC4gV2UgZG9uJ3Qgc3VwcG9ydCAnYXV0bycgaGVyZSBhcyB0aGUgU0RLIHdpbGwgYWx3YXlzIGNvbmZpZ3VyZSBhIFdvcmtmbG93IE5hbWUgdW5sZXNzIGl0IGV4aXN0c1xuICAgICAqL1xuICAgIF91cGRhdGVUcmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0cmFjaW5nQ29uZmlnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gdHJlYXRpbmcgaXQgYXMgZGVmYXVsdCB2YWx1ZVxuICAgICAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYWNpbmdDb25maWcgPT09ICdhdXRvJykge1xuICAgICAgICAgICAgLy8gdHVybiBvbiB0cmFjaW5nIGluIGF1dG8gbW9kZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnICE9PSBudWxsICYmXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycgJiZcbiAgICAgICAgICAgIHR5cGVvZiB0cmFjaW5nQ29uZmlnICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gdHJhY2luZyBpcyBhbHJlYWR5IHNldCwgd2UgY2FuJ3QgY2hhbmdlIGl0XG4gICAgICAgICAgICBsb2dnZXIud2FybignVHJhY2luZyBjb25maWcgaXMgYWxyZWFkeSBzZXQsIHNraXBwaW5nIHNldHRpbmcgaXQgYWdhaW4uIFRoaXMgbGlrZWx5IGhhcHBlbnMgd2hlbiB5b3UgYWxyZWFkeSBzZXQgYSB0cmFjaW5nIGNvbmZpZyBvbiBzZXNzaW9uIGNyZWF0aW9uLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSBudWxsKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ0Rpc2FibGluZyB0cmFjaW5nIGZvciB0aGlzIHNlc3Npb24uIEl0IGNhbm5vdCBiZSB0dXJuZWQgb24gZm9yIHRoaXMgc2Vzc2lvbiBmcm9tIHRoaXMgcG9pbnQgb24uJyk7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiN0cmFjaW5nQ29uZmlnID09PSBudWxsIHx8XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgY3VycmVudGx5IG5vdCBzZXQgc28gd2UgY2FuIHNldCBpdCB0byB0aGUgbmV3IHZhbHVlXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyZWFsdGltZScsXG4gICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnPy5ncm91cF9pZCAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/Lm1ldGFkYXRhICE9PSB0aGlzLiN0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSB8fFxuICAgICAgICAgICAgdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ud29ya2Zsb3dfbmFtZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ01pc21hdGNoIGluIHRyYWNpbmcgY29uZmlnLiBJZ25vcmluZyB0aGUgbmV3IHRyYWNpbmcgY29uZmlnLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4gQ3VycmVudCB0cmFjaW5nIGNvbmZpZzogJXMsIG5ldyB0cmFjaW5nIGNvbmZpZzogJXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLiN0cmFjaW5nQ29uZmlnKSwgSlNPTi5zdHJpbmdpZnkodHJhY2luZ0NvbmZpZykpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICBzZXNzaW9uOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNlc3Npb24gY29uZmlnLiBUaGlzIHdpbGwgbWVyZ2UgaXQgd2l0aCB0aGUgY3VycmVudCBzZXNzaW9uIGNvbmZpZyB3aXRoIHRoZSBkZWZhdWx0XG4gICAgICogdmFsdWVzIGFuZCBzZW5kIGl0IHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gVGhlIHNlc3Npb24gY29uZmlnIHRvIHVwZGF0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGVTZXNzaW9uQ29uZmlnKGNvbmZpZykge1xuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHRoaXMuX2dldE1lcmdlZFNlc3Npb25Db25maWcoY29uZmlnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Nlc3Npb24udXBkYXRlJyxcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3Npb25EYXRhLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCB0aGUgb3V0cHV0IG9mIGEgZnVuY3Rpb24gY2FsbCB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRvb2xDYWxsIC0gVGhlIHRvb2wgY2FsbCB0byBzZW5kIHRoZSBvdXRwdXQgZm9yLlxuICAgICAqIEBwYXJhbSBvdXRwdXQgLSBUaGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBjYWxsLlxuICAgICAqIEBwYXJhbSBzdGFydFJlc3BvbnNlIC0gV2hldGhlciB0byBzdGFydCBhIG5ldyByZXNwb25zZSBhZnRlciBzZW5kaW5nIHRoZSBvdXRwdXQuXG4gICAgICovXG4gICAgc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCBzdGFydFJlc3BvbnNlID0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIGl0ZW06IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbF9vdXRwdXQnLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgICAgICBjYWxsX2lkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSByZWFsdGltZVRvb2xDYWxsSXRlbS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiB0b29sQ2FsbC5pZCxcbiAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZDogdG9vbENhbGwucHJldmlvdXNJdGVtSWQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzOiB0b29sQ2FsbC5hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGwubmFtZSxcbiAgICAgICAgICAgICAgICBvdXRwdXQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnaXRlbV91cGRhdGUnLCBpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcGFyc2luZyB0b29sIGNhbGwgaXRlbScsIGVycm9yLCB0b29sQ2FsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXJ0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYW4gYXVkaW8gYnVmZmVyIHRvIHRoZSBSZWFsdGltZSBBUEkuIElmIGB7IGNvbW1pdDogdHJ1ZSB9YCBpcyBwYXNzZWQsIHRoZSBhdWRpbyBidWZmZXJcbiAgICAgKiB3aWxsIGJlIGNvbW1pdHRlZCBhbmQgdGhlIG1vZGVsIHdpbGwgc3RhcnQgcHJvY2Vzc2luZyBpdC4gVGhpcyBpcyBuZWNlc3NhcnkgaWYgeW91IGhhdmVcbiAgICAgKiBkaXNhYmxlZCB0dXJuIGRldGVjdGlvbiAvIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyBidWZmZXIgdG8gc2VuZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgeyBjb21taXQgPSBmYWxzZSB9ID0ge30pIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5hcHBlbmQnLFxuICAgICAgICAgICAgYXVkaW86IGFycmF5QnVmZmVyVG9CYXNlNjQoYXVkaW8pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbW1pdCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uIFRoaXMgd2lsbCBjcmVhdGUgYSBkaWZmIGJldHdlZW4gdGhlIG9sZCBhbmQgbmV3IGhpc3RvcnlcbiAgICAgKiBhbmQgc2VuZCB0aGUgbmVjZXNzYXJ5IGV2ZW50cyB0byB0aGUgUmVhbHRpbWUgQVBJIHRvIHVwZGF0ZSB0aGUgaGlzdG9yeS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbGRIaXN0b3J5IC0gVGhlIG9sZCBoaXN0b3J5IG9mIHRoZSBjb252ZXJzYXRpb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICByZXNldEhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSkge1xuICAgICAgICBjb25zdCB7IHJlbW92YWxzLCBhZGRpdGlvbnMsIHVwZGF0ZXMgfSA9IGRpZmZSZWFsdGltZUhpc3Rvcnkob2xkSGlzdG9yeSwgbmV3SGlzdG9yeSk7XG4gICAgICAgIGNvbnN0IHJlbW92YWxJZHMgPSBuZXcgU2V0KHJlbW92YWxzLm1hcCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQpKTtcbiAgICAgICAgLy8gd2UgZG9uJ3QgaGF2ZSBhbiB1cGRhdGUgZXZlbnQgZm9yIGl0ZW1zIHNvIHdlIHdpbGwgcmVtb3ZlIGFuZCByZS1hZGQgd2hhdCdzIHRoZXJlXG4gICAgICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHJlbW92YWxJZHMuYWRkKHVwZGF0ZS5pdGVtSWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZW1vdmFsSWRzLnNpemUgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW1JZCBvZiByZW1vdmFsSWRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uZGVsZXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbV9pZDogaXRlbUlkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZGl0aW9uc0FuZFVwZGF0ZXMgPSBbLi4uYWRkaXRpb25zLCAuLi51cGRhdGVzXTtcbiAgICAgICAgZm9yIChjb25zdCBhZGRpdGlvbiBvZiBhZGRpdGlvbnNBbmRVcGRhdGVzKSB7XG4gICAgICAgICAgICBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWVzc2FnZScsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IGFkZGl0aW9uLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGFkZGl0aW9uLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBhZGRpdGlvbi5pdGVtSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb24ucm9sZSAhPT0gJ3N5c3RlbScgJiYgYWRkaXRpb24uc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1FbnRyeS5zdGF0dXMgPSBhZGRpdGlvbi5zdGF0dXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1FbnRyeSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFkZGl0aW9uLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdGdW5jdGlvbiBjYWxscyBjYW5ub3QgYmUgbWFudWFsbHkgYWRkZWQgb3IgdXBkYXRlZCBhdCB0aGUgbW9tZW50LiBJZ25vcmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZW5kTWNwUmVzcG9uc2UoYXBwcm92YWxSZXF1ZXN0LCBhcHByb3ZlZCkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgIHByZXZpb3VzX2l0ZW1faWQ6IGFwcHJvdmFsUmVxdWVzdC5pdGVtSWQsXG4gICAgICAgICAgICBpdGVtOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgYXBwcm92YWxfcmVxdWVzdF9pZDogYXBwcm92YWxSZXF1ZXN0Lml0ZW1JZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lQmFzZS5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbmltcG9ydCB7IGlzQnJvd3NlckVudmlyb25tZW50IH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbmltcG9ydCB7IEhFQURFUlMgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlJUQy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0IGNhblxuICogYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKlxuICogVW5sZXNzIHlvdSBzcGVjaWZ5IGEgYG1lZGlhU3RyZWFtYCBvciBgYXVkaW9FbGVtZW50YCBvcHRpb24sIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbFxuICogYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlIG1pY3JvcGhvbmUgYW5kIGF1ZGlvIG91dHB1dCB0byBiZSB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJSVEMgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgIG9wdGlvbnM7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgIGRhdGFDaGFubmVsOiB1bmRlZmluZWQsXG4gICAgICAgIGNhbGxJZDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAjbXV0ZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBSVENQZWVyQ29ubmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLiN1cmwgPSBvcHRpb25zLmJhc2VVcmwgPz8gYGh0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWUvY2FsbHNgO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNhbGwgSUQgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBjYWxsSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5jYWxsSWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW5jbHVkaW5nIHRoZSBwZWVyIGNvbm5lY3Rpb24gYW5kIGRhdGFcbiAgICAgKiBjaGFubmVsLlxuICAgICAqL1xuICAgIGdldCBjb25uZWN0aW9uU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgc2Vzc2lvbiBpcyBtdXRlZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtdXRlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29ubmVjdCB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgZXN0YWJsaXNoIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBPcGVuQUkgUmVhbHRpbWUgQVBJXG4gICAgICogdmlhIFdlYlJUQy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyLCB0aGUgdHJhbnNwb3J0IGxheWVyIHdpbGwgYWxzbyBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGVcbiAgICAgKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3Qob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgPT09ICdjb25uZWN0aW5nJykge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1JlYWx0aW1lIGNvbm5lY3Rpb24gYWxyZWFkeSBpbiBwcm9ncmVzcy4gUGxlYXNlIGF3YWl0IG9yaWdpbmFsIHByb21pc2UnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtb2RlbCA9IG9wdGlvbnMubW9kZWwgPz8gdGhpcy5jdXJyZW50TW9kZWw7XG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsID0gbW9kZWw7XG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBvcHRpb25zLnVybCA/PyB0aGlzLiN1cmw7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IGF3YWl0IHRoaXMuX2dldEFwaUtleShvcHRpb25zKTtcbiAgICAgICAgY29uc3QgaXNDbGllbnRLZXkgPSB0eXBlb2YgYXBpS2V5ID09PSAnc3RyaW5nJyAmJiBhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJyk7XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSAmJiAhaXNDbGllbnRLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJSVEMgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBuZWVkIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgdXNlIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0IG9yIHNldCB0aGUgYHVzZUluc2VjdXJlQXBpS2V5YCBvcHRpb24gdG8gdHJ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyU2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5jdXJyZW50TW9kZWwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uVXJsID0gbmV3IFVSTChiYXNlVXJsKTtcbiAgICAgICAgICAgICAgICBsZXQgcGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhQ2hhbm5lbCA9IHBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKCdvYWktZXZlbnRzJyk7XG4gICAgICAgICAgICAgICAgbGV0IGNhbGxJZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGluZycsXG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgY2FsbElkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxJZCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgcGVlckNvbm5lY3Rpb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICghb2ZmZXIuc2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBvZmZlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZHBSZXNwb25zZSA9IGF3YWl0IGZldGNoKGNvbm5lY3Rpb25VcmwsIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IG9mZmVyLnNkcCxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9zZHAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBIRUFERVJTWydYLU9wZW5BSS1BZ2VudHMtU0RLJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY2FsbElkID0gc2RwUmVzcG9uc2UuaGVhZGVycz8uZ2V0KCdMb2NhdGlvbicpPy5zcGxpdCgnLycpLnBvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgY2FsbElkIH07XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBhd2FpdCBzZHBSZXNwb25zZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCB8fFxuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBkYXRhIGNoYW5uZWwgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgb3IgdW5tdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI211dGVkID0gbXV0ZWQ7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkgYW5kIGRpc2Nvbm5lY3RzIHRoZSB1bmRlcmx5aW5nIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjaz8uc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgIT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBjYWxsSWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVzcG9uc2UgaWYgb25lIGlzIG9uZ29pbmcgYW5kIGNsZWFyIHRoZSBhdWRpbyBidWZmZXIgc28gdGhhdCB0aGUgYWdlbnRcbiAgICAgKiBzdG9wcyB0YWxraW5nLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0O1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IGNvbnN0IHVzZVdlYlNvY2tldFByb3RvY29scyA9IHRydWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaGltcy1icm93c2VyLm1qcy5tYXAiLCJpbXBvcnQgeyBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgdXNlV2ViU29ja2V0UHJvdG9jb2xzLCBXZWJTb2NrZXQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtcmVhbHRpbWUvX3NoaW1zJztcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lQmFzZSwgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5pbXBvcnQgeyBiYXNlNjRUb0FycmF5QnVmZmVyLCBIRUFERVJTLCBXRUJTT0NLRVRfTUVUQSB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5pbXBvcnQgeyBwYXJzZVJlYWx0aW1lRXZlbnQgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUV2ZW50cy5tanNcIjtcbi8qKlxuICogVHJhbnNwb3J0IGxheWVyIHRoYXQncyBoYW5kbGluZyB0aGUgY29ubmVjdGlvbiBiZXR3ZWVuIHRoZSBjbGllbnQgYW5kIE9wZW5BSSdzIFJlYWx0aW1lIEFQSVxuICogdmlhIFdlYlNvY2tldHMuIFdoaWxlIHRoaXMgdHJhbnNwb3J0IGxheWVyIGlzIGRlc2lnbmVkIHRvIGJlIHVzZWQgd2l0aGluIGEgUmVhbHRpbWVTZXNzaW9uLCBpdFxuICogY2FuIGFsc28gYmUgdXNlZCBzdGFuZGFsb25lIGlmIHlvdSB3YW50IHRvIGhhdmUgYSBkaXJlY3QgY29ubmVjdGlvbiB0byB0aGUgUmVhbHRpbWUgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQgZXh0ZW5kcyBPcGVuQUlSZWFsdGltZUJhc2Uge1xuICAgICNhcGlLZXk7XG4gICAgI3VybDtcbiAgICAjc3RhdGUgPSB7XG4gICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgIH07XG4gICAgI3VzZUluc2VjdXJlQXBpS2V5O1xuICAgICNjdXJyZW50SXRlbUlkO1xuICAgICNjdXJyZW50QXVkaW9Db250ZW50SW5kZXg7XG4gICAgLyoqXG4gICAgICogVGltZXN0YW1wIG1haW50YWluZWQgYnkgdGhlIHRyYW5zcG9ydCBsYXllciB0byBhaWQgd2l0aCB0aGUgY2FsY3VsYXRpb24gb2YgdGhlIGVsYXBzZWQgdGltZVxuICAgICAqIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkIHRvIGNvbXB1dGUgdGhlIHJpZ2h0IGludGVycnVwdGlvbiB0aW1lLlxuICAgICAqXG4gICAgICogTW9zdGx5IGludGVybmFsIGJ1dCBtaWdodCBiZSB1c2VkIGJ5IGV4dGVuZGVkIHRyYW5zcG9ydCBsYXllcnMgZm9yIHRoZWlyIGludGVycnVwdGlvblxuICAgICAqIGNhbGN1bGF0aW9uLlxuICAgICAqL1xuICAgIF9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgIF9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI2NyZWF0ZVdlYlNvY2tldDtcbiAgICAjc2tpcE9wZW5FdmVudExpc3RlbmVycztcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSA9IG9wdGlvbnMudXNlSW5zZWN1cmVBcGlLZXkgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuI2NyZWF0ZVdlYlNvY2tldCA9IG9wdGlvbnMuY3JlYXRlV2ViU29ja2V0O1xuICAgICAgICB0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID0gb3B0aW9ucy5za2lwT3BlbkV2ZW50TGlzdGVuZXJzID8/IGZhbHNlO1xuICAgIH1cbiAgICBnZXRDb21tb25SZXF1ZXN0SGVhZGVycygpIHtcbiAgICAgICAgcmV0dXJuIEhFQURFUlM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlLnN0YXR1cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29ubmVjdGlvbiBzdGF0ZSBvZiB0aGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgZ2V0IGNvbm5lY3Rpb25TdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3N0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbHdheXMgcmV0dXJucyBgbnVsbGAgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3QgaGFuZGxlIG11dGluZy4gSW5zdGVhZCxcbiAgICAgKiB0aGlzIHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBjbGllbnQgYnkgbm90IHRyaWdnZXJpbmcgdGhlIGBzZW5kQXVkaW9gIG1ldGhvZC5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBpdGVtIElEIG9mIHRoZSBvbmdvaW5nIHJlc3BvbnNlLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50SXRlbUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY3VycmVudEl0ZW1JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcnMgdGhlIGBhdWRpb2AgZXZlbnQgdGhhdCBhIGNsaWVudCBtaWdodCBsaXN0ZW4gdG8gdG8gcmVjZWl2ZSB0aGUgYXVkaW8gYnVmZmVyLlxuICAgICAqIFByb3RlY3RlZCBmb3IgeW91IHRvIGJlIGFibGUgdG8gb3ZlcnJpZGUgYW5kIGRpc2FibGUgZW1pdHRpbmcgdGhpcyBldmVudCBpbiBjYXNlIHlvdXIgZXh0ZW5kZWRcbiAgICAgKiB0cmFuc3BvcnQgbGF5ZXIgaGFuZGxlcyBhdWRpbyBpbnRlcm5hbGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvRXZlbnQgLSBUaGUgYXVkaW8gZXZlbnQgdG8gZW1pdC5cbiAgICAgKi9cbiAgICBfb25BdWRpbyhhdWRpb0V2ZW50KSB7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW8nLCBhdWRpb0V2ZW50KTtcbiAgICB9XG4gICAgYXN5bmMgI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZykge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUud2Vic29ja2V0KSB7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLiNhcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FQSSBrZXkgaXMgbm90IHNldC4gUGxlYXNlIGNhbGwgYGNvbm5lY3QoKWAgd2l0aCBhbiBBUEkga2V5IGZpcnN0LicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Jyb3dzZXJFbnZpcm9ubWVudCgpICYmXG4gICAgICAgICAgICAhdGhpcy4jYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpICYmXG4gICAgICAgICAgICAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ1VzaW5nIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQgcmVxdWlyZXMgYW4gZXBoZW1lcmFsIGNsaWVudCBrZXkuIElmIHlvdSBoYXZlIHRvIHVzZSBhIHJlZ3VsYXIgQVBJIGtleSwgc2V0IHRoZSBgdXNlSW5zZWN1cmVBcGlLZXlgIG9wdGlvbiB0byB0cnVlLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3cyA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLiNjcmVhdGVXZWJTb2NrZXQpIHtcbiAgICAgICAgICAgIHdzID0gYXdhaXQgdGhpcy4jY3JlYXRlV2ViU29ja2V0KHtcbiAgICAgICAgICAgICAgICB1cmw6IHRoaXMuI3VybCxcbiAgICAgICAgICAgICAgICBhcGlLZXk6IHRoaXMuI2FwaUtleSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYnJvd3NlcnMgYW5kIHdvcmtlcmQgc2hvdWxkIHVzZSB0aGUgcHJvdG9jb2xzIGFyZ3VtZW50LCBub2RlIHNob3VsZCB1c2UgdGhlIGhlYWRlcnMgYXJndW1lbnRcbiAgICAgICAgICAgIGNvbnN0IHdlYnNvY2tldEFyZ3VtZW50cyA9IHVzZVdlYlNvY2tldFByb3RvY29sc1xuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICAncmVhbHRpbWUnLFxuICAgICAgICAgICAgICAgICAgICAvLyBBdXRoXG4gICAgICAgICAgICAgICAgICAgICdvcGVuYWktaW5zZWN1cmUtYXBpLWtleS4nICsgdGhpcy4jYXBpS2V5LFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJzaW9uIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICBXRUJTT0NLRVRfTUVUQSxcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiNhcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2V0Q29tbW9uUmVxdWVzdEhlYWRlcnMoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuI3VybCwgd2Vic29ja2V0QXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YXR1czogJ2Nvbm5lY3RpbmcnLFxuICAgICAgICAgICAgd2Vic29ja2V0OiB3cyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgIGNvbnN0IG9uU29ja2V0T3BlblJlYWR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLiNza2lwT3BlbkV2ZW50TGlzdGVuZXJzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBvblNvY2tldE9wZW5SZWFkeSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsIG9uU29ja2V0T3BlblJlYWR5KTtcbiAgICAgICAgfVxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2Uub3V0cHV0X2F1ZGlvLmRlbHRhJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHBhcnNlZC5jb250ZW50X2luZGV4O1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSBwYXJzZWQuaXRlbV9pZDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBzdGFydCB0aW1lc3RhbXAgaXMgbm90IHNldCwgd2Ugc2V0IGl0IHRvIHRoZSBjdXJyZW50IHRpbWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGVsYXBzZWQgdGltZSBmb3IgaW50ZXJydXB0aW9uLlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmYgPSBiYXNlNjRUb0FycmF5QnVmZmVyKHBhcnNlZC5kZWx0YSk7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBhdWRpbyBsZW5ndGggaW4gbWlsbGlzZWNvbmRzXG4gICAgICAgICAgICAgICAgLy8gR0EgZm9ybWF0OiBzZXNzaW9uLmF1ZGlvLm91dHB1dC5mb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCB7IHR5cGU6IFwiYXVkaW8vcGNtXCIsIHJhdGUgfSBvciBcImF1ZGlvL3BjbXVcIiBldGMuXG4gICAgICAgICAgICAgICAgY29uc3QgZm10ID0gdGhpcy5fcmF3U2Vzc2lvbkNvbmZpZz8uYXVkaW8/Lm91dHB1dD8uZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChmbXQgJiYgdHlwZW9mIGZtdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RydWN0dXJlZCBmb3JtYXRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZtdC50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCA9PT0gJ2F1ZGlvL3BjbXUnIHx8IHQgPT09ICdhdWRpby9wY21hJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gOGtIeiwgMSBieXRlIHBlciBzYW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gODtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09PSAnYXVkaW8vcGNtJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF0ZSA9IGZtdC5yYXRlID8/IDI0MDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnl0ZXMgLT4gc2FtcGxlcyAoMiBieXRlcyBwZXIgc2FtcGxlKSAtPiBtc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSAoYnVmZi5ieXRlTGVuZ3RoIC8gMiAvIHJhdGUpICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGFzc3VtcHRpb24gc2ltaWxhciB0byBsZWdhY3lcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBmbXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmbXQuc3RhcnRzV2l0aCgnZzcxMV8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyArPSBidWZmLmJ5dGVMZW5ndGggLyA4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXNzdW1lIDI0a0h6IFBDTTE2XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCB0byAyNGtIeiBQQ00xNiBiZWhhdmlvciBpZiB1bnNwZWNpZmllZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zICs9IGJ1ZmYuYnl0ZUxlbmd0aCAvIDI0IC8gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9FdmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2F1ZGlvJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogYnVmZixcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VJZDogcGFyc2VkLnJlc3BvbnNlX2lkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fb25BdWRpbyhhdWRpb0V2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdGFydGVkJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCA9IHRoaXMuX3Jhd1Nlc3Npb25Db25maWc/LmF1ZGlvPy5pbnB1dD8udHVybl9kZXRlY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPy5pbnRlcnJ1cHRfcmVzcG9uc2UgPz8gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoIWF1dG9tYXRpY1Jlc3BvbnNlQ2FuY2VsbGF0aW9uRW5hYmxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcnNlZC50eXBlID09PSAnc2Vzc2lvbi5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNpbmdDb25maWcgPSBwYXJzZWQuc2Vzc2lvbi50cmFjaW5nO1xuICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRyYWNpbmdDb25maWcoc2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Rpc2Nvbm5lY3RlZCcsXG4gICAgICAgICAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLl9vbkNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICB0aGlzLiNhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHVybCA9IG9wdGlvbnMudXJsID8/XG4gICAgICAgICAgICB0aGlzLiN1cmwgPz9cbiAgICAgICAgICAgIGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIHRoaXMuI3VybCA9IHVybDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLmN1cnJlbnRNb2RlbCxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKS5jYXRjaChyZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyB3aWxsIGFsc28gcmVzZXQgYW55IGludGVybmFsIGNvbm5lY3Rpb24gdHJhY2tpbmcgdXNlZCBmb3IgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQ/LmNsb3NlKCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpbGwgdGhyb3cgYW4gZXJyb3IgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgbXV0ZShfbXV0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LiBZb3UgaGF2ZSB0byBtdXRlIHRoZSBhdWRpbyBpbnB1dCB5b3Vyc2VsZi4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIGZvciB5b3VyIGNsaWVudCB0byBzZW5kIGF1ZGlvIHRvIHRoZVxuICAgICAqIG1vZGVsIHRvIHJlc3BvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgc3VwZXIuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgY2FuY2VsIHJlc3BvbnNlIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCB0byBjYW5jZWwgYW4gb25nb2luZ1xuICAgICAqICByZXNwb25zZSB0aGF0IHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgZ2VuZXJhdGluZy5cbiAgICAgKi9cbiAgICBfY2FuY2VsUmVzcG9uc2UoKSB7XG4gICAgICAgIC8vIGNhbmNlbCB0aGUgb25nb2luZyByZXNwb25zZVxuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvIE5PVCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBDYWxsIGBpbnRlcnJ1cHQoKWAgaW5zdGVhZCBmb3IgcHJvcGVyIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VuZCB0aGUgcmlnaHQgZXZlbnRzIHRvIHRoZSBBUEkgdG8gaW5mb3JtIHRoZSBtb2RlbCB0aGF0IHRoZSB1c2VyIGhhc1xuICAgICAqIGludGVycnVwdGVkIHRoZSByZXNwb25zZS4gSXQgbWlnaHQgYmUgb3ZlcnJpZGRlbi9leHRlbmRlZCBieSBhbiBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXIuIFNlZVxuICAgICAqIHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmAgZm9yIGFuIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxhcHNlZFRpbWUgLSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkLlxuICAgICAqL1xuICAgIF9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKGVsYXBzZWRUaW1lIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGltbWVkaWF0ZWx5IGVtaXQgdGhpcyBldmVudCBzbyB0aGUgY2xpZW50IGNhbiBzdG9wIHBsYXlpbmcgYXVkaW9cbiAgICAgICAgaWYgKGNhbmNlbE9uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FuY2VsUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl9hdWRpb0xlbmd0aE1zID8/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICAgICAgLy8gYXVkaW9fZW5kX21zIG11c3QgYmUgYW4gaW50ZWdlclxuICAgICAgICBjb25zdCBhdWRpb19lbmRfbXMgPSBNYXRoLm1heCgwLCBNYXRoLmZsb29yKE1hdGgubWluKGVsYXBzZWRUaW1lLCBsZW5ndGgpKSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnKTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlJyxcbiAgICAgICAgICAgIGl0ZW1faWQ6IHRoaXMuI2N1cnJlbnRJdGVtSWQsXG4gICAgICAgICAgICBjb250ZW50X2luZGV4OiB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXgsXG4gICAgICAgICAgICBhdWRpb19lbmRfbXMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIG9uZ29pbmcgcmVzcG9uc2UuIFRoaXMgbWV0aG9kIGlzIHRyaWdnZXJlZCBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjbGllbnQgd2hlblxuICAgICAqIHZvaWNlIGFjdGl2aXR5IGRldGVjdGlvbiAoVkFEKSBpcyBlbmFibGVkIChkZWZhdWx0KSBhcyB3ZWxsIGFzIHdoZW4gYW4gb3V0cHV0IGd1YXJkcmFpbCBnb3RcbiAgICAgKiB0cmlnZ2VyZWQuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIGFsc28gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseSBpZiB5b3Ugd2FudCB0byBpbnRlcnJ1cHQgdGhlIGNvbnZlcnNhdGlvbiBmb3IgZXhhbXBsZVxuICAgICAqIGJhc2VkIG9uIGFuIGV2ZW50IGluIHRoZSBjbGllbnQuXG4gICAgICovXG4gICAgaW50ZXJydXB0KGNhbmNlbE9uZ29pbmdSZXNwb25zZSA9IHRydWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNjdXJyZW50SXRlbUlkIHx8IHR5cGVvZiB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gRGF0ZS5ub3coKSAtIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgICAgIGlmIChlbGFwc2VkVGltZSA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUsIGNhbmNlbE9uZ29pbmdSZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMubWFwIiwiaW1wb3J0IHsgVXNlckVycm9yLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCA9IFN5bWJvbCgnYmFja2dyb3VuZFJlc3VsdCcpO1xuZXhwb3J0IGZ1bmN0aW9uIGJhY2tncm91bmRSZXN1bHQoY29udGVudCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFtCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0xdOiB0cnVlLFxuICAgICAgICBjb250ZW50LFxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCYWNrZ3JvdW5kUmVzdWx0KHJlc3VsdCkge1xuICAgIHJldHVybiAodHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgcmVzdWx0ICE9PSBudWxsICYmXG4gICAgICAgIEJBQ0tHUk9VTkRfUkVTVUxUX1NZTUJPTCBpbiByZXN1bHQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRSZWFsdGltZVRvb2wodG9vbCkge1xuICAgIHJldHVybiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nIHx8XG4gICAgICAgICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24odG9vbCkge1xuICAgIGlmICh0b29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHRvb2w7XG4gICAgfVxuICAgIGlmICh0b29sLnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdG9vbC5uYW1lID09PSAnaG9zdGVkX21jcCcpIHtcbiAgICAgICAgY29uc3Qgc2VydmVyVXJsID0gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybCAmJiB0b29sLnByb3ZpZGVyRGF0YS5zZXJ2ZXJfdXJsLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX3VybFxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogdG9vbC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogc2VydmVyVXJsLFxuICAgICAgICAgICAgaGVhZGVyczogdG9vbC5wcm92aWRlckRhdGEuaGVhZGVycyxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvb2wucHJvdmlkZXJEYXRhLmFsbG93ZWRfdG9vbHMsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0b29sLnByb3ZpZGVyRGF0YS5yZXF1aXJlX2FwcHJvdmFsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBJbnZhbGlkIHRvb2wgdHlwZTogJHt0b29sfWApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9vbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0VHJhbnNmZXJNZXNzYWdlLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBSdW5Db250ZXh0LCBSdW5Ub29sQXBwcm92YWxJdGVtLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGlzWm9kT2JqZWN0LCB0b1NtYXJ0U3RyaW5nIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG5pbXBvcnQgeyBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UsIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBhcHByb3ZhbEl0ZW1Ub1JlYWx0aW1lQXBwcm92YWxJdGVtLCBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsIGhhc1dlYlJUQ1N1cHBvcnQsIHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0sIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaXNCYWNrZ3JvdW5kUmVzdWx0LCBpc1ZhbGlkUmVhbHRpbWVUb29sLCB0b1JlYWx0aW1lVG9vbERlZmluaXRpb24sIH0gZnJvbSBcIi4vdG9vbC5tanNcIjtcbmZ1bmN0aW9uIGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcpKTtcbn1cbi8qKlxuICogQSBgUmVhbHRpbWVTZXNzaW9uYCBpcyB0aGUgY29ybmVyc3RvbmUgb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRhdGVzIGhhbmRvZmZzLlxuICpcbiAqIFRoZSBhY3R1YWwgYXVkaW8gaGFuZGxpbmcgYW5kIGdlbmVyYXRpb24gb2YgbW9kZWwgcmVzcG9uc2VzIGlzIGhhbmRsZWQgYnkgdGhlIHVuZGVybHlpbmdcbiAqIHRyYW5zcG9ydCBsYXllci4gQnkgZGVmYXVsdCBpZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciB3aXRoIFdlYlJUQyBzdXBwb3J0LCB0aGUgc2Vzc2lvbiB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IHVzZSB0aGUgV2ViUlRDIHZlcnNpb24gb2YgdGhlIE9wZW5BSSBSZWFsdGltZSBBUEkuIE9uIHRoZSBzZXJ2ZXIgb3IgaWYgeW91IHBhc3NcbiAqIGB3ZWJzb2NrZXRgIGFzIHRoZSB0cmFuc3BvcnQgbGF5ZXIsIHRoZSBzZXNzaW9uIHdpbGwgZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB1c2luZyBXZWJTb2NrZXRzLlxuICpcbiAqIEluIHRoZSBjYXNlIG9mIFdlYlJUQywgaW4gdGhlIGJyb3dzZXIsIHRoZSB0cmFuc3BvcnQgbGF5ZXIgd2lsbCBhbHNvIGF1dG9tYXRpY2FsbHkgY29uZmlndXJlIHRoZVxuICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKlxuICogWW91IGNhbiBhbHNvIGNyZWF0ZSBhIHRyYW5zcG9ydCBsYXllciBpbnN0YW5jZSB5b3Vyc2VsZiBhbmQgcGFzcyBpdCBpbiB0byBoYXZlIG1vcmUgY29udHJvbCBvdmVyXG4gKiB0aGUgY29uZmlndXJhdGlvbiBvciBldmVuIGV4dGVuZCB0aGUgZXhpc3Rpbmcgb25lcy4gQ2hlY2sgb3V0IHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmBcbiAqIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBjcmVhdGUgYSBjdXN0b20gdHJhbnNwb3J0IGxheWVyLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogc2Vzc2lvbi5jb25uZWN0KHtcbiAqICAgYXBpS2V5OiAneW91ci1hcGkta2V5JyxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZVNlc3Npb24gZXh0ZW5kcyBSdW50aW1lRXZlbnRFbWl0dGVyIHtcbiAgICBpbml0aWFsQWdlbnQ7XG4gICAgb3B0aW9ucztcbiAgICAjdHJhbnNwb3J0O1xuICAgICNjdXJyZW50QWdlbnQ7XG4gICAgI2N1cnJlbnRUb29scztcbiAgICAjY29udGV4dDtcbiAgICAjb3V0cHV0R3VhcmRyYWlscyA9IFtdO1xuICAgICNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncztcbiAgICAjdHJhbnNjcmliZWRUZXh0RGVsdGFzID0ge307XG4gICAgI2hpc3RvcnkgPSBbXTtcbiAgICAjc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YTtcbiAgICAjaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCA9IHt9O1xuICAgICNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAvLyBUcmFja3MgYWxsIE1DUCB0b29scyBmZXRjaGVkIHBlciBzZXJ2ZXIgbGFiZWwgKGZyb20gbWNwX2xpc3RfdG9vbHMgcmVzdWx0cykuXG4gICAgI2FsbE1jcFRvb2xzQnlTZXJ2ZXIgPSBuZXcgTWFwKCk7XG4gICAgLy8gVHJhY2tzIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBhY3RpdmUgYWdlbnQncyBjb25maWd1cmVkIHNlcnZlcl9sYWJlbHMuXG4gICAgI2F2YWlsYWJsZU1jcFRvb2xzID0gW107XG4gICAgLy8gS2VlcHMgdHJhY2sgb2YgdGhlIGxhc3QgZnVsbCBzZXNzaW9uIGNvbmZpZyB3ZSBzZW50IChjYW1lbENhc2Uga2V5cykgc28gdGhhdFxuICAgIC8vIHN1YnNlcXVlbnQgdXBkYXRlcyAoZS5nLiBkdXJpbmcgYWdlbnQgaGFuZG9mZnMpIHByZXNlcnZlIHByb3BlcnRpZXMgdGhhdCBhcmVcbiAgICAvLyBub3QgZXhwbGljaXRseSByZWNhbGN1bGF0ZWQgaGVyZSAoc3VjaCBhcyBpbnB1dEF1ZGlvRm9ybWF0LCBvdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAvLyBtb2RhbGl0aWVzLCBzcGVlZCwgdG9vbENob2ljZSwgdHVybkRldGVjdGlvbiwgZXRjLikuIFdpdGhvdXQgdGhpcywgdXBkYXRpbmdcbiAgICAvLyB0aGUgYWdlbnQgd291bGQgZHJvcCBhdWRpbyBmb3JtYXQgb3ZlcnJpZGVzIChlLmcuIGc3MTFfdWxhdykgYW5kIHJldmVydCB0b1xuICAgIC8vIHRyYW5zcG9ydCBkZWZhdWx0cyBjYXVzaW5nIGlzc3VlcyBmb3IgaW50ZWdyYXRpb25zIGxpa2UgVHdpbGlvLlxuICAgICNsYXN0U2Vzc2lvbkNvbmZpZyA9IGNsb25lRGVmYXVsdFNlc3Npb25Db25maWcoKTtcbiAgICAjYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9IHRydWU7XG4gICAgY29uc3RydWN0b3IoaW5pdGlhbEFnZW50LCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pbml0aWFsQWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJyAmJiBoYXNXZWJSVENTdXBwb3J0KCkpIHx8XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zcG9ydCA9PT0gJ3dlYnJ0YycpIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG5ldyBPcGVuQUlSZWFsdGltZVdlYlJUQygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2Vic29ja2V0JyB8fFxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMudHJhbnNwb3J0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBvcHRpb25zLnRyYW5zcG9ydDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBpbml0aWFsQWdlbnQ7XG4gICAgICAgIHRoaXMuI2NvbnRleHQgPSBuZXcgUnVuQ29udGV4dCh7XG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5jb250ZXh0ID8/IHt9KSxcbiAgICAgICAgICAgIGhpc3Rvcnk6IHRoaXMuI2hpc3RvcnksXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxzID0gKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKTtcbiAgICAgICAgdGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPSBnZXRSZWFsdGltZUd1YXJkcmFpbFNldHRpbmdzKG9wdGlvbnMub3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MgPz8ge30pO1xuICAgICAgICB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhID0gb3B0aW9ucy5oaXN0b3J5U3RvcmVBdWRpbyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscyA9XG4gICAgICAgICAgICBvcHRpb25zLmF1dG9tYXRpY2FsbHlUcmlnZ2VyUmVzcG9uc2VGb3JNY3BUb29sQ2FsbHMgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zcG9ydCBsYXllciB1c2VkIGJ5IHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB0cmFuc3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGFnZW50IGluIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50QWdlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHVzYWdlIG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCB1c2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQudXNhZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbnRleHQgb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjb250ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBzZXNzaW9uIGlzIG11dGVkLiBNaWdodCBiZSBgbnVsbGAgaWYgdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyIGRvZXMgbm90XG4gICAgICogc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhbnNwb3J0Lm11dGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgaGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2hpc3Rvcnk7XG4gICAgfVxuICAgIGdldCBhdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgIH1cbiAgICBhc3luYyAjc2V0Q3VycmVudEFnZW50KGFnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGFnZW50O1xuICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZUb29scyA9IGhhbmRvZmZzLm1hcCgoaGFuZG9mZikgPT4gaGFuZG9mZi5nZXRIYW5kb2ZmQXNGdW5jdGlvblRvb2woKSk7XG4gICAgICAgIGNvbnN0IGFsbFRvb2xzID0gKGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KSlcbiAgICAgICAgICAgIC5maWx0ZXIoaXNWYWxpZFJlYWx0aW1lVG9vbClcbiAgICAgICAgICAgIC5tYXAodG9SZWFsdGltZVRvb2xEZWZpbml0aW9uKTtcbiAgICAgICAgY29uc3QgaGFzVG9vbHNEZWZpbmVkID0gdHlwZW9mIHRoaXMuI2N1cnJlbnRBZ2VudC50b29scyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQubWNwU2VydmVycyAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgICAgIGNvbnN0IGhhc0hhbmRvZmZzRGVmaW5lZCA9IGhhbmRvZmZzLmxlbmd0aCA+IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRUb29scyA9XG4gICAgICAgICAgICBoYXNUb29sc0RlZmluZWQgfHwgaGFzSGFuZG9mZnNEZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBbLi4uYWxsVG9vbHMsIC4uLmhhbmRvZmZUb29sc11cbiAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gUmVjb21wdXRlIGN1cnJlbnRseSBhdmFpbGFibGUgTUNQIHRvb2xzIGJhc2VkIG9uIHRoZSBuZXcgYWdlbnQncyBhY3RpdmUgc2VydmVyIGxhYmVscy5cbiAgICAgICAgdGhpcy4jdXBkYXRlQXZhaWxhYmxlTWNwVG9vbHMoKTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFN0YXJ0IGZyb20gYW55IHByZXZpb3VzbHktc2VudCBjb25maWcgKHNvIHdlIHByZXNlcnZlIHZhbHVlcyBsaWtlIGF1ZGlvIGZvcm1hdHMpXG4gICAgICAgIC8vIGFuZCB0aGUgb3JpZ2luYWwgb3B0aW9ucy5jb25maWcgcHJvdmlkZWQgYnkgdGhlIHVzZXIuIFByZWZlcmVuY2Ugb3JkZXI6XG4gICAgICAgIC8vIDEuIExhc3Qgc2Vzc2lvbiBjb25maWcgd2Ugc2VudCAoI2xhc3RTZXNzaW9uQ29uZmlnKVxuICAgICAgICAvLyAyLiBPcmlnaW5hbCBvcHRpb25zLmNvbmZpZ1xuICAgICAgICAvLyAzLiBBZGRpdGlvbmFsIGNvbmZpZyBwYXNzZWQgaW50byB0aGlzIGludm9jYXRpb24gKGV4cGxpY2l0IG92ZXJyaWRlcylcbiAgICAgICAgLy8gRmluYWxseSB3ZSBvdmVyd3JpdGUgZHluYW1pYyBmaWVsZHMgKGluc3RydWN0aW9ucywgdm9pY2UsIG1vZGVsLCB0b29scywgdHJhY2luZylcbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoZXkgYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgYWdlbnQgJiBydW50aW1lIHN0YXRlLlxuICAgICAgICBjb25zdCBiYXNlID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLih0aGlzLm9wdGlvbnMuY29uZmlnID8/IHt9KSxcbiAgICAgICAgICAgIC4uLihhZGRpdGlvbmFsQ29uZmlnID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gTm90ZTogQ2VydGFpbiBmaWVsZHMgY2Fubm90IGJlIHVwZGF0ZWQgYWZ0ZXIgdGhlIHNlc3Npb24gYmVnaW5zLCBzdWNoIGFzIHZvaWNlIGFuZCBtb2RlbFxuICAgICAgICBjb25zdCBmdWxsQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uYmFzZSxcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyxcbiAgICAgICAgICAgIHZvaWNlOiB0aGlzLiNjdXJyZW50QWdlbnQudm9pY2UsXG4gICAgICAgICAgICBtb2RlbDogdGhpcy5vcHRpb25zLm1vZGVsLFxuICAgICAgICAgICAgdG9vbHM6IHRoaXMuI2N1cnJlbnRUb29scyxcbiAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICBwcm9tcHQ6IHR5cGVvZiB0aGlzLiNjdXJyZW50QWdlbnQucHJvbXB0ID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLiNjdXJyZW50QWdlbnQucHJvbXB0KHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudClcbiAgICAgICAgICAgICAgICA6IHRoaXMuI2N1cnJlbnRBZ2VudC5wcm9tcHQsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFVwZGF0ZSBvdXIgY2FjaGUgc28gc3Vic2VxdWVudCB1cGRhdGVzIGluaGVyaXQgdGhlIGZ1bGwgc2V0IGluY2x1ZGluZyBhbnlcbiAgICAgICAgLy8gZHluYW1pYyBmaWVsZHMgd2UganVzdCBvdmVyd3JvdGUuXG4gICAgICAgIHRoaXMuI2xhc3RTZXNzaW9uQ29uZmlnID0gZnVsbENvbmZpZztcbiAgICAgICAgcmV0dXJuIGZ1bGxDb25maWc7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZUFnZW50KG5ld0FnZW50KSB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KG5ld0FnZW50KTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LnVwZGF0ZVNlc3Npb25Db25maWcoYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZygpKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlSGFuZG9mZih0b29sQ2FsbCwgaGFuZG9mZikge1xuICAgICAgICBjb25zdCBuZXdBZ2VudCA9IChhd2FpdCBoYW5kb2ZmLm9uSW52b2tlSGFuZG9mZih0aGlzLiNjb250ZXh0LCB0b29sQ2FsbC5hcmd1bWVudHMpKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICAvLyB1cGRhdGUgc2Vzc2lvbiB3aXRoIG5ldyBhZ2VudFxuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICBjb25zdCBvdXRwdXQgPSBnZXRUcmFuc2Zlck1lc3NhZ2UobmV3QWdlbnQpO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgb3V0cHV0LCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIG5ld0FnZW50O1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbCh0b29sQ2FsbCwgdG9vbCkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sQ2FsbC5hcmd1bWVudHM7XG4gICAgICAgIGlmICh0b29sLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpc1pvZE9iamVjdCh0b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2wucGFyYW1ldGVycy5wYXJzZShwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlZEFyZ3MgPSBKU09OLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lZWRzQXBwcm92YWwgPSBhd2FpdCB0b29sLm5lZWRzQXBwcm92YWwodGhpcy4jY29udGV4dCwgcGFyc2VkQXJncywgdG9vbENhbGwuY2FsbElkKTtcbiAgICAgICAgaWYgKG5lZWRzQXBwcm92YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsID0gdGhpcy5jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICAgICAgICAgIHRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHJlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0b29sLCByZXN1bHQsIHtcbiAgICAgICAgICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCwge1xuICAgICAgICAgICAgdG9vbENhbGwsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy4jaGlzdG9yeSkpOyAvLyBkZWVwIGNvcHkgb2YgdGhlIGhpc3RvcnlcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5pbnZva2UodGhpcy4jY29udGV4dCwgdG9vbENhbGwuYXJndW1lbnRzLCB7XG4gICAgICAgICAgICB0b29sQ2FsbCxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzdHJpbmdSZXN1bHQ7XG4gICAgICAgIGlmIChpc0JhY2tncm91bmRSZXN1bHQocmVzdWx0KSkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZ2VuZXJhdGUgYSBuZXcgcmVzcG9uc2UsIGp1c3Qgc2VuZCB0aGUgcmVzdWx0XG4gICAgICAgICAgICBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdC5jb250ZW50KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBzdHJpbmdSZXN1bHQsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCwgeyB0b29sQ2FsbCB9KTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdG9vbCwgc3RyaW5nUmVzdWx0LCB7IHRvb2xDYWxsIH0pO1xuICAgIH1cbiAgICBhc3luYyAjaGFuZGxlRnVuY3Rpb25DYWxsKHRvb2xDYWxsKSB7XG4gICAgICAgIGNvbnN0IGVuYWJsZWRIYW5kb2ZmcyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRFbmFibGVkSGFuZG9mZnModGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGVuYWJsZWRIYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IFtoYW5kb2ZmLnRvb2xOYW1lLCBoYW5kb2ZmXSkpO1xuICAgICAgICBjb25zdCBhbGxUb29scyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRBbGxUb29scyh0aGlzLiNjb250ZXh0KTtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sTWFwID0gbmV3IE1hcChhbGxUb29scy5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlSGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICBpZiAocG9zc2libGVIYW5kb2ZmKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBwb3NzaWJsZUhhbmRvZmYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sID0gZnVuY3Rpb25Ub29sTWFwLmdldCh0b29sQ2FsbC5uYW1lKTtcbiAgICAgICAgICAgIGlmIChmdW5jdGlvblRvb2wgJiYgZnVuY3Rpb25Ub29sLnR5cGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCBmdW5jdGlvblRvb2wpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke3Rvb2xDYWxsLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKG91dHB1dCwgcmVzcG9uc2VJZCwgaXRlbUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvciwge1xuICAgICAgICAgICAgICAgIGl0ZW1JZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnJ1cHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZlZWRiYWNrVGV4dCA9IGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQpO1xuICAgICAgICAgICAgdGhpcy5zZW5kTWVzc2FnZShmZWVkYmFja1RleHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgICNzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCcqJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3RyYW5zcG9ydF9ldmVudCcsIGV2ZW50KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBjb21wbGV0ZWQgdXNlciB0cmFuc2NyaXB0aW9uIGV2ZW50c1xuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmNvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRFdmVudCA9IGV2ZW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGNvbXBsZXRlZEV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdtY3BfdG9vbHNfbGlzdGVkJywgKHsgc2VydmVyTGFiZWwsIHRvb2xzIH0pID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5zZXQoc2VydmVyTGFiZWwsIHRvb2xzID8/IFtdKTtcbiAgICAgICAgICAgICAgICB0aGlzLiN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7IHR5cGU6ICdlcnJvcicsIGVycm9yOiBlcnIgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuI2F1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2F1ZGlvU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvJywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX3N0YXJ0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9kb25lJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZXZlbnQucmVzcG9uc2Uub3V0cHV0W2V2ZW50LnJlc3BvbnNlLm91dHB1dC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRleHRPdXRwdXQgPSBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UoaXRlbSkgPz8gJyc7XG4gICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBpdGVtPy5pZCA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQsIGl0ZW1JZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX2RvbmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX3N0b3BwZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IGxhc3RSdW5JbmRleCA9IDA7XG4gICAgICAgIGxldCBsYXN0SXRlbUlkO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2F1ZGlvX3RyYW5zY3JpcHRfZGVsdGEnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBldmVudC5kZWx0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtSWQgPSBldmVudC5pdGVtSWQ7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VJZCA9IGV2ZW50LnJlc3BvbnNlSWQ7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3RJdGVtSWQgIT09IGl0ZW1JZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0SXRlbUlkID0gaXRlbUlkO1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGV4dCA9IHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID8/ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSBjdXJyZW50VGV4dCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zY3JpYmVkVGV4dERlbHRhc1tpdGVtSWRdID0gbmV3VGV4dDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy4jb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1J1bkluZGV4ID0gTWF0aC5mbG9vcihuZXdUZXh0Lmxlbmd0aCAvIHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1J1bkluZGV4ID4gbGFzdFJ1bkluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RSdW5JbmRleCA9IG5ld1J1bkluZGV4O1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBjYW5jZWwgZXhpc3RpbmcgcnVucyBiZWNhdXNlIHdlIHdhbnQgdGhlIGZpcnN0IG9uZSB0byBmYWlsIHRvIGZhaWxcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zcG9ydCBsYXllciBzaG91bGQgdXBvbiBmYWlsdXJlIGhhbmRsZSB0aGUgaW50ZXJydXB0aW9uIGFuZCBzdG9wIHRoZSBtb2RlbFxuICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIGdlbmVyYXRpbmcgZnVydGhlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKG5ld1RleHQsIHJlc3BvbnNlSWQsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ2l0ZW1fdXBkYXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzTmV3ID0gIXRoaXMuI2hpc3Rvcnkuc29tZSgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSh0aGlzLiNoaXN0b3J5LCBldmVudCwgdGhpcy4jc2hvdWxkSW5jbHVkZUF1ZGlvRGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIGlmIChpc05ldykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRlZEl0ZW0gPSB0aGlzLiNoaXN0b3J5LmZpbmQoKGl0ZW0pID0+IGl0ZW0uaXRlbUlkID09PSBldmVudC5pdGVtSWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkZWRJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfYWRkZWQnLCBhZGRlZEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV9kZWxldGVkJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI2hpc3RvcnkgPSB0aGlzLiNoaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pdGVtSWQgIT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSB0aGlzLiNoaXN0b3J5O1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV91cGRhdGVkJywgdGhpcy4jaGlzdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZnVuY3Rpb25fY2FsbCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvbkNhbGwoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBoYW5kbGluZyBmdW5jdGlvbiBjYWxsJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd1c2FnZV91cGRhdGUnLCAodXNhZ2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuI2NvbnRleHQudXNhZ2UuYWRkKHVzYWdlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignYXVkaW9faW50ZXJydXB0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jYXVkaW9TdGFydGVkID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgKHRvb2xDYWxsKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sX2NhbGxfY29tcGxldGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sQ2FsbCk7XG4gICAgICAgICAgICBpZiAodGhpcy4jYXV0b21hdGljYWxseVRyaWdnZXJSZXNwb25zZUZvck1jcFRvb2xDYWxscykge1xuICAgICAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2UuY3JlYXRlJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignbWNwX2FwcHJvdmFsX3JlcXVlc3QnLCAoYXBwcm92YWxSZXF1ZXN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3Rvb2xfYXBwcm92YWxfcmVxdWVzdGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ21jcF9hcHByb3ZhbF9yZXF1ZXN0JyxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbEl0ZW06IHJlYWx0aW1lQXBwcm92YWxJdGVtVG9BcHByb3ZhbEl0ZW0odGhpcy4jY3VycmVudEFnZW50LCBhcHByb3ZhbFJlcXVlc3QpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSBjdXJyZW50bHkgYXZhaWxhYmxlIE1DUCB0b29scyBiYXNlZCBvbiB0aGUgY3VycmVudCBhZ2VudCdzIGFjdGl2ZVxuICAgICAqIE1DUCBzZXJ2ZXIgY29uZmlndXJhdGlvbnMgYW5kIHRoZSBjYWNoZWQgcGVyLXNlcnZlciB0b29sIGxpc3RpbmdzLiBFbWl0c1xuICAgICAqIGBtY3BfdG9vbHNfY2hhbmdlZGAgaWYgdGhlIHNldCBjaGFuZ2VkLlxuICAgICAqL1xuICAgICN1cGRhdGVBdmFpbGFibGVNY3BUb29scygpIHtcbiAgICAgICAgLy8gQ29sbGVjdCBhY3RpdmUgTUNQIHNlcnZlciBsYWJlbHMgYW5kIG9wdGlvbmFsIGFsbG93ZWQgZmlsdGVycyBmcm9tIHRoZSBjdXJyZW50IGFnZW50XG4gICAgICAgIGNvbnN0IGFjdGl2ZU1jcENvbmZpZ3MgPSB0aGlzLiNjdXJyZW50VG9vbHM/LmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnbWNwJyk7XG4gICAgICAgIGNvbnN0IGFsbG93ZWRGcm9tQ29uZmlnID0gKGNmZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWxsb3dlZCA9IGNmZy5hbGxvd2VkX3Rvb2xzO1xuICAgICAgICAgICAgaWYgKCFhbGxvd2VkKVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxvd2VkKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZDtcbiAgICAgICAgICAgIGlmIChhbGxvd2VkICYmIEFycmF5LmlzQXJyYXkoYWxsb3dlZC50b29sX25hbWVzKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxsb3dlZC50b29sX25hbWVzO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZGVkdXBCeU5hbWUgPSBuZXcgTWFwKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2ZnIG9mIGFjdGl2ZU1jcENvbmZpZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb2xzID0gdGhpcy4jYWxsTWNwVG9vbHNCeVNlcnZlci5nZXQoY2ZnLnNlcnZlcl9sYWJlbCkgPz8gW107XG4gICAgICAgICAgICBjb25zdCBhbGxvd2VkID0gYWxsb3dlZEZyb21Db25maWcoY2ZnKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scykge1xuICAgICAgICAgICAgICAgIGlmIChhbGxvd2VkICYmICFhbGxvd2VkLmluY2x1ZGVzKHRvb2wubmFtZSkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmICghZGVkdXBCeU5hbWUuaGFzKHRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVkdXBCeU5hbWUuc2V0KHRvb2wubmFtZSwgdG9vbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHQgPSBBcnJheS5mcm9tKGRlZHVwQnlOYW1lLnZhbHVlcygpKTtcbiAgICAgICAgY29uc3QgcHJldiA9IHRoaXMuI2F2YWlsYWJsZU1jcFRvb2xzO1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gcHJldi5sZW5ndGggIT09IG5leHQubGVuZ3RoIHx8XG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcmV2Lm1hcCgodCkgPT4gdC5uYW1lKS5zb3J0KCkpICE9PVxuICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG5leHQubWFwKCh0KSA9PiB0Lm5hbWUpLnNvcnQoKSk7XG4gICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLiNhdmFpbGFibGVNY3BUb29scyA9IG5leHQ7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21jcF90b29sc19jaGFuZ2VkJywgdGhpcy4jYXZhaWxhYmxlTWNwVG9vbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICBpbml0aWFsU2Vzc2lvbkNvbmZpZzogYXdhaXQgdGhpcy4jZ2V0U2Vzc2lvbkNvbmZpZyh0aGlzLm9wdGlvbnMuY29uZmlnKSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEVuc3VyZSB0aGUgY2FjaGVkIGxhc3RTZXNzaW9uQ29uZmlnIGluY2x1ZGVzIGV2ZXJ5dGhpbmcgcGFzc2VkIGFzIHRoZSBpbml0aWFsIHNlc3Npb24gY29uZmlnXG4gICAgICAgIC8vICh0aGUgY2FsbCBhYm92ZSBhbHJlYWR5IHNldCBpdCB2aWEgI2dldFNlc3Npb25Db25maWcgYnV0IGluIGNhc2UgYWRkaXRpb25hbCBvdmVycmlkZXMgd2VyZVxuICAgICAgICAvLyBwYXNzZWQgZGlyZWN0bHkgaGVyZSBpbiB0aGUgZnV0dXJlIHdlIGNvdWxkIG1lcmdlIHRoZW0pLiBGb3Igbm93IGl0J3MgYSBuby1vcC5cbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGQgaW1hZ2UgdG8gdGhlIHNlc3Npb25cbiAgICAgKiBAcGFyYW0gaW1hZ2UgLSBUaGUgaW1hZ2UgdG8gYWRkLlxuICAgICAqL1xuICAgIGFkZEltYWdlKGltYWdlLCB7IHRyaWdnZXJSZXNwb25zZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5hZGRJbWFnZShpbWFnZSwgeyB0cmlnZ2VyUmVzcG9uc2UgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG11dGVkIC0gV2hldGhlciB0byBtdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIG11dGUobXV0ZWQpIHtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm11dGUobXV0ZWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IGZyb20gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuI2ludGVycnVwdGVkQnlHdWFyZHJhaWwgPSB7fTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LmNsb3NlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmQgYXVkaW8gdG8gdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuY29tbWl0IC0gV2hldGhlciB0byBmaW5pc2ggdGhlIHR1cm4gd2l0aCB0aGlzIGF1ZGlvLlxuICAgICAqL1xuICAgIHNlbmRBdWRpbyhhdWRpbywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIHNlc3Npb24gYXJ0aWZpY2lhbGx5IGZvciBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGJ1aWxkIGEgXCJzdG9wIHRhbGtpbmdcIlxuICAgICAqIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5pbnRlcnJ1cHQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwcm92ZSBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gYXBwcm92ZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNBcHByb3ZlIC0gV2hldGhlciB0byBhbHdheXMgYXBwcm92ZSB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIGFwcHJvdmUoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNBcHByb3ZlOiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuYXBwcm92ZVRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMuI2N1cnJlbnRBZ2VudC50b29scy5maW5kKCh0b29sKSA9PiB0b29sLm5hbWUgPT09IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWUpO1xuICAgICAgICBpZiAodG9vbCAmJlxuICAgICAgICAgICAgdG9vbC50eXBlID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICBhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwoYXBwcm92YWxJdGVtLnJhd0l0ZW0sIHRvb2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdob3N0ZWRfdG9vbF9jYWxsJykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx3YXlzQXBwcm92ZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgYXBwcm92aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihgVG9vbCAke2FwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlamVjdCBhIHRvb2wgY2FsbC4gVGhpcyB3aWxsIGFsc28gdHJpZ2dlciB0aGUgdG9vbCBjYWxsIHRvIHRoZSBhZ2VudC5cbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmFsd2F5c1JlamVjdCAtIFdoZXRoZXIgdG8gYWx3YXlzIHJlamVjdCB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIGFzeW5jIHJlamVjdChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c1JlamVjdDogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LnJlamVjdFRvb2woYXBwcm92YWxJdGVtLCBvcHRpb25zKTtcbiAgICAgICAgLy8gd2Ugc3RpbGwgbmVlZCB0byBzaW11bGF0ZSBhIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQgdG8gbGV0IHRoZSBhZ2VudCBrbm93XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcHByb3ZhbEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFsd2F5c1JlamVjdCkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKCdBbHdheXMgcmVqZWN0aW5nIE1DUCB0b29scyBpcyBub3Qgc3VwcG9ydGVkLiBVc2UgdGhlIGFsbG93ZWQgdG9vbHMgY29uZmlndXJhdGlvbiBpbnN0ZWFkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWNwQXBwcm92YWxSZXF1ZXN0ID0gYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbShhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRNY3BSZXNwb25zZShtY3BBcHByb3ZhbFJlcXVlc3QsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHthcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWx0aW1lU2Vzc2lvbi5tanMubWFwIiwiaW1wb3J0ICogYXMgdXRpbEltcG9ydCBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lQWdlbnQgfSBmcm9tIFwiLi9yZWFsdGltZUFnZW50Lm1qc1wiO1xuZXhwb3J0IHsgUmVhbHRpbWVTZXNzaW9uLCB9IGZyb20gXCIuL3JlYWx0aW1lU2Vzc2lvbi5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViUlRDLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2ViUnRjLm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZUJhc2UsIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZUJhc2UubWpzXCI7XG5leHBvcnQgY29uc3QgdXRpbHMgPSB7XG4gICAgYmFzZTY0VG9BcnJheUJ1ZmZlcjogdXRpbEltcG9ydC5iYXNlNjRUb0FycmF5QnVmZmVyLFxuICAgIGFycmF5QnVmZmVyVG9CYXNlNjQ6IHV0aWxJbXBvcnQuYXJyYXlCdWZmZXJUb0Jhc2U2NCxcbiAgICBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2U6IHV0aWxJbXBvcnQuZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlLFxufTtcbmV4cG9ydCB7IE1vZGVsQmVoYXZpb3JFcnJvciwgT3V0cHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQsIHRvb2wsIFVzZXJFcnJvciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmV4cG9ydCB7IGJhY2tncm91bmRSZXN1bHQsIGlzQmFja2dyb3VuZFJlc3VsdCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbIk1FVEFEQVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwiZ2V0RW51bVZhbHVlcyIsImVudHJpZXMiLCJudW1lcmljVmFsdWVzIiwidiIsImsiLCJfIiwiJFpvZFJlZ2lzdHJ5Iiwic2NoZW1hIiwiX21ldGEiLCJtZXRhIiwicCIsInBtIiwicmVnaXN0cnkiLCJnbG9iYWxSZWdpc3RyeSIsIkpTT05TY2hlbWFHZW5lcmF0b3IiLCJwYXJhbXMiLCJfcGFyYW1zIiwiX2EiLCJkZWYiLCJmb3JtYXRNYXAiLCJzZWVuIiwicmVzdWx0Iiwib3ZlcnJpZGVTY2hlbWEiLCJfYiIsInBhcmVudCIsIl9qc29uIiwianNvbiIsIm1pbmltdW0iLCJtYXhpbXVtIiwiZm9ybWF0IiwicGF0dGVybnMiLCJjb250ZW50RW5jb2RpbmciLCJyZWdleGVzIiwicmVnZXgiLCJtdWx0aXBsZU9mIiwiZXhjbHVzaXZlTWF4aW11bSIsImV4Y2x1c2l2ZU1pbmltdW0iLCJzaGFwZSIsImtleSIsImFsbEtleXMiLCJyZXF1aXJlZEtleXMiLCJfYyIsIngiLCJpIiwiYSIsImIiLCJpc1NpbXBsZUludGVyc2VjdGlvbiIsInZhbCIsImFsbE9mIiwicHJlZml4SXRlbXMiLCJyZXN0IiwidmFsdWVzIiwidmFscyIsImZpbGUiLCJtaW1lIiwibSIsImlubmVyIiwiY2F0Y2hWYWx1ZSIsInBhdHRlcm4iLCJpbm5lclR5cGUiLCJpc1RyYW5zZm9ybWluZyIsInJvb3QiLCJtYWtlVVJJIiwiZW50cnkiLCJkZWZzU2VnbWVudCIsImV4dGVybmFsSWQiLCJ1cmlHZW5lcmF0b3IiLCJpZCIsImRlZlVyaVByZWZpeCIsImRlZklkIiwiZXh0cmFjdFRvRGVmIiwicmVmIiwiZXh0IiwiZmxhdHRlblJlZiIsInpvZFNjaGVtYSIsIl9jYWNoZWQiLCJyZWZTY2hlbWEiLCJfZCIsIl9lIiwiZGVmcyIsIl9mIiwidG9KU09OU2NoZW1hIiwiaW5wdXQiLCJnZW4iLCJzY2hlbWFzIiwiZXh0ZXJuYWwiLCJfc2NoZW1hIiwiX2N0eCIsImN0eCIsIm9wdGlvbiIsIml0ZW0iLCJtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCIsInJlc3BvbnNlX2Zvcm1hdCIsInBhcnNlciIsIm9iaiIsImlnbm9yZU92ZXJyaWRlIiwiZGVmYXVsdE9wdGlvbnMiLCJnZXREZWZhdWx0T3B0aW9ucyIsIm9wdGlvbnMiLCJ6b2REZWYiLCJpc0VtcHR5T2JqIiwiX2siLCJnZXRSZWZzIiwiX29wdGlvbnMiLCJjdXJyZW50UGF0aCIsIm5hbWUiLCJhZGRFcnJvck1lc3NhZ2UiLCJyZXMiLCJlcnJvck1lc3NhZ2UiLCJyZWZzIiwic2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyIsInZhbHVlIiwidXRpbCIsImFzc2VydElzIiwiX2FyZyIsImFzc2VydE5ldmVyIiwiX3giLCJpdGVtcyIsInZhbGlkS2V5cyIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kUGFyc2VkVHlwZSIsImdldFBhcnNlZFR5cGUiLCJkYXRhIiwiWm9kSXNzdWVDb2RlIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJmaXJzdEVsIiwiZXJyb3JNYXAiLCJtZXNzYWdlIiwib3ZlcnJpZGVFcnJvck1hcCIsImRlZmF1bHRFcnJvck1hcCIsImdldEVycm9yTWFwIiwibWFrZUlzc3VlIiwicGF0aCIsImVycm9yTWFwcyIsImlzc3VlRGF0YSIsImZ1bGxQYXRoIiwiZnVsbElzc3VlIiwibWFwcyIsIm1hcCIsImFkZElzc3VlVG9Db250ZXh0Iiwib3ZlcnJpZGVNYXAiLCJQYXJzZVN0YXR1cyIsInN0YXR1cyIsInJlc3VsdHMiLCJhcnJheVZhbHVlIiwiSU5WQUxJRCIsInBhaXJzIiwic3luY1BhaXJzIiwicGFpciIsImZpbmFsT2JqZWN0IiwiRElSVFkiLCJPSyIsImlzQWJvcnRlZCIsImlzRGlydHkiLCJpc1ZhbGlkIiwiaXNBc3luYyIsImVycm9yVXRpbCIsIlBhcnNlSW5wdXRMYXp5UGF0aCIsImhhbmRsZVJlc3VsdCIsInByb2Nlc3NDcmVhdGVQYXJhbXMiLCJpbnZhbGlkX3R5cGVfZXJyb3IiLCJyZXF1aXJlZF9lcnJvciIsImRlc2NyaXB0aW9uIiwiaXNzIiwiWm9kVHlwZSIsImVyciIsIm1heWJlQXN5bmNSZXN1bHQiLCJjaGVjayIsImdldElzc3VlUHJvcGVydGllcyIsInNldEVycm9yIiwicmVmaW5lbWVudERhdGEiLCJyZWZpbmVtZW50IiwiWm9kRWZmZWN0cyIsIlpvZEZpcnN0UGFydHlUeXBlS2luZCIsIlpvZE9wdGlvbmFsIiwiWm9kTnVsbGFibGUiLCJab2RBcnJheSIsIlpvZFByb21pc2UiLCJab2RVbmlvbiIsImluY29taW5nIiwiWm9kSW50ZXJzZWN0aW9uIiwidHJhbnNmb3JtIiwiZGVmYXVsdFZhbHVlRnVuYyIsIlpvZERlZmF1bHQiLCJab2RCcmFuZGVkIiwiY2F0Y2hWYWx1ZUZ1bmMiLCJab2RDYXRjaCIsIlRoaXMiLCJ0YXJnZXQiLCJab2RQaXBlbGluZSIsIlpvZFJlYWRvbmx5IiwiY3VpZFJlZ2V4IiwiY3VpZDJSZWdleCIsInVsaWRSZWdleCIsInV1aWRSZWdleCIsIm5hbm9pZFJlZ2V4Iiwiand0UmVnZXgiLCJkdXJhdGlvblJlZ2V4IiwiZW1haWxSZWdleCIsIl9lbW9qaVJlZ2V4IiwiZW1vamlSZWdleCIsImlwdjRSZWdleCIsImlwdjRDaWRyUmVnZXgiLCJpcHY2UmVnZXgiLCJpcHY2Q2lkclJlZ2V4IiwiYmFzZTY0UmVnZXgiLCJiYXNlNjR1cmxSZWdleCIsImRhdGVSZWdleFNvdXJjZSIsImRhdGVSZWdleCIsInRpbWVSZWdleFNvdXJjZSIsImFyZ3MiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImJhc2U2NCIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImxlbiIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGVLZXlzIiwiZXh0cmFLZXlzIiwia2V5VmFsaWRhdG9yIiwidW5rbm93bktleXMiLCJjYXRjaGFsbCIsImRlZmF1bHRFcnJvciIsImF1Z21lbnRhdGlvbiIsIm1lcmdpbmciLCJpbmRleCIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwidHlwZXMiLCJnZXREaXNjcmltaW5hdG9yIiwidHlwZSIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsIlpvZFJlY29yZCIsImtleVR5cGUiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiYWNjIiwiYmFzZSIsInByZXByb2Nlc3MiLCJuZXdDdHgiLCJab2ROYU4iLCJpblJlc3VsdCIsImZyZWV6ZSIsImNsZWFuUGFyYW1zIiwiY3VzdG9tIiwiZmF0YWwiLCJyIiwiX2ZhdGFsIiwiaW5zdGFuY2VPZlR5cGUiLCJjbHMiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInBhcnNlQW55RGVmIiwicGFyc2VBcnJheURlZiIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJwYXJzZUJvb2xlYW5EZWYiLCJwYXJzZUJyYW5kZWREZWYiLCJfZGVmIiwicGFyc2VDYXRjaERlZiIsInBhcnNlRGF0ZURlZiIsIm92ZXJyaWRlRGF0ZVN0cmF0ZWd5Iiwic3RyYXRlZ3kiLCJpbnRlZ2VyRGF0ZVBhcnNlciIsInBhcnNlRGVmYXVsdERlZiIsInBhcnNlRWZmZWN0c0RlZiIsImZvcmNlUmVzb2x1dGlvbiIsInBhcnNlRW51bURlZiIsImlzSnNvblNjaGVtYTdBbGxPZlR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZUxpdGVyYWxEZWYiLCJwYXJzZWRUeXBlIiwiem9kUGF0dGVybnMiLCJwYXJzZVN0cmluZ0RlZiIsInByb2Nlc3NQYXR0ZXJuIiwiZXNjYXBlTm9uQWxwaGFOdW1lcmljIiwiYWRkRm9ybWF0IiwiYWRkUGF0dGVybiIsImMiLCJwcm9jZXNzUmVnRXhwIiwicmVnZXhPckZ1bmN0aW9uIiwiZmxhZ3MiLCJzb3VyY2UiLCJpc0VzY2FwZWQiLCJpbkNoYXJHcm91cCIsImluQ2hhclJhbmdlIiwicmVnZXhUZXN0IiwicGFyc2VSZWNvcmREZWYiLCJwYXJzZU1hcERlZiIsInBhcnNlTmF0aXZlRW51bURlZiIsImFjdHVhbFZhbHVlcyIsInBhcnNlZFR5cGVzIiwicGFyc2VOZXZlckRlZiIsInBhcnNlTnVsbERlZiIsInByaW1pdGl2ZU1hcHBpbmdzIiwicGFyc2VVbmlvbkRlZiIsImFzQW55T2YiLCJ1bmlxdWVUeXBlcyIsImFueU9mIiwicGFyc2VOdWxsYWJsZURlZiIsInBhcnNlTnVtYmVyRGVmIiwiZGVjaWRlQWRkaXRpb25hbFByb3BlcnRpZXMiLCJwYXJzZU9iamVjdERlZiIsInByb3BOYW1lIiwicHJvcERlZiIsInByb3BlcnR5UGF0aCIsInBhcnNlZERlZiIsInBhcnNlT3B0aW9uYWxEZWYiLCJpbm5lclNjaGVtYSIsInBhcnNlUGlwZWxpbmVEZWYiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJuZXdJdGVtIiwianNvblNjaGVtYSIsInNlbGVjdFBhcnNlciIsImFkZE1ldGEiLCJnZXRSZWxhdGl2ZVBhdGgiLCJwYXRoQSIsInBhdGhCIiwidHlwZU5hbWUiLCJ6b2RUb0pzb25TY2hlbWEiLCJtYWluIiwidGl0bGUiLCJkZWZpbml0aW9ucyIsInByb2Nlc3NlZERlZmluaXRpb25zIiwibmV3RGVmaW5pdGlvbnMiLCJjb21iaW5lZCIsIm1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wiLCJ0b29sIiwiY2FsbGJhY2siLCJ0b1N0cmljdEpzb25TY2hlbWEiLCJzY2hlbWFDb3B5IiwiZW5zdXJlU3RyaWN0SnNvblNjaGVtYSIsImlzTnVsbGFibGUiLCJvbmVPZlZhcmlhbnQiLCJhbGxPZlZhcmlhbnQiLCJpc09iamVjdCIsImRlZk5hbWUiLCJkZWZTY2hlbWEiLCJkZWZpbml0aW9uTmFtZSIsImRlZmluaXRpb25TY2hlbWEiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJwcm9wU2NoZW1hIiwidmFyaWFudCIsInJlc29sdmVkIiwiaGFzTW9yZVRoYW5OS2V5cyIsInJlc29sdmVSZWYiLCJwYXRoUGFydHMiLCJuIiwiem9kVjNUb0pzb25TY2hlbWEiLCJfem9kVG9Kc29uU2NoZW1hIiwiem9kVjRUb0pzb25TY2hlbWEiLCJ6NC50b0pTT05TY2hlbWEiLCJpc1pvZFY0Iiwiem9kT2JqZWN0Iiwiem9kVGV4dEZvcm1hdCIsInByb3BzIiwiY29udGVudCIsInpvZFJlc3BvbnNlc0Z1bmN0aW9uIiwiQWdlbnRzRXJyb3IiLCJzdGF0ZSIsIl9fcHVibGljRmllbGQiLCJTeXN0ZW1FcnJvciIsIk1heFR1cm5zRXhjZWVkZWRFcnJvciIsIk1vZGVsQmVoYXZpb3JFcnJvciIsIlVzZXJFcnJvciIsIkd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yIiwiVG9vbENhbGxFcnJvciIsIklucHV0R3VhcmRyYWlsVHJpcHdpcmVUcmlnZ2VyZWQiLCJPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsInJlYWRab2REZWZpbml0aW9uIiwiY2FuZGlkYXRlIiwicmVhZFpvZFR5cGUiLCJyYXdUeXBlIiwibG93ZXIiLCJpc1pvZE9iamVjdCIsImlzQWdlbnRUb29sSW5wdXQiLCJKU09OX1NDSEVNQV9EUkFGVF8wNyIsIk9QVElPTkFMX1dSQVBQRVJTIiwiREVDT1JBVE9SX1dSQVBQRVJTIiwiU0lNUExFX1RZUEVfTUFQUElORyIsImhhc0pzb25TY2hlbWFPYmplY3RTaGFwZSIsInpvZEpzb25TY2hlbWFDb21wYXQiLCJidWlsZE9iamVjdFNjaGVtYSIsInJlYWRTaGFwZSIsImZpZWxkIiwib3B0aW9uYWwiLCJjb252ZXJ0UHJvcGVydHkiLCJjdXJyZW50IiwidW53cmFwRGVjb3JhdG9ycyIsIm5leHQiLCJjb252ZXJ0U2NoZW1hIiwidW53cmFwcGVkIiwiYnVpbGRBcnJheVNjaGVtYSIsImJ1aWxkVHVwbGVTY2hlbWEiLCJidWlsZFVuaW9uU2NoZW1hIiwiYnVpbGRJbnRlcnNlY3Rpb25TY2hlbWEiLCJidWlsZExpdGVyYWwiLCJidWlsZEVudW0iLCJidWlsZFJlY29yZFNjaGVtYSIsImJ1aWxkTWFwU2NoZW1hIiwiYnVpbGRTZXRTY2hlbWEiLCJidWlsZE51bGxhYmxlU2NoZW1hIiwiZXh0cmFjdEZpcnN0IiwiY29lcmNlQXJyYXkiLCJ2YWx1ZVNjaGVtYSIsImxpdGVyYWwiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbkNvbXBhdCIsInpvZFRleHRGb3JtYXRDb21wYXQiLCJidWlsZEpzb25TY2hlbWFGcm9tWm9kIiwiaW5wdXRUeXBlIiwidG9GdW5jdGlvblRvb2xOYW1lIiwiZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSIsInVzZUZhbGxiYWNrIiwib3JpZ2luYWxFcnJvciIsImZhbGxiYWNrU2NoZW1hIiwicmF3SW5wdXQiLCJmb3JtYXR0ZWRGdW5jdGlvbiIsImNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZSIsIm91dHB1dFR5cGUiLCJleGlzdGluZyIsIm91dHB1dCIsInMiLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibXNBYnMiLCJwbHVyYWwiLCJpc1BsdXJhbCIsInNldHVwIiwiZW52IiwiY3JlYXRlRGVidWciLCJjb2VyY2UiLCJkaXNhYmxlIiwiZW5hYmxlIiwiZW5hYmxlZCIsInJlcXVpcmUkJDAiLCJkZXN0cm95Iiwic2VsZWN0Q29sb3IiLCJuYW1lc3BhY2UiLCJoYXNoIiwicHJldlRpbWUiLCJlbmFibGVPdmVycmlkZSIsIm5hbWVzcGFjZXNDYWNoZSIsImVuYWJsZWRDYWNoZSIsImRlYnVnIiwic2VsZiIsImZvcm1hdHRlciIsImV4dGVuZCIsImRlbGltaXRlciIsIm5ld0RlYnVnIiwibmFtZXNwYWNlcyIsInNwbGl0IiwibnMiLCJtYXRjaGVzVGVtcGxhdGUiLCJzZWFyY2giLCJ0ZW1wbGF0ZSIsInNlYXJjaEluZGV4IiwidGVtcGxhdGVJbmRleCIsInN0YXJJbmRleCIsIm1hdGNoSW5kZXgiLCJza2lwIiwiY29tbW9uIiwiZXhwb3J0cyIsImZvcm1hdEFyZ3MiLCJzYXZlIiwibG9hZCIsInVzZUNvbG9ycyIsImxvY2Fsc3RvcmFnZSIsIndhcm5lZCIsIm1vZHVsZSIsImxhc3RDIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwiQllURV9QUkVWSUVXX0xJTUlUIiwidG9TbWFydFN0cmluZyIsImlzQXJyYXlCdWZmZXJMaWtlIiwiZm9ybWF0Qnl0ZUFycmF5IiwiaXNBcnJheUJ1ZmZlclZpZXciLCJ2aWV3Iiwic21hcnRTdHJpbmdSZXBsYWNlciIsInNoYXJlZEFycmF5QnVmZmVyQ3RvciIsImlzU2VyaWFsaXplZEJ1ZmZlclNuYXBzaG90IiwiYnl0ZXMiLCJwcmV2aWV3TGVuZ3RoIiwicHJldmlld1BhcnRzIiwiZm9ybWF0Qnl0ZSIsImVsbGlwc2lzIiwiYnl0ZSIsIl9rZXkiLCJuZXN0ZWRWYWx1ZSIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJkZXRhaWxzIiwicGFyc2VkIiwic3RyaW5nUmVzdWx0IiwiaW52b2tlIiwiY3VycmVudFNwYW4iLCJnZXRDdXJyZW50U3BhbiIsIm5lZWRzQXBwcm92YWwiLCJhZ2VudCIsInByZWRpY2F0ZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsIl9jYWNoZWRUb29scyIsImdldEZ1bmN0aW9uVG9vbHNGcm9tU2VydmVyIiwic2VydmVyIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsInQiLCJtY3BUb0Z1bmN0aW9uVG9vbCIsIndpdGhNQ1BMaXN0VG9vbHNTcGFuIiwic3BhbiIsImZldGNoZWRNY3BUb29scyIsIm1jcFRvb2xzIiwiZmlsdGVyZWRUb29scyIsImZpbHRlciIsImdsb2JhbExvZ2dlciIsImFsbG93ZWRUb29sTmFtZXMiLCJibG9ja2VkVG9vbE5hbWVzIiwiYWxsb3dlZCIsImJsb2NrZWQiLCJ0b29scyIsImdldEFsbE1jcFRvb2xzIiwibWNwU2VydmVyc09yT3B0cyIsIm1jcFNlcnZlcnMiLCJjb252ZXJ0U2NoZW1hc1RvU3RyaWN0RnJvbU9wdHMiLCJydW5Db250ZXh0RnJvbU9wdHMiLCJhZ2VudEZyb21PcHRzIiwiYWxsVG9vbHMiLCJ0b29sTmFtZXMiLCJzZXJ2ZXJUb29scyIsImludGVyc2VjdGlvbiIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsIm5vblN0cmljdFNjaGVtYSIsIm91dCIsIkJyb3dzZXJFdmVudEVtaXR0ZXIiLCJfX3ByaXZhdGVBZGQiLCJfdGFyZ2V0IiwiX2xpc3RlbmVyV3JhcHBlcnMiLCJsaXN0ZW5lciIsImV2ZW50VHlwZSIsImxpc3RlbmVyc0ZvclR5cGUiLCJfX3ByaXZhdGVHZXQiLCJ3cmFwcGVycyIsIndyYXBwZXIiLCJldmVudCIsImhhbmRsZXIiLCJyYW5kb21VVUlEIiwiUmVhZGFibGUiLCJfZGVzdGluYXRpb24iLCJfdHJhbnNmb3JtIiwiUmVhZGFibGVTdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJBc3luY0xvY2FsU3RvcmFnZSIsIkJyb3dzZXJUaW1lciIsInRpbWVvdXQiLCJ0aW1lb3V0SWQiLCJ0aW1lciIsIkV2ZW50RW1pdHRlckRlbGVnYXRlIiwiQWdlbnRIb29rcyIsIlJ1bnRpbWVFdmVudEVtaXR0ZXIiLCJSdW5Ib29rcyIsIk9QRU5BSV9ERUZBVUxUX01PREVMX0VOVl9WQVJJQUJMRV9OQU1FIiwiZ3B0NVJlYXNvbmluZ1NldHRpbmdzUmVxdWlyZWQiLCJtb2RlbE5hbWUiLCJpc0dwdDVEZWZhdWx0IiwiZ2V0RGVmYXVsdE1vZGVsIiwiZ2V0RGVmYXVsdE1vZGVsU2V0dGluZ3MiLCJtb2RlbCIsIl9tb2RlbCIsImdldFRyYW5zZmVyTWVzc2FnZSIsImRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUiLCJkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbiIsIkhhbmRvZmYiLCJvbkludm9rZUhhbmRvZmYiLCJoYW5kb2ZmIiwiY29uZmlnIiwiaGFzT25IYW5kb2ZmIiwiaGFzSW5wdXRUeXBlIiwiaW5wdXRKc29uU3RyaW5nIiwiYWRkRXJyb3JUb0N1cnJlbnRTcGFuIiwiZ2V0SGFuZG9mZiIsImdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2UiLCJvdXRwdXRNZXNzYWdlIiwibGFzdEl0ZW0iLCJnZXRPdXRwdXRUZXh0IiwiYWdlbnRUb29sUnVuUmVzdWx0cyIsInNhdmVBZ2VudFRvb2xSdW5SZXN1bHQiLCJ0b29sQ2FsbCIsInJ1blJlc3VsdCIsImNvbnN1bWVBZ2VudFRvb2xSdW5SZXN1bHQiLCJBZ2VudEFzVG9vbE5lZWRBcHByb3ZhbFNjaGFtZSIsIl9BZ2VudCIsIm91dHB1dFR5cGVzIiwidG9vbE5hbWUiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJydW5Db25maWciLCJydW5PcHRpb25zIiwiY29tcGxldGVkUmVzdWx0IiwiUnVubmVyIiwidXNlc1N0b3BBdFRvb2xOYW1lcyIsIm91dHB1dFRleHQiLCJlbmFibGVkVG9vbHMiLCJtYXliZUlzRW5hYmxlZCIsImhhbmRvZmZzIiwiQWdlbnQiLCJkZWZpbmVJbnB1dEd1YXJkcmFpbCIsImV4ZWN1dGUiLCJkZWZpbmVPdXRwdXRHdWFyZHJhaWwiLCJnZXREZWZhdWx0TW9kZWxQcm92aWRlciIsIlNoYXJlZEJhc2UiLCJJdGVtQmFzZSIsIlJlZnVzYWwiLCJPdXRwdXRUZXh0IiwiSW5wdXRUZXh0IiwiUmVhc29uaW5nVGV4dCIsIklucHV0SW1hZ2UiLCJ6XG4gICAgICAgIC8vIDEuIGltYWdlIGRhdGFcbiAgICAgICAgLnN0cmluZyIsIklucHV0RmlsZSIsInpcbiAgICAgICAgLy8gMS4gZmlsZSBkYXRhXG4gICAgICAgIC5zdHJpbmciLCJBdWRpb0NvbnRlbnQiLCJ6XG4gICAgICAgIC5zdHJpbmciLCJJbWFnZUNvbnRlbnQiLCJUb29sT3V0cHV0VGV4dCIsIkltYWdlRGF0YU9iamVjdFNjaGVtYSIsInpcbiAgICAgICAgLnVuaW9uIiwiei5pbnN0YW5jZW9mIiwiSW1hZ2VVcmxPYmplY3RTY2hlbWEiLCJJbWFnZUZpbGVJZE9iamVjdFNjaGVtYSIsIkltYWdlT2JqZWN0U2NoZW1hIiwielxuICAgIC51bmlvbiIsIkZpbGVEYXRhT2JqZWN0U2NoZW1hIiwiRmlsZVVybE9iamVjdFNjaGVtYSIsIkZpbGVJZE9iamVjdFNjaGVtYSIsIkZpbGVSZWZlcmVuY2VTY2hlbWEiLCJ6U3RyaW5nV2l0aEhpbnRzIiwiX2hpbnRzIiwiVG9vbE91dHB1dEltYWdlIiwiVG9vbE91dHB1dEZpbGVDb250ZW50IiwiQ29tcHV0ZXJUb29sT3V0cHV0IiwiY29tcHV0ZXJBY3Rpb25zIiwiei5kaXNjcmltaW5hdGVkVW5pb24iLCJ6Lm51bWJlciIsInouZW51bSIsIkFzc2lzdGFudENvbnRlbnQiLCJNZXNzYWdlQmFzZSIsIkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwiVXNlckNvbnRlbnQiLCJVc2VyTWVzc2FnZUl0ZW0iLCJTeXN0ZW1NZXNzYWdlSXRlbSIsIkhvc3RlZFRvb2xDYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbEl0ZW0iLCJUb29sQ2FsbE91dHB1dENvbnRlbnQiLCJUb29sQ2FsbFN0cnVjdHVyZWRPdXRwdXQiLCJGdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwiQ29tcHV0ZXJVc2VDYWxsSXRlbSIsIkNvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0iLCJUb29sQ2FsbEl0ZW0iLCJSZWFzb25pbmdJdGVtIiwiVW5rbm93bkl0ZW0iLCJPdXRwdXRNb2RlbEl0ZW0iLCJNb2RlbEl0ZW0iLCJ6LnVuaW9uIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsIlVzYWdlIiwiaW5wdXRUb2tlbnNEZXRhaWxzIiwib3V0cHV0VG9rZW5zRGV0YWlscyIsIm5ld1VzYWdlIiwiUnVuQ29udGV4dCIsIl9hcHByb3ZhbHMiLCJfX3ByaXZhdGVTZXQiLCJhcHByb3ZhbHMiLCJhcHByb3ZhbCIsImNhbGxJZCIsImFwcHJvdmFsRW50cnkiLCJpbmRpdmlkdWFsQ2FsbEFwcHJvdmFsIiwiaW5kaXZpZHVhbENhbGxSZWplY3Rpb24iLCJhcHByb3ZhbEl0ZW0iLCJhbHdheXNBcHByb3ZlIiwiYWx3YXlzUmVqZWN0Iiwic2VyaWFsaXplVG9vbCIsInNlcmlhbGl6ZUhhbmRvZmYiLCJSdW5JdGVtQmFzZSIsIlJ1bk1lc3NhZ2VPdXRwdXRJdGVtIiwicmF3SXRlbSIsInBhcnQiLCJSdW5Ub29sQ2FsbEl0ZW0iLCJSdW5Ub29sQ2FsbE91dHB1dEl0ZW0iLCJSdW5SZWFzb25pbmdJdGVtIiwiUnVuSGFuZG9mZkNhbGxJdGVtIiwiUnVuSGFuZG9mZk91dHB1dEl0ZW0iLCJzb3VyY2VBZ2VudCIsInRhcmdldEFnZW50IiwiUnVuVG9vbEFwcHJvdmFsSXRlbSIsIl93aXRoU3BhbkZhY3RvcnkiLCJjcmVhdGVTcGFuIiwid2l0aE5ld1NwYW5Db250ZXh0Iiwic2V0Q3VycmVudFNwYW4iLCJyZXNldEN1cnJlbnRTcGFuIiwiY3JlYXRlQWdlbnRTcGFuIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImNyZWF0ZUZ1bmN0aW9uU3BhbiIsIndpdGhGdW5jdGlvblNwYW4iLCJjcmVhdGVIYW5kb2ZmU3BhbiIsIndpdGhIYW5kb2ZmU3BhbiIsImNyZWF0ZUd1YXJkcmFpbFNwYW4iLCJ3aXRoR3VhcmRyYWlsU3BhbiIsImNyZWF0ZU1DUExpc3RUb29sc1NwYW4iLCJlbmNvZGVVaW50OEFycmF5VG9CYXNlNjQiLCJnbG9iYWxCdWZmZXIiLCJiaW5hcnkiLCJjaGFycyIsImMxIiwiYzIiLCJjMyIsImVuYzEiLCJlbmMyIiwiZW5jMyIsImVuYzQiLCJSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IiwiUnVuSXRlbVN0cmVhbUV2ZW50IiwiUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQiLCJwcm9jZXNzTW9kZWxSZXNwb25zZSIsIm1vZGVsUmVzcG9uc2UiLCJydW5IYW5kb2ZmcyIsInJ1bkZ1bmN0aW9ucyIsInJ1bkNvbXB1dGVyQWN0aW9ucyIsInJ1bk1DUEFwcHJvdmFsUmVxdWVzdHMiLCJ0b29sc1VzZWQiLCJoYW5kb2ZmTWFwIiwiZnVuY3Rpb25NYXAiLCJjb21wdXRlclRvb2wiLCJtY3BUb29sTWFwIiwicHJvdmlkZXJEYXRhIiwibWNwU2VydmVyTGFiZWwiLCJtY3BTZXJ2ZXJUb29sIiwiZnVuY3Rpb25Ub29sIiwibmV4dFN0ZXBTY2hlbWEiLCJTaW5nbGVTdGVwUmVzdWx0Iiwib3JpZ2luYWxJbnB1dCIsInByZVN0ZXBJdGVtcyIsIm5ld1N0ZXBJdGVtcyIsIm5leHRTdGVwIiwibWF5YmVSZXNldFRvb2xDaG9pY2UiLCJ0b29sVXNlVHJhY2tlciIsIm1vZGVsU2V0dGluZ3MiLCJleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzIiwib3JpZ2luYWxQcmVTdGVwSXRlbXMiLCJuZXdSZXNwb25zZSIsInByb2Nlc3NlZFJlc3BvbnNlIiwicnVubmVyIiwiZnVuY3Rpb25DYWxsSWRzIiwiZnVuY3Rpb25Ub29sUnVucyIsInJ1biIsImZ1bmN0aW9uUmVzdWx0cyIsImV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyIsIm5ld0l0ZW1zIiwibWNwQXBwcm92YWxSdW5zIiwiYXBwcm92YWxSZXF1ZXN0SWQiLCJhcHByb3ZlZCIsImNoZWNrVG9vbE91dHB1dCIsImNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMiLCJleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyIsImNvbXB1dGVyUmVzdWx0cyIsImV4ZWN1dGVDb21wdXRlckFjdGlvbnMiLCJhcHByb3ZhbFJlcXVlc3QiLCJ0b29sRGF0YSIsInJlcXVlc3REYXRhIiwiYXBwcm92YWxSZXN1bHQiLCJhcHByb3ZhbFJlc3BvbnNlRGF0YSIsImV4ZWN1dGVIYW5kb2ZmQ2FsbHMiLCJtZXNzYWdlSXRlbXMiLCJwb3RlbnRpYWxGaW5hbE91dHB1dCIsImdldFRvb2xDYWxsT3V0cHV0SXRlbSIsIm1heWJlU3RydWN0dXJlZE91dHB1dHMiLCJub3JtYWxpemVTdHJ1Y3R1cmVkVG9vbE91dHB1dHMiLCJzdHJ1Y3R1cmVkSXRlbXMiLCJjb252ZXJ0U3RydWN0dXJlZFRvb2xPdXRwdXRUb0lucHV0SXRlbSIsInN0cnVjdHVyZWQiLCJub3JtYWxpemVkIiwibm9ybWFsaXplU3RydWN0dXJlZFRvb2xPdXRwdXQiLCJpc1JlY29yZCIsImltYWdlU3RyaW5nIiwiaW1hZ2VGaWxlSWQiLCJmYWxsYmFja0ltYWdlTWVkaWFUeXBlIiwiaXNOb25FbXB0eVN0cmluZyIsImltYWdlRmllbGQiLCJpbWFnZU9iaiIsImlubGluZU1lZGlhVHlwZSIsInRvSW5saW5lSW1hZ2VTdHJpbmciLCJjYW5kaWRhdGVJZCIsImZpbGVWYWx1ZSIsIm5vcm1hbGl6ZUZpbGVWYWx1ZSIsImFzRGF0YVVybCIsInJlZmVyZW5jZWRJZCIsInJlY29yZCIsIm1lZGlhVHlwZSIsImRpcmVjdEZpbGUiLCJub3JtYWxpemVkT2JqZWN0Iiwibm9ybWFsaXplRmlsZU9iamVjdENhbmRpZGF0ZSIsImxlZ2FjeVZhbHVlIiwibm9ybWFsaXplTGVnYWN5RmlsZVZhbHVlIiwiZGF0YVZhbHVlIiwiaGFzU3RyaW5nRGF0YSIsImhhc0JpbmFyeURhdGEiLCJmaWxlbmFtZSIsInRvb2xSdW5zIiwicnVuU2luZ2xlVG9vbCIsInRvb2xSdW4iLCJwYXJzZWRBcmdzIiwicmVzcG9uc2UiLCJ0b29sT3V0cHV0IiwiZnVuY3Rpb25SZXN1bHQiLCJuZXN0ZWRSdW5SZXN1bHQiLCJuZXN0ZWRJbnRlcnJ1cHRpb25zIiwiX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdCIsImNvbXB1dGVyIiwiYWN0aW9uIiwic2NyZWVuc2hvdCIsImFjdGlvbnMiLCJjdXN0b21Mb2dnZXIiLCJfbG9nZ2VyIiwiaW1hZ2VVcmwiLCJhY3R1YWxIYW5kb2ZmIiwiaGFuZG9mZlNwYW4iLCJuZXdBZ2VudCIsInJlcXVlc3RlZEFnZW50cyIsImlucHV0RmlsdGVyIiwiaGFuZG9mZklucHV0RGF0YSIsIk5PVF9GSU5BTF9PVVRQVVQiLCJ0b29sUmVzdWx0cyIsImludGVycnVwdGlvbnMiLCJmaXJzdFRvb2xSZXN1bHQiLCJ0b29sVXNlQmVoYXZpb3IiLCJzdG9wcGluZ1Rvb2wiLCJnZXRSdW5JdGVtU3RyZWFtRXZlbnROYW1lIiwiZW5xdWV1ZVJ1bkl0ZW1TdHJlYW1FdmVudCIsIml0ZW1OYW1lIiwic3RyZWFtU3RlcEl0ZW1zVG9SdW5SZXN1bHQiLCJhZGRTdGVwVG9SdW5SZXN1bHQiLCJza2lwcGVkSXRlbXMiLCJBZ2VudFRvb2xVc2VUcmFja2VyIiwiX2FnZW50VG9Ub29scyIsIkNVUlJFTlRfU0NIRU1BX1ZFUlNJT04iLCIkc2NoZW1hVmVyc2lvbiIsInNlcmlhbGl6ZWRBZ2VudFNjaGVtYSIsInNlcmlhbGl6ZWRTcGFuQmFzZSIsInpcbiAgICAgICAgLm9iamVjdCIsIlNlcmlhbGl6ZWRTcGFuIiwiei5sYXp5IiwidXNhZ2VTY2hlbWEiLCJtb2RlbFJlc3BvbnNlU2NoZW1hIiwicHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtIiwiaXRlbVNjaGVtYSIsInByb3RvY29sLkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwicHJvdG9jb2wuVG9vbENhbGxJdGVtIiwicHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSIsInByb3RvY29sLlJlYXNvbmluZ0l0ZW0iLCJwcm90b2NvbC5GdW5jdGlvbkNhbGxJdGVtIiwic2VyaWFsaXplZFRyYWNlU2NoZW1hIiwic2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlU2NoZW1hIiwielxuICAgICAgICAuYXJyYXkiLCJndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSIsImlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwib3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hIiwiU2VyaWFsaXplZFJ1blN0YXRlIiwicHJvdG9jb2wuTW9kZWxJdGVtIiwiUnVuU3RhdGUiLCJzdGFydGluZ0FnZW50IiwibWF4VHVybnMiLCJnZXRDdXJyZW50VHJhY2UiLCJnZXRUdXJuSW5wdXQiLCJpbml0aWFsQWdlbnQiLCJwYXJzaW5nRXJyb3IiLCJqc29uUmVzdWx0IiwiY3VycmVudFNjaGVtYVZlcnNpb24iLCJzdGF0ZUpzb24iLCJhZ2VudE1hcCIsImJ1aWxkQWdlbnRNYXAiLCJjdXJyZW50QWdlbnQiLCJhZ2VudE5hbWUiLCJ0cmFjZSIsImRlc2VyaWFsaXplU3BhbiIsImRlc2VyaWFsaXplTW9kZWxSZXNwb25zZSIsImRlc2VyaWFsaXplSXRlbSIsImRlc2VyaWFsaXplUHJvY2Vzc2VkUmVzcG9uc2UiLCJxdWV1ZSIsInNlcmlhbGl6ZWRTcGFuIiwic3BhbkRhdGEiLCJwcmV2aW91c1NwYW4iLCJzZXJpYWxpemVkTW9kZWxSZXNwb25zZSIsInVzYWdlIiwic2VyaWFsaXplZEl0ZW0iLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UiLCJjb21wdXRlclRvb2xzIiwiZnVuY3Rpb25DYWxsIiwiY29tcHV0ZXJBY3Rpb24iLCJERUZBVUxUX01BWF9UVVJOUyIsImdldFRyYWNpbmciLCJ0cmFjaW5nRGlzYWJsZWQiLCJ0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhIiwidG9BZ2VudElucHV0TGlzdCIsIlNlcnZlckNvbnZlcnNhdGlvblRyYWNrZXIiLCJjb252ZXJzYXRpb25JZCIsInByZXZpb3VzUmVzcG9uc2VJZCIsImdlbmVyYXRlZEl0ZW1zIiwibW9kZWxSZXNwb25zZXMiLCJsYXRlc3RSZXNwb25zZSIsImlucHV0SXRlbXMiLCJpbml0aWFsSXRlbXMiLCJyYXdJdGVtcyIsIl9SdW5uZXJfaW5zdGFuY2VzIiwid2l0aFRyYWNlIiwiX19wcml2YXRlTWV0aG9kIiwicnVuSW5kaXZpZHVhbFN0cmVhbV9mbiIsInJ1bkluZGl2aWR1YWxOb25TdHJlYW1fZm4iLCJnZXRPckNyZWF0ZVRyYWNlIiwiaXNSZXN1bWVkU3RhdGUiLCJzZXJ2ZXJDb252ZXJzYXRpb25UcmFja2VyIiwiZXhwbGljdGx5TW9kZWxTZXQiLCJzZWxlY3RNb2RlbCIsInR1cm5SZXN1bHQiLCJSdW5SZXN1bHQiLCJoYW5kb2ZmTmFtZXMiLCJzZXJpYWxpemVkVG9vbHMiLCJzZXJpYWxpemVkSGFuZG9mZnMiLCJydW5JbnB1dEd1YXJkcmFpbHNfZm4iLCJ0dXJuSW5wdXQiLCJhZ2VudE1vZGVsU2V0dGluZ3MiLCJhZGp1c3RNb2RlbFNldHRpbmdzRm9yTm9uR1BUNVJ1bm5lck1vZGVsIiwicnVuT3V0cHV0R3VhcmRyYWlsc19mbiIsImd1YXJkcmFpbHMiLCJndWFyZHJhaWxBcmdzIiwiZ3VhcmRyYWlsIiwiYWdlbnRPdXRwdXQiLCJydW5TdHJlYW1Mb29wX2ZuIiwiZmluYWxSZXNwb25zZSIsInByZVRvb2xJdGVtcyIsIlN0cmVhbWVkUnVuUmVzdWx0Iiwic3RyZWFtTG9vcFByb21pc2UiLCJhZ2VudE1vZGVsIiwicnVuQ29uZmlnTW9kZWwiLCJydW5uZXJNb2RlbCIsImNvcGllZE1vZGVsU2V0dGluZ3MiLCJfZyIsIl9oIiwiUnVuUmVzdWx0QmFzZSIsInJlc3BvbnNlcyIsIl9lcnJvciIsIl9zaWduYWwiLCJfcmVhZGFibGVDb250cm9sbGVyIiwiX3JlYWRhYmxlU3RyZWFtIiwiX2NvbXBsZXRlZFByb21pc2UiLCJfY29tcGxldGVkUHJvbWlzZVJlc29sdmUiLCJfY29tcGxldGVkUHJvbWlzZVJlamVjdCIsIl9jYW5jZWxsZWQiLCJfc3RyZWFtTG9vcFByb21pc2UiLCJfUmVhZGFibGVTdHJlYW0iLCJjb250cm9sbGVyIiwicmVzb2x2ZSIsInJlamVjdCIsImhhbmRsZUFib3J0Iiwic3RyZWFtIiwicHJvbWlzZSIsIl9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UiLCJjdXJyZW50VHJhY2UiLCJfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlIiwibmV3VHJhY2UiLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsImZvcmNlIiwidG9FeHBvcnQiLCJiYXRjaCIsIk11bHRpVHJhY2luZ1Byb2Nlc3NvciIsIl9wcm9jZXNzb3JzIiwicHJvY2Vzc29yIiwicHJvY2Vzc29ycyIsIl9kZWZhdWx0RXhwb3J0ZXIiLCJfZGVmYXVsdFByb2Nlc3NvciIsImRlZmF1bHRFeHBvcnRlciIsImRlZmF1bHRQcm9jZXNzb3IiLCJ0aW1lSXNvIiwiZ2VuZXJhdGVUcmFjZUlkIiwiZ2VuZXJhdGVTcGFuSWQiLCJyZW1vdmVQcml2YXRlRmllbGRzIiwiX1NwYW4iLCJfZGF0YSIsIl90cmFjZUlkIiwiX3NwYW5JZCIsIl9wYXJlbnRJZCIsIl9wcm9jZXNzb3IiLCJfc3RhcnRlZEF0IiwiX2VuZGVkQXQiLCJfcHJldmlvdXNTcGFuIiwiU3BhbiIsIk5vb3BTcGFuIiwiX1RyYWNlIiwiX3N0YXJ0ZWQiLCJUcmFjZSIsIk5vb3BUcmFjZSIsIlRyYWNlUHJvdmlkZXIiLCJfVHJhY2VQcm92aWRlcl9pbnN0YW5jZXMiLCJfbXVsdGlQcm9jZXNzb3IiLCJfZGlzYWJsZWQiLCJhZGRDbGVhbnVwTGlzdGVuZXJzX2ZuIiwiZGlzYWJsZWQiLCJ0cmFjZU9wdGlvbnMiLCJ0cmFjZUlkIiwic3Bhbk9wdGlvbnMiLCJwYXJlbnRJZCIsImNsZWFudXAiLCJoYXNPdGhlckxpc3RlbmVyc0ZvclNpZ25hbHMiLCJyZWFzb24iLCJoYXNPdGhlckxpc3RlbmVyc0ZvckV2ZW50cyIsIkdMT0JBTF9UUkFDRV9QUk9WSURFUiIsImFkZFRyYWNlUHJvY2Vzc29yIiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJpbmFyeVN0cmluZyIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSIsImxhc3RDb250ZW50SXRlbSIsImRpZmZSZWFsdGltZUhpc3RvcnkiLCJvbGRIaXN0b3J5IiwibmV3SGlzdG9yeSIsInJlbW92YWxzIiwiYWRkaXRpb25zIiwib2xkSXRlbSIsInVwZGF0ZXMiLCJoYXNXZWJSVENTdXBwb3J0IiwicmVtb3ZlQXVkaW9Gcm9tQ29udGVudCIsInVwZGF0ZVJlYWx0aW1lSGlzdG9yeSIsImhpc3RvcnkiLCJzaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwidXBkYXRlZENvbnRlbnQiLCJuZXdFdmVudCIsImV4aXN0aW5nSW5kZXgiLCJpZHgiLCJwcmV2SW5kZXgiLCJIRUFERVJTIiwiV0VCU09DS0VUX01FVEEiLCJyZWFsdGltZUFwcHJvdmFsSXRlbVRvQXBwcm92YWxJdGVtIiwiYXBwcm92YWxJdGVtVG9SZWFsdGltZUFwcHJvdmFsSXRlbSIsIml0ZW1JZCIsInNlcnZlckxhYmVsIiwiUmVhbHRpbWVBZ2VudCIsImdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MiLCJzZXR0aW5ncyIsImRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsIiwicG9saWN5SGludElucHV0IiwiYmFzZUd1YXJkcmFpbCIsInBvbGljeUhpbnQiLCJnZXRSZWFsdGltZUd1YXJkcmFpbEZlZWRiYWNrTWVzc2FnZSIsImlzRGVmaW5lZCIsImlzRGVwcmVjYXRlZENvbmZpZyIsInRvTmV3U2Vzc2lvbkNvbmZpZyIsImlucHV0Q29uZmlnIiwibm9ybWFsaXplQXVkaW9Gb3JtYXQiLCJyZXF1ZXN0ZWRPdXRwdXRWb2ljZSIsIm91dHB1dENvbmZpZyIsImYiLCJyZWFsdGltZU1lc3NhZ2VJdGVtU2NoZW1hIiwicmVhbHRpbWVUb29sQ2FsbEl0ZW0iLCJyZWFsdGltZU1jcENhbGxJdGVtIiwicmVhbHRpbWVNY3BDYWxsQXBwcm92YWxSZXF1ZXN0SXRlbSIsInJlYWx0aW1lUmVzcG9uc2UiLCJ6XG4gICAgICAgICAgICAub2JqZWN0IiwielxuICAgICAgICAuZW51bSIsImNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVNjaGVtYSIsInpcbiAgICAub2JqZWN0IiwiY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtRG9uZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRGVsdGFFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbURlbGV0ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVJldHJpZXZlRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSIsImVycm9yRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0dGVkRXZlbnRTY2hlbWEiLCJpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0b3BwZWRFdmVudFNjaGVtYSIsIm91dHB1dEF1ZGlvQnVmZmVyU3RhcnRlZEV2ZW50U2NoZW1hIiwib3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsInJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hIiwic2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0luUHJvZ3Jlc3NFdmVudFNjaGVtYSIsIm1jcExpc3RUb29sc0NvbXBsZXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VNY3BDYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbEluUHJvZ3Jlc3NFdmVudFNjaGVtYSIsInJlc3BvbnNlTWNwQ2FsbENvbXBsZXRlZEV2ZW50U2NoZW1hIiwibWNwTGlzdFRvb2xzRmFpbGVkRXZlbnRTY2hlbWEiLCJnZW5lcmljRXZlbnRTY2hlbWEiLCJyZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hIiwicGFyc2VSZWFsdGltZUV2ZW50IiwicmF3IiwiZ2VuZXJpY1BhcnNlZCIsIkRFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX01PREVMIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUciLCJfT3BlbkFJUmVhbHRpbWVCYXNlIiwiX2FwaUtleSIsIl90cmFjaW5nQ29uZmlnIiwiX3Jhd1Nlc3Npb25Db25maWciLCJhcGlLZXkiLCJpc0dlbmVyaWMiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInRvdGFsVG9rZW5zIiwicHJldmlvdXNJdGVtSWQiLCJtY3BBcHByb3ZhbFJlcXVlc3QiLCJtY3BDYWxsIiwicmVhbHRpbWVJdGVtIiwib3RoZXJFdmVudERhdGEiLCJ0cmlnZ2VyUmVzcG9uc2UiLCJpbWFnZSIsIm5ld0NvbmZpZyIsInNlc3Npb25EYXRhIiwiX2oiLCJfaSIsIl9sIiwiX24iLCJfbSIsIl9wIiwiX28iLCJfciIsIl9xIiwiX3QiLCJfcyIsIl92IiwiX3UiLCJfdyIsIl96IiwiX3kiLCJfQiIsIl9BIiwiY3JlYXRlUmVzcG9uc2UiLCJjcmVhdGVfcmVzcG9uc2UiLCJlYWdlcm5lc3MiLCJpbnRlcnJ1cHRSZXNwb25zZSIsImludGVycnVwdF9yZXNwb25zZSIsInByZWZpeFBhZGRpbmdNcyIsInByZWZpeF9wYWRkaW5nX21zIiwic2lsZW5jZUR1cmF0aW9uTXMiLCJzaWxlbmNlX2R1cmF0aW9uX21zIiwidGhyZXNob2xkIiwiaWRsZVRpbWVvdXRNcyIsImlkbGVfdGltZW91dF9tcyIsInRyYWNpbmdDb25maWciLCJzdGFydFJlc3BvbnNlIiwiYXVkaW8iLCJjb21taXQiLCJyZW1vdmFsSWRzIiwidXBkYXRlIiwiYWRkaXRpb25zQW5kVXBkYXRlcyIsImFkZGl0aW9uIiwiaXRlbUVudHJ5IiwiT3BlbkFJUmVhbHRpbWVCYXNlIiwiT3BlbkFJUmVhbHRpbWVXZWJSVEMiLCJfdXJsIiwiX3N0YXRlIiwiX3VzZUluc2VjdXJlQXBpS2V5IiwiX29uZ29pbmdSZXNwb25zZSIsIl9tdXRlZCIsImJhc2VVcmwiLCJpc0NsaWVudEtleSIsInVzZXJTZXNzaW9uQ29uZmlnIiwiY29ubmVjdGlvblVybCIsInBlZXJDb25uZWN0aW9uIiwiZGF0YUNoYW5uZWwiLCJhdWRpb0VsZW1lbnQiLCJvZmZlciIsInNkcFJlc3BvbnNlIiwiYW5zd2VyIiwibXV0ZWQiLCJzZW5kZXIiLCJXZWJTb2NrZXQiLCJPcGVuQUlSZWFsdGltZVdlYlNvY2tldCIsIl9PcGVuQUlSZWFsdGltZVdlYlNvY2tldF9pbnN0YW5jZXMiLCJfY3VycmVudEl0ZW1JZCIsIl9jdXJyZW50QXVkaW9Db250ZW50SW5kZXgiLCJfY3JlYXRlV2ViU29ja2V0IiwiX3NraXBPcGVuRXZlbnRMaXN0ZW5lcnMiLCJhdWRpb0V2ZW50IiwidXJsIiwic2Vzc2lvbkNvbmZpZyIsInNldHVwV2ViU29ja2V0X2ZuIiwiZWxhcHNlZFRpbWUiLCJjYW5jZWxPbmdvaW5nUmVzcG9uc2UiLCJsZW5ndGgiLCJhdWRpb19lbmRfbXMiLCJ3cyIsIndlYnNvY2tldEFyZ3VtZW50cyIsIm9uU29ja2V0T3BlblJlYWR5IiwiYnVmZiIsImZtdCIsInJhdGUiLCJhdXRvbWF0aWNSZXNwb25zZUNhbmNlbGxhdGlvbkVuYWJsZWQiLCJCQUNLR1JPVU5EX1JFU1VMVF9TWU1CT0wiLCJiYWNrZ3JvdW5kUmVzdWx0IiwiaXNCYWNrZ3JvdW5kUmVzdWx0IiwiaXNWYWxpZFJlYWx0aW1lVG9vbCIsInRvUmVhbHRpbWVUb29sRGVmaW5pdGlvbiIsInNlcnZlclVybCIsImNsb25lRGVmYXVsdFNlc3Npb25Db25maWciLCJSZWFsdGltZVNlc3Npb24iLCJfUmVhbHRpbWVTZXNzaW9uX2luc3RhbmNlcyIsIl90cmFuc3BvcnQiLCJfY3VycmVudEFnZW50IiwiX2N1cnJlbnRUb29scyIsIl9vdXRwdXRHdWFyZHJhaWxzIiwiX291dHB1dEd1YXJkcmFpbFNldHRpbmdzIiwiX3RyYW5zY3JpYmVkVGV4dERlbHRhcyIsIl9oaXN0b3J5IiwiX3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEiLCJfaW50ZXJydXB0ZWRCeUd1YXJkcmFpbCIsIl9hdWRpb1N0YXJ0ZWQiLCJfYWxsTWNwVG9vbHNCeVNlcnZlciIsIl9hdmFpbGFibGVNY3BUb29scyIsIl9sYXN0U2Vzc2lvbkNvbmZpZyIsIl9hdXRvbWF0aWNhbGx5VHJpZ2dlclJlc3BvbnNlRm9yTWNwVG9vbENhbGxzIiwic2V0Q3VycmVudEFnZW50X2ZuIiwiZ2V0U2Vzc2lvbkNvbmZpZ19mbiIsInNldEV2ZW50TGlzdGVuZXJzX2ZuIiwidXBkYXRlZEhpc3RvcnkiLCJoYW5kbGVGdW5jdGlvblRvb2xDYWxsX2ZuIiwiaGFuZG9mZlRvb2xzIiwiaGFzVG9vbHNEZWZpbmVkIiwiaGFzSGFuZG9mZnNEZWZpbmVkIiwidXBkYXRlQXZhaWxhYmxlTWNwVG9vbHNfZm4iLCJhZGRpdGlvbmFsQ29uZmlnIiwiaW5zdHJ1Y3Rpb25zIiwiZnVsbENvbmZpZyIsImhhbmRsZUhhbmRvZmZfZm4iLCJoYW5kbGVGdW5jdGlvbkNhbGxfZm4iLCJlbmFibGVkSGFuZG9mZnMiLCJmdW5jdGlvblRvb2xNYXAiLCJwb3NzaWJsZUhhbmRvZmYiLCJyZXNwb25zZUlkIiwiZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCIsImZlZWRiYWNrVGV4dCIsImNvbXBsZXRlZEV2ZW50IiwidGV4dE91dHB1dCIsImxhc3RSdW5JbmRleCIsImxhc3RJdGVtSWQiLCJkZWx0YSIsIm5ld1RleHQiLCJuZXdSdW5JbmRleCIsImlzTmV3IiwiYWRkZWRJdGVtIiwiYWN0aXZlTWNwQ29uZmlncyIsImFsbG93ZWRGcm9tQ29uZmlnIiwiY2ZnIiwiZGVkdXBCeU5hbWUiLCJwcmV2IiwidXRpbHMiLCJ1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIiLCJ1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQiLCJ1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNPLE1BQU1BLEtBQVc7QUFBQSxFQUVwQixTQUFXO0FBS2Y7QUNSTyxlQUFlQyxHQUFZQyxHQUFJO0FBQ2xDLE1BQUk7QUFDQSxXQUFPLENBQUMsTUFBTSxNQUFNQSxHQUFJO0FBQUEsRUFDNUIsU0FDT0MsR0FBTztBQUNWLFdBQU8sQ0FBQ0EsR0FBTyxJQUFJO0FBQUEsRUFDdkI7QUFDSjtBQ0tPLFNBQVNDLEdBQWNDLEdBQVM7QUFDbkMsUUFBTUMsSUFBZ0IsT0FBTyxPQUFPRCxDQUFPLEVBQUUsT0FBTyxDQUFDRSxNQUFNLE9BQU9BLEtBQU0sUUFBUTtBQUloRixTQUhlLE9BQU8sUUFBUUYsQ0FBTyxFQUNoQyxPQUFPLENBQUMsQ0FBQ0csR0FBR0MsQ0FBQyxNQUFNSCxFQUFjLFFBQVEsQ0FBQ0UsQ0FBQyxNQUFNLEVBQUUsRUFDbkQsSUFBSSxDQUFDLENBQUNDLEdBQUdGLENBQUMsTUFBTUEsQ0FBQztBQUUxQjtBQ2hCTyxNQUFNRyxHQUFhO0FBQUEsRUFDdEIsY0FBYztBQUNWLFNBQUssT0FBTyxvQkFBSSxJQUFHLEdBQ25CLEtBQUssU0FBUyxvQkFBSSxJQUFHO0FBQUEsRUFDekI7QUFBQSxFQUNBLElBQUlDLE1BQVdDLEdBQU87QUFDbEIsVUFBTUMsSUFBT0QsRUFBTSxDQUFDO0FBRXBCLFFBREEsS0FBSyxLQUFLLElBQUlELEdBQVFFLENBQUksR0FDdEJBLEtBQVEsT0FBT0EsS0FBUyxZQUFZLFFBQVFBLEdBQU07QUFDbEQsVUFBSSxLQUFLLE9BQU8sSUFBSUEsRUFBSyxFQUFFO0FBQ3ZCLGNBQU0sSUFBSSxNQUFNLE1BQU1BLEVBQUssRUFBRSxpQ0FBaUM7QUFFbEUsV0FBSyxPQUFPLElBQUlBLEVBQUssSUFBSUYsQ0FBTTtBQUFBLElBQ25DO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUNBLFFBQVE7QUFDSixnQkFBSyxPQUFPLG9CQUFJLElBQUcsR0FDbkIsS0FBSyxTQUFTLG9CQUFJLElBQUcsR0FDZDtBQUFBLEVBQ1g7QUFBQSxFQUNBLE9BQU9BLEdBQVE7QUFDWCxVQUFNRSxJQUFPLEtBQUssS0FBSyxJQUFJRixDQUFNO0FBQ2pDLFdBQUlFLEtBQVEsT0FBT0EsS0FBUyxZQUFZLFFBQVFBLEtBQzVDLEtBQUssT0FBTyxPQUFPQSxFQUFLLEVBQUUsR0FFOUIsS0FBSyxLQUFLLE9BQU9GLENBQU0sR0FDaEI7QUFBQSxFQUNYO0FBQUEsRUFDQSxJQUFJQSxHQUFRO0FBR1IsVUFBTUcsSUFBSUgsRUFBTyxLQUFLO0FBQ3RCLFFBQUlHLEdBQUc7QUFDSCxZQUFNQyxJQUFLLEVBQUUsR0FBSSxLQUFLLElBQUlELENBQUMsS0FBSyxDQUFBLEVBQUc7QUFDbkMsb0JBQU9DLEVBQUcsSUFDSCxFQUFFLEdBQUdBLEdBQUksR0FBRyxLQUFLLEtBQUssSUFBSUosQ0FBTSxFQUFDO0FBQUEsSUFDNUM7QUFDQSxXQUFPLEtBQUssS0FBSyxJQUFJQSxDQUFNO0FBQUEsRUFDL0I7QUFBQSxFQUNBLElBQUlBLEdBQVE7QUFDUixXQUFPLEtBQUssS0FBSyxJQUFJQSxDQUFNO0FBQUEsRUFDL0I7QUFDSjtBQUVPLFNBQVNLLEtBQVc7QUFDdkIsU0FBTyxJQUFJTixHQUFZO0FBQzNCO0FBQ08sTUFBTU8sS0FBK0IsZ0JBQUFELEdBQVE7QUNoRDdDLE1BQU1FLEdBQW9CO0FBQUEsRUFDN0IsWUFBWUMsR0FBUTtBQUNoQixTQUFLLFVBQVUsR0FDZixLQUFLLG9CQUFtQkEsS0FBQSxnQkFBQUEsRUFBUSxhQUFZRixJQUM1QyxLQUFLLFVBQVNFLEtBQUEsZ0JBQUFBLEVBQVEsV0FBVSxpQkFDaEMsS0FBSyxtQkFBa0JBLEtBQUEsZ0JBQUFBLEVBQVEsb0JBQW1CLFNBQ2xELEtBQUssWUFBV0EsS0FBQSxnQkFBQUEsRUFBUSxjQUFhLE1BQU07QUFBQSxJQUFFLElBQzdDLEtBQUssTUFBS0EsS0FBQSxnQkFBQUEsRUFBUSxPQUFNLFVBQ3hCLEtBQUssT0FBTyxvQkFBSSxJQUFHO0FBQUEsRUFDdkI7QUFBQSxFQUNBLFFBQVFSLEdBQVFTLElBQVUsRUFBRSxNQUFNLElBQUksWUFBWSxDQUFBLEtBQU07O0FBQ3BELFFBQUlDO0FBQ0osVUFBTUMsSUFBTVgsRUFBTyxLQUFLLEtBQ2xCWSxJQUFZO0FBQUEsTUFDZCxNQUFNO0FBQUEsTUFDTixLQUFLO0FBQUEsTUFDTCxVQUFVO0FBQUEsTUFDVixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUE7QUFBQSxJQUNuQixHQUVjQyxJQUFPLEtBQUssS0FBSyxJQUFJYixDQUFNO0FBQ2pDLFFBQUlhO0FBQ0EsYUFBQUEsRUFBSyxTQUVXSixFQUFRLFdBQVcsU0FBU1QsQ0FBTSxNQUU5Q2EsRUFBSyxRQUFRSixFQUFRLE9BRWxCSSxFQUFLO0FBR2hCLFVBQU1DLElBQVMsRUFBRSxRQUFRLENBQUEsR0FBSSxPQUFPLEdBQUcsT0FBTyxRQUFXLE1BQU1MLEVBQVEsS0FBSTtBQUMzRSxTQUFLLEtBQUssSUFBSVQsR0FBUWMsQ0FBTTtBQUU1QixVQUFNQyxLQUFpQkMsS0FBQU4sSUFBQVYsRUFBTyxNQUFLLGlCQUFaLGdCQUFBZ0IsRUFBQSxLQUFBTjtBQUN2QixRQUFJSztBQUNBLE1BQUFELEVBQU8sU0FBU0M7QUFBQSxTQUVmO0FBQ0QsWUFBTVAsSUFBUztBQUFBLFFBQ1gsR0FBR0M7QUFBQSxRQUNILFlBQVksQ0FBQyxHQUFHQSxFQUFRLFlBQVlULENBQU07QUFBQSxRQUMxQyxNQUFNUyxFQUFRO0FBQUEsTUFDOUIsR0FDa0JRLElBQVNqQixFQUFPLEtBQUs7QUFDM0IsVUFBSWlCO0FBRUEsUUFBQUgsRUFBTyxNQUFNRyxHQUNiLEtBQUssUUFBUUEsR0FBUVQsQ0FBTSxHQUMzQixLQUFLLEtBQUssSUFBSVMsQ0FBTSxFQUFFLFdBQVc7QUFBQSxXQUVoQztBQUNELGNBQU1DLElBQVFKLEVBQU87QUFDckIsZ0JBQVFILEVBQUksTUFBSTtBQUFBLFVBQ1osS0FBSyxVQUFVO0FBQ1gsa0JBQU1RLElBQU9EO0FBQ2IsWUFBQUMsRUFBSyxPQUFPO0FBQ1osa0JBQU0sRUFBRSxTQUFBQyxHQUFTLFNBQUFDLEdBQVMsUUFBQUMsR0FBUSxVQUFBQyxHQUFVLGlCQUFBQyxFQUFlLElBQUt4QixFQUFPLEtBQ2xFO0FBYUwsZ0JBWkksT0FBT29CLEtBQVksYUFDbkJELEVBQUssWUFBWUMsSUFDakIsT0FBT0MsS0FBWSxhQUNuQkYsRUFBSyxZQUFZRSxJQUVqQkMsTUFDQUgsRUFBSyxTQUFTUCxFQUFVVSxDQUFNLEtBQUtBLEdBQy9CSCxFQUFLLFdBQVcsTUFDaEIsT0FBT0EsRUFBSyxTQUVoQkssTUFDQUwsRUFBSyxrQkFBa0JLLElBQ3ZCRCxLQUFZQSxFQUFTLE9BQU8sR0FBRztBQUMvQixvQkFBTUUsSUFBVSxDQUFDLEdBQUdGLENBQVE7QUFDNUIsY0FBSUUsRUFBUSxXQUFXLElBQ25CTixFQUFLLFVBQVVNLEVBQVEsQ0FBQyxFQUFFLFNBQ3JCQSxFQUFRLFNBQVMsTUFDdEJYLEVBQU8sT0FBTyxRQUFRO0FBQUEsZ0JBQ2xCLEdBQUdXLEVBQVEsSUFBSSxDQUFDQyxRQUFXO0FBQUEsa0JBQ3ZCLEdBQUksS0FBSyxXQUFXLFlBQVksRUFBRSxNQUFNLFNBQVEsSUFBSztrQkFDckQsU0FBU0EsR0FBTTtBQUFBLGdCQUN2RCxFQUFzQztBQUFBLGNBQ3RDO0FBQUEsWUFFd0I7QUFDQTtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssVUFBVTtBQUNYLGtCQUFNUCxJQUFPRCxHQUNQLEVBQUUsU0FBQUUsR0FBUyxTQUFBQyxHQUFTLFFBQUFDLEdBQVEsWUFBQUssR0FBWSxrQkFBQUMsR0FBa0Isa0JBQUFDLEVBQWdCLElBQUs3QixFQUFPLEtBQUs7QUFDakcsWUFBSSxPQUFPc0IsS0FBVyxZQUFZQSxFQUFPLFNBQVMsS0FBSyxJQUNuREgsRUFBSyxPQUFPLFlBRVpBLEVBQUssT0FBTyxVQUNaLE9BQU9VLEtBQXFCLGFBQzVCVixFQUFLLG1CQUFtQlUsSUFDeEIsT0FBT1QsS0FBWSxhQUNuQkQsRUFBSyxVQUFVQyxHQUNYLE9BQU9TLEtBQXFCLGFBQ3hCQSxLQUFvQlQsSUFDcEIsT0FBT0QsRUFBSyxVQUVaLE9BQU9BLEVBQUssb0JBR3BCLE9BQU9TLEtBQXFCLGFBQzVCVCxFQUFLLG1CQUFtQlMsSUFDeEIsT0FBT1AsS0FBWSxhQUNuQkYsRUFBSyxVQUFVRSxHQUNYLE9BQU9PLEtBQXFCLGFBQ3hCQSxLQUFvQlAsSUFDcEIsT0FBT0YsRUFBSyxVQUVaLE9BQU9BLEVBQUssb0JBR3BCLE9BQU9RLEtBQWUsYUFDdEJSLEVBQUssYUFBYVE7QUFDdEI7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFdBQVc7QUFDWixrQkFBTVIsSUFBT0Q7QUFDYixZQUFBQyxFQUFLLE9BQU87QUFDWjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssVUFBVTtBQUNYLGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSw2Q0FBNkM7QUFFakU7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFVBQVU7QUFDWCxnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0sOENBQThDO0FBRWxFO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxRQUFRO0FBQ1QsWUFBQUQsRUFBTSxPQUFPO0FBQ2I7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLO0FBQ0Q7QUFBQSxVQUVKLEtBQUs7QUFDRDtBQUFBLFVBRUosS0FBSyxhQUFhO0FBQ2QsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLGdEQUFnRDtBQUVwRTtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSwyQ0FBMkM7QUFFL0Q7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFNBQVM7QUFDVixZQUFBQSxFQUFNLE1BQU0sQ0FBQTtBQUNaO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxRQUFRO0FBQ1QsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLDJDQUEyQztBQUUvRDtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssU0FBUztBQUNWLGtCQUFNQyxJQUFPRCxHQUNQLEVBQUUsU0FBQUUsR0FBUyxTQUFBQyxFQUFPLElBQUtyQixFQUFPLEtBQUs7QUFDekMsWUFBSSxPQUFPb0IsS0FBWSxhQUNuQkQsRUFBSyxXQUFXQyxJQUNoQixPQUFPQyxLQUFZLGFBQ25CRixFQUFLLFdBQVdFLElBQ3BCRixFQUFLLE9BQU8sU0FDWkEsRUFBSyxRQUFRLEtBQUssUUFBUVIsRUFBSSxTQUFTLEVBQUUsR0FBR0gsR0FBUSxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLE9BQU8sRUFBQyxDQUFFO0FBQ3JGO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxVQUFVO0FBQ1gsa0JBQU1XLElBQU9EO0FBQ2IsWUFBQUMsRUFBSyxPQUFPLFVBQ1pBLEVBQUssYUFBYSxDQUFBO0FBQ2xCLGtCQUFNVyxJQUFRbkIsRUFBSTtBQUNsQix1QkFBV29CLEtBQU9EO0FBQ2QsY0FBQVgsRUFBSyxXQUFXWSxDQUFHLElBQUksS0FBSyxRQUFRRCxFQUFNQyxDQUFHLEdBQUc7QUFBQSxnQkFDNUMsR0FBR3ZCO0FBQUEsZ0JBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxjQUFjdUIsQ0FBRztBQUFBLGNBQ3hFLENBQTZCO0FBR0wsa0JBQU1DLElBQVUsSUFBSSxJQUFJLE9BQU8sS0FBS0YsQ0FBSyxDQUFDLEdBRXBDRyxJQUFlLElBQUksSUFBSSxDQUFDLEdBQUdELENBQU8sRUFBRSxPQUFPLENBQUNELE1BQVE7QUFDdEQsb0JBQU1uQyxJQUFJZSxFQUFJLE1BQU1vQixDQUFHLEVBQUU7QUFDekIscUJBQUksS0FBSyxPQUFPLFVBQ0xuQyxFQUFFLFVBQVUsU0FHWkEsRUFBRSxXQUFXO0FBQUEsWUFFNUIsQ0FBQyxDQUFDO0FBQ0YsWUFBSXFDLEVBQWEsT0FBTyxNQUNwQmQsRUFBSyxXQUFXLE1BQU0sS0FBS2MsQ0FBWSxNQUd2Q0MsSUFBQXZCLEVBQUksYUFBSixnQkFBQXVCLEVBQWMsS0FBSyxJQUFJLFVBQVMsVUFFaENmLEVBQUssdUJBQXVCLEtBRXRCUixFQUFJLFdBS0xBLEVBQUksYUFDVFEsRUFBSyx1QkFBdUIsS0FBSyxRQUFRUixFQUFJLFVBQVU7QUFBQSxjQUNuRCxHQUFHSDtBQUFBLGNBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxzQkFBc0I7QUFBQSxZQUM3RSxDQUE2QixLQVBHLEtBQUssT0FBTyxhQUNaVyxFQUFLLHVCQUF1QjtBQVFwQztBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssU0FBUztBQUNWLGtCQUFNQSxJQUFPRDtBQUNiLFlBQUFDLEVBQUssUUFBUVIsRUFBSSxRQUFRLElBQUksQ0FBQ3dCLEdBQUdDLE1BQU0sS0FBSyxRQUFRRCxHQUFHO0FBQUEsY0FDbkQsR0FBRzNCO0FBQUEsY0FDSCxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLFNBQVM0QixDQUFDO0FBQUEsWUFDN0QsQ0FBeUIsQ0FBQztBQUNGO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxnQkFBZ0I7QUFDakIsa0JBQU1qQixJQUFPRCxHQUNQbUIsSUFBSSxLQUFLLFFBQVExQixFQUFJLE1BQU07QUFBQSxjQUM3QixHQUFHSDtBQUFBLGNBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxTQUFTLENBQUM7QUFBQSxZQUM3RCxDQUF5QixHQUNLOEIsSUFBSSxLQUFLLFFBQVEzQixFQUFJLE9BQU87QUFBQSxjQUM5QixHQUFHSDtBQUFBLGNBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxTQUFTLENBQUM7QUFBQSxZQUM3RCxDQUF5QixHQUNLK0IsSUFBdUIsQ0FBQ0MsTUFBUSxXQUFXQSxLQUFPLE9BQU8sS0FBS0EsQ0FBRyxFQUFFLFdBQVcsR0FDOUVDLElBQVE7QUFBQSxjQUNWLEdBQUlGLEVBQXFCRixDQUFDLElBQUlBLEVBQUUsUUFBUSxDQUFDQSxDQUFDO0FBQUEsY0FDMUMsR0FBSUUsRUFBcUJELENBQUMsSUFBSUEsRUFBRSxRQUFRLENBQUNBLENBQUM7QUFBQSxZQUN0RTtBQUN3QixZQUFBbkIsRUFBSyxRQUFRc0I7QUFDYjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssU0FBUztBQUNWLGtCQUFNdEIsSUFBT0Q7QUFDYixZQUFBQyxFQUFLLE9BQU87QUFDWixrQkFBTXVCLElBQWMvQixFQUFJLE1BQU0sSUFBSSxDQUFDd0IsR0FBR0MsTUFBTSxLQUFLLFFBQVFELEdBQUcsRUFBRSxHQUFHM0IsR0FBUSxNQUFNLENBQUMsR0FBR0EsRUFBTyxNQUFNLGVBQWU0QixDQUFDLEVBQUMsQ0FBRSxDQUFDO0FBT3BILGdCQU5JLEtBQUssV0FBVyxrQkFDaEJqQixFQUFLLGNBQWN1QixJQUduQnZCLEVBQUssUUFBUXVCLEdBRWIvQixFQUFJLE1BQU07QUFDVixvQkFBTWdDLElBQU8sS0FBSyxRQUFRaEMsRUFBSSxNQUFNO0FBQUEsZ0JBQ2hDLEdBQUdIO0FBQUEsZ0JBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxPQUFPO0FBQUEsY0FDOUQsQ0FBNkI7QUFDRCxjQUFJLEtBQUssV0FBVyxrQkFDaEJXLEVBQUssUUFBUXdCLElBR2J4QixFQUFLLGtCQUFrQndCO0FBQUEsWUFFL0I7QUFFQSxZQUFJaEMsRUFBSSxTQUNKUSxFQUFLLFFBQVEsS0FBSyxRQUFRUixFQUFJLE1BQU07QUFBQSxjQUNoQyxHQUFHSDtBQUFBLGNBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxPQUFPO0FBQUEsWUFDOUQsQ0FBNkI7QUFHTCxrQkFBTSxFQUFFLFNBQUFZLEdBQVMsU0FBQUMsRUFBTyxJQUFLckIsRUFBTyxLQUFLO0FBQ3pDLFlBQUksT0FBT29CLEtBQVksYUFDbkJELEVBQUssV0FBV0MsSUFDaEIsT0FBT0MsS0FBWSxhQUNuQkYsRUFBSyxXQUFXRTtBQUNwQjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssVUFBVTtBQUNYLGtCQUFNRixJQUFPRDtBQUNiLFlBQUFDLEVBQUssT0FBTyxVQUNaQSxFQUFLLGdCQUFnQixLQUFLLFFBQVFSLEVBQUksU0FBUyxFQUFFLEdBQUdILEdBQVEsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxlQUFlLEVBQUMsQ0FBRSxHQUNyR1csRUFBSyx1QkFBdUIsS0FBSyxRQUFRUixFQUFJLFdBQVc7QUFBQSxjQUNwRCxHQUFHSDtBQUFBLGNBQ0gsTUFBTSxDQUFDLEdBQUdBLEVBQU8sTUFBTSxzQkFBc0I7QUFBQSxZQUN6RSxDQUF5QjtBQUNEO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxPQUFPO0FBQ1IsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLDBDQUEwQztBQUU5RDtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssT0FBTztBQUNSLGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSwwQ0FBMEM7QUFFOUQ7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFFBQVE7QUFDVCxrQkFBTVcsSUFBT0QsR0FDUDBCLElBQVNuRCxHQUFja0IsRUFBSSxPQUFPO0FBRXhDLFlBQUlpQyxFQUFPLE1BQU0sQ0FBQ2hELE1BQU0sT0FBT0EsS0FBTSxRQUFRLE1BQ3pDdUIsRUFBSyxPQUFPLFdBQ1p5QixFQUFPLE1BQU0sQ0FBQ2hELE1BQU0sT0FBT0EsS0FBTSxRQUFRLE1BQ3pDdUIsRUFBSyxPQUFPLFdBQ2hCQSxFQUFLLE9BQU95QjtBQUNaO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxXQUFXO0FBQ1osa0JBQU16QixJQUFPRCxHQUNQMkIsSUFBTyxDQUFBO0FBQ2IsdUJBQVdMLEtBQU83QixFQUFJO0FBQ2xCLGtCQUFJNkIsTUFBUTtBQUNSLG9CQUFJLEtBQUssb0JBQW9CO0FBQ3pCLHdCQUFNLElBQUksTUFBTSwwREFBMEQ7QUFBQSx5QkFNekUsT0FBT0EsS0FBUSxVQUFVO0FBQzlCLG9CQUFJLEtBQUssb0JBQW9CO0FBQ3pCLHdCQUFNLElBQUksTUFBTSxzREFBc0Q7QUFHdEUsZ0JBQUFLLEVBQUssS0FBSyxPQUFPTCxDQUFHLENBQUM7QUFBQSxjQUU3QjtBQUVJLGdCQUFBSyxFQUFLLEtBQUtMLENBQUc7QUFHckIsZ0JBQUlLLEVBQUssV0FBVyxFQUdmLEtBQUlBLEVBQUssV0FBVyxHQUFHO0FBQ3hCLG9CQUFNTCxJQUFNSyxFQUFLLENBQUM7QUFDbEIsY0FBQTFCLEVBQUssT0FBT3FCLE1BQVEsT0FBTyxTQUFTLE9BQU9BLEdBQzNDckIsRUFBSyxRQUFRcUI7QUFBQSxZQUNqQjtBQUVJLGNBQUlLLEVBQUssTUFBTSxDQUFDakQsTUFBTSxPQUFPQSxLQUFNLFFBQVEsTUFDdkN1QixFQUFLLE9BQU8sV0FDWjBCLEVBQUssTUFBTSxDQUFDakQsTUFBTSxPQUFPQSxLQUFNLFFBQVEsTUFDdkN1QixFQUFLLE9BQU8sV0FDWjBCLEVBQUssTUFBTSxDQUFDakQsTUFBTSxPQUFPQSxLQUFNLFNBQVMsTUFDeEN1QixFQUFLLE9BQU8sV0FDWjBCLEVBQUssTUFBTSxDQUFDakQsTUFBTUEsTUFBTSxJQUFJLE1BQzVCdUIsRUFBSyxPQUFPLFNBQ2hCQSxFQUFLLE9BQU8wQjtBQUVoQjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssUUFBUTtBQUNULGtCQUFNMUIsSUFBT0QsR0FDUDRCLElBQU87QUFBQSxjQUNULE1BQU07QUFBQSxjQUNOLFFBQVE7QUFBQSxjQUNSLGlCQUFpQjtBQUFBLFlBQzdDLEdBQzhCLEVBQUUsU0FBQTFCLEdBQVMsU0FBQUMsR0FBUyxNQUFBMEIsRUFBSSxJQUFLL0MsRUFBTyxLQUFLO0FBQy9DLFlBQUlvQixNQUFZLFdBQ1owQixFQUFLLFlBQVkxQixJQUNqQkMsTUFBWSxXQUNaeUIsRUFBSyxZQUFZekIsSUFDakIwQixJQUNJQSxFQUFLLFdBQVcsS0FDaEJELEVBQUssbUJBQW1CQyxFQUFLLENBQUMsR0FDOUIsT0FBTyxPQUFPNUIsR0FBTTJCLENBQUksS0FHeEIzQixFQUFLLFFBQVE0QixFQUFLLElBQUksQ0FBQ0MsT0FDTCxFQUFFLEdBQUdGLEdBQU0sa0JBQWtCRSxFQUFDLEVBRS9DLElBSUwsT0FBTyxPQUFPN0IsR0FBTTJCLENBQUk7QUFLNUI7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLGFBQWE7QUFDZCxnQkFBSSxLQUFLLG9CQUFvQjtBQUN6QixvQkFBTSxJQUFJLE1BQU0saURBQWlEO0FBRXJFO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxZQUFZO0FBQ2Isa0JBQU1HLElBQVEsS0FBSyxRQUFRdEMsRUFBSSxXQUFXSCxDQUFNO0FBQ2hELFlBQUFVLEVBQU0sUUFBUSxDQUFDK0IsR0FBTyxFQUFFLE1BQU0sT0FBTSxDQUFFO0FBQ3RDO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxlQUFlO0FBQ2hCLGlCQUFLLFFBQVF0QyxFQUFJLFdBQVdILENBQU0sR0FDbENNLEVBQU8sTUFBTUgsRUFBSTtBQUNqQjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssV0FBVztBQUNaLGtCQUFNUSxJQUFPRDtBQUNiLFlBQUFDLEVBQUssT0FBTztBQUNaO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxXQUFXO0FBQ1osaUJBQUssUUFBUVIsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUksV0FDakJPLEVBQU0sVUFBVSxLQUFLLE1BQU0sS0FBSyxVQUFVUCxFQUFJLFlBQVksQ0FBQztBQUMzRDtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssWUFBWTtBQUNiLGlCQUFLLFFBQVFBLEVBQUksV0FBV0gsQ0FBTSxHQUNsQ00sRUFBTyxNQUFNSCxFQUFJLFdBQ2IsS0FBSyxPQUFPLFlBQ1pPLEVBQU0sWUFBWSxLQUFLLE1BQU0sS0FBSyxVQUFVUCxFQUFJLFlBQVksQ0FBQztBQUNqRTtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssU0FBUztBQUVWLGlCQUFLLFFBQVFBLEVBQUksV0FBV0gsQ0FBTSxHQUNsQ00sRUFBTyxNQUFNSCxFQUFJO0FBQ2pCLGdCQUFJdUM7QUFDSixnQkFBSTtBQUNBLGNBQUFBLElBQWF2QyxFQUFJLFdBQVcsTUFBUztBQUFBLFlBQ3pDLFFBQ007QUFDRixvQkFBTSxJQUFJLE1BQU0sdURBQXVEO0FBQUEsWUFDM0U7QUFDQSxZQUFBTyxFQUFNLFVBQVVnQztBQUNoQjtBQUFBLFVBQ0o7QUFBQSxVQUNBLEtBQUssT0FBTztBQUNSLGdCQUFJLEtBQUssb0JBQW9CO0FBQ3pCLG9CQUFNLElBQUksTUFBTSwwQ0FBMEM7QUFFOUQ7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLG9CQUFvQjtBQUNyQixrQkFBTS9CLElBQU9ELEdBQ1BpQyxJQUFVbkQsRUFBTyxLQUFLO0FBQzVCLGdCQUFJLENBQUNtRDtBQUNELG9CQUFNLElBQUksTUFBTSx1Q0FBdUM7QUFDM0QsWUFBQWhDLEVBQUssT0FBTyxVQUNaQSxFQUFLLFVBQVVnQyxFQUFRO0FBQ3ZCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxRQUFRO0FBQ1Qsa0JBQU1DLElBQVksS0FBSyxPQUFPLFVBQVd6QyxFQUFJLEdBQUcsS0FBSyxJQUFJLFNBQVMsY0FBY0EsRUFBSSxNQUFNQSxFQUFJLEtBQU1BLEVBQUk7QUFDeEcsaUJBQUssUUFBUXlDLEdBQVc1QyxDQUFNLEdBQzlCTSxFQUFPLE1BQU1zQztBQUNiO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxZQUFZO0FBQ2IsaUJBQUssUUFBUXpDLEVBQUksV0FBV0gsQ0FBTSxHQUNsQ00sRUFBTyxNQUFNSCxFQUFJLFdBQ2pCTyxFQUFNLFdBQVc7QUFDakI7QUFBQSxVQUNKO0FBQUE7QUFBQSxVQUVBLEtBQUssV0FBVztBQUNaLGlCQUFLLFFBQVFQLEVBQUksV0FBV0gsQ0FBTSxHQUNsQ00sRUFBTyxNQUFNSCxFQUFJO0FBQ2pCO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxZQUFZO0FBQ2IsaUJBQUssUUFBUUEsRUFBSSxXQUFXSCxDQUFNLEdBQ2xDTSxFQUFPLE1BQU1ILEVBQUk7QUFDakI7QUFBQSxVQUNKO0FBQUEsVUFDQSxLQUFLLFFBQVE7QUFDVCxrQkFBTXlDLElBQVlwRCxFQUFPLEtBQUs7QUFDOUIsaUJBQUssUUFBUW9ELEdBQVc1QyxDQUFNLEdBQzlCTSxFQUFPLE1BQU1zQztBQUNiO0FBQUEsVUFDSjtBQUFBLFVBQ0EsS0FBSyxVQUFVO0FBQ1gsZ0JBQUksS0FBSyxvQkFBb0I7QUFDekIsb0JBQU0sSUFBSSxNQUFNLG1EQUFtRDtBQUV2RTtBQUFBLFVBQ0o7QUFBQSxRQUlwQjtBQUFBLE1BQ1k7QUFBQSxJQUNKO0FBRUEsVUFBTWxELElBQU8sS0FBSyxpQkFBaUIsSUFBSUYsQ0FBTTtBQUM3QyxXQUFJRSxLQUNBLE9BQU8sT0FBT1ksRUFBTyxRQUFRWixDQUFJLEdBQ2pDLEtBQUssT0FBTyxXQUFXbUQsR0FBZXJELENBQU0sTUFFNUMsT0FBT2MsRUFBTyxPQUFPLFVBQ3JCLE9BQU9BLEVBQU8sT0FBTyxVQUdyQixLQUFLLE9BQU8sV0FBV0EsRUFBTyxPQUFPLGVBQ3BDSixJQUFLSSxFQUFPLFFBQVEsWUFBWUosRUFBRyxVQUFVSSxFQUFPLE9BQU8sYUFDaEUsT0FBT0EsRUFBTyxPQUFPLFdBRUwsS0FBSyxLQUFLLElBQUlkLENBQU0sRUFDckI7QUFBQSxFQUNuQjtBQUFBLEVBQ0EsS0FBS0EsR0FBUVMsR0FBUzs7QUFDbEIsVUFBTUQsSUFBUztBQUFBLE1BQ1gsU0FBUUMsS0FBQSxnQkFBQUEsRUFBUyxXQUFVO0FBQUEsTUFDM0IsU0FBUUEsS0FBQSxnQkFBQUEsRUFBUyxXQUFVO0FBQUE7QUFBQTtBQUFBLE1BRzNCLFdBQVVBLEtBQUEsZ0JBQUFBLEVBQVMsYUFBWTtBQUFBLElBQzNDLEdBRWM2QyxJQUFPLEtBQUssS0FBSyxJQUFJdEQsQ0FBTTtBQUNqQyxRQUFJLENBQUNzRDtBQUNELFlBQU0sSUFBSSxNQUFNLDJDQUEyQztBQUsvRCxVQUFNQyxJQUFVLENBQUNDLE1BQVU7O0FBS3ZCLFlBQU1DLElBQWMsS0FBSyxXQUFXLGtCQUFrQixVQUFVO0FBQ2hFLFVBQUlqRCxFQUFPLFVBQVU7QUFDakIsY0FBTWtELEtBQWFoRCxJQUFBRixFQUFPLFNBQVMsU0FBUyxJQUFJZ0QsRUFBTSxDQUFDLENBQUMsTUFBckMsZ0JBQUE5QyxFQUF3QyxJQUVyRGlELElBQWVuRCxFQUFPLFNBQVMsUUFBUSxDQUFDb0QsT0FBT0E7QUFDckQsWUFBSUY7QUFDQSxpQkFBTyxFQUFFLEtBQUtDLEVBQWFELENBQVUsRUFBQztBQUcxQyxjQUFNRSxLQUFLSixFQUFNLENBQUMsRUFBRSxTQUFTQSxFQUFNLENBQUMsRUFBRSxPQUFPLE1BQU0sU0FBUyxLQUFLLFNBQVM7QUFDMUUsZUFBQUEsRUFBTSxDQUFDLEVBQUUsUUFBUUksSUFDVixFQUFFLE9BQU9BLElBQUksS0FBSyxHQUFHRCxFQUFhLFVBQVUsQ0FBQyxLQUFLRixDQUFXLElBQUlHLEVBQUUsR0FBRTtBQUFBLE1BQ2hGO0FBQ0EsVUFBSUosRUFBTSxDQUFDLE1BQU1GO0FBQ2IsZUFBTyxFQUFFLEtBQUssSUFBRztBQUlyQixZQUFNTyxJQUFlLEtBQWdCSixDQUFXLEtBQzFDSyxJQUFRTixFQUFNLENBQUMsRUFBRSxPQUFPLE1BQU0sV0FBVyxLQUFLLFNBQVM7QUFDN0QsYUFBTyxFQUFFLE9BQUFNLEdBQU8sS0FBS0QsSUFBZUMsRUFBSztBQUFBLElBQzdDLEdBR01DLElBQWUsQ0FBQ1AsTUFBVTtBQUU1QixVQUFJQSxFQUFNLENBQUMsRUFBRSxPQUFPO0FBQ2hCO0FBRUosWUFBTTNDLElBQU8yQyxFQUFNLENBQUMsR0FDZCxFQUFFLEtBQUFRLEdBQUssT0FBQUYsTUFBVVAsRUFBUUMsQ0FBSztBQUNwQyxNQUFBM0MsRUFBSyxNQUFNLEVBQUUsR0FBR0EsRUFBSyxPQUFNLEdBRXZCaUQsTUFDQWpELEVBQUssUUFBUWlEO0FBRWpCLFlBQU05RCxJQUFTYSxFQUFLO0FBQ3BCLGlCQUFXa0IsS0FBTy9CO0FBQ2QsZUFBT0EsRUFBTytCLENBQUc7QUFFckIsTUFBQS9CLEVBQU8sT0FBT2dFO0FBQUEsSUFDbEI7QUFHQSxRQUFJeEQsRUFBTyxXQUFXO0FBQ2xCLGlCQUFXZ0QsS0FBUyxLQUFLLEtBQUssUUFBTyxHQUFJO0FBQ3JDLGNBQU0zQyxJQUFPMkMsRUFBTSxDQUFDO0FBQ3BCLFlBQUkzQyxFQUFLO0FBQ0wsZ0JBQU0sSUFBSSxNQUFNLHNCQUNQSCxJQUFBRyxFQUFLLFVBQUwsZ0JBQUFILEVBQVksS0FBSyxJQUFJO0FBQUE7QUFBQSxpRkFDd0Q7QUFBQSxNQUU5RjtBQUdKLGVBQVc4QyxLQUFTLEtBQUssS0FBSyxRQUFPLEdBQUk7QUFDckMsWUFBTTNDLElBQU8yQyxFQUFNLENBQUM7QUFFcEIsVUFBSXhELE1BQVd3RCxFQUFNLENBQUMsR0FBRztBQUNyQixRQUFBTyxFQUFhUCxDQUFLO0FBQ2xCO0FBQUEsTUFDSjtBQUVBLFVBQUloRCxFQUFPLFVBQVU7QUFDakIsY0FBTXlELEtBQU1qRCxJQUFBUixFQUFPLFNBQVMsU0FBUyxJQUFJZ0QsRUFBTSxDQUFDLENBQUMsTUFBckMsZ0JBQUF4QyxFQUF3QztBQUNwRCxZQUFJaEIsTUFBV3dELEVBQU0sQ0FBQyxLQUFLUyxHQUFLO0FBQzVCLFVBQUFGLEVBQWFQLENBQUs7QUFDbEI7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUdBLFdBRFd0QixJQUFBLEtBQUssaUJBQWlCLElBQUlzQixFQUFNLENBQUMsQ0FBQyxNQUFsQyxnQkFBQXRCLEVBQXFDLElBQ3hDO0FBQ0osUUFBQTZCLEVBQWFQLENBQUs7QUFDbEI7QUFBQSxNQUNKO0FBRUEsVUFBSTNDLEVBQUssT0FBTztBQUVaLFFBQUFrRCxFQUFhUCxDQUFLO0FBQ2xCO0FBQUEsTUFDSjtBQUVBLFVBQUkzQyxFQUFLLFFBQVEsS0FDVEwsRUFBTyxXQUFXLE9BQU87QUFDekIsUUFBQXVELEVBQWFQLENBQUs7QUFFbEI7QUFBQSxNQUNKO0FBQUEsSUFFUjtBQUVBLFVBQU1VLElBQWEsQ0FBQ0MsR0FBVzNELE1BQVc7QUFDdEMsWUFBTUssSUFBTyxLQUFLLEtBQUssSUFBSXNELENBQVMsR0FDOUJuRSxJQUFTYSxFQUFLLE9BQU9BLEVBQUssUUFDMUJ1RCxJQUFVLEVBQUUsR0FBR3BFLEVBQU07QUFFM0IsVUFBSWEsRUFBSyxRQUFRO0FBQ2I7QUFHSixZQUFNbUQsSUFBTW5ELEVBQUs7QUFFakIsVUFEQUEsRUFBSyxNQUFNLE1BQ1BtRCxHQUFLO0FBQ0wsUUFBQUUsRUFBV0YsR0FBS3hELENBQU07QUFFdEIsY0FBTTZELElBQVksS0FBSyxLQUFLLElBQUlMLENBQUcsRUFBRTtBQUNyQyxRQUFJSyxFQUFVLFFBQVE3RCxFQUFPLFdBQVcsYUFDcENSLEVBQU8sUUFBUUEsRUFBTyxTQUFTLENBQUEsR0FDL0JBLEVBQU8sTUFBTSxLQUFLcUUsQ0FBUyxNQUczQixPQUFPLE9BQU9yRSxHQUFRcUUsQ0FBUyxHQUMvQixPQUFPLE9BQU9yRSxHQUFRb0UsQ0FBTztBQUFBLE1BRXJDO0FBRUEsTUFBS3ZELEVBQUssWUFDTixLQUFLLFNBQVM7QUFBQSxRQUNWLFdBQVdzRDtBQUFBLFFBQ1gsWUFBWW5FO0FBQUEsUUFDWixNQUFNYSxFQUFLLFFBQVEsQ0FBQTtBQUFBLE1BQ3ZDLENBQWlCO0FBQUEsSUFDVDtBQUNBLGVBQVcyQyxLQUFTLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBTyxDQUFFLEVBQUU7QUFDekMsTUFBQVUsRUFBV1YsRUFBTSxDQUFDLEdBQUcsRUFBRSxRQUFRLEtBQUssUUFBUTtBQUVoRCxVQUFNMUMsSUFBUyxDQUFBO0FBVWYsUUFUSSxLQUFLLFdBQVcsa0JBQ2hCQSxFQUFPLFVBQVUsaURBRVosS0FBSyxXQUFXLFlBQ3JCQSxFQUFPLFVBQVUsNENBR2pCLFFBQVEsS0FBSyxtQkFBbUIsS0FBSyxNQUFNLEVBQUUsSUFFN0N3RCxJQUFBOUQsRUFBTyxhQUFQLFFBQUE4RCxFQUFpQixLQUFLO0FBQ3RCLFlBQU1WLEtBQUtXLElBQUEvRCxFQUFPLFNBQVMsU0FBUyxJQUFJUixDQUFNLE1BQW5DLGdCQUFBdUUsRUFBc0M7QUFDakQsVUFBSSxDQUFDWDtBQUNELGNBQU0sSUFBSSxNQUFNLG9DQUFvQztBQUN4RCxNQUFBOUMsRUFBTyxNQUFNTixFQUFPLFNBQVMsSUFBSW9ELENBQUU7QUFBQSxJQUN2QztBQUNBLFdBQU8sT0FBTzlDLEdBQVF3QyxFQUFLLEdBQUc7QUFFOUIsVUFBTWtCLE1BQU9DLElBQUFqRSxFQUFPLGFBQVAsZ0JBQUFpRSxFQUFpQixTQUFRLENBQUE7QUFDdEMsZUFBV2pCLEtBQVMsS0FBSyxLQUFLLFFBQU8sR0FBSTtBQUNyQyxZQUFNM0MsSUFBTzJDLEVBQU0sQ0FBQztBQUNwQixNQUFJM0MsRUFBSyxPQUFPQSxFQUFLLFVBQ2pCMkQsRUFBSzNELEVBQUssS0FBSyxJQUFJQSxFQUFLO0FBQUEsSUFFaEM7QUFFQSxJQUFJTCxFQUFPLFlBR0gsT0FBTyxLQUFLZ0UsQ0FBSSxFQUFFLFNBQVMsTUFDdkIsS0FBSyxXQUFXLGtCQUNoQjFELEVBQU8sUUFBUTBELElBR2YxRCxFQUFPLGNBQWMwRDtBQUlqQyxRQUFJO0FBSUEsYUFBTyxLQUFLLE1BQU0sS0FBSyxVQUFVMUQsQ0FBTSxDQUFDO0FBQUEsSUFDNUMsUUFDYTtBQUNULFlBQU0sSUFBSSxNQUFNLGtDQUFrQztBQUFBLElBQ3REO0FBQUEsRUFDSjtBQUNKO0FBQ08sU0FBUzRELEdBQWFDLEdBQU9sRSxHQUFTO0FBQ3pDLE1BQUlrRSxhQUFpQjVFLElBQWM7QUFDL0IsVUFBTTZFLElBQU0sSUFBSXJFLEdBQW9CRSxDQUFPLEdBQ3JDK0QsSUFBTyxDQUFBO0FBQ2IsZUFBV2hCLEtBQVNtQixFQUFNLE9BQU8sUUFBTyxHQUFJO0FBQ3hDLFlBQU0sQ0FBQzdFLEdBQUdFLENBQU0sSUFBSXdEO0FBQ3BCLE1BQUFvQixFQUFJLFFBQVE1RSxDQUFNO0FBQUEsSUFDdEI7QUFDQSxVQUFNNkUsSUFBVSxDQUFBLEdBQ1ZDLElBQVc7QUFBQSxNQUNiLFVBQVVIO0FBQUEsTUFDVixLQUFLbEUsS0FBQSxnQkFBQUEsRUFBUztBQUFBLE1BQ2QsTUFBQStEO0FBQUEsSUFDWjtBQUNRLGVBQVdoQixLQUFTbUIsRUFBTSxPQUFPLFFBQU8sR0FBSTtBQUN4QyxZQUFNLENBQUM1QyxHQUFLL0IsQ0FBTSxJQUFJd0Q7QUFDdEIsTUFBQXFCLEVBQVE5QyxDQUFHLElBQUk2QyxFQUFJLEtBQUs1RSxHQUFRO0FBQUEsUUFDNUIsR0FBR1M7QUFBQSxRQUNILFVBQUFxRTtBQUFBLE1BQ2hCLENBQWE7QUFBQSxJQUNMO0FBQ0EsUUFBSSxPQUFPLEtBQUtOLENBQUksRUFBRSxTQUFTLEdBQUc7QUFDOUIsWUFBTWYsSUFBY21CLEVBQUksV0FBVyxrQkFBa0IsVUFBVTtBQUMvRCxNQUFBQyxFQUFRLFdBQVc7QUFBQSxRQUNmLENBQUNwQixDQUFXLEdBQUdlO0FBQUEsTUFDL0I7QUFBQSxJQUNRO0FBQ0EsV0FBTyxFQUFFLFNBQUFLLEVBQU87QUFBQSxFQUNwQjtBQUNBLFFBQU1ELElBQU0sSUFBSXJFLEdBQW9CRSxDQUFPO0FBQzNDLFNBQUFtRSxFQUFJLFFBQVFELENBQUssR0FDVkMsRUFBSSxLQUFLRCxHQUFPbEUsQ0FBTztBQUNsQztBQUNBLFNBQVM0QyxHQUFlMEIsR0FBU0MsR0FBTTtBQUNuQyxRQUFNQyxJQUFNRCxLQUFRLEVBQUUsTUFBTSxvQkFBSSxJQUFHLEVBQUU7QUFDckMsTUFBSUMsRUFBSSxLQUFLLElBQUlGLENBQU87QUFDcEIsV0FBTztBQUNYLEVBQUFFLEVBQUksS0FBSyxJQUFJRixDQUFPO0FBRXBCLFFBQU1wRSxJQURTb0UsRUFDSSxLQUFLO0FBQ3hCLFVBQVFwRSxFQUFJLE1BQUk7QUFBQSxJQUNaLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFDRCxhQUFPO0FBQUEsSUFDWCxLQUFLO0FBQ0QsYUFBTzBDLEdBQWUxQyxFQUFJLFNBQVNzRSxDQUFHO0FBQUEsSUFFMUMsS0FBSyxVQUFVO0FBQ1gsaUJBQVdsRCxLQUFPcEIsRUFBSTtBQUNsQixZQUFJMEMsR0FBZTFDLEVBQUksTUFBTW9CLENBQUcsR0FBR2tELENBQUc7QUFDbEMsaUJBQU87QUFFZixhQUFPO0FBQUEsSUFDWDtBQUFBLElBQ0EsS0FBSyxTQUFTO0FBQ1YsaUJBQVdDLEtBQVV2RSxFQUFJO0FBQ3JCLFlBQUkwQyxHQUFlNkIsR0FBUUQsQ0FBRztBQUMxQixpQkFBTztBQUVmLGFBQU87QUFBQSxJQUNYO0FBQUEsSUFDQSxLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLE1BQU1zRSxDQUFHLEtBQUs1QixHQUFlMUMsRUFBSSxPQUFPc0UsQ0FBRztBQUFBLElBRXpFLEtBQUssU0FBUztBQUNWLGlCQUFXRSxLQUFReEUsRUFBSTtBQUNuQixZQUFJMEMsR0FBZThCLEdBQU1GLENBQUc7QUFDeEIsaUJBQU87QUFFZixhQUFJLEdBQUF0RSxFQUFJLFFBQVEwQyxHQUFlMUMsRUFBSSxNQUFNc0UsQ0FBRztBQUFBLElBR2hEO0FBQUEsSUFDQSxLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLFNBQVNzRSxDQUFHLEtBQUs1QixHQUFlMUMsRUFBSSxXQUFXc0UsQ0FBRztBQUFBLElBRWhGLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksU0FBU3NFLENBQUcsS0FBSzVCLEdBQWUxQyxFQUFJLFdBQVdzRSxDQUFHO0FBQUEsSUFFaEYsS0FBSztBQUNELGFBQU81QixHQUFlMUMsRUFBSSxXQUFXc0UsQ0FBRztBQUFBO0FBQUEsSUFHNUMsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELGFBQU81QixHQUFlMUMsRUFBSSxXQUFXc0UsQ0FBRztBQUFBLElBQzVDLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksT0FBTSxHQUFJc0UsQ0FBRztBQUFBLElBQzNDLEtBQUs7QUFDRCxhQUFPNUIsR0FBZTFDLEVBQUksV0FBV3NFLENBQUc7QUFBQSxJQUU1QyxLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLFdBQVdzRSxDQUFHO0FBQUEsSUFFNUMsS0FBSztBQUNELGFBQU87QUFBQSxJQUVYLEtBQUs7QUFDRCxhQUFPO0FBQUEsSUFFWCxLQUFLO0FBQ0QsYUFBTzVCLEdBQWUxQyxFQUFJLElBQUlzRSxDQUFHLEtBQUs1QixHQUFlMUMsRUFBSSxLQUFLc0UsQ0FBRztBQUFBLElBRXJFLEtBQUs7QUFDRCxhQUFPO0FBQUEsSUFFWCxLQUFLO0FBQ0QsYUFBTztBQUFBLEVBSW5CO0FBQ0ksUUFBTSxJQUFJLE1BQU0sd0JBQXdCdEUsRUFBSSxJQUFJLEVBQUU7QUFDdEQ7QUM5ekJPLFNBQVN5RSxHQUF3QkMsR0FBaUJDLEdBQVE7QUFDN0QsUUFBTUMsSUFBTSxFQUFFLEdBQUdGLEVBQWU7QUFDaEMsZ0JBQU8saUJBQWlCRSxHQUFLO0FBQUEsSUFDekIsUUFBUTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ3hCO0FBQUEsSUFDUSxXQUFXO0FBQUEsTUFDUCxPQUFPRDtBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ3hCO0FBQUEsRUFDQSxDQUFLLEdBQ01DO0FBQ1g7QUMvQk8sTUFBTUMsS0FBaUIsT0FBTyxtREFBbUQsR0FDbEZDLEtBQWlCO0FBQUEsRUFDbkIsTUFBTTtBQUFBLEVBQ04sY0FBYztBQUFBLEVBQ2QsZ0JBQWdCO0FBQUEsRUFDaEIsY0FBYztBQUFBLEVBQ2QsY0FBYztBQUFBLEVBQ2QsYUFBYTtBQUFBLEVBQ2Isa0JBQWtCO0FBQUEsRUFDbEIsMEJBQTBCO0FBQUEsRUFDMUIsZ0JBQWdCO0FBQUEsRUFDaEIsUUFBUTtBQUFBLEVBQ1IsY0FBYztBQUFBLEVBQ2QsZUFBZTtBQUFBLEVBQ2YscUJBQXFCO0FBQUEsRUFDckIsaUJBQWlCO0FBQUEsRUFDakIsaUJBQWlCO0FBQUEsRUFDakIsZUFBZTtBQUFBLEVBQ2YsZ0JBQWdCO0FBQUEsRUFDaEIsY0FBYztBQUNsQixHQUNhQyxLQUFvQixDQUFDQyxNQUV0QixPQUFPQSxLQUFZLFdBQ3ZCO0FBQUEsRUFDSSxHQUFHRjtBQUFBLEVBQ0gsVUFBVSxDQUFDLEdBQUc7QUFBQSxFQUNkLGFBQWEsQ0FBQTtBQUFBLEVBQ2IsTUFBTUU7QUFDbEIsSUFDVTtBQUFBLEVBQ0UsR0FBR0Y7QUFBQSxFQUNILFVBQVUsQ0FBQyxHQUFHO0FBQUEsRUFDZCxhQUFhLENBQUE7QUFBQSxFQUNiLEdBQUdFO0FBQ2YsR0NuQ2FDLEtBQVMsQ0FBQ3pCLE1BQ1osVUFBVUEsSUFBWUEsRUFBVSxPQUFPQTtBQUUzQyxTQUFTMEIsR0FBV04sR0FBSztBQUM1QixNQUFJLENBQUNBO0FBQ0QsV0FBTztBQUNYLGFBQVdPLEtBQU1QO0FBQ2IsV0FBTztBQUNYLFNBQU87QUFDWDtBQ1BPLE1BQU1RLEtBQVUsQ0FBQ0osTUFBWTtBQUNoQyxRQUFNSyxJQUFXTixHQUFrQkMsQ0FBTyxHQUNwQ00sSUFBY0QsRUFBUyxTQUFTLFNBQ2xDLENBQUMsR0FBR0EsRUFBUyxVQUFVQSxFQUFTLGdCQUFnQkEsRUFBUyxJQUFJLElBQzNEQSxFQUFTO0FBQ2YsU0FBTztBQUFBLElBQ0gsR0FBR0E7QUFBQSxJQUNILGFBQWFDO0FBQUEsSUFDYixjQUFjO0FBQUEsSUFDZCxVQUFVLG9CQUFJLElBQUc7QUFBQSxJQUNqQixNQUFNLElBQUksSUFBSSxPQUFPLFFBQVFELEVBQVMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDRSxHQUFNdkYsQ0FBRyxNQUFNO0FBQUEsTUFDcEVpRixHQUFPakYsQ0FBRztBQUFBLE1BQ1Y7QUFBQSxRQUNJLEtBQUtpRixHQUFPakYsQ0FBRztBQUFBLFFBQ2YsTUFBTSxDQUFDLEdBQUdxRixFQUFTLFVBQVVBLEVBQVMsZ0JBQWdCRSxDQUFJO0FBQUE7QUFBQSxRQUUxRCxZQUFZO0FBQUEsTUFDNUI7QUFBQSxJQUNBLENBQVMsQ0FBQztBQUFBLEVBQ1Y7QUFDQTtBQ3RCTyxTQUFTQyxHQUFnQkMsR0FBS3JFLEdBQUtzRSxHQUFjQyxHQUFNO0FBQzFELEVBQUtBLEtBQUEsUUFBQUEsRUFBTSxpQkFFUEQsTUFDQUQsRUFBSSxlQUFlO0FBQUEsSUFDZixHQUFHQSxFQUFJO0FBQUEsSUFDUCxDQUFDckUsQ0FBRyxHQUFHc0U7QUFBQSxFQUNuQjtBQUVBO0FBQ08sU0FBU0UsRUFBMEJILEdBQUtyRSxHQUFLeUUsR0FBT0gsR0FBY0MsR0FBTTtBQUMzRSxFQUFBRixFQUFJckUsQ0FBRyxJQUFJeUUsR0FDWEwsR0FBZ0JDLEdBQUtyRSxHQUFLc0UsR0FBY0MsQ0FBSTtBQUNoRDtBQ2JPLElBQUlHO0FBQUEsQ0FDVixTQUFVQSxHQUFNO0FBQ2IsRUFBQUEsRUFBSyxjQUFjLENBQUMzRyxNQUFNO0FBQUEsRUFBRTtBQUM1QixXQUFTNEcsRUFBU0MsR0FBTTtBQUFBLEVBQUU7QUFDMUIsRUFBQUYsRUFBSyxXQUFXQztBQUNoQixXQUFTRSxFQUFZQyxHQUFJO0FBQ3JCLFVBQU0sSUFBSSxNQUFLO0FBQUEsRUFDbkI7QUFDQSxFQUFBSixFQUFLLGNBQWNHLEdBQ25CSCxFQUFLLGNBQWMsQ0FBQ0ssTUFBVTtBQUMxQixVQUFNdkIsSUFBTSxDQUFBO0FBQ1osZUFBV0osS0FBUTJCO0FBQ2YsTUFBQXZCLEVBQUlKLENBQUksSUFBSUE7QUFFaEIsV0FBT0k7QUFBQSxFQUNYLEdBQ0FrQixFQUFLLHFCQUFxQixDQUFDbEIsTUFBUTtBQUMvQixVQUFNd0IsSUFBWU4sRUFBSyxXQUFXbEIsQ0FBRyxFQUFFLE9BQU8sQ0FBQzFGLE1BQU0sT0FBTzBGLEVBQUlBLEVBQUkxRixDQUFDLENBQUMsS0FBTSxRQUFRLEdBQzlFbUgsSUFBVyxDQUFBO0FBQ2pCLGVBQVduSCxLQUFLa0g7QUFDWixNQUFBQyxFQUFTbkgsQ0FBQyxJQUFJMEYsRUFBSTFGLENBQUM7QUFFdkIsV0FBTzRHLEVBQUssYUFBYU8sQ0FBUTtBQUFBLEVBQ3JDLEdBQ0FQLEVBQUssZUFBZSxDQUFDbEIsTUFDVmtCLEVBQUssV0FBV2xCLENBQUcsRUFBRSxJQUFJLFNBQVUwQixHQUFHO0FBQ3pDLFdBQU8xQixFQUFJMEIsQ0FBQztBQUFBLEVBQ2hCLENBQUMsR0FFTFIsRUFBSyxhQUFhLE9BQU8sT0FBTyxRQUFTLGFBQ25DLENBQUNsQixNQUFRLE9BQU8sS0FBS0EsQ0FBRyxJQUN4QixDQUFDMkIsTUFBVztBQUNWLFVBQU1DLElBQU8sQ0FBQTtBQUNiLGVBQVdwRixLQUFPbUY7QUFDZCxNQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUtBLEdBQVFuRixDQUFHLEtBQ2hEb0YsRUFBSyxLQUFLcEYsQ0FBRztBQUdyQixXQUFPb0Y7QUFBQSxFQUNYLEdBQ0pWLEVBQUssT0FBTyxDQUFDVyxHQUFLQyxNQUFZO0FBQzFCLGVBQVdsQyxLQUFRaUM7QUFDZixVQUFJQyxFQUFRbEMsQ0FBSTtBQUNaLGVBQU9BO0FBQUEsRUFHbkIsR0FDQXNCLEVBQUssWUFBWSxPQUFPLE9BQU8sYUFBYyxhQUN2QyxDQUFDakUsTUFBUSxPQUFPLFVBQVVBLENBQUcsSUFDN0IsQ0FBQ0EsTUFBUSxPQUFPQSxLQUFRLFlBQVksT0FBTyxTQUFTQSxDQUFHLEtBQUssS0FBSyxNQUFNQSxDQUFHLE1BQU1BO0FBQ3RGLFdBQVM4RSxFQUFXQyxHQUFPQyxJQUFZLE9BQU87QUFDMUMsV0FBT0QsRUFBTSxJQUFJLENBQUMvRSxNQUFTLE9BQU9BLEtBQVEsV0FBVyxJQUFJQSxDQUFHLE1BQU1BLENBQUksRUFBRSxLQUFLZ0YsQ0FBUztBQUFBLEVBQzFGO0FBQ0EsRUFBQWYsRUFBSyxhQUFhYSxHQUNsQmIsRUFBSyx3QkFBd0IsQ0FBQzNHLEdBQUcwRyxNQUN6QixPQUFPQSxLQUFVLFdBQ1ZBLEVBQU0sU0FBUSxJQUVsQkE7QUFFZixHQUFHQyxNQUFTQSxJQUFPLENBQUEsRUFBRztBQUNmLElBQUlnQjtBQUFBLENBQ1YsU0FBVUEsR0FBWTtBQUNuQixFQUFBQSxFQUFXLGNBQWMsQ0FBQ0MsR0FBT0MsT0FDdEI7QUFBQSxJQUNILEdBQUdEO0FBQUEsSUFDSCxHQUFHQztBQUFBO0FBQUEsRUFDZjtBQUVBLEdBQUdGLE9BQWVBLEtBQWEsQ0FBQSxFQUFHO0FBQzNCLE1BQU1HLElBQWdCbkIsRUFBSyxZQUFZO0FBQUEsRUFDMUM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0osQ0FBQyxHQUNZb0IsS0FBZ0IsQ0FBQ0MsTUFBUztBQUVuQyxVQURVLE9BQU9BLEdBQ1I7QUFBQSxJQUNMLEtBQUs7QUFDRCxhQUFPRixFQUFjO0FBQUEsSUFDekIsS0FBSztBQUNELGFBQU9BLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBTyxPQUFPLE1BQU1FLENBQUksSUFBSUYsRUFBYyxNQUFNQSxFQUFjO0FBQUEsSUFDbEUsS0FBSztBQUNELGFBQU9BLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFPQSxFQUFjO0FBQUEsSUFDekIsS0FBSztBQUNELGFBQU9BLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBSSxNQUFNLFFBQVFFLENBQUksSUFDWEYsRUFBYyxRQUVyQkUsTUFBUyxPQUNGRixFQUFjLE9BRXJCRSxFQUFLLFFBQVEsT0FBT0EsRUFBSyxRQUFTLGNBQWNBLEVBQUssU0FBUyxPQUFPQSxFQUFLLFNBQVUsYUFDN0VGLEVBQWMsVUFFckIsT0FBTyxNQUFRLE9BQWVFLGFBQWdCLE1BQ3ZDRixFQUFjLE1BRXJCLE9BQU8sTUFBUSxPQUFlRSxhQUFnQixNQUN2Q0YsRUFBYyxNQUVyQixPQUFPLE9BQVMsT0FBZUUsYUFBZ0IsT0FDeENGLEVBQWMsT0FFbEJBLEVBQWM7QUFBQSxJQUN6QjtBQUNJLGFBQU9BLEVBQWM7QUFBQSxFQUNqQztBQUNBLEdDbklhRyxJQUFldEIsRUFBSyxZQUFZO0FBQUEsRUFDekM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixDQUFDO0FBS00sTUFBTXVCLFdBQWlCLE1BQU07QUFBQSxFQUNoQyxJQUFJLFNBQVM7QUFDVCxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsWUFBWUMsR0FBUTtBQUNoQixVQUFLLEdBQ0wsS0FBSyxTQUFTLENBQUEsR0FDZCxLQUFLLFdBQVcsQ0FBQ0MsTUFBUTtBQUNyQixXQUFLLFNBQVMsQ0FBQyxHQUFHLEtBQUssUUFBUUEsQ0FBRztBQUFBLElBQ3RDLEdBQ0EsS0FBSyxZQUFZLENBQUNDLElBQU8sT0FBTztBQUM1QixXQUFLLFNBQVMsQ0FBQyxHQUFHLEtBQUssUUFBUSxHQUFHQSxDQUFJO0FBQUEsSUFDMUM7QUFDQSxVQUFNQyxJQUFjLFdBQVc7QUFDL0IsSUFBSSxPQUFPLGlCQUVQLE9BQU8sZUFBZSxNQUFNQSxDQUFXLElBR3ZDLEtBQUssWUFBWUEsR0FFckIsS0FBSyxPQUFPLFlBQ1osS0FBSyxTQUFTSDtBQUFBLEVBQ2xCO0FBQUEsRUFDQSxPQUFPSSxHQUFTO0FBQ1osVUFBTUMsSUFBU0QsS0FDWCxTQUFVRSxHQUFPO0FBQ2IsYUFBT0EsRUFBTTtBQUFBLElBQ2pCLEdBQ0VDLElBQWMsRUFBRSxTQUFTLEdBQUUsR0FDM0JDLElBQWUsQ0FBQ2pKLE1BQVU7QUFDNUIsaUJBQVcrSSxLQUFTL0ksRUFBTTtBQUN0QixZQUFJK0ksRUFBTSxTQUFTO0FBQ2YsVUFBQUEsRUFBTSxZQUFZLElBQUlFLENBQVk7QUFBQSxpQkFFN0JGLEVBQU0sU0FBUztBQUNwQixVQUFBRSxFQUFhRixFQUFNLGVBQWU7QUFBQSxpQkFFN0JBLEVBQU0sU0FBUztBQUNwQixVQUFBRSxFQUFhRixFQUFNLGNBQWM7QUFBQSxpQkFFNUJBLEVBQU0sS0FBSyxXQUFXO0FBQzNCLFVBQUFDLEVBQVksUUFBUSxLQUFLRixFQUFPQyxDQUFLLENBQUM7QUFBQSxhQUVyQztBQUNELGNBQUlHLElBQU9GLEdBQ1BwRyxJQUFJO0FBQ1IsaUJBQU9BLElBQUltRyxFQUFNLEtBQUssVUFBUTtBQUMxQixrQkFBTUksSUFBS0osRUFBTSxLQUFLbkcsQ0FBQztBQUV2QixZQURpQkEsTUFBTW1HLEVBQU0sS0FBSyxTQUFTLEtBWXZDRyxFQUFLQyxDQUFFLElBQUlELEVBQUtDLENBQUUsS0FBSyxFQUFFLFNBQVMsR0FBRSxHQUNwQ0QsRUFBS0MsQ0FBRSxFQUFFLFFBQVEsS0FBS0wsRUFBT0MsQ0FBSyxDQUFDLEtBWG5DRyxFQUFLQyxDQUFFLElBQUlELEVBQUtDLENBQUUsS0FBSyxFQUFFLFNBQVMsR0FBRSxHQWF4Q0QsSUFBT0EsRUFBS0MsQ0FBRSxHQUNkdkc7QUFBQSxVQUNKO0FBQUEsUUFDSjtBQUFBLElBRVI7QUFDQSxXQUFBcUcsRUFBYSxJQUFJLEdBQ1ZEO0FBQUEsRUFDWDtBQUFBLEVBQ0EsT0FBTyxPQUFPaEMsR0FBTztBQUNqQixRQUFJLEVBQUVBLGFBQWlCd0I7QUFDbkIsWUFBTSxJQUFJLE1BQU0sbUJBQW1CeEIsQ0FBSyxFQUFFO0FBQUEsRUFFbEQ7QUFBQSxFQUNBLFdBQVc7QUFDUCxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLFVBQVUsS0FBSyxRQUFRQyxFQUFLLHVCQUF1QixDQUFDO0FBQUEsRUFDcEU7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU8sS0FBSyxPQUFPLFdBQVc7QUFBQSxFQUNsQztBQUFBLEVBQ0EsUUFBUTZCLElBQVMsQ0FBQ0MsTUFBVUEsRUFBTSxTQUFTO0FBQ3ZDLFVBQU1DLElBQWMsQ0FBQSxHQUNkSSxJQUFhLENBQUE7QUFDbkIsZUFBV1YsS0FBTyxLQUFLO0FBQ25CLFVBQUlBLEVBQUksS0FBSyxTQUFTLEdBQUc7QUFDckIsY0FBTVcsSUFBVVgsRUFBSSxLQUFLLENBQUM7QUFDMUIsUUFBQU0sRUFBWUssQ0FBTyxJQUFJTCxFQUFZSyxDQUFPLEtBQUssQ0FBQSxHQUMvQ0wsRUFBWUssQ0FBTyxFQUFFLEtBQUtQLEVBQU9KLENBQUcsQ0FBQztBQUFBLE1BQ3pDO0FBRUksUUFBQVUsRUFBVyxLQUFLTixFQUFPSixDQUFHLENBQUM7QUFHbkMsV0FBTyxFQUFFLFlBQUFVLEdBQVksYUFBQUosRUFBVztBQUFBLEVBQ3BDO0FBQUEsRUFDQSxJQUFJLGFBQWE7QUFDYixXQUFPLEtBQUssUUFBTztBQUFBLEVBQ3ZCO0FBQ0o7QUFDQVIsR0FBUyxTQUFTLENBQUNDLE1BQ0QsSUFBSUQsR0FBU0MsQ0FBTTtBQ2hJckMsTUFBTWEsS0FBVyxDQUFDUCxHQUFPdkQsTUFBUztBQUM5QixNQUFJK0Q7QUFDSixVQUFRUixFQUFNLE1BQUk7QUFBQSxJQUNkLEtBQUtSLEVBQWE7QUFDZCxNQUFJUSxFQUFNLGFBQWFYLEVBQWMsWUFDakNtQixJQUFVLGFBR1ZBLElBQVUsWUFBWVIsRUFBTSxRQUFRLGNBQWNBLEVBQU0sUUFBUTtBQUVwRTtBQUFBLElBQ0osS0FBS1IsRUFBYTtBQUNkLE1BQUFnQixJQUFVLG1DQUFtQyxLQUFLLFVBQVVSLEVBQU0sVUFBVTlCLEVBQUsscUJBQXFCLENBQUM7QUFDdkc7QUFBQSxJQUNKLEtBQUtzQixFQUFhO0FBQ2QsTUFBQWdCLElBQVUsa0NBQWtDdEMsRUFBSyxXQUFXOEIsRUFBTSxNQUFNLElBQUksQ0FBQztBQUM3RTtBQUFBLElBQ0osS0FBS1IsRUFBYTtBQUNkLE1BQUFnQixJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBQWdCLElBQVUseUNBQXlDdEMsRUFBSyxXQUFXOEIsRUFBTSxPQUFPLENBQUM7QUFDakY7QUFBQSxJQUNKLEtBQUtSLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVSxnQ0FBZ0N0QyxFQUFLLFdBQVc4QixFQUFNLE9BQU8sQ0FBQyxlQUFlQSxFQUFNLFFBQVE7QUFDckc7QUFBQSxJQUNKLEtBQUtSLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVTtBQUNWO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUFnQixJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBQWdCLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFJLE9BQU9RLEVBQU0sY0FBZSxXQUN4QixjQUFjQSxFQUFNLGNBQ3BCUSxJQUFVLGdDQUFnQ1IsRUFBTSxXQUFXLFFBQVEsS0FDL0QsT0FBT0EsRUFBTSxXQUFXLFlBQWEsYUFDckNRLElBQVUsR0FBR0EsQ0FBTyxzREFBc0RSLEVBQU0sV0FBVyxRQUFRLE9BR2xHLGdCQUFnQkEsRUFBTSxhQUMzQlEsSUFBVSxtQ0FBbUNSLEVBQU0sV0FBVyxVQUFVLE1BRW5FLGNBQWNBLEVBQU0sYUFDekJRLElBQVUsaUNBQWlDUixFQUFNLFdBQVcsUUFBUSxNQUdwRTlCLEVBQUssWUFBWThCLEVBQU0sVUFBVSxJQUdoQ0EsRUFBTSxlQUFlLFVBQzFCUSxJQUFVLFdBQVdSLEVBQU0sVUFBVSxLQUdyQ1EsSUFBVTtBQUVkO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUlRLEVBQU0sU0FBUyxVQUNmUSxJQUFVLHNCQUFzQlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxhQUFhLFdBQVcsSUFBSUEsRUFBTSxPQUFPLGdCQUNoSEEsRUFBTSxTQUFTLFdBQ3BCUSxJQUFVLHVCQUF1QlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxhQUFhLE1BQU0sSUFBSUEsRUFBTSxPQUFPLGtCQUM1R0EsRUFBTSxTQUFTLFdBQ3BCUSxJQUFVLGtCQUFrQlIsRUFBTSxRQUFRLHNCQUFzQkEsRUFBTSxZQUFZLDhCQUE4QixlQUFlLEdBQUdBLEVBQU0sT0FBTyxLQUMxSUEsRUFBTSxTQUFTLFdBQ3BCUSxJQUFVLGtCQUFrQlIsRUFBTSxRQUFRLHNCQUFzQkEsRUFBTSxZQUFZLDhCQUE4QixlQUFlLEdBQUdBLEVBQU0sT0FBTyxLQUMxSUEsRUFBTSxTQUFTLFNBQ3BCUSxJQUFVLGdCQUFnQlIsRUFBTSxRQUFRLHNCQUFzQkEsRUFBTSxZQUFZLDhCQUE4QixlQUFlLEdBQUcsSUFBSSxLQUFLLE9BQU9BLEVBQU0sT0FBTyxDQUFDLENBQUMsS0FFL0pRLElBQVU7QUFDZDtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFJUSxFQUFNLFNBQVMsVUFDZlEsSUFBVSxzQkFBc0JSLEVBQU0sUUFBUSxZQUFZQSxFQUFNLFlBQVksWUFBWSxXQUFXLElBQUlBLEVBQU0sT0FBTyxnQkFDL0dBLEVBQU0sU0FBUyxXQUNwQlEsSUFBVSx1QkFBdUJSLEVBQU0sUUFBUSxZQUFZQSxFQUFNLFlBQVksWUFBWSxPQUFPLElBQUlBLEVBQU0sT0FBTyxrQkFDNUdBLEVBQU0sU0FBUyxXQUNwQlEsSUFBVSxrQkFBa0JSLEVBQU0sUUFBUSxZQUFZQSxFQUFNLFlBQVksMEJBQTBCLFdBQVcsSUFBSUEsRUFBTSxPQUFPLEtBQ3pIQSxFQUFNLFNBQVMsV0FDcEJRLElBQVUsa0JBQWtCUixFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLDBCQUEwQixXQUFXLElBQUlBLEVBQU0sT0FBTyxLQUN6SEEsRUFBTSxTQUFTLFNBQ3BCUSxJQUFVLGdCQUFnQlIsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSw2QkFBNkIsY0FBYyxJQUFJLElBQUksS0FBSyxPQUFPQSxFQUFNLE9BQU8sQ0FBQyxDQUFDLEtBRXBKUSxJQUFVO0FBQ2Q7QUFBQSxJQUNKLEtBQUtoQixFQUFhO0FBQ2QsTUFBQWdCLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS2hCLEVBQWE7QUFDZCxNQUFBZ0IsSUFBVTtBQUNWO0FBQUEsSUFDSixLQUFLaEIsRUFBYTtBQUNkLE1BQUFnQixJQUFVLGdDQUFnQ1IsRUFBTSxVQUFVO0FBQzFEO0FBQUEsSUFDSixLQUFLUixFQUFhO0FBQ2QsTUFBQWdCLElBQVU7QUFDVjtBQUFBLElBQ0o7QUFDSSxNQUFBQSxJQUFVL0QsRUFBSyxjQUNmeUIsRUFBSyxZQUFZOEIsQ0FBSztBQUFBLEVBQ2xDO0FBQ0ksU0FBTyxFQUFFLFNBQUFRLEVBQU87QUFDcEI7QUMxR0EsSUFBSUMsS0FBbUJDO0FBS2hCLFNBQVNDLEtBQWM7QUFDMUIsU0FBT0Y7QUFDWDtBQ05PLE1BQU1HLEtBQVksQ0FBQzNJLE1BQVc7QUFDakMsUUFBTSxFQUFFLE1BQUFzSCxHQUFNLE1BQUFzQixHQUFNLFdBQUFDLEdBQVcsV0FBQUMsRUFBUyxJQUFLOUksR0FDdkMrSSxJQUFXLENBQUMsR0FBR0gsR0FBTSxHQUFJRSxFQUFVLFFBQVEsQ0FBQSxDQUFHLEdBQzlDRSxJQUFZO0FBQUEsSUFDZCxHQUFHRjtBQUFBLElBQ0gsTUFBTUM7QUFBQSxFQUNkO0FBQ0ksTUFBSUQsRUFBVSxZQUFZO0FBQ3RCLFdBQU87QUFBQSxNQUNILEdBQUdBO0FBQUEsTUFDSCxNQUFNQztBQUFBLE1BQ04sU0FBU0QsRUFBVTtBQUFBLElBQy9CO0FBRUksTUFBSWpELElBQWU7QUFDbkIsUUFBTW9ELElBQU9KLEVBQ1IsT0FBTyxDQUFDckcsTUFBTSxDQUFDLENBQUNBLENBQUMsRUFDakIsTUFBSyxFQUNMLFFBQU87QUFDWixhQUFXMEcsS0FBT0Q7QUFDZCxJQUFBcEQsSUFBZXFELEVBQUlGLEdBQVcsRUFBRSxNQUFBMUIsR0FBTSxjQUFjekIsRUFBWSxDQUFFLEVBQUU7QUFFeEUsU0FBTztBQUFBLElBQ0gsR0FBR2lEO0FBQUEsSUFDSCxNQUFNQztBQUFBLElBQ04sU0FBU2xEO0FBQUEsRUFDakI7QUFDQTtBQUVPLFNBQVNzRCxFQUFrQjFFLEdBQUtxRSxHQUFXO0FBQzlDLFFBQU1NLElBQWNWLEdBQVcsR0FDekJYLElBQVFZLEdBQVU7QUFBQSxJQUNwQixXQUFXRztBQUFBLElBQ1gsTUFBTXJFLEVBQUk7QUFBQSxJQUNWLE1BQU1BLEVBQUk7QUFBQSxJQUNWLFdBQVc7QUFBQSxNQUNQQSxFQUFJLE9BQU87QUFBQTtBQUFBLE1BQ1hBLEVBQUk7QUFBQTtBQUFBLE1BQ0oyRTtBQUFBO0FBQUEsTUFDQUEsTUFBZ0JYLEtBQWtCLFNBQVlBO0FBQUFBO0FBQUFBLElBQzFELEVBQVUsT0FBTyxDQUFDOUcsTUFBTSxDQUFDLENBQUNBLENBQUM7QUFBQSxFQUMzQixDQUFLO0FBQ0QsRUFBQThDLEVBQUksT0FBTyxPQUFPLEtBQUtzRCxDQUFLO0FBQ2hDO0FBQ08sTUFBTXNCLEdBQVk7QUFBQSxFQUNyQixjQUFjO0FBQ1YsU0FBSyxRQUFRO0FBQUEsRUFDakI7QUFBQSxFQUNBLFFBQVE7QUFDSixJQUFJLEtBQUssVUFBVSxZQUNmLEtBQUssUUFBUTtBQUFBLEVBQ3JCO0FBQUEsRUFDQSxRQUFRO0FBQ0osSUFBSSxLQUFLLFVBQVUsY0FDZixLQUFLLFFBQVE7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsT0FBTyxXQUFXQyxHQUFRQyxHQUFTO0FBQy9CLFVBQU1DLElBQWEsQ0FBQTtBQUNuQixlQUFXLEtBQUtELEdBQVM7QUFDckIsVUFBSSxFQUFFLFdBQVc7QUFDYixlQUFPRTtBQUNYLE1BQUksRUFBRSxXQUFXLFdBQ2JILEVBQU8sTUFBSyxHQUNoQkUsRUFBVyxLQUFLLEVBQUUsS0FBSztBQUFBLElBQzNCO0FBQ0EsV0FBTyxFQUFFLFFBQVFGLEVBQU8sT0FBTyxPQUFPRSxFQUFVO0FBQUEsRUFDcEQ7QUFBQSxFQUNBLGFBQWEsaUJBQWlCRixHQUFRSSxHQUFPO0FBQ3pDLFVBQU1DLElBQVksQ0FBQTtBQUNsQixlQUFXQyxLQUFRRixHQUFPO0FBQ3RCLFlBQU1uSSxJQUFNLE1BQU1xSSxFQUFLLEtBQ2pCNUQsSUFBUSxNQUFNNEQsRUFBSztBQUN6QixNQUFBRCxFQUFVLEtBQUs7QUFBQSxRQUNYLEtBQUFwSTtBQUFBLFFBQ0EsT0FBQXlFO0FBQUEsTUFDaEIsQ0FBYTtBQUFBLElBQ0w7QUFDQSxXQUFPcUQsR0FBWSxnQkFBZ0JDLEdBQVFLLENBQVM7QUFBQSxFQUN4RDtBQUFBLEVBQ0EsT0FBTyxnQkFBZ0JMLEdBQVFJLEdBQU87QUFDbEMsVUFBTUcsSUFBYyxDQUFBO0FBQ3BCLGVBQVdELEtBQVFGLEdBQU87QUFDdEIsWUFBTSxFQUFFLEtBQUFuSSxHQUFLLE9BQUF5RSxFQUFLLElBQUs0RDtBQUd2QixVQUZJckksRUFBSSxXQUFXLGFBRWZ5RSxFQUFNLFdBQVc7QUFDakIsZUFBT3lEO0FBQ1gsTUFBSWxJLEVBQUksV0FBVyxXQUNmK0gsRUFBTyxNQUFLLEdBQ1p0RCxFQUFNLFdBQVcsV0FDakJzRCxFQUFPLE1BQUssR0FDWi9ILEVBQUksVUFBVSxnQkFBZ0IsT0FBT3lFLEVBQU0sUUFBVSxPQUFlNEQsRUFBSyxlQUN6RUMsRUFBWXRJLEVBQUksS0FBSyxJQUFJeUUsRUFBTTtBQUFBLElBRXZDO0FBQ0EsV0FBTyxFQUFFLFFBQVFzRCxFQUFPLE9BQU8sT0FBT08sRUFBVztBQUFBLEVBQ3JEO0FBQ0o7QUFDTyxNQUFNSixJQUFVLE9BQU8sT0FBTztBQUFBLEVBQ2pDLFFBQVE7QUFDWixDQUFDLEdBQ1lLLEtBQVEsQ0FBQzlELE9BQVcsRUFBRSxRQUFRLFNBQVMsT0FBQUEsRUFBSyxJQUM1QytELEtBQUssQ0FBQy9ELE9BQVcsRUFBRSxRQUFRLFNBQVMsT0FBQUEsRUFBSyxJQUN6Q2dFLEtBQVksQ0FBQ3JJLE1BQU1BLEVBQUUsV0FBVyxXQUNoQ3NJLEtBQVUsQ0FBQ3RJLE1BQU1BLEVBQUUsV0FBVyxTQUM5QnVJLEtBQVUsQ0FBQ3ZJLE1BQU1BLEVBQUUsV0FBVyxTQUM5QndJLEtBQVUsQ0FBQ3hJLE1BQU0sT0FBTyxVQUFZLE9BQWVBLGFBQWE7QUM1R3RFLElBQUl5STtBQUFBLENBQ1YsU0FBVUEsR0FBVztBQUNsQixFQUFBQSxFQUFVLFdBQVcsQ0FBQzdCLE1BQVksT0FBT0EsS0FBWSxXQUFXLEVBQUUsU0FBQUEsTUFBWUEsS0FBVyxDQUFBLEdBRXpGNkIsRUFBVSxXQUFXLENBQUM3QixNQUFZLE9BQU9BLEtBQVksV0FBV0EsSUFBVUEsS0FBQSxnQkFBQUEsRUFBUztBQUN2RixHQUFHNkIsTUFBY0EsSUFBWSxDQUFBLEVBQUc7QUNBaEMsTUFBTUMsR0FBbUI7QUFBQSxFQUNyQixZQUFZNUosR0FBUXVGLEdBQU80QyxHQUFNckgsR0FBSztBQUNsQyxTQUFLLGNBQWMsQ0FBQSxHQUNuQixLQUFLLFNBQVNkLEdBQ2QsS0FBSyxPQUFPdUYsR0FDWixLQUFLLFFBQVE0QyxHQUNiLEtBQUssT0FBT3JIO0FBQUEsRUFDaEI7QUFBQSxFQUNBLElBQUksT0FBTztBQUNQLFdBQUssS0FBSyxZQUFZLFdBQ2QsTUFBTSxRQUFRLEtBQUssSUFBSSxJQUN2QixLQUFLLFlBQVksS0FBSyxHQUFHLEtBQUssT0FBTyxHQUFHLEtBQUssSUFBSSxJQUdqRCxLQUFLLFlBQVksS0FBSyxHQUFHLEtBQUssT0FBTyxLQUFLLElBQUksSUFHL0MsS0FBSztBQUFBLEVBQ2hCO0FBQ0o7QUFDQSxNQUFNK0ksS0FBZSxDQUFDN0YsR0FBS25FLE1BQVc7QUFDbEMsTUFBSTRKLEdBQVE1SixDQUFNO0FBQ2QsV0FBTyxFQUFFLFNBQVMsSUFBTSxNQUFNQSxFQUFPLE1BQUs7QUFHMUMsTUFBSSxDQUFDbUUsRUFBSSxPQUFPLE9BQU87QUFDbkIsVUFBTSxJQUFJLE1BQU0sMkNBQTJDO0FBRS9ELFNBQU87QUFBQSxJQUNILFNBQVM7QUFBQSxJQUNULElBQUksUUFBUTtBQUNSLFVBQUksS0FBSztBQUNMLGVBQU8sS0FBSztBQUNoQixZQUFNekYsSUFBUSxJQUFJd0ksR0FBUy9DLEVBQUksT0FBTyxNQUFNO0FBQzVDLGtCQUFLLFNBQVN6RixHQUNQLEtBQUs7QUFBQSxJQUNoQjtBQUFBLEVBQ1o7QUFFQTtBQUNBLFNBQVN1TCxFQUFvQnZLLEdBQVE7QUFDakMsTUFBSSxDQUFDQTtBQUNELFdBQU8sQ0FBQTtBQUNYLFFBQU0sRUFBRSxVQUFBc0ksR0FBVSxvQkFBQWtDLEdBQW9CLGdCQUFBQyxHQUFnQixhQUFBQyxFQUFXLElBQUsxSztBQUN0RSxNQUFJc0ksTUFBYWtDLEtBQXNCQztBQUNuQyxVQUFNLElBQUksTUFBTSwwRkFBMEY7QUFFOUcsU0FBSW5DLElBQ08sRUFBRSxVQUFVQSxHQUFVLGFBQUFvQyxFQUFXLElBYXJDLEVBQUUsVUFaUyxDQUFDQyxHQUFLbEcsTUFBUTtBQUM1QixVQUFNLEVBQUUsU0FBQThELEVBQU8sSUFBS3ZJO0FBQ3BCLFdBQUkySyxFQUFJLFNBQVMsdUJBQ04sRUFBRSxTQUFTcEMsS0FBVzlELEVBQUksYUFBWSxJQUU3QyxPQUFPQSxFQUFJLE9BQVMsTUFDYixFQUFFLFNBQVM4RCxLQUFXa0MsS0FBa0JoRyxFQUFJLGFBQVksSUFFL0RrRyxFQUFJLFNBQVMsaUJBQ04sRUFBRSxTQUFTbEcsRUFBSSxhQUFZLElBQy9CLEVBQUUsU0FBUzhELEtBQVdpQyxLQUFzQi9GLEVBQUksYUFBWTtBQUFBLEVBQ3ZFLEdBQzhCLGFBQUFpRyxFQUFXO0FBQzdDO0FBQ08sTUFBTUUsRUFBUTtBQUFBLEVBQ2pCLElBQUksY0FBYztBQUNkLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFBQSxFQUNBLFNBQVN6RyxHQUFPO0FBQ1osV0FBT2tELEdBQWNsRCxFQUFNLElBQUk7QUFBQSxFQUNuQztBQUFBLEVBQ0EsZ0JBQWdCQSxHQUFPTSxHQUFLO0FBQ3hCLFdBQVFBLEtBQU87QUFBQSxNQUNYLFFBQVFOLEVBQU0sT0FBTztBQUFBLE1BQ3JCLE1BQU1BLEVBQU07QUFBQSxNQUNaLFlBQVlrRCxHQUFjbEQsRUFBTSxJQUFJO0FBQUEsTUFDcEMsZ0JBQWdCLEtBQUssS0FBSztBQUFBLE1BQzFCLE1BQU1BLEVBQU07QUFBQSxNQUNaLFFBQVFBLEVBQU07QUFBQSxJQUMxQjtBQUFBLEVBQ0k7QUFBQSxFQUNBLG9CQUFvQkEsR0FBTztBQUN2QixXQUFPO0FBQUEsTUFDSCxRQUFRLElBQUlrRixHQUFXO0FBQUEsTUFDdkIsS0FBSztBQUFBLFFBQ0QsUUFBUWxGLEVBQU0sT0FBTztBQUFBLFFBQ3JCLE1BQU1BLEVBQU07QUFBQSxRQUNaLFlBQVlrRCxHQUFjbEQsRUFBTSxJQUFJO0FBQUEsUUFDcEMsZ0JBQWdCLEtBQUssS0FBSztBQUFBLFFBQzFCLE1BQU1BLEVBQU07QUFBQSxRQUNaLFFBQVFBLEVBQU07QUFBQSxNQUM5QjtBQUFBLElBQ0E7QUFBQSxFQUNJO0FBQUEsRUFDQSxXQUFXQSxHQUFPO0FBQ2QsVUFBTTdELElBQVMsS0FBSyxPQUFPNkQsQ0FBSztBQUNoQyxRQUFJZ0csR0FBUTdKLENBQU07QUFDZCxZQUFNLElBQUksTUFBTSx3Q0FBd0M7QUFFNUQsV0FBT0E7QUFBQSxFQUNYO0FBQUEsRUFDQSxZQUFZNkQsR0FBTztBQUNmLFVBQU03RCxJQUFTLEtBQUssT0FBTzZELENBQUs7QUFDaEMsV0FBTyxRQUFRLFFBQVE3RCxDQUFNO0FBQUEsRUFDakM7QUFBQSxFQUNBLE1BQU1nSCxHQUFNdEgsR0FBUTtBQUNoQixVQUFNTSxJQUFTLEtBQUssVUFBVWdILEdBQU10SCxDQUFNO0FBQzFDLFFBQUlNLEVBQU87QUFDUCxhQUFPQSxFQUFPO0FBQ2xCLFVBQU1BLEVBQU87QUFBQSxFQUNqQjtBQUFBLEVBQ0EsVUFBVWdILEdBQU10SCxHQUFRO0FBQ3BCLFVBQU15RSxJQUFNO0FBQUEsTUFDUixRQUFRO0FBQUEsUUFDSixRQUFRLENBQUE7QUFBQSxRQUNSLFFBQU96RSxLQUFBLGdCQUFBQSxFQUFRLFVBQVM7QUFBQSxRQUN4QixvQkFBb0JBLEtBQUEsZ0JBQUFBLEVBQVE7QUFBQSxNQUM1QztBQUFBLE1BQ1ksT0FBTUEsS0FBQSxnQkFBQUEsRUFBUSxTQUFRLENBQUE7QUFBQSxNQUN0QixnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsTUFDMUIsUUFBUTtBQUFBLE1BQ1IsTUFBQXNIO0FBQUEsTUFDQSxZQUFZRCxHQUFjQyxDQUFJO0FBQUEsSUFDMUMsR0FDY2hILElBQVMsS0FBSyxXQUFXLEVBQUUsTUFBQWdILEdBQU0sTUFBTTdDLEVBQUksTUFBTSxRQUFRQSxHQUFLO0FBQ3BFLFdBQU82RixHQUFhN0YsR0FBS25FLENBQU07QUFBQSxFQUNuQztBQUFBLEVBQ0EsWUFBWWdILEdBQU07O0FBQ2QsVUFBTTdDLElBQU07QUFBQSxNQUNSLFFBQVE7QUFBQSxRQUNKLFFBQVEsQ0FBQTtBQUFBLFFBQ1IsT0FBTyxDQUFDLENBQUMsS0FBSyxXQUFXLEVBQUU7QUFBQSxNQUMzQztBQUFBLE1BQ1ksTUFBTSxDQUFBO0FBQUEsTUFDTixnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsTUFDMUIsUUFBUTtBQUFBLE1BQ1IsTUFBQTZDO0FBQUEsTUFDQSxZQUFZRCxHQUFjQyxDQUFJO0FBQUEsSUFDMUM7QUFDUSxRQUFJLENBQUMsS0FBSyxXQUFXLEVBQUU7QUFDbkIsVUFBSTtBQUNBLGNBQU1oSCxJQUFTLEtBQUssV0FBVyxFQUFFLE1BQUFnSCxHQUFNLE1BQU0sQ0FBQSxHQUFJLFFBQVE3QyxHQUFLO0FBQzlELGVBQU95RixHQUFRNUosQ0FBTSxJQUNmO0FBQUEsVUFDRSxPQUFPQSxFQUFPO0FBQUEsUUFDdEMsSUFDc0I7QUFBQSxVQUNFLFFBQVFtRSxFQUFJLE9BQU87QUFBQSxRQUMzQztBQUFBLE1BQ1ksU0FDT29HLEdBQUs7QUFDUixTQUFJckssS0FBQU4sSUFBQTJLLEtBQUEsZ0JBQUFBLEVBQUssWUFBTCxnQkFBQTNLLEVBQWMsa0JBQWQsUUFBQU0sRUFBNkIsU0FBUyxtQkFDdEMsS0FBSyxXQUFXLEVBQUUsUUFBUSxLQUU5QmlFLEVBQUksU0FBUztBQUFBLFVBQ1QsUUFBUSxDQUFBO0FBQUEsVUFDUixPQUFPO0FBQUEsUUFDM0I7QUFBQSxNQUNZO0FBRUosV0FBTyxLQUFLLFlBQVksRUFBRSxNQUFBNkMsR0FBTSxNQUFNLENBQUEsR0FBSSxRQUFRN0MsRUFBRyxDQUFFLEVBQUUsS0FBSyxDQUFDbkUsTUFBVzRKLEdBQVE1SixDQUFNLElBQ2xGO0FBQUEsTUFDRSxPQUFPQSxFQUFPO0FBQUEsSUFDOUIsSUFDYztBQUFBLE1BQ0UsUUFBUW1FLEVBQUksT0FBTztBQUFBLElBQ25DLENBQWE7QUFBQSxFQUNUO0FBQUEsRUFDQSxNQUFNLFdBQVc2QyxHQUFNdEgsR0FBUTtBQUMzQixVQUFNTSxJQUFTLE1BQU0sS0FBSyxlQUFlZ0gsR0FBTXRILENBQU07QUFDckQsUUFBSU0sRUFBTztBQUNQLGFBQU9BLEVBQU87QUFDbEIsVUFBTUEsRUFBTztBQUFBLEVBQ2pCO0FBQUEsRUFDQSxNQUFNLGVBQWVnSCxHQUFNdEgsR0FBUTtBQUMvQixVQUFNeUUsSUFBTTtBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osUUFBUSxDQUFBO0FBQUEsUUFDUixvQkFBb0J6RSxLQUFBLGdCQUFBQSxFQUFRO0FBQUEsUUFDNUIsT0FBTztBQUFBLE1BQ3ZCO0FBQUEsTUFDWSxPQUFNQSxLQUFBLGdCQUFBQSxFQUFRLFNBQVEsQ0FBQTtBQUFBLE1BQ3RCLGdCQUFnQixLQUFLLEtBQUs7QUFBQSxNQUMxQixRQUFRO0FBQUEsTUFDUixNQUFBc0g7QUFBQSxNQUNBLFlBQVlELEdBQWNDLENBQUk7QUFBQSxJQUMxQyxHQUNjd0QsSUFBbUIsS0FBSyxPQUFPLEVBQUUsTUFBQXhELEdBQU0sTUFBTTdDLEVBQUksTUFBTSxRQUFRQSxHQUFLLEdBQ3BFbkUsSUFBUyxPQUFPNkosR0FBUVcsQ0FBZ0IsSUFBSUEsSUFBbUIsUUFBUSxRQUFRQSxDQUFnQjtBQUNyRyxXQUFPUixHQUFhN0YsR0FBS25FLENBQU07QUFBQSxFQUNuQztBQUFBLEVBQ0EsT0FBT3lLLEdBQU94QyxHQUFTO0FBQ25CLFVBQU15QyxJQUFxQixDQUFDaEosTUFDcEIsT0FBT3VHLEtBQVksWUFBWSxPQUFPQSxJQUFZLE1BQzNDLEVBQUUsU0FBQUEsRUFBTyxJQUVYLE9BQU9BLEtBQVksYUFDakJBLEVBQVF2RyxDQUFHLElBR1h1RztBQUdmLFdBQU8sS0FBSyxZQUFZLENBQUN2RyxHQUFLeUMsTUFBUTtBQUNsQyxZQUFNbkUsSUFBU3lLLEVBQU0vSSxDQUFHLEdBQ2xCaUosSUFBVyxNQUFNeEcsRUFBSSxTQUFTO0FBQUEsUUFDaEMsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixHQUFHeUQsRUFBbUJoSixDQUFHO0FBQUEsTUFDekMsQ0FBYTtBQUNELGFBQUksT0FBTyxVQUFZLE9BQWUxQixhQUFrQixVQUM3Q0EsRUFBTyxLQUFLLENBQUNnSCxNQUNYQSxJQUtNLE1BSlAyRCxFQUFRLEdBQ0QsR0FLZCxJQUVBM0ssSUFLTSxNQUpQMkssRUFBUSxHQUNEO0FBQUEsSUFLZixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBQ0EsV0FBV0YsR0FBT0csR0FBZ0I7QUFDOUIsV0FBTyxLQUFLLFlBQVksQ0FBQ2xKLEdBQUt5QyxNQUNyQnNHLEVBQU0vSSxDQUFHLElBS0gsTUFKUHlDLEVBQUksU0FBUyxPQUFPeUcsS0FBbUIsYUFBYUEsRUFBZWxKLEdBQUt5QyxDQUFHLElBQUl5RyxDQUFjLEdBQ3RGLEdBS2Q7QUFBQSxFQUNMO0FBQUEsRUFDQSxZQUFZQyxHQUFZO0FBQ3BCLFdBQU8sSUFBSUMsR0FBVztBQUFBLE1BQ2xCLFFBQVE7QUFBQSxNQUNSLFVBQVVDLEVBQXNCO0FBQUEsTUFDaEMsUUFBUSxFQUFFLE1BQU0sY0FBYyxZQUFBRixFQUFVO0FBQUEsSUFDcEQsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFlBQVlBLEdBQVk7QUFDcEIsV0FBTyxLQUFLLFlBQVlBLENBQVU7QUFBQSxFQUN0QztBQUFBLEVBQ0EsWUFBWWhMLEdBQUs7QUFFYixTQUFLLE1BQU0sS0FBSyxnQkFDaEIsS0FBSyxPQUFPQSxHQUNaLEtBQUssUUFBUSxLQUFLLE1BQU0sS0FBSyxJQUFJLEdBQ2pDLEtBQUssWUFBWSxLQUFLLFVBQVUsS0FBSyxJQUFJLEdBQ3pDLEtBQUssYUFBYSxLQUFLLFdBQVcsS0FBSyxJQUFJLEdBQzNDLEtBQUssaUJBQWlCLEtBQUssZUFBZSxLQUFLLElBQUksR0FDbkQsS0FBSyxNQUFNLEtBQUssSUFBSSxLQUFLLElBQUksR0FDN0IsS0FBSyxTQUFTLEtBQUssT0FBTyxLQUFLLElBQUksR0FDbkMsS0FBSyxhQUFhLEtBQUssV0FBVyxLQUFLLElBQUksR0FDM0MsS0FBSyxjQUFjLEtBQUssWUFBWSxLQUFLLElBQUksR0FDN0MsS0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUksR0FDdkMsS0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUksR0FDdkMsS0FBSyxVQUFVLEtBQUssUUFBUSxLQUFLLElBQUksR0FDckMsS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLElBQUksR0FDakMsS0FBSyxVQUFVLEtBQUssUUFBUSxLQUFLLElBQUksR0FDckMsS0FBSyxLQUFLLEtBQUssR0FBRyxLQUFLLElBQUksR0FDM0IsS0FBSyxNQUFNLEtBQUssSUFBSSxLQUFLLElBQUksR0FDN0IsS0FBSyxZQUFZLEtBQUssVUFBVSxLQUFLLElBQUksR0FDekMsS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLElBQUksR0FDakMsS0FBSyxVQUFVLEtBQUssUUFBUSxLQUFLLElBQUksR0FDckMsS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLElBQUksR0FDakMsS0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUksR0FDdkMsS0FBSyxPQUFPLEtBQUssS0FBSyxLQUFLLElBQUksR0FDL0IsS0FBSyxXQUFXLEtBQUssU0FBUyxLQUFLLElBQUksR0FDdkMsS0FBSyxhQUFhLEtBQUssV0FBVyxLQUFLLElBQUksR0FDM0MsS0FBSyxhQUFhLEtBQUssV0FBVyxLQUFLLElBQUksR0FDM0MsS0FBSyxXQUFXLElBQUk7QUFBQSxNQUNoQixTQUFTO0FBQUEsTUFDVCxRQUFRO0FBQUEsTUFDUixVQUFVLENBQUNtSCxNQUFTLEtBQUssV0FBVyxFQUFFQSxDQUFJO0FBQUEsSUFDdEQ7QUFBQSxFQUNJO0FBQUEsRUFDQSxXQUFXO0FBQ1AsV0FBT2dFLEdBQVksT0FBTyxNQUFNLEtBQUssSUFBSTtBQUFBLEVBQzdDO0FBQUEsRUFDQSxXQUFXO0FBQ1AsV0FBT0MsR0FBWSxPQUFPLE1BQU0sS0FBSyxJQUFJO0FBQUEsRUFDN0M7QUFBQSxFQUNBLFVBQVU7QUFDTixXQUFPLEtBQUssU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUNuQztBQUFBLEVBQ0EsUUFBUTtBQUNKLFdBQU9DLEdBQVMsT0FBTyxJQUFJO0FBQUEsRUFDL0I7QUFBQSxFQUNBLFVBQVU7QUFDTixXQUFPQyxHQUFXLE9BQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxFQUM1QztBQUFBLEVBQ0EsR0FBRy9HLEdBQVE7QUFDUCxXQUFPZ0gsR0FBUyxPQUFPLENBQUMsTUFBTWhILENBQU0sR0FBRyxLQUFLLElBQUk7QUFBQSxFQUNwRDtBQUFBLEVBQ0EsSUFBSWlILEdBQVU7QUFDVixXQUFPQyxHQUFnQixPQUFPLE1BQU1ELEdBQVUsS0FBSyxJQUFJO0FBQUEsRUFDM0Q7QUFBQSxFQUNBLFVBQVVFLEdBQVc7QUFDakIsV0FBTyxJQUFJVCxHQUFXO0FBQUEsTUFDbEIsR0FBR2IsRUFBb0IsS0FBSyxJQUFJO0FBQUEsTUFDaEMsUUFBUTtBQUFBLE1BQ1IsVUFBVWMsRUFBc0I7QUFBQSxNQUNoQyxRQUFRLEVBQUUsTUFBTSxhQUFhLFdBQUFRLEVBQVM7QUFBQSxJQUNsRCxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsUUFBUTFMLEdBQUs7QUFDVCxVQUFNMkwsSUFBbUIsT0FBTzNMLEtBQVEsYUFBYUEsSUFBTSxNQUFNQTtBQUNqRSxXQUFPLElBQUk0TCxHQUFXO0FBQUEsTUFDbEIsR0FBR3hCLEVBQW9CLEtBQUssSUFBSTtBQUFBLE1BQ2hDLFdBQVc7QUFBQSxNQUNYLGNBQWN1QjtBQUFBLE1BQ2QsVUFBVVQsRUFBc0I7QUFBQSxJQUM1QyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsUUFBUTtBQUNKLFdBQU8sSUFBSVcsR0FBVztBQUFBLE1BQ2xCLFVBQVVYLEVBQXNCO0FBQUEsTUFDaEMsTUFBTTtBQUFBLE1BQ04sR0FBR2QsRUFBb0IsS0FBSyxJQUFJO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLE1BQU1wSyxHQUFLO0FBQ1AsVUFBTThMLElBQWlCLE9BQU85TCxLQUFRLGFBQWFBLElBQU0sTUFBTUE7QUFDL0QsV0FBTyxJQUFJK0wsR0FBUztBQUFBLE1BQ2hCLEdBQUczQixFQUFvQixLQUFLLElBQUk7QUFBQSxNQUNoQyxXQUFXO0FBQUEsTUFDWCxZQUFZMEI7QUFBQSxNQUNaLFVBQVVaLEVBQXNCO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVNYLEdBQWE7QUFDbEIsVUFBTXlCLElBQU8sS0FBSztBQUNsQixXQUFPLElBQUlBLEVBQUs7QUFBQSxNQUNaLEdBQUcsS0FBSztBQUFBLE1BQ1IsYUFBQXpCO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsS0FBSzBCLEdBQVE7QUFDVCxXQUFPQyxHQUFZLE9BQU8sTUFBTUQsQ0FBTTtBQUFBLEVBQzFDO0FBQUEsRUFDQSxXQUFXO0FBQ1AsV0FBT0UsR0FBWSxPQUFPLElBQUk7QUFBQSxFQUNsQztBQUFBLEVBQ0EsYUFBYTtBQUNULFdBQU8sS0FBSyxVQUFVLE1BQVMsRUFBRTtBQUFBLEVBQ3JDO0FBQUEsRUFDQSxhQUFhO0FBQ1QsV0FBTyxLQUFLLFVBQVUsSUFBSSxFQUFFO0FBQUEsRUFDaEM7QUFDSjtBQUNBLE1BQU1DLEtBQVksa0JBQ1pDLEtBQWEsZUFDYkMsS0FBWSw2QkFHWkMsS0FBWSwwRkFDWkMsS0FBYyxxQkFDZEMsS0FBVyxvREFDWEMsS0FBZ0IsNFNBYWhCQyxLQUFhLHNGQUliQyxLQUFjO0FBQ3BCLElBQUlDO0FBRUosTUFBTUMsS0FBWSx1SEFDWkMsS0FBZ0IsNElBR2hCQyxLQUFZLHlwQkFDWkMsS0FBZ0IsMnJCQUVoQkMsS0FBYyxvRUFFZEMsS0FBaUIsMEVBTWpCQyxLQUFrQixxTUFDbEJDLEtBQVksSUFBSSxPQUFPLElBQUlELEVBQWUsR0FBRztBQUNuRCxTQUFTRSxHQUFnQkMsR0FBTTtBQUMzQixNQUFJQyxJQUFxQjtBQUN6QixFQUFJRCxFQUFLLFlBQ0xDLElBQXFCLEdBQUdBLENBQWtCLFVBQVVELEVBQUssU0FBUyxNQUU3REEsRUFBSyxhQUFhLFNBQ3ZCQyxJQUFxQixHQUFHQSxDQUFrQjtBQUU5QyxRQUFNQyxJQUFvQkYsRUFBSyxZQUFZLE1BQU07QUFDakQsU0FBTyw4QkFBOEJDLENBQWtCLElBQUlDLENBQWlCO0FBQ2hGO0FBQ0EsU0FBU0MsR0FBVUgsR0FBTTtBQUNyQixTQUFPLElBQUksT0FBTyxJQUFJRCxHQUFnQkMsQ0FBSSxDQUFDLEdBQUc7QUFDbEQ7QUFFTyxTQUFTSSxHQUFjSixHQUFNO0FBQ2hDLE1BQUl4TSxJQUFRLEdBQUdxTSxFQUFlLElBQUlFLEdBQWdCQyxDQUFJLENBQUM7QUFDdkQsUUFBTUssSUFBTyxDQUFBO0FBQ2IsU0FBQUEsRUFBSyxLQUFLTCxFQUFLLFFBQVEsT0FBTyxHQUFHLEdBQzdCQSxFQUFLLFVBQ0xLLEVBQUssS0FBSyxzQkFBc0IsR0FDcEM3TSxJQUFRLEdBQUdBLENBQUssSUFBSTZNLEVBQUssS0FBSyxHQUFHLENBQUMsS0FDM0IsSUFBSSxPQUFPLElBQUk3TSxDQUFLLEdBQUc7QUFDbEM7QUFDQSxTQUFTOE0sR0FBVUMsR0FBSUMsR0FBUztBQUk1QixTQUhLLElBQUFBLE1BQVksUUFBUSxDQUFDQSxNQUFZakIsR0FBVSxLQUFLZ0IsQ0FBRSxNQUdsREMsTUFBWSxRQUFRLENBQUNBLE1BQVlmLEdBQVUsS0FBS2MsQ0FBRTtBQUkzRDtBQUNBLFNBQVNFLEdBQVdDLEdBQUtDLEdBQUs7QUFDMUIsTUFBSSxDQUFDekIsR0FBUyxLQUFLd0IsQ0FBRztBQUNsQixXQUFPO0FBQ1gsTUFBSTtBQUNBLFVBQU0sQ0FBQ0UsQ0FBTSxJQUFJRixFQUFJLE1BQU0sR0FBRztBQUM5QixRQUFJLENBQUNFO0FBQ0QsYUFBTztBQUVYLFVBQU1DLElBQVNELEVBQ1YsUUFBUSxNQUFNLEdBQUcsRUFDakIsUUFBUSxNQUFNLEdBQUcsRUFDakIsT0FBT0EsRUFBTyxVQUFXLElBQUtBLEVBQU8sU0FBUyxLQUFNLEdBQUksR0FBRyxHQUMxREUsSUFBVSxLQUFLLE1BQU0sS0FBS0QsQ0FBTSxDQUFDO0FBT3ZDLFdBTkksU0FBT0MsS0FBWSxZQUFZQSxNQUFZLFFBRTNDLFNBQVNBLE1BQVdBLEtBQUEsZ0JBQUFBLEVBQVMsU0FBUSxTQUVyQyxDQUFDQSxFQUFRLE9BRVRILEtBQU9HLEVBQVEsUUFBUUg7QUFBQSxFQUcvQixRQUNNO0FBQ0YsV0FBTztBQUFBLEVBQ1g7QUFDSjtBQUNBLFNBQVNJLEdBQVlSLEdBQUlDLEdBQVM7QUFJOUIsU0FISyxJQUFBQSxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWhCLEdBQWMsS0FBS2UsQ0FBRSxNQUd0REMsTUFBWSxRQUFRLENBQUNBLE1BQVlkLEdBQWMsS0FBS2EsQ0FBRTtBQUkvRDtBQUNPLE1BQU1TLFdBQWtCOUQsRUFBUTtBQUFBLEVBQ25DLE9BQU96RyxHQUFPO0FBS1YsUUFKSSxLQUFLLEtBQUssV0FDVkEsRUFBTSxPQUFPLE9BQU9BLEVBQU0sSUFBSSxJQUVmLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmlELEVBQWMsUUFBUTtBQUNyQyxZQUFNM0MsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUFBLElBQ1g7QUFDQSxVQUFNSCxJQUFTLElBQUlELEdBQVc7QUFDOUIsUUFBSTVFO0FBQ0osZUFBV3NHLEtBQVMsS0FBSyxLQUFLO0FBQzFCLFVBQUlBLEVBQU0sU0FBUztBQUNmLFFBQUk1RyxFQUFNLEtBQUssU0FBUzRHLEVBQU0sVUFDMUJ0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFVBQ2YsTUFBTTtBQUFBLFVBQ04sV0FBVztBQUFBLFVBQ1gsT0FBTztBQUFBLFVBQ1AsU0FBU0EsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFFBQUk1RyxFQUFNLEtBQUssU0FBUzRHLEVBQU0sVUFDMUJ0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFVBQ2YsTUFBTTtBQUFBLFVBQ04sV0FBVztBQUFBLFVBQ1gsT0FBTztBQUFBLFVBQ1AsU0FBU0EsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTLFVBQVU7QUFDOUIsY0FBTTRELElBQVN4SyxFQUFNLEtBQUssU0FBUzRHLEVBQU0sT0FDbkM2RCxJQUFXekssRUFBTSxLQUFLLFNBQVM0RyxFQUFNO0FBQzNDLFNBQUk0RCxLQUFVQyxPQUNWbkssSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNqQ2tLLElBQ0F4RixFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixXQUFXO0FBQUEsVUFDWCxPQUFPO0FBQUEsVUFDUCxTQUFTQSxFQUFNO0FBQUEsUUFDM0MsQ0FBeUIsSUFFSTZELEtBQ0x6RixFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixXQUFXO0FBQUEsVUFDWCxPQUFPO0FBQUEsVUFDUCxTQUFTQSxFQUFNO0FBQUEsUUFDM0MsQ0FBeUIsR0FFTHpCLEVBQU8sTUFBSztBQUFBLE1BRXBCLFdBQ1N5QixFQUFNLFNBQVM7QUFDcEIsUUFBSytCLEdBQVcsS0FBSzNJLEVBQU0sSUFBSSxNQUMzQk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsZUFHWHlCLEVBQU0sU0FBUztBQUNwQixRQUFLaUMsT0FDREEsS0FBYSxJQUFJLE9BQU9ELElBQWEsR0FBRyxJQUV2Q0MsR0FBVyxLQUFLN0ksRUFBTSxJQUFJLE1BQzNCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFFBQUsyQixHQUFVLEtBQUt2SSxFQUFNLElBQUksTUFDMUJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixZQUFZO0FBQUEsVUFDWixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVM7QUFDcEIsUUFBSzRCLEdBQVksS0FBS3hJLEVBQU0sSUFBSSxNQUM1Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsZUFHWHlCLEVBQU0sU0FBUztBQUNwQixRQUFLd0IsR0FBVSxLQUFLcEksRUFBTSxJQUFJLE1BQzFCTSxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTThDLEVBQWE7QUFBQSxVQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUs7QUFBQSxlQUdYeUIsRUFBTSxTQUFTO0FBQ3BCLFFBQUt5QixHQUFXLEtBQUtySSxFQUFNLElBQUksTUFDM0JNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxVQUNuQixZQUFZO0FBQUEsVUFDWixNQUFNOEMsRUFBYTtBQUFBLFVBQ25CLFNBQVN3RCxFQUFNO0FBQUEsUUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLGVBR1h5QixFQUFNLFNBQVM7QUFDcEIsUUFBSzBCLEdBQVUsS0FBS3RJLEVBQU0sSUFBSSxNQUMxQk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLO0FBQUEsZUFHWHlCLEVBQU0sU0FBUztBQUNwQixZQUFJO0FBQ0EsY0FBSSxJQUFJNUcsRUFBTSxJQUFJO0FBQUEsUUFDdEIsUUFDTTtBQUNGLFVBQUFNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxZQUNuQixZQUFZO0FBQUEsWUFDWixNQUFNOEMsRUFBYTtBQUFBLFlBQ25CLFNBQVN3RCxFQUFNO0FBQUEsVUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSztBQUFBLFFBQ2hCO0FBQUEsVUFFQyxDQUFJeUIsRUFBTSxTQUFTLFdBQ3BCQSxFQUFNLE1BQU0sWUFBWSxHQUNMQSxFQUFNLE1BQU0sS0FBSzVHLEVBQU0sSUFBSSxNQUUxQ00sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLE1BR1h5QixFQUFNLFNBQVMsU0FDcEI1RyxFQUFNLE9BQU9BLEVBQU0sS0FBSyxLQUFJLElBRXZCNEcsRUFBTSxTQUFTLGFBQ2Y1RyxFQUFNLEtBQUssU0FBUzRHLEVBQU0sT0FBT0EsRUFBTSxRQUFRLE1BQ2hEdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWSxFQUFFLFVBQVV3RCxFQUFNLE9BQU8sVUFBVUEsRUFBTSxTQUFRO0FBQUEsUUFDN0QsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxnQkFDcEI1RyxFQUFNLE9BQU9BLEVBQU0sS0FBSyxZQUFXLElBRTlCNEcsRUFBTSxTQUFTLGdCQUNwQjVHLEVBQU0sT0FBT0EsRUFBTSxLQUFLLFlBQVcsSUFFOUI0RyxFQUFNLFNBQVMsZUFDZjVHLEVBQU0sS0FBSyxXQUFXNEcsRUFBTSxLQUFLLE1BQ2xDdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWSxFQUFFLFlBQVl3RCxFQUFNLE1BQUs7QUFBQSxRQUNyQyxTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLGFBQ2Y1RyxFQUFNLEtBQUssU0FBUzRHLEVBQU0sS0FBSyxNQUNoQ3RHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFlBQVksRUFBRSxVQUFVd0QsRUFBTSxNQUFLO0FBQUEsUUFDbkMsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxhQUNOK0MsR0FBYy9DLENBQUssRUFDdEIsS0FBSzVHLEVBQU0sSUFBSSxNQUN0Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsU0FDTnlDLEdBQ0gsS0FBS3JKLEVBQU0sSUFBSSxNQUN0Qk0sSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsU0FDTjhDLEdBQVU5QyxDQUFLLEVBQ2xCLEtBQUs1RyxFQUFNLElBQUksTUFDdEJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLGFBQ2Y4QixHQUFjLEtBQUsxSSxFQUFNLElBQUksTUFDOUJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLE9BQ2ZpRCxHQUFVN0osRUFBTSxNQUFNNEcsRUFBTSxPQUFPLE1BQ3BDdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsUUFDZm9ELEdBQVdoSyxFQUFNLE1BQU00RyxFQUFNLEdBQUcsTUFDakN0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osTUFBTThDLEVBQWE7QUFBQSxRQUNuQixTQUFTd0QsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxTQUNmMEQsR0FBWXRLLEVBQU0sTUFBTTRHLEVBQU0sT0FBTyxNQUN0Q3RHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLFdBQ2ZzQyxHQUFZLEtBQUtsSixFQUFNLElBQUksTUFDNUJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLGNBQ2Z1QyxHQUFlLEtBQUtuSixFQUFNLElBQUksTUFDL0JNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUloQnJELEVBQUssWUFBWThFLENBQUs7QUFHOUIsV0FBTyxFQUFFLFFBQVF6QixFQUFPLE9BQU8sT0FBT25GLEVBQU0sS0FBSTtBQUFBLEVBQ3BEO0FBQUEsRUFDQSxPQUFPakQsR0FBTzJOLEdBQVl0RyxHQUFTO0FBQy9CLFdBQU8sS0FBSyxXQUFXLENBQUNqQixNQUFTcEcsRUFBTSxLQUFLb0csQ0FBSSxHQUFHO0FBQUEsTUFDL0MsWUFBQXVIO0FBQUEsTUFDQSxNQUFNdEgsRUFBYTtBQUFBLE1BQ25CLEdBQUc2QyxFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFVBQVV3QyxHQUFPO0FBQ2IsV0FBTyxJQUFJMkQsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVEzRCxDQUFLO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLE1BQU14QyxHQUFTO0FBQ1gsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFNBQVMsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzNFO0FBQUEsRUFDQSxJQUFJQSxHQUFTO0FBQ1QsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLE9BQU8sR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQ3pFO0FBQUEsRUFDQSxNQUFNQSxHQUFTO0FBQ1gsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFNBQVMsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzNFO0FBQUEsRUFDQSxLQUFLQSxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFFBQVEsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzFFO0FBQUEsRUFDQSxPQUFPQSxHQUFTO0FBQ1osV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFVBQVUsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzVFO0FBQUEsRUFDQSxLQUFLQSxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFFBQVEsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzFFO0FBQUEsRUFDQSxNQUFNQSxHQUFTO0FBQ1gsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFNBQVMsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzNFO0FBQUEsRUFDQSxLQUFLQSxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFFBQVEsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzFFO0FBQUEsRUFDQSxPQUFPQSxHQUFTO0FBQ1osV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFVBQVUsR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzVFO0FBQUEsRUFDQSxVQUFVQSxHQUFTO0FBRWYsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxJQUFJcEQsR0FBUztBQUNULFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxPQUFPLEdBQUdpRixFQUFVLFNBQVNqRixDQUFPLEdBQUc7QUFBQSxFQUN6RTtBQUFBLEVBQ0EsR0FBR0EsR0FBUztBQUNSLFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxNQUFNLEdBQUdpRixFQUFVLFNBQVNqRixDQUFPLEdBQUc7QUFBQSxFQUN4RTtBQUFBLEVBQ0EsS0FBS0EsR0FBUztBQUNWLFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxRQUFRLEdBQUdpRixFQUFVLFNBQVNqRixDQUFPLEdBQUc7QUFBQSxFQUMxRTtBQUFBLEVBQ0EsU0FBU0EsR0FBUztBQUNkLFdBQUksT0FBT0EsS0FBWSxXQUNaLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLFFBQVE7QUFBQSxNQUNSLE9BQU87QUFBQSxNQUNQLFNBQVNBO0FBQUEsSUFDekIsQ0FBYSxJQUVFLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLFdBQVcsUUFBT0EsS0FBQSxnQkFBQUEsRUFBUyxhQUFjLE1BQWMsT0FBT0EsS0FBQSxnQkFBQUEsRUFBUztBQUFBLE1BQ3ZFLFNBQVFBLEtBQUEsZ0JBQUFBLEVBQVMsV0FBVTtBQUFBLE1BQzNCLFFBQU9BLEtBQUEsZ0JBQUFBLEVBQVMsVUFBUztBQUFBLE1BQ3pCLEdBQUdpRixFQUFVLFNBQVNqRixLQUFBLGdCQUFBQSxFQUFTLE9BQU87QUFBQSxJQUNsRCxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsS0FBS29ELEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxTQUFBQSxFQUFPLENBQUU7QUFBQSxFQUNuRDtBQUFBLEVBQ0EsS0FBS3BELEdBQVM7QUFDVixXQUFJLE9BQU9BLEtBQVksV0FDWixLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxTQUFTQTtBQUFBLElBQ3pCLENBQWEsSUFFRSxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixXQUFXLFFBQU9BLEtBQUEsZ0JBQUFBLEVBQVMsYUFBYyxNQUFjLE9BQU9BLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxNQUN2RSxHQUFHaUYsRUFBVSxTQUFTakYsS0FBQSxnQkFBQUEsRUFBUyxPQUFPO0FBQUEsSUFDbEQsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVNvRCxHQUFTO0FBQ2QsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFlBQVksR0FBRzZCLEVBQVUsU0FBUzdCLENBQU8sR0FBRztBQUFBLEVBQzlFO0FBQUEsRUFDQSxNQUFNckgsR0FBT3FILEdBQVM7QUFDbEIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPckg7QUFBQSxNQUNQLEdBQUdrSixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVN2QyxHQUFPYixHQUFTO0FBQ3JCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT2E7QUFBQSxNQUNQLFVBQVViLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxNQUNuQixHQUFHaUYsRUFBVSxTQUFTakYsS0FBQSxnQkFBQUEsRUFBUyxPQUFPO0FBQUEsSUFDbEQsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFdBQVdhLEdBQU91QyxHQUFTO0FBQ3ZCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT3ZDO0FBQUEsTUFDUCxHQUFHb0UsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxTQUFTdkMsR0FBT3VDLEdBQVM7QUFDckIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPdkM7QUFBQSxNQUNQLEdBQUdvRSxFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLElBQUl1RyxHQUFXdkcsR0FBUztBQUNwQixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU91RztBQUFBLE1BQ1AsR0FBRzFFLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsSUFBSXdHLEdBQVd4RyxHQUFTO0FBQ3BCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT3dHO0FBQUEsTUFDUCxHQUFHM0UsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxPQUFPeUcsR0FBS3pHLEdBQVM7QUFDakIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPeUc7QUFBQSxNQUNQLEdBQUc1RSxFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssSUFBSSxHQUFHNkIsRUFBVSxTQUFTN0IsQ0FBTyxDQUFDO0FBQUEsRUFDbEQ7QUFBQSxFQUNBLE9BQU87QUFDSCxXQUFPLElBQUltRyxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUSxFQUFFLE1BQU0sUUFBUTtBQUFBLElBQzFELENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxjQUFjO0FBQ1YsV0FBTyxJQUFJQSxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUSxFQUFFLE1BQU0sZUFBZTtBQUFBLElBQ2pFLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxjQUFjO0FBQ1YsV0FBTyxJQUFJQSxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUSxFQUFFLE1BQU0sZUFBZTtBQUFBLElBQ2pFLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxJQUFJLGFBQWE7QUFDYixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNPLE1BQU9BLEVBQUcsU0FBUyxVQUFVO0FBQUEsRUFDakU7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLGFBQWE7QUFDYixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxVQUFVO0FBQUEsRUFDakU7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE9BQU87QUFBQSxFQUM5RDtBQUFBLEVBQ0EsSUFBSSxRQUFRO0FBQ1IsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsS0FBSztBQUFBLEVBQzVEO0FBQUEsRUFDQSxJQUFJLFVBQVU7QUFDVixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxPQUFPO0FBQUEsRUFDOUQ7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsUUFBUTtBQUFBLEVBQy9EO0FBQUEsRUFDQSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDN0Q7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE9BQU87QUFBQSxFQUM5RDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQzdEO0FBQUEsRUFDQSxJQUFJLE9BQU87QUFDUCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxJQUFJO0FBQUEsRUFDM0Q7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUM3RDtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsUUFBUTtBQUFBLEVBQy9EO0FBQUEsRUFDQSxJQUFJLGNBQWM7QUFFZCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxXQUFXO0FBQUEsRUFDbEU7QUFBQSxFQUNBLElBQUksWUFBWTtBQUNaLFFBQUlDLElBQU07QUFDVixlQUFXRCxLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkMsTUFBUSxRQUFRRCxFQUFHLFFBQVFDLE9BQzNCQSxJQUFNRCxFQUFHO0FBR3JCLFdBQU9DO0FBQUEsRUFDWDtBQUFBLEVBQ0EsSUFBSSxZQUFZO0FBQ1osUUFBSUMsSUFBTTtBQUNWLGVBQVdGLEtBQU0sS0FBSyxLQUFLO0FBQ3ZCLE1BQUlBLEVBQUcsU0FBUyxVQUNSRSxNQUFRLFFBQVFGLEVBQUcsUUFBUUUsT0FDM0JBLElBQU1GLEVBQUc7QUFHckIsV0FBT0U7QUFBQSxFQUNYO0FBQ0o7QUFDQVQsR0FBVSxTQUFTLENBQUMxTyxNQUNULElBQUkwTyxHQUFVO0FBQUEsRUFDakIsUUFBUSxDQUFBO0FBQUEsRUFDUixVQUFVckQsRUFBc0I7QUFBQSxFQUNoQyxTQUFRckwsS0FBQSxnQkFBQUEsRUFBUSxXQUFVO0FBQUEsRUFDMUIsR0FBR3VLLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBR0wsU0FBU29QLEdBQW1CcE4sR0FBS3FOLEdBQU07QUFDbkMsUUFBTUMsS0FBZXROLEVBQUksU0FBUSxFQUFHLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxJQUFJLFFBQ25EdU4sS0FBZ0JGLEVBQUssU0FBUSxFQUFHLE1BQU0sR0FBRyxFQUFFLENBQUMsS0FBSyxJQUFJLFFBQ3JERyxJQUFXRixJQUFjQyxJQUFlRCxJQUFjQyxHQUN0REUsSUFBUyxPQUFPLFNBQVN6TixFQUFJLFFBQVF3TixDQUFRLEVBQUUsUUFBUSxLQUFLLEVBQUUsQ0FBQyxHQUMvREUsSUFBVSxPQUFPLFNBQVNMLEVBQUssUUFBUUcsQ0FBUSxFQUFFLFFBQVEsS0FBSyxFQUFFLENBQUM7QUFDdkUsU0FBUUMsSUFBU0MsSUFBVyxNQUFNRjtBQUN0QztBQUNPLE1BQU1HLFdBQWtCL0UsRUFBUTtBQUFBLEVBQ25DLGNBQWM7QUFDVixVQUFNLEdBQUcsU0FBUyxHQUNsQixLQUFLLE1BQU0sS0FBSyxLQUNoQixLQUFLLE1BQU0sS0FBSyxLQUNoQixLQUFLLE9BQU8sS0FBSztBQUFBLEVBQ3JCO0FBQUEsRUFDQSxPQUFPekcsR0FBTztBQUtWLFFBSkksS0FBSyxLQUFLLFdBQ1ZBLEVBQU0sT0FBTyxPQUFPQSxFQUFNLElBQUksSUFFZixLQUFLLFNBQVNBLENBQUssTUFDbkJpRCxFQUFjLFFBQVE7QUFDckMsWUFBTTNDLElBQU0sS0FBSyxnQkFBZ0JOLENBQUs7QUFDdEMsYUFBQWdGLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFBQSxJQUNYO0FBQ0EsUUFBSWhGO0FBQ0osVUFBTTZFLElBQVMsSUFBSUQsR0FBVztBQUM5QixlQUFXMEIsS0FBUyxLQUFLLEtBQUs7QUFDMUIsTUFBSUEsRUFBTSxTQUFTLFFBQ1Y5RSxFQUFLLFVBQVU5QixFQUFNLElBQUksTUFDMUJNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLFNBQ0hBLEVBQU0sWUFBWTVHLEVBQU0sT0FBTzRHLEVBQU0sUUFBUTVHLEVBQU0sUUFBUTRHLEVBQU0sV0FFOUV0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sV0FBV0EsRUFBTTtBQUFBLFFBQ2pCLE9BQU87QUFBQSxRQUNQLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsU0FDTEEsRUFBTSxZQUFZNUcsRUFBTSxPQUFPNEcsRUFBTSxRQUFRNUcsRUFBTSxRQUFRNEcsRUFBTSxXQUU1RXRHLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixXQUFXQSxFQUFNO0FBQUEsUUFDakIsT0FBTztBQUFBLFFBQ1AsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxlQUNoQnFFLEdBQW1CakwsRUFBTSxNQUFNNEcsRUFBTSxLQUFLLE1BQU0sTUFDaER0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixZQUFZd0QsRUFBTTtBQUFBLFFBQ2xCLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsV0FDZixPQUFPLFNBQVM1RyxFQUFNLElBQUksTUFDM0JNLElBQU0sS0FBSyxnQkFBZ0JOLEdBQU9NLENBQUcsR0FDckMwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVN3RCxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUloQnJELEVBQUssWUFBWThFLENBQUs7QUFHOUIsV0FBTyxFQUFFLFFBQVF6QixFQUFPLE9BQU8sT0FBT25GLEVBQU0sS0FBSTtBQUFBLEVBQ3BEO0FBQUEsRUFDQSxJQUFJNkIsR0FBT3VDLEdBQVM7QUFDaEIsV0FBTyxLQUFLLFNBQVMsT0FBT3ZDLEdBQU8sSUFBTW9FLEVBQVUsU0FBUzdCLENBQU8sQ0FBQztBQUFBLEVBQ3hFO0FBQUEsRUFDQSxHQUFHdkMsR0FBT3VDLEdBQVM7QUFDZixXQUFPLEtBQUssU0FBUyxPQUFPdkMsR0FBTyxJQUFPb0UsRUFBVSxTQUFTN0IsQ0FBTyxDQUFDO0FBQUEsRUFDekU7QUFBQSxFQUNBLElBQUl2QyxHQUFPdUMsR0FBUztBQUNoQixXQUFPLEtBQUssU0FBUyxPQUFPdkMsR0FBTyxJQUFNb0UsRUFBVSxTQUFTN0IsQ0FBTyxDQUFDO0FBQUEsRUFDeEU7QUFBQSxFQUNBLEdBQUd2QyxHQUFPdUMsR0FBUztBQUNmLFdBQU8sS0FBSyxTQUFTLE9BQU92QyxHQUFPLElBQU9vRSxFQUFVLFNBQVM3QixDQUFPLENBQUM7QUFBQSxFQUN6RTtBQUFBLEVBQ0EsU0FBU3FILEdBQU01SixHQUFPNkosR0FBV3RILEdBQVM7QUFDdEMsV0FBTyxJQUFJb0gsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osR0FBRyxLQUFLLEtBQUs7QUFBQSxRQUNiO0FBQUEsVUFDSSxNQUFBQztBQUFBLFVBQ0EsT0FBQTVKO0FBQUEsVUFDQSxXQUFBNko7QUFBQSxVQUNBLFNBQVN6RixFQUFVLFNBQVM3QixDQUFPO0FBQUEsUUFDdkQ7QUFBQSxNQUNBO0FBQUEsSUFDQSxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsVUFBVXdDLEdBQU87QUFDYixXQUFPLElBQUk0RSxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUTVFLENBQUs7QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsSUFBSXhDLEdBQVM7QUFDVCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLFdBQVc7QUFBQSxNQUNYLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLFdBQVc7QUFBQSxNQUNYLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFlBQVlBLEdBQVM7QUFDakIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxXQUFXO0FBQUEsTUFDWCxTQUFTNkIsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxZQUFZQSxHQUFTO0FBQ2pCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsV0FBVztBQUFBLE1BQ1gsU0FBUzZCLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsV0FBV3ZDLEdBQU91QyxHQUFTO0FBQ3ZCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT3ZDO0FBQUEsTUFDUCxTQUFTb0UsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxPQUFPQSxHQUFTO0FBQ1osV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixTQUFTNkIsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxLQUFLQSxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxPQUFPLE9BQU87QUFBQSxNQUNkLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUyxFQUFFLFVBQVU7QUFBQSxNQUNULE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU8sT0FBTztBQUFBLE1BQ2QsU0FBUzZCLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsUUFBSTJHLElBQU07QUFDVixlQUFXRCxLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkMsTUFBUSxRQUFRRCxFQUFHLFFBQVFDLE9BQzNCQSxJQUFNRCxFQUFHO0FBR3JCLFdBQU9DO0FBQUEsRUFDWDtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsUUFBSUMsSUFBTTtBQUNWLGVBQVdGLEtBQU0sS0FBSyxLQUFLO0FBQ3ZCLE1BQUlBLEVBQUcsU0FBUyxVQUNSRSxNQUFRLFFBQVFGLEVBQUcsUUFBUUUsT0FDM0JBLElBQU1GLEVBQUc7QUFHckIsV0FBT0U7QUFBQSxFQUNYO0FBQUEsRUFDQSxJQUFJLFFBQVE7QUFDUixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNGLE1BQU9BLEVBQUcsU0FBUyxTQUFVQSxFQUFHLFNBQVMsZ0JBQWdCaEosRUFBSyxVQUFVZ0osRUFBRyxLQUFLLENBQUU7QUFBQSxFQUN0SDtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsUUFBSUUsSUFBTSxNQUNORCxJQUFNO0FBQ1YsZUFBV0QsS0FBTSxLQUFLLEtBQUssUUFBUTtBQUMvQixVQUFJQSxFQUFHLFNBQVMsWUFBWUEsRUFBRyxTQUFTLFNBQVNBLEVBQUcsU0FBUztBQUN6RCxlQUFPO0FBRU4sTUFBSUEsRUFBRyxTQUFTLFNBQ2JDLE1BQVEsUUFBUUQsRUFBRyxRQUFRQyxPQUMzQkEsSUFBTUQsRUFBRyxTQUVSQSxFQUFHLFNBQVMsVUFDYkUsTUFBUSxRQUFRRixFQUFHLFFBQVFFLE9BQzNCQSxJQUFNRixFQUFHO0FBQUEsSUFFckI7QUFDQSxXQUFPLE9BQU8sU0FBU0MsQ0FBRyxLQUFLLE9BQU8sU0FBU0MsQ0FBRztBQUFBLEVBQ3REO0FBQ0o7QUFDQVEsR0FBVSxTQUFTLENBQUMzUCxNQUNULElBQUkyUCxHQUFVO0FBQUEsRUFDakIsUUFBUSxDQUFBO0FBQUEsRUFDUixVQUFVdEUsRUFBc0I7QUFBQSxFQUNoQyxTQUFRckwsS0FBQSxnQkFBQUEsRUFBUSxXQUFVO0FBQUEsRUFDMUIsR0FBR3VLLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTThQLFdBQWtCbEYsRUFBUTtBQUFBLEVBQ25DLGNBQWM7QUFDVixVQUFNLEdBQUcsU0FBUyxHQUNsQixLQUFLLE1BQU0sS0FBSyxLQUNoQixLQUFLLE1BQU0sS0FBSztBQUFBLEVBQ3BCO0FBQUEsRUFDQSxPQUFPekcsR0FBTztBQUNWLFFBQUksS0FBSyxLQUFLO0FBQ1YsVUFBSTtBQUNBLFFBQUFBLEVBQU0sT0FBTyxPQUFPQSxFQUFNLElBQUk7QUFBQSxNQUNsQyxRQUNNO0FBQ0YsZUFBTyxLQUFLLGlCQUFpQkEsQ0FBSztBQUFBLE1BQ3RDO0FBR0osUUFEbUIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CaUQsRUFBYztBQUM3QixhQUFPLEtBQUssaUJBQWlCakQsQ0FBSztBQUV0QyxRQUFJTTtBQUNKLFVBQU02RSxJQUFTLElBQUlELEdBQVc7QUFDOUIsZUFBVzBCLEtBQVMsS0FBSyxLQUFLO0FBQzFCLE1BQUlBLEVBQU0sU0FBUyxTQUNFQSxFQUFNLFlBQVk1RyxFQUFNLE9BQU80RyxFQUFNLFFBQVE1RyxFQUFNLFFBQVE0RyxFQUFNLFdBRTlFdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsTUFBTTtBQUFBLFFBQ04sU0FBU3dELEVBQU07QUFBQSxRQUNmLFdBQVdBLEVBQU07QUFBQSxRQUNqQixTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUdYeUIsRUFBTSxTQUFTLFNBQ0xBLEVBQU0sWUFBWTVHLEVBQU0sT0FBTzRHLEVBQU0sUUFBUTVHLEVBQU0sUUFBUTRHLEVBQU0sV0FFNUV0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixNQUFNO0FBQUEsUUFDTixTQUFTd0QsRUFBTTtBQUFBLFFBQ2YsV0FBV0EsRUFBTTtBQUFBLFFBQ2pCLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBR1h5QixFQUFNLFNBQVMsZUFDaEI1RyxFQUFNLE9BQU80RyxFQUFNLFVBQVUsT0FBTyxDQUFDLE1BQ3JDdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsWUFBWXdELEVBQU07QUFBQSxRQUNsQixTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRHpCLEVBQU8sTUFBSyxLQUloQnJELEVBQUssWUFBWThFLENBQUs7QUFHOUIsV0FBTyxFQUFFLFFBQVF6QixFQUFPLE9BQU8sT0FBT25GLEVBQU0sS0FBSTtBQUFBLEVBQ3BEO0FBQUEsRUFDQSxpQkFBaUJBLEdBQU87QUFDcEIsVUFBTU0sSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxXQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsTUFDbkIsTUFBTThDLEVBQWE7QUFBQSxNQUNuQixVQUFVSCxFQUFjO0FBQUEsTUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxJQUMxQixDQUFTLEdBQ01nRjtBQUFBLEVBQ1g7QUFBQSxFQUNBLElBQUl6RCxHQUFPdUMsR0FBUztBQUNoQixXQUFPLEtBQUssU0FBUyxPQUFPdkMsR0FBTyxJQUFNb0UsRUFBVSxTQUFTN0IsQ0FBTyxDQUFDO0FBQUEsRUFDeEU7QUFBQSxFQUNBLEdBQUd2QyxHQUFPdUMsR0FBUztBQUNmLFdBQU8sS0FBSyxTQUFTLE9BQU92QyxHQUFPLElBQU9vRSxFQUFVLFNBQVM3QixDQUFPLENBQUM7QUFBQSxFQUN6RTtBQUFBLEVBQ0EsSUFBSXZDLEdBQU91QyxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxTQUFTLE9BQU92QyxHQUFPLElBQU1vRSxFQUFVLFNBQVM3QixDQUFPLENBQUM7QUFBQSxFQUN4RTtBQUFBLEVBQ0EsR0FBR3ZDLEdBQU91QyxHQUFTO0FBQ2YsV0FBTyxLQUFLLFNBQVMsT0FBT3ZDLEdBQU8sSUFBT29FLEVBQVUsU0FBUzdCLENBQU8sQ0FBQztBQUFBLEVBQ3pFO0FBQUEsRUFDQSxTQUFTcUgsR0FBTTVKLEdBQU82SixHQUFXdEgsR0FBUztBQUN0QyxXQUFPLElBQUl1SCxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRO0FBQUEsUUFDSixHQUFHLEtBQUssS0FBSztBQUFBLFFBQ2I7QUFBQSxVQUNJLE1BQUFGO0FBQUEsVUFDQSxPQUFBNUo7QUFBQSxVQUNBLFdBQUE2SjtBQUFBLFVBQ0EsU0FBU3pGLEVBQVUsU0FBUzdCLENBQU87QUFBQSxRQUN2RDtBQUFBLE1BQ0E7QUFBQSxJQUNBLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxVQUFVd0MsR0FBTztBQUNiLFdBQU8sSUFBSStFLEdBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLFFBQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxRQUFRL0UsQ0FBSztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxTQUFTeEMsR0FBUztBQUNkLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU8sT0FBTyxDQUFDO0FBQUEsTUFDZixXQUFXO0FBQUEsTUFDWCxTQUFTNkIsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxZQUFZQSxHQUFTO0FBQ2pCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFNBQVM2QixFQUFVLFNBQVM3QixDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFlBQVlBLEdBQVM7QUFDakIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPLE9BQU8sQ0FBQztBQUFBLE1BQ2YsV0FBVztBQUFBLE1BQ1gsU0FBUzZCLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsV0FBV3ZDLEdBQU91QyxHQUFTO0FBQ3ZCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBQXZDO0FBQUEsTUFDQSxTQUFTb0UsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxRQUFJMkcsSUFBTTtBQUNWLGVBQVdELEtBQU0sS0FBSyxLQUFLO0FBQ3ZCLE1BQUlBLEVBQUcsU0FBUyxVQUNSQyxNQUFRLFFBQVFELEVBQUcsUUFBUUMsT0FDM0JBLElBQU1ELEVBQUc7QUFHckIsV0FBT0M7QUFBQSxFQUNYO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxRQUFJQyxJQUFNO0FBQ1YsZUFBV0YsS0FBTSxLQUFLLEtBQUs7QUFDdkIsTUFBSUEsRUFBRyxTQUFTLFVBQ1JFLE1BQVEsUUFBUUYsRUFBRyxRQUFRRSxPQUMzQkEsSUFBTUYsRUFBRztBQUdyQixXQUFPRTtBQUFBLEVBQ1g7QUFDSjtBQUNBVyxHQUFVLFNBQVMsQ0FBQzlQLE1BQ1QsSUFBSThQLEdBQVU7QUFBQSxFQUNqQixRQUFRLENBQUE7QUFBQSxFQUNSLFVBQVV6RSxFQUFzQjtBQUFBLEVBQ2hDLFNBQVFyTCxLQUFBLGdCQUFBQSxFQUFRLFdBQVU7QUFBQSxFQUMxQixHQUFHdUssRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNK1AsV0FBbUJuRixFQUFRO0FBQUEsRUFDcEMsT0FBT3pHLEdBQU87QUFLVixRQUpJLEtBQUssS0FBSyxXQUNWQSxFQUFNLE9BQU8sRUFBUUEsRUFBTSxPQUVaLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmlELEVBQWMsU0FBUztBQUN0QyxZQUFNM0MsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUFBLElBQ1g7QUFDQSxXQUFPTSxHQUFHNUYsRUFBTSxJQUFJO0FBQUEsRUFDeEI7QUFDSjtBQUNBNEwsR0FBVyxTQUFTLENBQUMvUCxNQUNWLElBQUkrUCxHQUFXO0FBQUEsRUFDbEIsVUFBVTFFLEVBQXNCO0FBQUEsRUFDaEMsU0FBUXJMLEtBQUEsZ0JBQUFBLEVBQVEsV0FBVTtBQUFBLEVBQzFCLEdBQUd1SyxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1nUSxXQUFnQnBGLEVBQVE7QUFBQSxFQUNqQyxPQUFPekcsR0FBTztBQUtWLFFBSkksS0FBSyxLQUFLLFdBQ1ZBLEVBQU0sT0FBTyxJQUFJLEtBQUtBLEVBQU0sSUFBSSxJQUVqQixLQUFLLFNBQVNBLENBQUssTUFDbkJpRCxFQUFjLE1BQU07QUFDbkMsWUFBTTNDLElBQU0sS0FBSyxnQkFBZ0JOLENBQUs7QUFDdEMsYUFBQWdGLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFBQSxJQUNYO0FBQ0EsUUFBSSxPQUFPLE1BQU10RixFQUFNLEtBQUssUUFBTyxDQUFFLEdBQUc7QUFDcEMsWUFBTU0sSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxNQUNuQyxDQUFhLEdBQ01rQztBQUFBLElBQ1g7QUFDQSxVQUFNSCxJQUFTLElBQUlELEdBQVc7QUFDOUIsUUFBSTVFO0FBQ0osZUFBV3NHLEtBQVMsS0FBSyxLQUFLO0FBQzFCLE1BQUlBLEVBQU0sU0FBUyxRQUNYNUcsRUFBTSxLQUFLLFFBQU8sSUFBSzRHLEVBQU0sVUFDN0J0RyxJQUFNLEtBQUssZ0JBQWdCTixHQUFPTSxDQUFHLEdBQ3JDMEUsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixTQUFTd0QsRUFBTTtBQUFBLFFBQ2YsV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLFFBQ1AsU0FBU0EsRUFBTTtBQUFBLFFBQ2YsTUFBTTtBQUFBLE1BQzlCLENBQXFCLEdBQ0R6QixFQUFPLE1BQUssS0FHWHlCLEVBQU0sU0FBUyxRQUNoQjVHLEVBQU0sS0FBSyxRQUFPLElBQUs0RyxFQUFNLFVBQzdCdEcsSUFBTSxLQUFLLGdCQUFnQk4sR0FBT00sQ0FBRyxHQUNyQzBFLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU3dELEVBQU07QUFBQSxRQUNmLFdBQVc7QUFBQSxRQUNYLE9BQU87QUFBQSxRQUNQLFNBQVNBLEVBQU07QUFBQSxRQUNmLE1BQU07QUFBQSxNQUM5QixDQUFxQixHQUNEekIsRUFBTyxNQUFLLEtBSWhCckQsRUFBSyxZQUFZOEUsQ0FBSztBQUc5QixXQUFPO0FBQUEsTUFDSCxRQUFRekIsRUFBTztBQUFBLE1BQ2YsT0FBTyxJQUFJLEtBQUtuRixFQUFNLEtBQUssUUFBTyxDQUFFO0FBQUEsSUFDaEQ7QUFBQSxFQUNJO0FBQUEsRUFDQSxVQUFVNEcsR0FBTztBQUNiLFdBQU8sSUFBSWlGLEdBQVE7QUFBQSxNQUNmLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVFqRixDQUFLO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLElBQUlrRixHQUFTMUgsR0FBUztBQUNsQixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU8wSCxFQUFRLFFBQU87QUFBQSxNQUN0QixTQUFTN0YsRUFBVSxTQUFTN0IsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxJQUFJMkgsR0FBUzNILEdBQVM7QUFDbEIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPMkgsRUFBUSxRQUFPO0FBQUEsTUFDdEIsU0FBUzlGLEVBQVUsU0FBUzdCLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsUUFBSTJHLElBQU07QUFDVixlQUFXRCxLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkMsTUFBUSxRQUFRRCxFQUFHLFFBQVFDLE9BQzNCQSxJQUFNRCxFQUFHO0FBR3JCLFdBQU9DLEtBQU8sT0FBTyxJQUFJLEtBQUtBLENBQUcsSUFBSTtBQUFBLEVBQ3pDO0FBQUEsRUFDQSxJQUFJLFVBQVU7QUFDVixRQUFJQyxJQUFNO0FBQ1YsZUFBV0YsS0FBTSxLQUFLLEtBQUs7QUFDdkIsTUFBSUEsRUFBRyxTQUFTLFVBQ1JFLE1BQVEsUUFBUUYsRUFBRyxRQUFRRSxPQUMzQkEsSUFBTUYsRUFBRztBQUdyQixXQUFPRSxLQUFPLE9BQU8sSUFBSSxLQUFLQSxDQUFHLElBQUk7QUFBQSxFQUN6QztBQUNKO0FBQ0FhLEdBQVEsU0FBUyxDQUFDaFEsTUFDUCxJQUFJZ1EsR0FBUTtBQUFBLEVBQ2YsUUFBUSxDQUFBO0FBQUEsRUFDUixTQUFRaFEsS0FBQSxnQkFBQUEsRUFBUSxXQUFVO0FBQUEsRUFDMUIsVUFBVXFMLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNbVEsV0FBa0J2RixFQUFRO0FBQUEsRUFDbkMsT0FBT3pHLEdBQU87QUFFVixRQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJpRCxFQUFjLFFBQVE7QUFDckMsWUFBTTNDLElBQU0sS0FBSyxnQkFBZ0JOLENBQUs7QUFDdEMsYUFBQWdGLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFBQSxJQUNYO0FBQ0EsV0FBT00sR0FBRzVGLEVBQU0sSUFBSTtBQUFBLEVBQ3hCO0FBQ0o7QUFDQWdNLEdBQVUsU0FBUyxDQUFDblEsTUFDVCxJQUFJbVEsR0FBVTtBQUFBLEVBQ2pCLFVBQVU5RSxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTW9RLFdBQXFCeEYsRUFBUTtBQUFBLEVBQ3RDLE9BQU96RyxHQUFPO0FBRVYsUUFEbUIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CaUQsRUFBYyxXQUFXO0FBQ3hDLFlBQU0zQyxJQUFNLEtBQUssZ0JBQWdCTixDQUFLO0FBQ3RDLGFBQUFnRixFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVM0MsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTWdGO0FBQUEsSUFDWDtBQUNBLFdBQU9NLEdBQUc1RixFQUFNLElBQUk7QUFBQSxFQUN4QjtBQUNKO0FBQ0FpTSxHQUFhLFNBQVMsQ0FBQ3BRLE1BQ1osSUFBSW9RLEdBQWE7QUFBQSxFQUNwQixVQUFVL0UsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1xUSxXQUFnQnpGLEVBQVE7QUFBQSxFQUNqQyxPQUFPekcsR0FBTztBQUVWLFFBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmlELEVBQWMsTUFBTTtBQUNuQyxZQUFNM0MsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUFBLElBQ1g7QUFDQSxXQUFPTSxHQUFHNUYsRUFBTSxJQUFJO0FBQUEsRUFDeEI7QUFDSjtBQUNBa00sR0FBUSxTQUFTLENBQUNyUSxNQUNQLElBQUlxUSxHQUFRO0FBQUEsRUFDZixVQUFVaEYsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1zUSxXQUFlMUYsRUFBUTtBQUFBLEVBQ2hDLGNBQWM7QUFDVixVQUFNLEdBQUcsU0FBUyxHQUVsQixLQUFLLE9BQU87QUFBQSxFQUNoQjtBQUFBLEVBQ0EsT0FBT3pHLEdBQU87QUFDVixXQUFPNEYsR0FBRzVGLEVBQU0sSUFBSTtBQUFBLEVBQ3hCO0FBQ0o7QUFDQW1NLEdBQU8sU0FBUyxDQUFDdFEsTUFDTixJQUFJc1EsR0FBTztBQUFBLEVBQ2QsVUFBVWpGLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNdVEsV0FBbUIzRixFQUFRO0FBQUEsRUFDcEMsY0FBYztBQUNWLFVBQU0sR0FBRyxTQUFTLEdBRWxCLEtBQUssV0FBVztBQUFBLEVBQ3BCO0FBQUEsRUFDQSxPQUFPekcsR0FBTztBQUNWLFdBQU80RixHQUFHNUYsRUFBTSxJQUFJO0FBQUEsRUFDeEI7QUFDSjtBQUNBb00sR0FBVyxTQUFTLENBQUN2USxNQUNWLElBQUl1USxHQUFXO0FBQUEsRUFDbEIsVUFBVWxGLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNd1EsV0FBaUI1RixFQUFRO0FBQUEsRUFDbEMsT0FBT3pHLEdBQU87QUFDVixVQUFNTSxJQUFNLEtBQUssZ0JBQWdCTixDQUFLO0FBQ3RDLFdBQUFnRixFQUFrQjFFLEdBQUs7QUFBQSxNQUNuQixNQUFNOEMsRUFBYTtBQUFBLE1BQ25CLFVBQVVILEVBQWM7QUFBQSxNQUN4QixVQUFVM0MsRUFBSTtBQUFBLElBQzFCLENBQVMsR0FDTWdGO0FBQUEsRUFDWDtBQUNKO0FBQ0ErRyxHQUFTLFNBQVMsQ0FBQ3hRLE1BQ1IsSUFBSXdRLEdBQVM7QUFBQSxFQUNoQixVQUFVbkYsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU15USxXQUFnQjdGLEVBQVE7QUFBQSxFQUNqQyxPQUFPekcsR0FBTztBQUVWLFFBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmlELEVBQWMsV0FBVztBQUN4QyxZQUFNM0MsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUFBLElBQ1g7QUFDQSxXQUFPTSxHQUFHNUYsRUFBTSxJQUFJO0FBQUEsRUFDeEI7QUFDSjtBQUNBc00sR0FBUSxTQUFTLENBQUN6USxNQUNQLElBQUl5USxHQUFRO0FBQUEsRUFDZixVQUFVcEYsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU13TCxXQUFpQlosRUFBUTtBQUFBLEVBQ2xDLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFNLEdBQUssUUFBQTZFLEVBQU0sSUFBSyxLQUFLLG9CQUFvQm5GLENBQUssR0FDaERoRSxJQUFNLEtBQUs7QUFDakIsUUFBSXNFLEVBQUksZUFBZTJDLEVBQWM7QUFDakMsYUFBQStCLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFFWCxRQUFJdEosRUFBSSxnQkFBZ0IsTUFBTTtBQUMxQixZQUFNd08sSUFBU2xLLEVBQUksS0FBSyxTQUFTdEUsRUFBSSxZQUFZLE9BQzNDeU8sSUFBV25LLEVBQUksS0FBSyxTQUFTdEUsRUFBSSxZQUFZO0FBQ25ELE9BQUl3TyxLQUFVQyxPQUNWekYsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTWtLLElBQVNwSCxFQUFhLFVBQVVBLEVBQWE7QUFBQSxRQUNuRCxTQUFVcUgsSUFBV3pPLEVBQUksWUFBWSxRQUFRO0FBQUEsUUFDN0MsU0FBVXdPLElBQVN4TyxFQUFJLFlBQVksUUFBUTtBQUFBLFFBQzNDLE1BQU07QUFBQSxRQUNOLFdBQVc7QUFBQSxRQUNYLE9BQU87QUFBQSxRQUNQLFNBQVNBLEVBQUksWUFBWTtBQUFBLE1BQzdDLENBQWlCLEdBQ0RtSixFQUFPLE1BQUs7QUFBQSxJQUVwQjtBQTJCQSxRQTFCSW5KLEVBQUksY0FBYyxRQUNkc0UsRUFBSSxLQUFLLFNBQVN0RSxFQUFJLFVBQVUsVUFDaENnSixFQUFrQjFFLEdBQUs7QUFBQSxNQUNuQixNQUFNOEMsRUFBYTtBQUFBLE1BQ25CLFNBQVNwSCxFQUFJLFVBQVU7QUFBQSxNQUN2QixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxPQUFPO0FBQUEsTUFDUCxTQUFTQSxFQUFJLFVBQVU7QUFBQSxJQUMzQyxDQUFpQixHQUNEbUosRUFBTyxNQUFLLElBR2hCbkosRUFBSSxjQUFjLFFBQ2RzRSxFQUFJLEtBQUssU0FBU3RFLEVBQUksVUFBVSxVQUNoQ2dKLEVBQWtCMUUsR0FBSztBQUFBLE1BQ25CLE1BQU04QyxFQUFhO0FBQUEsTUFDbkIsU0FBU3BILEVBQUksVUFBVTtBQUFBLE1BQ3ZCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLFNBQVNBLEVBQUksVUFBVTtBQUFBLElBQzNDLENBQWlCLEdBQ0RtSixFQUFPLE1BQUssSUFHaEI3RSxFQUFJLE9BQU87QUFDWCxhQUFPLFFBQVEsSUFBSSxDQUFDLEdBQUdBLEVBQUksSUFBSSxFQUFFLElBQUksQ0FBQ0UsR0FBTS9DLE1BQ2pDekIsRUFBSSxLQUFLLFlBQVksSUFBSWtLLEdBQW1CNUYsR0FBS0UsR0FBTUYsRUFBSSxNQUFNN0MsQ0FBQyxDQUFDLENBQzdFLENBQUMsRUFBRSxLQUFLLENBQUN0QixNQUNDK0ksR0FBWSxXQUFXQyxHQUFRaEosQ0FBTSxDQUMvQztBQUVMLFVBQU1BLElBQVMsQ0FBQyxHQUFHbUUsRUFBSSxJQUFJLEVBQUUsSUFBSSxDQUFDRSxHQUFNL0MsTUFDN0J6QixFQUFJLEtBQUssV0FBVyxJQUFJa0ssR0FBbUI1RixHQUFLRSxHQUFNRixFQUFJLE1BQU03QyxDQUFDLENBQUMsQ0FDNUU7QUFDRCxXQUFPeUgsR0FBWSxXQUFXQyxHQUFRaEosQ0FBTTtBQUFBLEVBQ2hEO0FBQUEsRUFDQSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQUEsRUFDQSxJQUFJd08sR0FBV3ZHLEdBQVM7QUFDcEIsV0FBTyxJQUFJaUQsR0FBUztBQUFBLE1BQ2hCLEdBQUcsS0FBSztBQUFBLE1BQ1IsV0FBVyxFQUFFLE9BQU9zRCxHQUFXLFNBQVMxRSxFQUFVLFNBQVM3QixDQUFPLEVBQUM7QUFBQSxJQUMvRSxDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsSUFBSXdHLEdBQVd4RyxHQUFTO0FBQ3BCLFdBQU8sSUFBSWlELEdBQVM7QUFBQSxNQUNoQixHQUFHLEtBQUs7QUFBQSxNQUNSLFdBQVcsRUFBRSxPQUFPdUQsR0FBVyxTQUFTM0UsRUFBVSxTQUFTN0IsQ0FBTyxFQUFDO0FBQUEsSUFDL0UsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLE9BQU95RyxHQUFLekcsR0FBUztBQUNqQixXQUFPLElBQUlpRCxHQUFTO0FBQUEsTUFDaEIsR0FBRyxLQUFLO0FBQUEsTUFDUixhQUFhLEVBQUUsT0FBT3dELEdBQUssU0FBUzVFLEVBQVUsU0FBUzdCLENBQU8sRUFBQztBQUFBLElBQzNFLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxTQUFTQSxHQUFTO0FBQ2QsV0FBTyxLQUFLLElBQUksR0FBR0EsQ0FBTztBQUFBLEVBQzlCO0FBQ0o7QUFDQWlELEdBQVMsU0FBUyxDQUFDaE0sR0FBUVEsTUFDaEIsSUFBSXdMLEdBQVM7QUFBQSxFQUNoQixNQUFNaE07QUFBQSxFQUNOLFdBQVc7QUFBQSxFQUNYLFdBQVc7QUFBQSxFQUNYLGFBQWE7QUFBQSxFQUNiLFVBQVU2TCxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUwsU0FBUzBRLEdBQWVsUixHQUFRO0FBQzVCLE1BQUlBLGFBQWtCbVIsSUFBVztBQUM3QixVQUFNQyxJQUFXLENBQUE7QUFDakIsZUFBV3JQLEtBQU8vQixFQUFPLE9BQU87QUFDNUIsWUFBTXFSLElBQWNyUixFQUFPLE1BQU0rQixDQUFHO0FBQ3BDLE1BQUFxUCxFQUFTclAsQ0FBRyxJQUFJK0osR0FBWSxPQUFPb0YsR0FBZUcsQ0FBVyxDQUFDO0FBQUEsSUFDbEU7QUFDQSxXQUFPLElBQUlGLEdBQVU7QUFBQSxNQUNqQixHQUFHblIsRUFBTztBQUFBLE1BQ1YsT0FBTyxNQUFNb1I7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDTCxNQUNLLFFBQUlwUixhQUFrQmdNLEtBQ2hCLElBQUlBLEdBQVM7QUFBQSxJQUNoQixHQUFHaE0sRUFBTztBQUFBLElBQ1YsTUFBTWtSLEdBQWVsUixFQUFPLE9BQU87QUFBQSxFQUMvQyxDQUFTLElBRUlBLGFBQWtCOEwsS0FDaEJBLEdBQVksT0FBT29GLEdBQWVsUixFQUFPLE9BQU0sQ0FBRSxDQUFDLElBRXBEQSxhQUFrQitMLEtBQ2hCQSxHQUFZLE9BQU9tRixHQUFlbFIsRUFBTyxPQUFNLENBQUUsQ0FBQyxJQUVwREEsYUFBa0JzUixLQUNoQkEsR0FBUyxPQUFPdFIsRUFBTyxNQUFNLElBQUksQ0FBQ21GLE1BQVMrTCxHQUFlL0wsQ0FBSSxDQUFDLENBQUMsSUFHaEVuRjtBQUVmO0FBQ08sTUFBTW1SLFdBQWtCL0YsRUFBUTtBQUFBLEVBQ25DLGNBQWM7QUFDVixVQUFNLEdBQUcsU0FBUyxHQUNsQixLQUFLLFVBQVUsTUFLZixLQUFLLFlBQVksS0FBSyxhQXFDdEIsS0FBSyxVQUFVLEtBQUs7QUFBQSxFQUN4QjtBQUFBLEVBQ0EsYUFBYTtBQUNULFFBQUksS0FBSyxZQUFZO0FBQ2pCLGFBQU8sS0FBSztBQUNoQixVQUFNdEosSUFBUSxLQUFLLEtBQUssTUFBSyxHQUN2QnFGLElBQU9WLEVBQUssV0FBVzNFLENBQUs7QUFDbEMsZ0JBQUssVUFBVSxFQUFFLE9BQUFBLEdBQU8sTUFBQXFGLEVBQUksR0FDckIsS0FBSztBQUFBLEVBQ2hCO0FBQUEsRUFDQSxPQUFPeEMsR0FBTztBQUVWLFFBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmlELEVBQWMsUUFBUTtBQUNyQyxZQUFNM0MsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxhQUFBZ0YsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUFBLElBQ1g7QUFDQSxVQUFNLEVBQUUsUUFBQUgsR0FBUSxLQUFBN0UsRUFBRyxJQUFLLEtBQUssb0JBQW9CTixDQUFLLEdBQ2hELEVBQUUsT0FBQTdDLEdBQU8sTUFBTXlQLEVBQVMsSUFBSyxLQUFLLFdBQVUsR0FDNUNDLElBQVksQ0FBQTtBQUNsQixRQUFJLEVBQUUsS0FBSyxLQUFLLG9CQUFvQlIsTUFBWSxLQUFLLEtBQUssZ0JBQWdCO0FBQ3RFLGlCQUFXalAsS0FBT2tELEVBQUk7QUFDbEIsUUFBS3NNLEVBQVUsU0FBU3hQLENBQUcsS0FDdkJ5UCxFQUFVLEtBQUt6UCxDQUFHO0FBSTlCLFVBQU1tSSxJQUFRLENBQUE7QUFDZCxlQUFXbkksS0FBT3dQLEdBQVc7QUFDekIsWUFBTUUsSUFBZTNQLEVBQU1DLENBQUcsR0FDeEJ5RSxJQUFRdkIsRUFBSSxLQUFLbEQsQ0FBRztBQUMxQixNQUFBbUksRUFBTSxLQUFLO0FBQUEsUUFDUCxLQUFLLEVBQUUsUUFBUSxTQUFTLE9BQU9uSSxFQUFHO0FBQUEsUUFDbEMsT0FBTzBQLEVBQWEsT0FBTyxJQUFJNUcsR0FBbUI1RixHQUFLdUIsR0FBT3ZCLEVBQUksTUFBTWxELENBQUcsQ0FBQztBQUFBLFFBQzVFLFdBQVdBLEtBQU9rRCxFQUFJO0FBQUEsTUFDdEMsQ0FBYTtBQUFBLElBQ0w7QUFDQSxRQUFJLEtBQUssS0FBSyxvQkFBb0IrTCxJQUFVO0FBQ3hDLFlBQU1VLElBQWMsS0FBSyxLQUFLO0FBQzlCLFVBQUlBLE1BQWdCO0FBQ2hCLG1CQUFXM1AsS0FBT3lQO0FBQ2QsVUFBQXRILEVBQU0sS0FBSztBQUFBLFlBQ1AsS0FBSyxFQUFFLFFBQVEsU0FBUyxPQUFPbkksRUFBRztBQUFBLFlBQ2xDLE9BQU8sRUFBRSxRQUFRLFNBQVMsT0FBT2tELEVBQUksS0FBS2xELENBQUcsRUFBQztBQUFBLFVBQ3RFLENBQXFCO0FBQUEsZUFHQTJQLE1BQWdCO0FBQ3JCLFFBQUlGLEVBQVUsU0FBUyxNQUNuQjdILEVBQWtCMUUsR0FBSztBQUFBLFVBQ25CLE1BQU04QyxFQUFhO0FBQUEsVUFDbkIsTUFBTXlKO0FBQUEsUUFDOUIsQ0FBcUIsR0FDRDFILEVBQU8sTUFBSztBQUFBLGVBR1g0SCxNQUFnQixRQUdyQixPQUFNLElBQUksTUFBTSxzREFBc0Q7QUFBQSxJQUU5RSxPQUNLO0FBRUQsWUFBTUMsSUFBVyxLQUFLLEtBQUs7QUFDM0IsaUJBQVc1UCxLQUFPeVAsR0FBVztBQUN6QixjQUFNaEwsSUFBUXZCLEVBQUksS0FBS2xELENBQUc7QUFDMUIsUUFBQW1JLEVBQU0sS0FBSztBQUFBLFVBQ1AsS0FBSyxFQUFFLFFBQVEsU0FBUyxPQUFPbkksRUFBRztBQUFBLFVBQ2xDLE9BQU80UCxFQUFTO0FBQUEsWUFBTyxJQUFJOUcsR0FBbUI1RixHQUFLdUIsR0FBT3ZCLEVBQUksTUFBTWxELENBQUc7QUFBQTtBQUFBLFVBQzNGO0FBQUEsVUFDb0IsV0FBV0EsS0FBT2tELEVBQUk7QUFBQSxRQUMxQyxDQUFpQjtBQUFBLE1BQ0w7QUFBQSxJQUNKO0FBQ0EsV0FBSUEsRUFBSSxPQUFPLFFBQ0osUUFBUSxRQUFPLEVBQ2pCLEtBQUssWUFBWTtBQUNsQixZQUFNa0YsSUFBWSxDQUFBO0FBQ2xCLGlCQUFXQyxLQUFRRixHQUFPO0FBQ3RCLGNBQU1uSSxJQUFNLE1BQU1xSSxFQUFLLEtBQ2pCNUQsSUFBUSxNQUFNNEQsRUFBSztBQUN6QixRQUFBRCxFQUFVLEtBQUs7QUFBQSxVQUNYLEtBQUFwSTtBQUFBLFVBQ0EsT0FBQXlFO0FBQUEsVUFDQSxXQUFXNEQsRUFBSztBQUFBLFFBQ3hDLENBQXFCO0FBQUEsTUFDTDtBQUNBLGFBQU9EO0FBQUEsSUFDWCxDQUFDLEVBQ0ksS0FBSyxDQUFDQSxNQUNBTixHQUFZLGdCQUFnQkMsR0FBUUssQ0FBUyxDQUN2RCxJQUdNTixHQUFZLGdCQUFnQkMsR0FBUUksQ0FBSztBQUFBLEVBRXhEO0FBQUEsRUFDQSxJQUFJLFFBQVE7QUFDUixXQUFPLEtBQUssS0FBSyxNQUFLO0FBQUEsRUFDMUI7QUFBQSxFQUNBLE9BQU9uQixHQUFTO0FBQ1osV0FBQTZCLEVBQVUsVUFDSCxJQUFJdUcsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsYUFBYTtBQUFBLE1BQ2IsR0FBSXBJLE1BQVksU0FDVjtBQUFBLFFBQ0UsVUFBVSxDQUFDUixHQUFPdEQsTUFBUTs7QUFDdEIsZ0JBQU0yTSxNQUFlNVEsS0FBQU4sSUFBQSxLQUFLLE1BQUssYUFBVixnQkFBQU0sRUFBQSxLQUFBTixHQUFxQjZILEdBQU90RCxHQUFLLFlBQVdBLEVBQUk7QUFDckUsaUJBQUlzRCxFQUFNLFNBQVMsc0JBQ1I7QUFBQSxZQUNILFNBQVNxQyxFQUFVLFNBQVM3QixDQUFPLEVBQUUsV0FBVzZJO0FBQUEsVUFDaEYsSUFDK0I7QUFBQSxZQUNILFNBQVNBO0FBQUEsVUFDckM7QUFBQSxRQUNvQjtBQUFBLE1BQ3BCLElBQ2tCO0lBQ2xCLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxRQUFRO0FBQ0osV0FBTyxJQUFJVCxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixhQUFhO0FBQUEsSUFDekIsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLGNBQWM7QUFDVixXQUFPLElBQUlBLEdBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWtCQSxPQUFPVSxHQUFjO0FBQ2pCLFdBQU8sSUFBSVYsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsT0FBTyxPQUFPO0FBQUEsUUFDVixHQUFHLEtBQUssS0FBSyxNQUFLO0FBQUEsUUFDbEIsR0FBR1U7QUFBQSxNQUNuQjtBQUFBLElBQ0EsQ0FBUztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFNQyxHQUFTO0FBVVgsV0FUZSxJQUFJWCxHQUFVO0FBQUEsTUFDekIsYUFBYVcsRUFBUSxLQUFLO0FBQUEsTUFDMUIsVUFBVUEsRUFBUSxLQUFLO0FBQUEsTUFDdkIsT0FBTyxPQUFPO0FBQUEsUUFDVixHQUFHLEtBQUssS0FBSyxNQUFLO0FBQUEsUUFDbEIsR0FBR0EsRUFBUSxLQUFLLE1BQUs7QUFBQSxNQUNyQztBQUFBLE1BQ1ksVUFBVWpHLEVBQXNCO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBRUw7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFvQ0EsT0FBTzlKLEdBQUsvQixHQUFRO0FBQ2hCLFdBQU8sS0FBSyxRQUFRLEVBQUUsQ0FBQytCLENBQUcsR0FBRy9CLEVBQU0sQ0FBRTtBQUFBLEVBQ3pDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFzQkEsU0FBUytSLEdBQU87QUFDWixXQUFPLElBQUlaLEdBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLFVBQVVZO0FBQUEsSUFDdEIsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLEtBQUtDLEdBQU07QUFDUCxVQUFNbFEsSUFBUSxDQUFBO0FBQ2QsZUFBV0MsS0FBTzBFLEVBQUssV0FBV3VMLENBQUk7QUFDbEMsTUFBSUEsRUFBS2pRLENBQUcsS0FBSyxLQUFLLE1BQU1BLENBQUcsTUFDM0JELEVBQU1DLENBQUcsSUFBSSxLQUFLLE1BQU1BLENBQUc7QUFHbkMsV0FBTyxJQUFJb1AsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsT0FBTyxNQUFNclA7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsS0FBS2tRLEdBQU07QUFDUCxVQUFNbFEsSUFBUSxDQUFBO0FBQ2QsZUFBV0MsS0FBTzBFLEVBQUssV0FBVyxLQUFLLEtBQUs7QUFDeEMsTUFBS3VMLEVBQUtqUSxDQUFHLE1BQ1RELEVBQU1DLENBQUcsSUFBSSxLQUFLLE1BQU1BLENBQUc7QUFHbkMsV0FBTyxJQUFJb1AsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsT0FBTyxNQUFNclA7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsY0FBYztBQUNWLFdBQU9vUCxHQUFlLElBQUk7QUFBQSxFQUM5QjtBQUFBLEVBQ0EsUUFBUWMsR0FBTTtBQUNWLFVBQU1aLElBQVcsQ0FBQTtBQUNqQixlQUFXclAsS0FBTzBFLEVBQUssV0FBVyxLQUFLLEtBQUssR0FBRztBQUMzQyxZQUFNNEssSUFBYyxLQUFLLE1BQU10UCxDQUFHO0FBQ2xDLE1BQUlpUSxLQUFRLENBQUNBLEVBQUtqUSxDQUFHLElBQ2pCcVAsRUFBU3JQLENBQUcsSUFBSXNQLElBR2hCRCxFQUFTclAsQ0FBRyxJQUFJc1AsRUFBWSxTQUFRO0FBQUEsSUFFNUM7QUFDQSxXQUFPLElBQUlGLEdBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLE9BQU8sTUFBTUM7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsU0FBU1ksR0FBTTtBQUNYLFVBQU1aLElBQVcsQ0FBQTtBQUNqQixlQUFXclAsS0FBTzBFLEVBQUssV0FBVyxLQUFLLEtBQUs7QUFDeEMsVUFBSXVMLEtBQVEsQ0FBQ0EsRUFBS2pRLENBQUc7QUFDakIsUUFBQXFQLEVBQVNyUCxDQUFHLElBQUksS0FBSyxNQUFNQSxDQUFHO0FBQUEsV0FFN0I7QUFFRCxZQUFJa1EsSUFEZ0IsS0FBSyxNQUFNbFEsQ0FBRztBQUVsQyxlQUFPa1EsYUFBb0JuRztBQUN2QixVQUFBbUcsSUFBV0EsRUFBUyxLQUFLO0FBRTdCLFFBQUFiLEVBQVNyUCxDQUFHLElBQUlrUTtBQUFBLE1BQ3BCO0FBRUosV0FBTyxJQUFJZCxHQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixPQUFPLE1BQU1DO0FBQUEsSUFDekIsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLFFBQVE7QUFDSixXQUFPYyxHQUFjekwsRUFBSyxXQUFXLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDcEQ7QUFDSjtBQUNBMEssR0FBVSxTQUFTLENBQUNyUCxHQUFPdEIsTUFDaEIsSUFBSTJRLEdBQVU7QUFBQSxFQUNqQixPQUFPLE1BQU1yUDtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsVUFBVWtQLEdBQVMsT0FBTTtBQUFBLEVBQ3pCLFVBQVVuRixFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUwyUSxHQUFVLGVBQWUsQ0FBQ3JQLEdBQU90QixNQUN0QixJQUFJMlEsR0FBVTtBQUFBLEVBQ2pCLE9BQU8sTUFBTXJQO0FBQUEsRUFDYixhQUFhO0FBQUEsRUFDYixVQUFVa1AsR0FBUyxPQUFNO0FBQUEsRUFDekIsVUFBVW5GLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFTDJRLEdBQVUsYUFBYSxDQUFDclAsR0FBT3RCLE1BQ3BCLElBQUkyUSxHQUFVO0FBQUEsRUFDakIsT0FBQXJQO0FBQUEsRUFDQSxhQUFhO0FBQUEsRUFDYixVQUFVa1AsR0FBUyxPQUFNO0FBQUEsRUFDekIsVUFBVW5GLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNMEwsV0FBaUJkLEVBQVE7QUFBQSxFQUNsQyxPQUFPekcsR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBTSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUssR0FDeENnQixJQUFVLEtBQUssS0FBSztBQUMxQixhQUFTd00sRUFBY3BJLEdBQVM7QUFFNUIsaUJBQVdqSixLQUFVaUo7QUFDakIsWUFBSWpKLEVBQU8sT0FBTyxXQUFXO0FBQ3pCLGlCQUFPQSxFQUFPO0FBR3RCLGlCQUFXQSxLQUFVaUo7QUFDakIsWUFBSWpKLEVBQU8sT0FBTyxXQUFXO0FBRXpCLGlCQUFBbUUsRUFBSSxPQUFPLE9BQU8sS0FBSyxHQUFHbkUsRUFBTyxJQUFJLE9BQU8sTUFBTSxHQUMzQ0EsRUFBTztBQUl0QixZQUFNc1IsSUFBY3JJLEVBQVEsSUFBSSxDQUFDakosTUFBVyxJQUFJa0gsR0FBU2xILEVBQU8sSUFBSSxPQUFPLE1BQU0sQ0FBQztBQUNsRixhQUFBNkksRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixhQUFBcUs7QUFBQSxNQUNoQixDQUFhLEdBQ01uSTtBQUFBLElBQ1g7QUFDQSxRQUFJaEYsRUFBSSxPQUFPO0FBQ1gsYUFBTyxRQUFRLElBQUlVLEVBQVEsSUFBSSxPQUFPVCxNQUFXO0FBQzdDLGNBQU1tTixJQUFXO0FBQUEsVUFDYixHQUFHcE47QUFBQSxVQUNILFFBQVE7QUFBQSxZQUNKLEdBQUdBLEVBQUk7QUFBQSxZQUNQLFFBQVEsQ0FBQTtBQUFBLFVBQ2hDO0FBQUEsVUFDb0IsUUFBUTtBQUFBLFFBQzVCO0FBQ2dCLGVBQU87QUFBQSxVQUNILFFBQVEsTUFBTUMsRUFBTyxZQUFZO0FBQUEsWUFDN0IsTUFBTUQsRUFBSTtBQUFBLFlBQ1YsTUFBTUEsRUFBSTtBQUFBLFlBQ1YsUUFBUW9OO0FBQUEsVUFDaEMsQ0FBcUI7QUFBQSxVQUNELEtBQUtBO0FBQUEsUUFDekI7QUFBQSxNQUNZLENBQUMsQ0FBQyxFQUFFLEtBQUtGLENBQWE7QUFFckI7QUFDRCxVQUFJRztBQUNKLFlBQU1ySyxJQUFTLENBQUE7QUFDZixpQkFBVy9DLEtBQVVTLEdBQVM7QUFDMUIsY0FBTTBNLElBQVc7QUFBQSxVQUNiLEdBQUdwTjtBQUFBLFVBQ0gsUUFBUTtBQUFBLFlBQ0osR0FBR0EsRUFBSTtBQUFBLFlBQ1AsUUFBUSxDQUFBO0FBQUEsVUFDaEM7QUFBQSxVQUNvQixRQUFRO0FBQUEsUUFDNUIsR0FDc0JuRSxJQUFTb0UsRUFBTyxXQUFXO0FBQUEsVUFDN0IsTUFBTUQsRUFBSTtBQUFBLFVBQ1YsTUFBTUEsRUFBSTtBQUFBLFVBQ1YsUUFBUW9OO0FBQUEsUUFDNUIsQ0FBaUI7QUFDRCxZQUFJdlIsRUFBTyxXQUFXO0FBQ2xCLGlCQUFPQTtBQUVOLFFBQUlBLEVBQU8sV0FBVyxXQUFXLENBQUN3UixNQUNuQ0EsSUFBUSxFQUFFLFFBQUF4UixHQUFRLEtBQUt1UixFQUFRLElBRS9CQSxFQUFTLE9BQU8sT0FBTyxVQUN2QnBLLEVBQU8sS0FBS29LLEVBQVMsT0FBTyxNQUFNO0FBQUEsTUFFMUM7QUFDQSxVQUFJQztBQUNBLGVBQUFyTixFQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUdxTixFQUFNLElBQUksT0FBTyxNQUFNLEdBQzFDQSxFQUFNO0FBRWpCLFlBQU1GLElBQWNuSyxFQUFPLElBQUksQ0FBQ0EsTUFBVyxJQUFJRCxHQUFTQyxDQUFNLENBQUM7QUFDL0QsYUFBQTBCLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsYUFBQXFLO0FBQUEsTUFDaEIsQ0FBYSxHQUNNbkk7QUFBQSxJQUNYO0FBQUEsRUFDSjtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUNKO0FBQ0FpQyxHQUFTLFNBQVMsQ0FBQ3FHLEdBQU8vUixNQUNmLElBQUkwTCxHQUFTO0FBQUEsRUFDaEIsU0FBU3FHO0FBQUEsRUFDVCxVQUFVMUcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQVNMLE1BQU1nUyxLQUFtQixDQUFDQyxNQUNsQkEsYUFBZ0JDLEtBQ1RGLEdBQWlCQyxFQUFLLE1BQU0sSUFFOUJBLGFBQWdCN0csS0FDZDRHLEdBQWlCQyxFQUFLLFdBQVcsSUFFbkNBLGFBQWdCRSxLQUNkLENBQUNGLEVBQUssS0FBSyxJQUViQSxhQUFnQkcsS0FDZEgsRUFBSyxVQUVQQSxhQUFnQkksS0FFZHBNLEVBQUssYUFBYWdNLEVBQUssSUFBSSxJQUU3QkEsYUFBZ0JsRyxLQUNkaUcsR0FBaUJDLEVBQUssS0FBSyxTQUFTLElBRXRDQSxhQUFnQjdCLEtBQ2QsQ0FBQyxNQUFTLElBRVo2QixhQUFnQjVCLEtBQ2QsQ0FBQyxJQUFJLElBRVA0QixhQUFnQjNHLEtBQ2QsQ0FBQyxRQUFXLEdBQUcwRyxHQUFpQkMsRUFBSyxPQUFNLENBQUUsQ0FBQyxJQUVoREEsYUFBZ0IxRyxLQUNkLENBQUMsTUFBTSxHQUFHeUcsR0FBaUJDLEVBQUssT0FBTSxDQUFFLENBQUMsSUFFM0NBLGFBQWdCakcsTUFHaEJpRyxhQUFnQjNGLEtBRmQwRixHQUFpQkMsRUFBSyxRQUFRLElBS2hDQSxhQUFnQi9GLEtBQ2Q4RixHQUFpQkMsRUFBSyxLQUFLLFNBQVMsSUFHcEMsQ0FBQTtBQUdSLE1BQU1LLFdBQThCMUgsRUFBUTtBQUFBLEVBQy9DLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFNLEVBQUcsSUFBSyxLQUFLLG9CQUFvQk4sQ0FBSztBQUM5QyxRQUFJTSxFQUFJLGVBQWUyQyxFQUFjO0FBQ2pDLGFBQUErQixFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVM0MsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTWdGO0FBRVgsVUFBTThJLElBQWdCLEtBQUssZUFDckJDLElBQXFCL04sRUFBSSxLQUFLOE4sQ0FBYSxHQUMzQzdOLElBQVMsS0FBSyxXQUFXLElBQUk4TixDQUFrQjtBQUNyRCxXQUFLOU4sSUFRREQsRUFBSSxPQUFPLFFBQ0pDLEVBQU8sWUFBWTtBQUFBLE1BQ3RCLE1BQU1ELEVBQUk7QUFBQSxNQUNWLE1BQU1BLEVBQUk7QUFBQSxNQUNWLFFBQVFBO0FBQUEsSUFDeEIsQ0FBYSxJQUdNQyxFQUFPLFdBQVc7QUFBQSxNQUNyQixNQUFNRCxFQUFJO0FBQUEsTUFDVixNQUFNQSxFQUFJO0FBQUEsTUFDVixRQUFRQTtBQUFBLElBQ3hCLENBQWEsS0FuQkQwRSxFQUFrQjFFLEdBQUs7QUFBQSxNQUNuQixNQUFNOEMsRUFBYTtBQUFBLE1BQ25CLFNBQVMsTUFBTSxLQUFLLEtBQUssV0FBVyxLQUFJLENBQUU7QUFBQSxNQUMxQyxNQUFNLENBQUNnTCxDQUFhO0FBQUEsSUFDcEMsQ0FBYSxHQUNNOUk7QUFBQSxFQWdCZjtBQUFBLEVBQ0EsSUFBSSxnQkFBZ0I7QUFDaEIsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsSUFBSSxhQUFhO0FBQ2IsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNBLE9BQU8sT0FBTzhJLEdBQWVwTixHQUFTbkYsR0FBUTtBQUUxQyxVQUFNeVMsSUFBYSxvQkFBSSxJQUFHO0FBRTFCLGVBQVdSLEtBQVE5TSxHQUFTO0FBQ3hCLFlBQU11TixJQUFzQlYsR0FBaUJDLEVBQUssTUFBTU0sQ0FBYSxDQUFDO0FBQ3RFLFVBQUksQ0FBQ0csRUFBb0I7QUFDckIsY0FBTSxJQUFJLE1BQU0sbUNBQW1DSCxDQUFhLG1EQUFtRDtBQUV2SCxpQkFBV3ZNLEtBQVMwTSxHQUFxQjtBQUNyQyxZQUFJRCxFQUFXLElBQUl6TSxDQUFLO0FBQ3BCLGdCQUFNLElBQUksTUFBTSwwQkFBMEIsT0FBT3VNLENBQWEsQ0FBQyx3QkFBd0IsT0FBT3ZNLENBQUssQ0FBQyxFQUFFO0FBRTFHLFFBQUF5TSxFQUFXLElBQUl6TSxHQUFPaU0sQ0FBSTtBQUFBLE1BQzlCO0FBQUEsSUFDSjtBQUNBLFdBQU8sSUFBSUssR0FBc0I7QUFBQSxNQUM3QixVQUFVakgsRUFBc0I7QUFBQSxNQUNoQyxlQUFBa0g7QUFBQSxNQUNBLFNBQUFwTjtBQUFBLE1BQ0EsWUFBQXNOO0FBQUEsTUFDQSxHQUFHbEksRUFBb0J2SyxDQUFNO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFDSjtBQUNBLFNBQVMyUyxHQUFZOVEsR0FBR0MsR0FBRztBQUN2QixRQUFNOFEsSUFBUXZMLEdBQWN4RixDQUFDLEdBQ3ZCZ1IsSUFBUXhMLEdBQWN2RixDQUFDO0FBQzdCLE1BQUlELE1BQU1DO0FBQ04sV0FBTyxFQUFFLE9BQU8sSUFBTSxNQUFNRCxFQUFDO0FBRTVCLE1BQUkrUSxNQUFVeEwsRUFBYyxVQUFVeUwsTUFBVXpMLEVBQWMsUUFBUTtBQUN2RSxVQUFNMEwsSUFBUTdNLEVBQUssV0FBV25FLENBQUMsR0FDekJpUixJQUFhOU0sRUFBSyxXQUFXcEUsQ0FBQyxFQUFFLE9BQU8sQ0FBQ04sTUFBUXVSLEVBQU0sUUFBUXZSLENBQUcsTUFBTSxFQUFFLEdBQ3pFeVIsSUFBUyxFQUFFLEdBQUduUixHQUFHLEdBQUdDLEVBQUM7QUFDM0IsZUFBV1AsS0FBT3dSLEdBQVk7QUFDMUIsWUFBTUUsSUFBY04sR0FBWTlRLEVBQUVOLENBQUcsR0FBR08sRUFBRVAsQ0FBRyxDQUFDO0FBQzlDLFVBQUksQ0FBQzBSLEVBQVk7QUFDYixlQUFPLEVBQUUsT0FBTyxHQUFLO0FBRXpCLE1BQUFELEVBQU96UixDQUFHLElBQUkwUixFQUFZO0FBQUEsSUFDOUI7QUFDQSxXQUFPLEVBQUUsT0FBTyxJQUFNLE1BQU1ELEVBQU07QUFBQSxFQUN0QyxXQUNTSixNQUFVeEwsRUFBYyxTQUFTeUwsTUFBVXpMLEVBQWMsT0FBTztBQUNyRSxRQUFJdkYsRUFBRSxXQUFXQyxFQUFFO0FBQ2YsYUFBTyxFQUFFLE9BQU8sR0FBSztBQUV6QixVQUFNb1IsSUFBVyxDQUFBO0FBQ2pCLGFBQVMzQixJQUFRLEdBQUdBLElBQVExUCxFQUFFLFFBQVEwUCxLQUFTO0FBQzNDLFlBQU00QixJQUFRdFIsRUFBRTBQLENBQUssR0FDZjZCLElBQVF0UixFQUFFeVAsQ0FBSyxHQUNmMEIsSUFBY04sR0FBWVEsR0FBT0MsQ0FBSztBQUM1QyxVQUFJLENBQUNILEVBQVk7QUFDYixlQUFPLEVBQUUsT0FBTyxHQUFLO0FBRXpCLE1BQUFDLEVBQVMsS0FBS0QsRUFBWSxJQUFJO0FBQUEsSUFDbEM7QUFDQSxXQUFPLEVBQUUsT0FBTyxJQUFNLE1BQU1DLEVBQVE7QUFBQSxFQUN4QyxNQUNLLFFBQUlOLE1BQVV4TCxFQUFjLFFBQVF5TCxNQUFVekwsRUFBYyxRQUFRLENBQUN2RixLQUFNLENBQUNDLElBQ3RFLEVBQUUsT0FBTyxJQUFNLE1BQU1ELEVBQUMsSUFHdEIsRUFBRSxPQUFPLEdBQUs7QUFFN0I7QUFDTyxNQUFNK0osV0FBd0JoQixFQUFRO0FBQUEsRUFDekMsT0FBT3pHLEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQW1GLEdBQVEsS0FBQTdFLEVBQUcsSUFBSyxLQUFLLG9CQUFvQk4sQ0FBSyxHQUNoRGtQLElBQWUsQ0FBQ0MsR0FBWUMsTUFBZ0I7QUFDOUMsVUFBSXZKLEdBQVVzSixDQUFVLEtBQUt0SixHQUFVdUosQ0FBVztBQUM5QyxlQUFPOUo7QUFFWCxZQUFNK0osSUFBU2IsR0FBWVcsRUFBVyxPQUFPQyxFQUFZLEtBQUs7QUFDOUQsYUFBS0MsRUFBTyxVQU1SdkosR0FBUXFKLENBQVUsS0FBS3JKLEdBQVFzSixDQUFXLE1BQzFDakssRUFBTyxNQUFLLEdBRVQsRUFBRSxRQUFRQSxFQUFPLE9BQU8sT0FBT2tLLEVBQU8sS0FBSSxNQVI3Q3JLLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsTUFDdkMsQ0FBaUIsR0FDTWtDO0FBQUEsSUFNZjtBQUNBLFdBQUloRixFQUFJLE9BQU8sUUFDSixRQUFRLElBQUk7QUFBQSxNQUNmLEtBQUssS0FBSyxLQUFLLFlBQVk7QUFBQSxRQUN2QixNQUFNQSxFQUFJO0FBQUEsUUFDVixNQUFNQSxFQUFJO0FBQUEsUUFDVixRQUFRQTtBQUFBLE1BQzVCLENBQWlCO0FBQUEsTUFDRCxLQUFLLEtBQUssTUFBTSxZQUFZO0FBQUEsUUFDeEIsTUFBTUEsRUFBSTtBQUFBLFFBQ1YsTUFBTUEsRUFBSTtBQUFBLFFBQ1YsUUFBUUE7QUFBQSxNQUM1QixDQUFpQjtBQUFBLElBQ2pCLENBQWEsRUFBRSxLQUFLLENBQUMsQ0FBQ2dQLEdBQU1DLENBQUssTUFBTUwsRUFBYUksR0FBTUMsQ0FBSyxDQUFDLElBRzdDTCxFQUFhLEtBQUssS0FBSyxLQUFLLFdBQVc7QUFBQSxNQUMxQyxNQUFNNU8sRUFBSTtBQUFBLE1BQ1YsTUFBTUEsRUFBSTtBQUFBLE1BQ1YsUUFBUUE7QUFBQSxJQUN4QixDQUFhLEdBQUcsS0FBSyxLQUFLLE1BQU0sV0FBVztBQUFBLE1BQzNCLE1BQU1BLEVBQUk7QUFBQSxNQUNWLE1BQU1BLEVBQUk7QUFBQSxNQUNWLFFBQVFBO0FBQUEsSUFDeEIsQ0FBYSxDQUFDO0FBQUEsRUFFVjtBQUNKO0FBQ0FtSCxHQUFnQixTQUFTLENBQUM2SCxHQUFNQyxHQUFPMVQsTUFDNUIsSUFBSTRMLEdBQWdCO0FBQUEsRUFDdkIsTUFBTTZIO0FBQUEsRUFDTixPQUFPQztBQUFBLEVBQ1AsVUFBVXJJLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFHRSxNQUFNOFEsV0FBaUJsRyxFQUFRO0FBQUEsRUFDbEMsT0FBT3pHLEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQW1GLEdBQVEsS0FBQTdFLEVBQUcsSUFBSyxLQUFLLG9CQUFvQk4sQ0FBSztBQUN0RCxRQUFJTSxFQUFJLGVBQWUyQyxFQUFjO0FBQ2pDLGFBQUErQixFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVM0MsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTWdGO0FBRVgsUUFBSWhGLEVBQUksS0FBSyxTQUFTLEtBQUssS0FBSyxNQUFNO0FBQ2xDLGFBQUEwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVMsS0FBSyxLQUFLLE1BQU07QUFBQSxRQUN6QixXQUFXO0FBQUEsUUFDWCxPQUFPO0FBQUEsUUFDUCxNQUFNO0FBQUEsTUFDdEIsQ0FBYSxHQUNNa0M7QUFHWCxJQUFJLENBRFMsS0FBSyxLQUFLLFFBQ1ZoRixFQUFJLEtBQUssU0FBUyxLQUFLLEtBQUssTUFBTSxXQUMzQzBFLEVBQWtCMUUsR0FBSztBQUFBLE1BQ25CLE1BQU04QyxFQUFhO0FBQUEsTUFDbkIsU0FBUyxLQUFLLEtBQUssTUFBTTtBQUFBLE1BQ3pCLFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLE1BQU07QUFBQSxJQUN0QixDQUFhLEdBQ0QrQixFQUFPLE1BQUs7QUFFaEIsVUFBTWhELElBQVEsQ0FBQyxHQUFHN0IsRUFBSSxJQUFJLEVBQ3JCLElBQUksQ0FBQ0UsR0FBTWdQLE1BQWM7QUFDMUIsWUFBTW5VLElBQVMsS0FBSyxLQUFLLE1BQU1tVSxDQUFTLEtBQUssS0FBSyxLQUFLO0FBQ3ZELGFBQUtuVSxJQUVFQSxFQUFPLE9BQU8sSUFBSTZLLEdBQW1CNUYsR0FBS0UsR0FBTUYsRUFBSSxNQUFNa1AsQ0FBUyxDQUFDLElBRGhFO0FBQUEsSUFFZixDQUFDLEVBQ0ksT0FBTyxDQUFDaFMsTUFBTSxDQUFDLENBQUNBLENBQUM7QUFDdEIsV0FBSThDLEVBQUksT0FBTyxRQUNKLFFBQVEsSUFBSTZCLENBQUssRUFBRSxLQUFLLENBQUNpRCxNQUNyQkYsR0FBWSxXQUFXQyxHQUFRQyxDQUFPLENBQ2hELElBR01GLEdBQVksV0FBV0MsR0FBUWhELENBQUs7QUFBQSxFQUVuRDtBQUFBLEVBQ0EsSUFBSSxRQUFRO0FBQ1IsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsS0FBS25FLEdBQU07QUFDUCxXQUFPLElBQUkyTyxHQUFTO0FBQUEsTUFDaEIsR0FBRyxLQUFLO0FBQUEsTUFDUixNQUFBM087QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNMO0FBQ0o7QUFDQTJPLEdBQVMsU0FBUyxDQUFDek0sR0FBU3JFLE1BQVc7QUFDbkMsTUFBSSxDQUFDLE1BQU0sUUFBUXFFLENBQU87QUFDdEIsVUFBTSxJQUFJLE1BQU0sdURBQXVEO0FBRTNFLFNBQU8sSUFBSXlNLEdBQVM7QUFBQSxJQUNoQixPQUFPek07QUFBQSxJQUNQLFVBQVVnSCxFQUFzQjtBQUFBLElBQ2hDLE1BQU07QUFBQSxJQUNOLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUFBLEVBQ3JDLENBQUs7QUFDTDtBQUNPLE1BQU00VCxXQUFrQmhKLEVBQVE7QUFBQSxFQUNuQyxJQUFJLFlBQVk7QUFDWixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQUEsRUFDQSxJQUFJLGNBQWM7QUFDZCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQUEsRUFDQSxPQUFPekcsR0FBTztBQUNWLFVBQU0sRUFBRSxRQUFBbUYsR0FBUSxLQUFBN0UsRUFBRyxJQUFLLEtBQUssb0JBQW9CTixDQUFLO0FBQ3RELFFBQUlNLEVBQUksZUFBZTJDLEVBQWM7QUFDakMsYUFBQStCLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFFWCxVQUFNQyxJQUFRLENBQUEsR0FDUm1LLElBQVUsS0FBSyxLQUFLLFNBQ3BCQyxJQUFZLEtBQUssS0FBSztBQUM1QixlQUFXdlMsS0FBT2tELEVBQUk7QUFDbEIsTUFBQWlGLEVBQU0sS0FBSztBQUFBLFFBQ1AsS0FBS21LLEVBQVEsT0FBTyxJQUFJeEosR0FBbUI1RixHQUFLbEQsR0FBS2tELEVBQUksTUFBTWxELENBQUcsQ0FBQztBQUFBLFFBQ25FLE9BQU91UyxFQUFVLE9BQU8sSUFBSXpKLEdBQW1CNUYsR0FBS0EsRUFBSSxLQUFLbEQsQ0FBRyxHQUFHa0QsRUFBSSxNQUFNbEQsQ0FBRyxDQUFDO0FBQUEsUUFDakYsV0FBV0EsS0FBT2tELEVBQUk7QUFBQSxNQUN0QyxDQUFhO0FBRUwsV0FBSUEsRUFBSSxPQUFPLFFBQ0o0RSxHQUFZLGlCQUFpQkMsR0FBUUksQ0FBSyxJQUcxQ0wsR0FBWSxnQkFBZ0JDLEdBQVFJLENBQUs7QUFBQSxFQUV4RDtBQUFBLEVBQ0EsSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsT0FBTyxPQUFPeEMsR0FBT0MsR0FBUTRNLEdBQU87QUFDaEMsV0FBSTVNLGFBQWtCeUQsSUFDWCxJQUFJZ0osR0FBVTtBQUFBLE1BQ2pCLFNBQVMxTTtBQUFBLE1BQ1QsV0FBV0M7QUFBQSxNQUNYLFVBQVVrRSxFQUFzQjtBQUFBLE1BQ2hDLEdBQUdkLEVBQW9Cd0osQ0FBSztBQUFBLElBQzVDLENBQWEsSUFFRSxJQUFJSCxHQUFVO0FBQUEsTUFDakIsU0FBU2xGLEdBQVUsT0FBTTtBQUFBLE1BQ3pCLFdBQVd4SDtBQUFBLE1BQ1gsVUFBVW1FLEVBQXNCO0FBQUEsTUFDaEMsR0FBR2QsRUFBb0JwRCxDQUFNO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ0w7QUFDSjtBQUNPLE1BQU02TSxXQUFlcEosRUFBUTtBQUFBLEVBQ2hDLElBQUksWUFBWTtBQUNaLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFBQSxFQUNBLElBQUksY0FBYztBQUNkLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFBQSxFQUNBLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLFFBQUFtRixHQUFRLEtBQUE3RSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUs7QUFDdEQsUUFBSU0sRUFBSSxlQUFlMkMsRUFBYztBQUNqQyxhQUFBK0IsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUVYLFVBQU1vSyxJQUFVLEtBQUssS0FBSyxTQUNwQkMsSUFBWSxLQUFLLEtBQUssV0FDdEJwSyxJQUFRLENBQUMsR0FBR2pGLEVBQUksS0FBSyxRQUFPLENBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQ2xELEdBQUt5RSxDQUFLLEdBQUd1TCxPQUM5QztBQUFBLE1BQ0gsS0FBS3NDLEVBQVEsT0FBTyxJQUFJeEosR0FBbUI1RixHQUFLbEQsR0FBS2tELEVBQUksTUFBTSxDQUFDOE0sR0FBTyxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQzlFLE9BQU91QyxFQUFVLE9BQU8sSUFBSXpKLEdBQW1CNUYsR0FBS3VCLEdBQU92QixFQUFJLE1BQU0sQ0FBQzhNLEdBQU8sT0FBTyxDQUFDLENBQUM7QUFBQSxJQUN0RyxFQUNTO0FBQ0QsUUFBSTlNLEVBQUksT0FBTyxPQUFPO0FBQ2xCLFlBQU13UCxJQUFXLG9CQUFJLElBQUc7QUFDeEIsYUFBTyxRQUFRLFVBQVUsS0FBSyxZQUFZO0FBQ3RDLG1CQUFXckssS0FBUUYsR0FBTztBQUN0QixnQkFBTW5JLElBQU0sTUFBTXFJLEVBQUssS0FDakI1RCxJQUFRLE1BQU00RCxFQUFLO0FBQ3pCLGNBQUlySSxFQUFJLFdBQVcsYUFBYXlFLEVBQU0sV0FBVztBQUM3QyxtQkFBT3lEO0FBRVgsV0FBSWxJLEVBQUksV0FBVyxXQUFXeUUsRUFBTSxXQUFXLFlBQzNDc0QsRUFBTyxNQUFLLEdBRWhCMkssRUFBUyxJQUFJMVMsRUFBSSxPQUFPeUUsRUFBTSxLQUFLO0FBQUEsUUFDdkM7QUFDQSxlQUFPLEVBQUUsUUFBUXNELEVBQU8sT0FBTyxPQUFPMkssRUFBUTtBQUFBLE1BQ2xELENBQUM7QUFBQSxJQUNMLE9BQ0s7QUFDRCxZQUFNQSxJQUFXLG9CQUFJLElBQUc7QUFDeEIsaUJBQVdySyxLQUFRRixHQUFPO0FBQ3RCLGNBQU1uSSxJQUFNcUksRUFBSyxLQUNYNUQsSUFBUTRELEVBQUs7QUFDbkIsWUFBSXJJLEVBQUksV0FBVyxhQUFheUUsRUFBTSxXQUFXO0FBQzdDLGlCQUFPeUQ7QUFFWCxTQUFJbEksRUFBSSxXQUFXLFdBQVd5RSxFQUFNLFdBQVcsWUFDM0NzRCxFQUFPLE1BQUssR0FFaEIySyxFQUFTLElBQUkxUyxFQUFJLE9BQU95RSxFQUFNLEtBQUs7QUFBQSxNQUN2QztBQUNBLGFBQU8sRUFBRSxRQUFRc0QsRUFBTyxPQUFPLE9BQU8ySyxFQUFRO0FBQUEsSUFDbEQ7QUFBQSxFQUNKO0FBQ0o7QUFDQUQsR0FBTyxTQUFTLENBQUNILEdBQVNDLEdBQVc5VCxNQUMxQixJQUFJZ1UsR0FBTztBQUFBLEVBQ2QsV0FBQUY7QUFBQSxFQUNBLFNBQUFEO0FBQUEsRUFDQSxVQUFVeEksRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1rVSxXQUFldEosRUFBUTtBQUFBLEVBQ2hDLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLFFBQUFtRixHQUFRLEtBQUE3RSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUs7QUFDdEQsUUFBSU0sRUFBSSxlQUFlMkMsRUFBYztBQUNqQyxhQUFBK0IsRUFBa0IxRSxHQUFLO0FBQUEsUUFDbkIsTUFBTThDLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVTNDLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01nRjtBQUVYLFVBQU10SixJQUFNLEtBQUs7QUFDakIsSUFBSUEsRUFBSSxZQUFZLFFBQ1pzRSxFQUFJLEtBQUssT0FBT3RFLEVBQUksUUFBUSxVQUM1QmdKLEVBQWtCMUUsR0FBSztBQUFBLE1BQ25CLE1BQU04QyxFQUFhO0FBQUEsTUFDbkIsU0FBU3BILEVBQUksUUFBUTtBQUFBLE1BQ3JCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLFNBQVNBLEVBQUksUUFBUTtBQUFBLElBQ3pDLENBQWlCLEdBQ0RtSixFQUFPLE1BQUssSUFHaEJuSixFQUFJLFlBQVksUUFDWnNFLEVBQUksS0FBSyxPQUFPdEUsRUFBSSxRQUFRLFVBQzVCZ0osRUFBa0IxRSxHQUFLO0FBQUEsTUFDbkIsTUFBTThDLEVBQWE7QUFBQSxNQUNuQixTQUFTcEgsRUFBSSxRQUFRO0FBQUEsTUFDckIsTUFBTTtBQUFBLE1BQ04sV0FBVztBQUFBLE1BQ1gsT0FBTztBQUFBLE1BQ1AsU0FBU0EsRUFBSSxRQUFRO0FBQUEsSUFDekMsQ0FBaUIsR0FDRG1KLEVBQU8sTUFBSztBQUdwQixVQUFNd0ssSUFBWSxLQUFLLEtBQUs7QUFDNUIsYUFBU0ssRUFBWUMsR0FBVTtBQUMzQixZQUFNQyxJQUFZLG9CQUFJLElBQUc7QUFDekIsaUJBQVdDLEtBQVdGLEdBQVU7QUFDNUIsWUFBSUUsRUFBUSxXQUFXO0FBQ25CLGlCQUFPN0s7QUFDWCxRQUFJNkssRUFBUSxXQUFXLFdBQ25CaEwsRUFBTyxNQUFLLEdBQ2hCK0ssRUFBVSxJQUFJQyxFQUFRLEtBQUs7QUFBQSxNQUMvQjtBQUNBLGFBQU8sRUFBRSxRQUFRaEwsRUFBTyxPQUFPLE9BQU8rSyxFQUFTO0FBQUEsSUFDbkQ7QUFDQSxVQUFNRCxJQUFXLENBQUMsR0FBRzNQLEVBQUksS0FBSyxRQUFRLEVBQUUsSUFBSSxDQUFDRSxHQUFNL0MsTUFBTWtTLEVBQVUsT0FBTyxJQUFJekosR0FBbUI1RixHQUFLRSxHQUFNRixFQUFJLE1BQU03QyxDQUFDLENBQUMsQ0FBQztBQUN6SCxXQUFJNkMsRUFBSSxPQUFPLFFBQ0osUUFBUSxJQUFJMlAsQ0FBUSxFQUFFLEtBQUssQ0FBQ0EsTUFBYUQsRUFBWUMsQ0FBUSxDQUFDLElBRzlERCxFQUFZQyxDQUFRO0FBQUEsRUFFbkM7QUFBQSxFQUNBLElBQUlHLEdBQVNoTSxHQUFTO0FBQ2xCLFdBQU8sSUFBSTJMLEdBQU87QUFBQSxNQUNkLEdBQUcsS0FBSztBQUFBLE1BQ1IsU0FBUyxFQUFFLE9BQU9LLEdBQVMsU0FBU25LLEVBQVUsU0FBUzdCLENBQU8sRUFBQztBQUFBLElBQzNFLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxJQUFJaU0sR0FBU2pNLEdBQVM7QUFDbEIsV0FBTyxJQUFJMkwsR0FBTztBQUFBLE1BQ2QsR0FBRyxLQUFLO0FBQUEsTUFDUixTQUFTLEVBQUUsT0FBT00sR0FBUyxTQUFTcEssRUFBVSxTQUFTN0IsQ0FBTyxFQUFDO0FBQUEsSUFDM0UsQ0FBUztBQUFBLEVBQ0w7QUFBQSxFQUNBLEtBQUtrTSxHQUFNbE0sR0FBUztBQUNoQixXQUFPLEtBQUssSUFBSWtNLEdBQU1sTSxDQUFPLEVBQUUsSUFBSWtNLEdBQU1sTSxDQUFPO0FBQUEsRUFDcEQ7QUFBQSxFQUNBLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssSUFBSSxHQUFHQSxDQUFPO0FBQUEsRUFDOUI7QUFDSjtBQUNBMkwsR0FBTyxTQUFTLENBQUNKLEdBQVc5VCxNQUNqQixJQUFJa1UsR0FBTztBQUFBLEVBQ2QsV0FBQUo7QUFBQSxFQUNBLFNBQVM7QUFBQSxFQUNULFNBQVM7QUFBQSxFQUNULFVBQVV6SSxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBb0hFLE1BQU1rUyxXQUFnQnRILEVBQVE7QUFBQSxFQUNqQyxJQUFJLFNBQVM7QUFDVCxXQUFPLEtBQUssS0FBSyxPQUFNO0FBQUEsRUFDM0I7QUFBQSxFQUNBLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFNLEVBQUcsSUFBSyxLQUFLLG9CQUFvQk4sQ0FBSztBQUU5QyxXQURtQixLQUFLLEtBQUssT0FBTSxFQUNqQixPQUFPLEVBQUUsTUFBTU0sRUFBSSxNQUFNLE1BQU1BLEVBQUksTUFBTSxRQUFRQSxFQUFHLENBQUU7QUFBQSxFQUM1RTtBQUNKO0FBQ0F5TixHQUFRLFNBQVMsQ0FBQ3dDLEdBQVExVSxNQUNmLElBQUlrUyxHQUFRO0FBQUEsRUFDZixRQUFRd0M7QUFBQSxFQUNSLFVBQVVySixFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTW1TLFdBQW1CdkgsRUFBUTtBQUFBLEVBQ3BDLE9BQU96RyxHQUFPO0FBQ1YsUUFBSUEsRUFBTSxTQUFTLEtBQUssS0FBSyxPQUFPO0FBQ2hDLFlBQU1NLElBQU0sS0FBSyxnQkFBZ0JOLENBQUs7QUFDdEMsYUFBQWdGLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFVBQVVBLEVBQUk7QUFBQSxRQUNkLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVSxLQUFLLEtBQUs7QUFBQSxNQUNwQyxDQUFhLEdBQ01rQztBQUFBLElBQ1g7QUFDQSxXQUFPLEVBQUUsUUFBUSxTQUFTLE9BQU90RixFQUFNLEtBQUk7QUFBQSxFQUMvQztBQUFBLEVBQ0EsSUFBSSxRQUFRO0FBQ1IsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUNKO0FBQ0FnTyxHQUFXLFNBQVMsQ0FBQ25NLEdBQU9oRyxNQUNqQixJQUFJbVMsR0FBVztBQUFBLEVBQ2xCLE9BQU9uTTtBQUFBLEVBQ1AsVUFBVXFGLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFTCxTQUFTMFIsR0FBY3RQLEdBQVFwQyxHQUFRO0FBQ25DLFNBQU8sSUFBSW9TLEdBQVE7QUFBQSxJQUNmLFFBQUFoUTtBQUFBLElBQ0EsVUFBVWlKLEVBQXNCO0FBQUEsSUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQUEsRUFDckMsQ0FBSztBQUNMO0FBQ08sTUFBTW9TLFdBQWdCeEgsRUFBUTtBQUFBLEVBQ2pDLE9BQU96RyxHQUFPO0FBQ1YsUUFBSSxPQUFPQSxFQUFNLFFBQVMsVUFBVTtBQUNoQyxZQUFNTSxJQUFNLEtBQUssZ0JBQWdCTixDQUFLLEdBQ2hDd1EsSUFBaUIsS0FBSyxLQUFLO0FBQ2pDLGFBQUF4TCxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixVQUFVd0IsRUFBSyxXQUFXME8sQ0FBYztBQUFBLFFBQ3hDLFVBQVVsUSxFQUFJO0FBQUEsUUFDZCxNQUFNOEMsRUFBYTtBQUFBLE1BQ25DLENBQWEsR0FDTWtDO0FBQUEsSUFDWDtBQUlBLFFBSEssS0FBSyxXQUNOLEtBQUssU0FBUyxJQUFJLElBQUksS0FBSyxLQUFLLE1BQU0sSUFFdEMsQ0FBQyxLQUFLLE9BQU8sSUFBSXRGLEVBQU0sSUFBSSxHQUFHO0FBQzlCLFlBQU1NLElBQU0sS0FBSyxnQkFBZ0JOLENBQUssR0FDaEN3USxJQUFpQixLQUFLLEtBQUs7QUFDakMsYUFBQXhMLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFVBQVVBLEVBQUk7QUFBQSxRQUNkLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsU0FBU29OO0FBQUEsTUFDekIsQ0FBYSxHQUNNbEw7QUFBQSxJQUNYO0FBQ0EsV0FBT00sR0FBRzVGLEVBQU0sSUFBSTtBQUFBLEVBQ3hCO0FBQUEsRUFDQSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQUEsRUFDQSxJQUFJLE9BQU87QUFDUCxVQUFNeVEsSUFBYSxDQUFBO0FBQ25CLGVBQVc1UyxLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBNFMsRUFBVzVTLENBQUcsSUFBSUE7QUFFdEIsV0FBTzRTO0FBQUEsRUFDWDtBQUFBLEVBQ0EsSUFBSSxTQUFTO0FBQ1QsVUFBTUEsSUFBYSxDQUFBO0FBQ25CLGVBQVc1UyxLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBNFMsRUFBVzVTLENBQUcsSUFBSUE7QUFFdEIsV0FBTzRTO0FBQUEsRUFDWDtBQUFBLEVBQ0EsSUFBSSxPQUFPO0FBQ1AsVUFBTUEsSUFBYSxDQUFBO0FBQ25CLGVBQVc1UyxLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBNFMsRUFBVzVTLENBQUcsSUFBSUE7QUFFdEIsV0FBTzRTO0FBQUEsRUFDWDtBQUFBLEVBQ0EsUUFBUXhTLEdBQVF5UyxJQUFTLEtBQUssTUFBTTtBQUNoQyxXQUFPekMsR0FBUSxPQUFPaFEsR0FBUTtBQUFBLE1BQzFCLEdBQUcsS0FBSztBQUFBLE1BQ1IsR0FBR3lTO0FBQUEsSUFDZixDQUFTO0FBQUEsRUFDTDtBQUFBLEVBQ0EsUUFBUXpTLEdBQVF5UyxJQUFTLEtBQUssTUFBTTtBQUNoQyxXQUFPekMsR0FBUSxPQUFPLEtBQUssUUFBUSxPQUFPLENBQUMwQyxNQUFRLENBQUMxUyxFQUFPLFNBQVMwUyxDQUFHLENBQUMsR0FBRztBQUFBLE1BQ3ZFLEdBQUcsS0FBSztBQUFBLE1BQ1IsR0FBR0Q7QUFBQSxJQUNmLENBQVM7QUFBQSxFQUNMO0FBQ0o7QUFDQXpDLEdBQVEsU0FBU1Y7QUFDVixNQUFNVyxXQUFzQnpILEVBQVE7QUFBQSxFQUN2QyxPQUFPekcsR0FBTztBQUNWLFVBQU00USxJQUFtQjlPLEVBQUssbUJBQW1CLEtBQUssS0FBSyxNQUFNLEdBQzNEeEIsSUFBTSxLQUFLLGdCQUFnQk4sQ0FBSztBQUN0QyxRQUFJTSxFQUFJLGVBQWUyQyxFQUFjLFVBQVUzQyxFQUFJLGVBQWUyQyxFQUFjLFFBQVE7QUFDcEYsWUFBTXVOLElBQWlCMU8sRUFBSyxhQUFhOE8sQ0FBZ0I7QUFDekQsYUFBQTVMLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLFVBQVV3QixFQUFLLFdBQVcwTyxDQUFjO0FBQUEsUUFDeEMsVUFBVWxRLEVBQUk7QUFBQSxRQUNkLE1BQU04QyxFQUFhO0FBQUEsTUFDbkMsQ0FBYSxHQUNNa0M7QUFBQSxJQUNYO0FBSUEsUUFISyxLQUFLLFdBQ04sS0FBSyxTQUFTLElBQUksSUFBSXhELEVBQUssbUJBQW1CLEtBQUssS0FBSyxNQUFNLENBQUMsSUFFL0QsQ0FBQyxLQUFLLE9BQU8sSUFBSTlCLEVBQU0sSUFBSSxHQUFHO0FBQzlCLFlBQU13USxJQUFpQjFPLEVBQUssYUFBYThPLENBQWdCO0FBQ3pELGFBQUE1TCxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixVQUFVQSxFQUFJO0FBQUEsUUFDZCxNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFNBQVNvTjtBQUFBLE1BQ3pCLENBQWEsR0FDTWxMO0FBQUEsSUFDWDtBQUNBLFdBQU9NLEdBQUc1RixFQUFNLElBQUk7QUFBQSxFQUN4QjtBQUFBLEVBQ0EsSUFBSSxPQUFPO0FBQ1AsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUNKO0FBQ0FrTyxHQUFjLFNBQVMsQ0FBQ2pRLEdBQVFwQyxNQUNyQixJQUFJcVMsR0FBYztBQUFBLEVBQ3JCLFFBQVFqUTtBQUFBLEVBQ1IsVUFBVWlKLEVBQXNCO0FBQUEsRUFDaEMsR0FBR2QsRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNeUwsV0FBbUJiLEVBQVE7QUFBQSxFQUNwQyxTQUFTO0FBQ0wsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUFBLEVBQ0EsT0FBT3pHLEdBQU87QUFDVixVQUFNLEVBQUUsS0FBQU0sRUFBRyxJQUFLLEtBQUssb0JBQW9CTixDQUFLO0FBQzlDLFFBQUlNLEVBQUksZUFBZTJDLEVBQWMsV0FBVzNDLEVBQUksT0FBTyxVQUFVO0FBQ2pFLGFBQUEwRSxFQUFrQjFFLEdBQUs7QUFBQSxRQUNuQixNQUFNOEMsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVM0MsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTWdGO0FBRVgsVUFBTXVMLElBQWN2USxFQUFJLGVBQWUyQyxFQUFjLFVBQVUzQyxFQUFJLE9BQU8sUUFBUSxRQUFRQSxFQUFJLElBQUk7QUFDbEcsV0FBT3NGLEdBQUdpTCxFQUFZLEtBQUssQ0FBQzFOLE1BQ2pCLEtBQUssS0FBSyxLQUFLLFdBQVdBLEdBQU07QUFBQSxNQUNuQyxNQUFNN0MsRUFBSTtBQUFBLE1BQ1YsVUFBVUEsRUFBSSxPQUFPO0FBQUEsSUFDckMsQ0FBYSxDQUNKLENBQUM7QUFBQSxFQUNOO0FBQ0o7QUFDQWdILEdBQVcsU0FBUyxDQUFDak0sR0FBUVEsTUFDbEIsSUFBSXlMLEdBQVc7QUFBQSxFQUNsQixNQUFNak07QUFBQSxFQUNOLFVBQVU2TCxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTW9MLFdBQW1CUixFQUFRO0FBQUEsRUFDcEMsWUFBWTtBQUNSLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFBQSxFQUNBLGFBQWE7QUFDVCxXQUFPLEtBQUssS0FBSyxPQUFPLEtBQUssYUFBYVMsRUFBc0IsYUFDMUQsS0FBSyxLQUFLLE9BQU8sV0FBVSxJQUMzQixLQUFLLEtBQUs7QUFBQSxFQUNwQjtBQUFBLEVBQ0EsT0FBT2xILEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQW1GLEdBQVEsS0FBQTdFLEVBQUcsSUFBSyxLQUFLLG9CQUFvQk4sQ0FBSyxHQUNoRDhRLElBQVMsS0FBSyxLQUFLLFVBQVUsTUFDN0JDLElBQVc7QUFBQSxNQUNiLFVBQVUsQ0FBQ0MsTUFBUTtBQUNmLFFBQUFoTSxFQUFrQjFFLEdBQUswUSxDQUFHLEdBQ3RCQSxFQUFJLFFBQ0o3TCxFQUFPLE1BQUssSUFHWkEsRUFBTyxNQUFLO0FBQUEsTUFFcEI7QUFBQSxNQUNBLElBQUksT0FBTztBQUNQLGVBQU83RSxFQUFJO0FBQUEsTUFDZjtBQUFBLElBQ1o7QUFFUSxRQURBeVEsRUFBUyxXQUFXQSxFQUFTLFNBQVMsS0FBS0EsQ0FBUSxHQUMvQ0QsRUFBTyxTQUFTLGNBQWM7QUFDOUIsWUFBTUcsSUFBWUgsRUFBTyxVQUFVeFEsRUFBSSxNQUFNeVEsQ0FBUTtBQUNyRCxVQUFJelEsRUFBSSxPQUFPO0FBQ1gsZUFBTyxRQUFRLFFBQVEyUSxDQUFTLEVBQUUsS0FBSyxPQUFPQSxNQUFjO0FBQ3hELGNBQUk5TCxFQUFPLFVBQVU7QUFDakIsbUJBQU9HO0FBQ1gsZ0JBQU1uSixJQUFTLE1BQU0sS0FBSyxLQUFLLE9BQU8sWUFBWTtBQUFBLFlBQzlDLE1BQU04VTtBQUFBLFlBQ04sTUFBTTNRLEVBQUk7QUFBQSxZQUNWLFFBQVFBO0FBQUEsVUFDaEMsQ0FBcUI7QUFDRCxpQkFBSW5FLEVBQU8sV0FBVyxZQUNYbUosSUFDUG5KLEVBQU8sV0FBVyxXQUVsQmdKLEVBQU8sVUFBVSxVQUNWUSxHQUFNeEosRUFBTyxLQUFLLElBQ3RCQTtBQUFBLFFBQ1gsQ0FBQztBQUVBO0FBQ0QsWUFBSWdKLEVBQU8sVUFBVTtBQUNqQixpQkFBT0c7QUFDWCxjQUFNbkosSUFBUyxLQUFLLEtBQUssT0FBTyxXQUFXO0FBQUEsVUFDdkMsTUFBTThVO0FBQUEsVUFDTixNQUFNM1EsRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUM1QixDQUFpQjtBQUNELGVBQUluRSxFQUFPLFdBQVcsWUFDWG1KLElBQ1BuSixFQUFPLFdBQVcsV0FFbEJnSixFQUFPLFVBQVUsVUFDVlEsR0FBTXhKLEVBQU8sS0FBSyxJQUN0QkE7QUFBQSxNQUNYO0FBQUEsSUFDSjtBQUNBLFFBQUkyVSxFQUFPLFNBQVMsY0FBYztBQUM5QixZQUFNSSxJQUFvQixDQUFDQyxNQUFRO0FBQy9CLGNBQU1oVixJQUFTMlUsRUFBTyxXQUFXSyxHQUFLSixDQUFRO0FBQzlDLFlBQUl6USxFQUFJLE9BQU87QUFDWCxpQkFBTyxRQUFRLFFBQVFuRSxDQUFNO0FBRWpDLFlBQUlBLGFBQWtCO0FBQ2xCLGdCQUFNLElBQUksTUFBTSwyRkFBMkY7QUFFL0csZUFBT2dWO0FBQUEsTUFDWDtBQUNBLFVBQUk3USxFQUFJLE9BQU8sVUFBVSxJQUFPO0FBQzVCLGNBQU1oQyxJQUFRLEtBQUssS0FBSyxPQUFPLFdBQVc7QUFBQSxVQUN0QyxNQUFNZ0MsRUFBSTtBQUFBLFVBQ1YsTUFBTUEsRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUM1QixDQUFpQjtBQUNELGVBQUloQyxFQUFNLFdBQVcsWUFDVmdILEtBQ1BoSCxFQUFNLFdBQVcsV0FDakI2RyxFQUFPLE1BQUssR0FFaEIrTCxFQUFrQjVTLEVBQU0sS0FBSyxHQUN0QixFQUFFLFFBQVE2RyxFQUFPLE9BQU8sT0FBTzdHLEVBQU0sTUFBSztBQUFBLE1BQ3JEO0FBRUksZUFBTyxLQUFLLEtBQUssT0FBTyxZQUFZLEVBQUUsTUFBTWdDLEVBQUksTUFBTSxNQUFNQSxFQUFJLE1BQU0sUUFBUUEsRUFBRyxDQUFFLEVBQUUsS0FBSyxDQUFDaEMsTUFDbkZBLEVBQU0sV0FBVyxZQUNWZ0gsS0FDUGhILEVBQU0sV0FBVyxXQUNqQjZHLEVBQU8sTUFBSyxHQUNUK0wsRUFBa0I1UyxFQUFNLEtBQUssRUFBRSxLQUFLLE9BQ2hDLEVBQUUsUUFBUTZHLEVBQU8sT0FBTyxPQUFPN0csRUFBTSxNQUFLLEVBQ3BELEVBQ0o7QUFBQSxJQUVUO0FBQ0EsUUFBSXdTLEVBQU8sU0FBUztBQUNoQixVQUFJeFEsRUFBSSxPQUFPLFVBQVUsSUFBTztBQUM1QixjQUFNOFEsSUFBTyxLQUFLLEtBQUssT0FBTyxXQUFXO0FBQUEsVUFDckMsTUFBTTlRLEVBQUk7QUFBQSxVQUNWLE1BQU1BLEVBQUk7QUFBQSxVQUNWLFFBQVFBO0FBQUEsUUFDNUIsQ0FBaUI7QUFDRCxZQUFJLENBQUN5RixHQUFRcUwsQ0FBSTtBQUNiLGlCQUFPOUw7QUFDWCxjQUFNbkosSUFBUzJVLEVBQU8sVUFBVU0sRUFBSyxPQUFPTCxDQUFRO0FBQ3BELFlBQUk1VSxhQUFrQjtBQUNsQixnQkFBTSxJQUFJLE1BQU0saUdBQWlHO0FBRXJILGVBQU8sRUFBRSxRQUFRZ0osRUFBTyxPQUFPLE9BQU9oSixFQUFNO0FBQUEsTUFDaEQ7QUFFSSxlQUFPLEtBQUssS0FBSyxPQUFPLFlBQVksRUFBRSxNQUFNbUUsRUFBSSxNQUFNLE1BQU1BLEVBQUksTUFBTSxRQUFRQSxFQUFHLENBQUUsRUFBRSxLQUFLLENBQUM4USxNQUNsRnJMLEdBQVFxTCxDQUFJLElBRVYsUUFBUSxRQUFRTixFQUFPLFVBQVVNLEVBQUssT0FBT0wsQ0FBUSxDQUFDLEVBQUUsS0FBSyxDQUFDNVUsT0FBWTtBQUFBLFVBQzdFLFFBQVFnSixFQUFPO0FBQUEsVUFDZixPQUFPaEo7QUFBQSxRQUMvQixFQUFzQixJQUpTbUosQ0FLZDtBQUdULElBQUF4RCxFQUFLLFlBQVlnUCxDQUFNO0FBQUEsRUFDM0I7QUFDSjtBQUNBN0osR0FBVyxTQUFTLENBQUM1TCxHQUFReVYsR0FBUWpWLE1BQzFCLElBQUlvTCxHQUFXO0FBQUEsRUFDbEIsUUFBQTVMO0FBQUEsRUFDQSxVQUFVNkwsRUFBc0I7QUFBQSxFQUNoQyxRQUFBNEo7QUFBQSxFQUNBLEdBQUcxSyxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVMb0wsR0FBVyx1QkFBdUIsQ0FBQ29LLEdBQVloVyxHQUFRUSxNQUM1QyxJQUFJb0wsR0FBVztBQUFBLEVBQ2xCLFFBQUE1TDtBQUFBLEVBQ0EsUUFBUSxFQUFFLE1BQU0sY0FBYyxXQUFXZ1csRUFBVTtBQUFBLEVBQ25ELFVBQVVuSyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBR0UsTUFBTXNMLFdBQW9CVixFQUFRO0FBQUEsRUFDckMsT0FBT3pHLEdBQU87QUFFVixXQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJpRCxFQUFjLFlBQ3RCMkMsR0FBRyxNQUFTLElBRWhCLEtBQUssS0FBSyxVQUFVLE9BQU81RixDQUFLO0FBQUEsRUFDM0M7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQ0o7QUFDQW1ILEdBQVksU0FBUyxDQUFDMkcsR0FBTWpTLE1BQ2pCLElBQUlzTCxHQUFZO0FBQUEsRUFDbkIsV0FBVzJHO0FBQUEsRUFDWCxVQUFVNUcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU11TCxXQUFvQlgsRUFBUTtBQUFBLEVBQ3JDLE9BQU96RyxHQUFPO0FBRVYsV0FEbUIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CaUQsRUFBYyxPQUN0QjJDLEdBQUcsSUFBSSxJQUVYLEtBQUssS0FBSyxVQUFVLE9BQU81RixDQUFLO0FBQUEsRUFDM0M7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQ0o7QUFDQW9ILEdBQVksU0FBUyxDQUFDMEcsR0FBTWpTLE1BQ2pCLElBQUl1TCxHQUFZO0FBQUEsRUFDbkIsV0FBVzBHO0FBQUEsRUFDWCxVQUFVNUcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU0rTCxXQUFtQm5CLEVBQVE7QUFBQSxFQUNwQyxPQUFPekcsR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBTSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUs7QUFDOUMsUUFBSW1ELElBQU83QyxFQUFJO0FBQ2YsV0FBSUEsRUFBSSxlQUFlMkMsRUFBYyxjQUNqQ0UsSUFBTyxLQUFLLEtBQUssYUFBWSxJQUUxQixLQUFLLEtBQUssVUFBVSxPQUFPO0FBQUEsTUFDOUIsTUFBQUE7QUFBQSxNQUNBLE1BQU03QyxFQUFJO0FBQUEsTUFDVixRQUFRQTtBQUFBLElBQ3BCLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxnQkFBZ0I7QUFDWixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3JCO0FBQ0o7QUFDQXNILEdBQVcsU0FBUyxDQUFDa0csR0FBTWpTLE1BQ2hCLElBQUkrTCxHQUFXO0FBQUEsRUFDbEIsV0FBV2tHO0FBQUEsRUFDWCxVQUFVNUcsRUFBc0I7QUFBQSxFQUNoQyxjQUFjLE9BQU9yTCxFQUFPLFdBQVksYUFBYUEsRUFBTyxVQUFVLE1BQU1BLEVBQU87QUFBQSxFQUNuRixHQUFHdUssRUFBb0J2SyxDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNa00sV0FBaUJ0QixFQUFRO0FBQUEsRUFDbEMsT0FBT3pHLEdBQU87QUFDVixVQUFNLEVBQUUsS0FBQU0sRUFBRyxJQUFLLEtBQUssb0JBQW9CTixDQUFLLEdBRXhDc1IsSUFBUztBQUFBLE1BQ1gsR0FBR2hSO0FBQUEsTUFDSCxRQUFRO0FBQUEsUUFDSixHQUFHQSxFQUFJO0FBQUEsUUFDUCxRQUFRLENBQUE7QUFBQSxNQUN4QjtBQUFBLElBQ0EsR0FDY25FLElBQVMsS0FBSyxLQUFLLFVBQVUsT0FBTztBQUFBLE1BQ3RDLE1BQU1tVixFQUFPO0FBQUEsTUFDYixNQUFNQSxFQUFPO0FBQUEsTUFDYixRQUFRO0FBQUEsUUFDSixHQUFHQTtBQUFBLE1BQ25CO0FBQUEsSUFDQSxDQUFTO0FBQ0QsV0FBSXRMLEdBQVE3SixDQUFNLElBQ1BBLEVBQU8sS0FBSyxDQUFDQSxPQUNUO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPQSxFQUFPLFdBQVcsVUFDbkJBLEVBQU8sUUFDUCxLQUFLLEtBQUssV0FBVztBQUFBLFFBQ25CLElBQUksUUFBUTtBQUNSLGlCQUFPLElBQUlrSCxHQUFTaU8sRUFBTyxPQUFPLE1BQU07QUFBQSxRQUM1QztBQUFBLFFBQ0EsT0FBT0EsRUFBTztBQUFBLE1BQzFDLENBQXlCO0FBQUEsSUFDekIsRUFDYSxJQUdNO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPblYsRUFBTyxXQUFXLFVBQ25CQSxFQUFPLFFBQ1AsS0FBSyxLQUFLLFdBQVc7QUFBQSxRQUNuQixJQUFJLFFBQVE7QUFDUixpQkFBTyxJQUFJa0gsR0FBU2lPLEVBQU8sT0FBTyxNQUFNO0FBQUEsUUFDNUM7QUFBQSxRQUNBLE9BQU9BLEVBQU87QUFBQSxNQUN0QyxDQUFxQjtBQUFBLElBQ3JCO0FBQUEsRUFFSTtBQUFBLEVBQ0EsY0FBYztBQUNWLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFDSjtBQUNBdkosR0FBUyxTQUFTLENBQUMrRixHQUFNalMsTUFDZCxJQUFJa00sR0FBUztBQUFBLEVBQ2hCLFdBQVcrRjtBQUFBLEVBQ1gsVUFBVTVHLEVBQXNCO0FBQUEsRUFDaEMsWUFBWSxPQUFPckwsRUFBTyxTQUFVLGFBQWFBLEVBQU8sUUFBUSxNQUFNQSxFQUFPO0FBQUEsRUFDN0UsR0FBR3VLLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTTBWLFdBQWU5SyxFQUFRO0FBQUEsRUFDaEMsT0FBT3pHLEdBQU87QUFFVixRQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJpRCxFQUFjLEtBQUs7QUFDbEMsWUFBTTNDLElBQU0sS0FBSyxnQkFBZ0JOLENBQUs7QUFDdEMsYUFBQWdGLEVBQWtCMUUsR0FBSztBQUFBLFFBQ25CLE1BQU04QyxFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVUzQyxFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNZ0Y7QUFBQSxJQUNYO0FBQ0EsV0FBTyxFQUFFLFFBQVEsU0FBUyxPQUFPdEYsRUFBTSxLQUFJO0FBQUEsRUFDL0M7QUFDSjtBQUNBdVIsR0FBTyxTQUFTLENBQUMxVixNQUNOLElBQUkwVixHQUFPO0FBQUEsRUFDZCxVQUFVckssRUFBc0I7QUFBQSxFQUNoQyxHQUFHZCxFQUFvQnZLLENBQU07QUFDckMsQ0FBSztBQUdFLE1BQU1nTSxXQUFtQnBCLEVBQVE7QUFBQSxFQUNwQyxPQUFPekcsR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBTSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUssR0FDeENtRCxJQUFPN0MsRUFBSTtBQUNqQixXQUFPLEtBQUssS0FBSyxLQUFLLE9BQU87QUFBQSxNQUN6QixNQUFBNkM7QUFBQSxNQUNBLE1BQU03QyxFQUFJO0FBQUEsTUFDVixRQUFRQTtBQUFBLElBQ3BCLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUNyQjtBQUNKO0FBQ08sTUFBTTRILFdBQW9CekIsRUFBUTtBQUFBLEVBQ3JDLE9BQU96RyxHQUFPO0FBQ1YsVUFBTSxFQUFFLFFBQUFtRixHQUFRLEtBQUE3RSxFQUFHLElBQUssS0FBSyxvQkFBb0JOLENBQUs7QUFDdEQsUUFBSU0sRUFBSSxPQUFPO0FBcUJYLGNBcEJvQixZQUFZO0FBQzVCLGNBQU1rUixJQUFXLE1BQU0sS0FBSyxLQUFLLEdBQUcsWUFBWTtBQUFBLFVBQzVDLE1BQU1sUixFQUFJO0FBQUEsVUFDVixNQUFNQSxFQUFJO0FBQUEsVUFDVixRQUFRQTtBQUFBLFFBQzVCLENBQWlCO0FBQ0QsZUFBSWtSLEVBQVMsV0FBVyxZQUNibE0sSUFDUGtNLEVBQVMsV0FBVyxXQUNwQnJNLEVBQU8sTUFBSyxHQUNMUSxHQUFNNkwsRUFBUyxLQUFLLEtBR3BCLEtBQUssS0FBSyxJQUFJLFlBQVk7QUFBQSxVQUM3QixNQUFNQSxFQUFTO0FBQUEsVUFDZixNQUFNbFIsRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUNoQyxDQUFxQjtBQUFBLE1BRVQsR0FDa0I7QUFFakI7QUFDRCxZQUFNa1IsSUFBVyxLQUFLLEtBQUssR0FBRyxXQUFXO0FBQUEsUUFDckMsTUFBTWxSLEVBQUk7QUFBQSxRQUNWLE1BQU1BLEVBQUk7QUFBQSxRQUNWLFFBQVFBO0FBQUEsTUFDeEIsQ0FBYTtBQUNELGFBQUlrUixFQUFTLFdBQVcsWUFDYmxNLElBQ1BrTSxFQUFTLFdBQVcsV0FDcEJyTSxFQUFPLE1BQUssR0FDTDtBQUFBLFFBQ0gsUUFBUTtBQUFBLFFBQ1IsT0FBT3FNLEVBQVM7QUFBQSxNQUNwQyxLQUd1QixLQUFLLEtBQUssSUFBSSxXQUFXO0FBQUEsUUFDNUIsTUFBTUEsRUFBUztBQUFBLFFBQ2YsTUFBTWxSLEVBQUk7QUFBQSxRQUNWLFFBQVFBO0FBQUEsTUFDNUIsQ0FBaUI7QUFBQSxJQUVUO0FBQUEsRUFDSjtBQUFBLEVBQ0EsT0FBTyxPQUFPNUMsR0FBR0MsR0FBRztBQUNoQixXQUFPLElBQUl1SyxHQUFZO0FBQUEsTUFDbkIsSUFBSXhLO0FBQUEsTUFDSixLQUFLQztBQUFBLE1BQ0wsVUFBVXVKLEVBQXNCO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBQ0w7QUFDSjtBQUNPLE1BQU1pQixXQUFvQjFCLEVBQVE7QUFBQSxFQUNyQyxPQUFPekcsR0FBTztBQUNWLFVBQU03RCxJQUFTLEtBQUssS0FBSyxVQUFVLE9BQU82RCxDQUFLLEdBQ3pDeVIsSUFBUyxDQUFDdE8sT0FDUjRDLEdBQVE1QyxDQUFJLE1BQ1pBLEVBQUssUUFBUSxPQUFPLE9BQU9BLEVBQUssS0FBSyxJQUVsQ0E7QUFFWCxXQUFPNkMsR0FBUTdKLENBQU0sSUFBSUEsRUFBTyxLQUFLLENBQUNnSCxNQUFTc08sRUFBT3RPLENBQUksQ0FBQyxJQUFJc08sRUFBT3RWLENBQU07QUFBQSxFQUNoRjtBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDckI7QUFDSjtBQUNBZ00sR0FBWSxTQUFTLENBQUMyRixHQUFNalMsTUFDakIsSUFBSXNNLEdBQVk7QUFBQSxFQUNuQixXQUFXMkY7QUFBQSxFQUNYLFVBQVU1RyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUdkLEVBQW9CdkssQ0FBTTtBQUNyQyxDQUFLO0FBU0wsU0FBUzZWLEdBQVk3VixHQUFRc0gsR0FBTTtBQUMvQixRQUFNM0gsSUFBSSxPQUFPSyxLQUFXLGFBQWFBLEVBQU9zSCxDQUFJLElBQUksT0FBT3RILEtBQVcsV0FBVyxFQUFFLFNBQVNBLEVBQU0sSUFBS0E7QUFFM0csU0FEVyxPQUFPTCxLQUFNLFdBQVcsRUFBRSxTQUFTQSxFQUFDLElBQUtBO0FBRXhEO0FBQ08sU0FBU21XLEdBQU8vSyxHQUFPOUssSUFBVSxDQUFBLEdBV3hDOFYsR0FBTztBQUNILFNBQUloTCxJQUNPdUYsR0FBTyxPQUFNLEVBQUcsWUFBWSxDQUFDaEosR0FBTTdDLE1BQVE7QUFDOUMsVUFBTXVSLElBQUlqTCxFQUFNekQsQ0FBSTtBQUNwQixRQUFJME8sYUFBYTtBQUNiLGFBQU9BLEVBQUUsS0FBSyxDQUFDQSxNQUFNO0FBQ2pCLFlBQUksQ0FBQ0EsR0FBRztBQUNKLGdCQUFNaFcsSUFBUzZWLEdBQVk1VixHQUFTcUgsQ0FBSSxHQUNsQzJPLElBQVNqVyxFQUFPLFNBQVMrVixLQUFTO0FBQ3hDLFVBQUF0UixFQUFJLFNBQVMsRUFBRSxNQUFNLFVBQVUsR0FBR3pFLEdBQVEsT0FBT2lXLEdBQVE7QUFBQSxRQUM3RDtBQUFBLE1BQ0osQ0FBQztBQUVMLFFBQUksQ0FBQ0QsR0FBRztBQUNKLFlBQU1oVyxJQUFTNlYsR0FBWTVWLEdBQVNxSCxDQUFJLEdBQ2xDMk8sSUFBU2pXLEVBQU8sU0FBUytWLEtBQVM7QUFDeEMsTUFBQXRSLEVBQUksU0FBUyxFQUFFLE1BQU0sVUFBVSxHQUFHekUsR0FBUSxPQUFPaVcsR0FBUTtBQUFBLElBQzdEO0FBQUEsRUFFSixDQUFDLElBQ0UzRixHQUFPLE9BQU07QUFDeEI7QUFLTyxJQUFJakY7QUFBQSxDQUNWLFNBQVVBLEdBQXVCO0FBQzlCLEVBQUFBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLFNBQVksVUFDbENBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixlQUFrQixnQkFDeENBLEVBQXNCLFVBQWEsV0FDbkNBLEVBQXNCLFNBQVksVUFDbENBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQix3QkFBMkIseUJBQ2pEQSxFQUFzQixrQkFBcUIsbUJBQzNDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixjQUFpQixlQUN2Q0EsRUFBc0IsVUFBYSxXQUNuQ0EsRUFBc0IsYUFBZ0IsY0FDdENBLEVBQXNCLFVBQWEsV0FDbkNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixnQkFBbUIsaUJBQ3pDQSxFQUFzQixjQUFpQixlQUN2Q0EsRUFBc0IsY0FBaUIsZUFDdkNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsYUFBZ0IsY0FDdENBLEVBQXNCLGNBQWlCLGVBQ3ZDQSxFQUFzQixjQUFpQjtBQUMzQyxHQUFHQSxNQUEwQkEsSUFBd0IsQ0FBQSxFQUFHO0FBS3hELE1BQU02SyxLQUFpQixDQUV2QkMsR0FBS25XLElBQVM7QUFBQSxFQUNWLFNBQVMseUJBQXlCbVcsRUFBSSxJQUFJO0FBQzlDLE1BQU1MLEdBQU8sQ0FBQ3hPLE1BQVNBLGFBQWdCNk8sR0FBS25XLENBQU0sR0FDNUNvVyxJQUFhMUgsR0FBVSxRQUN2QjJILElBQWExRyxHQUFVLFFBR3ZCMkcsS0FBY3ZHLEdBQVcsUUFLekJ3RyxJQUFVakcsR0FBTztBQUVMRSxHQUFTO0FBRTNCLE1BQU1nRyxJQUFZaEwsR0FBUyxRQUNyQmlMLElBQWE5RixHQUFVLFFBRXZCK0YsS0FBWWhMLEdBQVMsUUFDckJpTCxLQUF5QnJFLEdBQXNCO0FBQzVCMUcsR0FBZ0I7QUFDdkJrRixHQUFTO0FBQzNCLE1BQU04RixLQUFhaEQsR0FBVSxRQUl2QmlELEtBQVczRSxHQUFRLFFBQ25CNEUsSUFBYzNFLEdBQVcsUUFDekI0RSxLQUFXM0UsR0FBUTtBQUVMM0csR0FBVztBQUVWSCxHQUFZO0FBQ1pDLEdBQVk7QUMzbEgxQixTQUFTeUwsS0FBYztBQUMxQixTQUFPLENBQUE7QUFDWDtBQ0NPLFNBQVNDLEdBQWM5VyxHQUFLMkYsR0FBTTs7QUFDckMsUUFBTUYsSUFBTTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ2Q7QUFDSSxXQUFJcEYsS0FBQU4sSUFBQUMsRUFBSSxTQUFKLGdCQUFBRCxFQUFVLFNBQVYsZ0JBQUFNLEVBQWdCLGNBQWE2SyxFQUFzQixXQUNuRHpGLEVBQUksUUFBUXNSLEVBQVMvVyxFQUFJLEtBQUssTUFBTTtBQUFBLElBQ2hDLEdBQUcyRjtBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxPQUFPO0FBQUEsRUFDdEQsQ0FBUyxJQUVEM0YsRUFBSSxhQUNKNEYsRUFBMEJILEdBQUssWUFBWXpGLEVBQUksVUFBVSxPQUFPQSxFQUFJLFVBQVUsU0FBUzJGLENBQUksR0FFM0YzRixFQUFJLGFBQ0o0RixFQUEwQkgsR0FBSyxZQUFZekYsRUFBSSxVQUFVLE9BQU9BLEVBQUksVUFBVSxTQUFTMkYsQ0FBSSxHQUUzRjNGLEVBQUksZ0JBQ0o0RixFQUEwQkgsR0FBSyxZQUFZekYsRUFBSSxZQUFZLE9BQU9BLEVBQUksWUFBWSxTQUFTMkYsQ0FBSSxHQUMvRkMsRUFBMEJILEdBQUssWUFBWXpGLEVBQUksWUFBWSxPQUFPQSxFQUFJLFlBQVksU0FBUzJGLENBQUksSUFFNUZGO0FBQ1g7QUN2Qk8sU0FBU3VSLEdBQWVoWCxHQUFLMkYsR0FBTTtBQUN0QyxRQUFNRixJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsRUFDaEI7QUFDSSxNQUFJLENBQUN6RixFQUFJO0FBQ0wsV0FBT3lGO0FBQ1gsYUFBV21GLEtBQVM1SyxFQUFJO0FBQ3BCLFlBQVE0SyxFQUFNLE1BQUk7QUFBQSxNQUNkLEtBQUs7QUFDRCxRQUFJakYsRUFBSyxXQUFXLGdCQUNaaUYsRUFBTSxZQUNOaEYsRUFBMEJILEdBQUssV0FBV21GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSSxJQUcxRUMsRUFBMEJILEdBQUssb0JBQW9CbUYsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJLEtBSWxGaUYsRUFBTSxjQUNQbkYsRUFBSSxtQkFBbUIsS0FFM0JHLEVBQTBCSCxHQUFLLFdBQVdtRixFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUk7QUFFOUU7QUFBQSxNQUNKLEtBQUs7QUFDRCxRQUFJQSxFQUFLLFdBQVcsZ0JBQ1ppRixFQUFNLFlBQ05oRixFQUEwQkgsR0FBSyxXQUFXbUYsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJLElBRzFFQyxFQUEwQkgsR0FBSyxvQkFBb0JtRixFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUksS0FJbEZpRixFQUFNLGNBQ1BuRixFQUFJLG1CQUFtQixLQUUzQkcsRUFBMEJILEdBQUssV0FBV21GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSTtBQUU5RTtBQUFBLE1BQ0osS0FBSztBQUNELFFBQUFDLEVBQTBCSCxHQUFLLGNBQWNtRixFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUk7QUFDN0U7QUFBQSxJQUNoQjtBQUVJLFNBQU9GO0FBQ1g7QUNoRE8sU0FBU3dSLEtBQWtCO0FBQzlCLFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxFQUNkO0FBQ0E7QUNITyxTQUFTQyxHQUFnQkMsR0FBTXhSLEdBQU07QUFDeEMsU0FBT29SLEVBQVNJLEVBQUssS0FBSyxNQUFNeFIsQ0FBSTtBQUN4QztBQ0ZPLE1BQU15UixLQUFnQixDQUFDcFgsR0FBSzJGLE1BQ3hCb1IsRUFBUy9XLEVBQUksVUFBVSxNQUFNMkYsQ0FBSTtBQ0RyQyxTQUFTMFIsR0FBYXJYLEdBQUsyRixHQUFNMlIsR0FBc0I7QUFDMUQsUUFBTUMsSUFBV0QsS0FBd0IzUixFQUFLO0FBQzlDLE1BQUksTUFBTSxRQUFRNFIsQ0FBUTtBQUN0QixXQUFPO0FBQUEsTUFDSCxPQUFPQSxFQUFTLElBQUksQ0FBQy9TLEdBQU0vQyxNQUFNNFYsR0FBYXJYLEdBQUsyRixHQUFNbkIsQ0FBSSxDQUFDO0FBQUEsSUFDMUU7QUFFSSxVQUFRK1MsR0FBUTtBQUFBLElBQ1osS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELGFBQU87QUFBQSxRQUNILE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUN4QjtBQUFBLElBQ1EsS0FBSztBQUNELGFBQU87QUFBQSxRQUNILE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUN4QjtBQUFBLElBQ1EsS0FBSztBQUNELGFBQU9DLEdBQWtCeFgsR0FBSzJGLENBQUk7QUFBQSxFQUM5QztBQUNBO0FBQ0EsTUFBTTZSLEtBQW9CLENBQUN4WCxHQUFLMkYsTUFBUztBQUNyQyxRQUFNRixJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsRUFDaEI7QUFDSSxNQUFJRSxFQUFLLFdBQVc7QUFDaEIsV0FBT0Y7QUFFWCxhQUFXbUYsS0FBUzVLLEVBQUk7QUFDcEIsWUFBUTRLLEVBQU0sTUFBSTtBQUFBLE1BQ2QsS0FBSztBQUNELFFBQUFoRjtBQUFBLFVBQTBCSDtBQUFBLFVBQUs7QUFBQSxVQUFXbUYsRUFBTTtBQUFBO0FBQUEsVUFDaERBLEVBQU07QUFBQSxVQUFTakY7QUFBQSxRQUFJO0FBQ25CO0FBQUEsTUFDSixLQUFLO0FBQ0QsUUFBQUM7QUFBQSxVQUEwQkg7QUFBQSxVQUFLO0FBQUEsVUFBV21GLEVBQU07QUFBQTtBQUFBLFVBQ2hEQSxFQUFNO0FBQUEsVUFBU2pGO0FBQUEsUUFBSTtBQUNuQjtBQUFBLElBQ2hCO0FBRUksU0FBT0Y7QUFDWDtBQzVDTyxTQUFTZ1MsR0FBZ0JOLEdBQU14UixHQUFNO0FBQ3hDLFNBQU87QUFBQSxJQUNILEdBQUdvUixFQUFTSSxFQUFLLFVBQVUsTUFBTXhSLENBQUk7QUFBQSxJQUNyQyxTQUFTd1IsRUFBSyxhQUFZO0FBQUEsRUFDbEM7QUFDQTtBQ0xPLFNBQVNPLEdBQWdCUCxHQUFNeFIsR0FBTWdTLEdBQWlCO0FBQ3pELFNBQU9oUyxFQUFLLG1CQUFtQixVQUFVb1IsRUFBU0ksRUFBSyxPQUFPLE1BQU14UixHQUFNZ1MsQ0FBZSxJQUFJLENBQUE7QUFDakc7QUNITyxTQUFTQyxHQUFhNVgsR0FBSztBQUM5QixTQUFPO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFNLENBQUMsR0FBR0EsRUFBSSxNQUFNO0FBQUEsRUFDNUI7QUFDQTtBQ0pBLE1BQU02WCxLQUF5QixDQUFDL0YsTUFDeEIsVUFBVUEsS0FBUUEsRUFBSyxTQUFTLFdBQ3pCLEtBQ0osV0FBV0E7QUFFZixTQUFTZ0csR0FBcUI5WCxHQUFLMkYsR0FBTTtBQUM1QyxRQUFNN0QsSUFBUTtBQUFBLElBQ1ZpVixFQUFTL1csRUFBSSxLQUFLLE1BQU07QUFBQSxNQUNwQixHQUFHMkY7QUFBQSxNQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHO0FBQUEsSUFDM0QsQ0FBUztBQUFBLElBQ0RvUixFQUFTL1csRUFBSSxNQUFNLE1BQU07QUFBQSxNQUNyQixHQUFHMkY7QUFBQSxNQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHO0FBQUEsSUFDM0QsQ0FBUztBQUFBLEVBQ1QsRUFBTSxPQUFPLENBQUNuRSxNQUFNLENBQUMsQ0FBQ0EsQ0FBQztBQUNuQixNQUFJdVcsSUFBd0JwUyxFQUFLLFdBQVcsc0JBQXNCLEVBQUUsdUJBQXVCLEdBQUssSUFBSztBQUNyRyxRQUFNcVMsSUFBYyxDQUFBO0FBRXBCLFNBQUFsVyxFQUFNLFFBQVEsQ0FBQ3pDLE1BQVc7QUFDdEIsUUFBSXdZLEdBQXVCeFksQ0FBTTtBQUM3QixNQUFBMlksRUFBWSxLQUFLLEdBQUczWSxFQUFPLEtBQUssR0FDNUJBLEVBQU8sMEJBQTBCLFdBR2pDMFksSUFBd0I7QUFBQSxTQUczQjtBQUNELFVBQUlFLElBQWU1WTtBQUNuQixVQUFJLDBCQUEwQkEsS0FBVUEsRUFBTyx5QkFBeUIsSUFBTztBQUMzRSxjQUFNLEVBQUUsc0JBQUE2WSxHQUFzQixHQUFHbFcsRUFBSSxJQUFLM0M7QUFDMUMsUUFBQTRZLElBQWVqVztBQUFBLE1BQ25CO0FBR0ksUUFBQStWLElBQXdCO0FBRTVCLE1BQUFDLEVBQVksS0FBS0MsQ0FBWTtBQUFBLElBQ2pDO0FBQUEsRUFDSixDQUFDLEdBQ01ELEVBQVksU0FDZjtBQUFBLElBQ0ksT0FBT0E7QUFBQSxJQUNQLEdBQUdEO0FBQUEsRUFDZixJQUNVO0FBQ1Y7QUNoRE8sU0FBU0ksR0FBZ0JuWSxHQUFLMkYsR0FBTTtBQUN2QyxRQUFNeVMsSUFBYSxPQUFPcFksRUFBSTtBQUM5QixTQUFJb1ksTUFBZSxZQUNmQSxNQUFlLFlBQ2ZBLE1BQWUsYUFDZkEsTUFBZSxXQUNSO0FBQUEsSUFDSCxNQUFNLE1BQU0sUUFBUXBZLEVBQUksS0FBSyxJQUFJLFVBQVU7QUFBQSxFQUN2RCxJQUVRMkYsRUFBSyxXQUFXLGFBQ1Q7QUFBQSxJQUNILE1BQU15UyxNQUFlLFdBQVcsWUFBWUE7QUFBQSxJQUM1QyxNQUFNLENBQUNwWSxFQUFJLEtBQUs7QUFBQSxFQUM1QixJQUVXO0FBQUEsSUFDSCxNQUFNb1ksTUFBZSxXQUFXLFlBQVlBO0FBQUEsSUFDNUMsT0FBT3BZLEVBQUk7QUFBQSxFQUNuQjtBQUNBO0FDbkJBLElBQUk2TTtBQU9HLE1BQU13TCxLQUFjO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSU4sT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVlQLE9BQU8sT0FDQ3hMLE9BQWUsV0FDZkEsS0FBYSxPQUFPLHdEQUF3RCxHQUFHLElBRTVFQTtBQUFBLEVBY1gsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUNaO0FBQ08sU0FBU3lMLEdBQWV0WSxHQUFLMkYsR0FBTTtBQUN0QyxRQUFNRixJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsRUFDZDtBQUNJLFdBQVM4UyxFQUFlMVMsR0FBTztBQUMzQixXQUFPRixFQUFLLG9CQUFvQixXQUFXNlMsR0FBc0IzUyxDQUFLLElBQUlBO0FBQUEsRUFDOUU7QUFDQSxNQUFJN0YsRUFBSTtBQUNKLGVBQVc0SyxLQUFTNUssRUFBSTtBQUNwQixjQUFRNEssRUFBTSxNQUFJO0FBQUEsUUFDZCxLQUFLO0FBQ0QsVUFBQWhGLEVBQTBCSCxHQUFLLGFBQWEsT0FBT0EsRUFBSSxhQUFjLFdBQVcsS0FBSyxJQUFJQSxFQUFJLFdBQVdtRixFQUFNLEtBQUssSUFBSUEsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJO0FBQ3ZKO0FBQUEsUUFDSixLQUFLO0FBQ0QsVUFBQUMsRUFBMEJILEdBQUssYUFBYSxPQUFPQSxFQUFJLGFBQWMsV0FBVyxLQUFLLElBQUlBLEVBQUksV0FBV21GLEVBQU0sS0FBSyxJQUFJQSxFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUk7QUFDdko7QUFBQSxRQUNKLEtBQUs7QUFDRCxrQkFBUUEsRUFBSyxlQUFhO0FBQUEsWUFDdEIsS0FBSztBQUNELGNBQUE4UyxHQUFVaFQsR0FBSyxTQUFTbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMzQztBQUFBLFlBQ0osS0FBSztBQUNELGNBQUE4UyxHQUFVaFQsR0FBSyxhQUFhbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMvQztBQUFBLFlBQ0osS0FBSztBQUNELGNBQUErUyxHQUFXalQsR0FBSzRTLEdBQVksT0FBT3pOLEVBQU0sU0FBU2pGLENBQUk7QUFDdEQ7QUFBQSxVQUM1QjtBQUNvQjtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxPQUFPbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUN6QztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxRQUFRbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUErUyxHQUFXalQsR0FBS21GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSTtBQUNoRDtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUErUyxHQUFXalQsR0FBSzRTLEdBQVksTUFBTXpOLEVBQU0sU0FBU2pGLENBQUk7QUFDckQ7QUFBQSxRQUNKLEtBQUs7QUFDRCxVQUFBK1MsR0FBV2pULEdBQUs0UyxHQUFZLE9BQU96TixFQUFNLFNBQVNqRixDQUFJO0FBQ3REO0FBQUEsUUFDSixLQUFLO0FBQ0QsVUFBQStTLEdBQVdqVCxHQUFLLE9BQU8sSUFBSThTLEVBQWUzTixFQUFNLEtBQUssQ0FBQyxFQUFFLEdBQUdBLEVBQU0sU0FBU2pGLENBQUk7QUFDOUU7QUFBQSxRQUNKLEtBQUs7QUFDRCxVQUFBK1MsR0FBV2pULEdBQUssT0FBTyxHQUFHOFMsRUFBZTNOLEVBQU0sS0FBSyxDQUFDLEdBQUcsR0FBR0EsRUFBTSxTQUFTakYsQ0FBSTtBQUM5RTtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxhQUFhbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMvQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxRQUFRbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxRQUFRbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4UyxHQUFVaFQsR0FBSyxZQUFZbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUM5QztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUFDLEVBQTBCSCxHQUFLLGFBQWEsT0FBT0EsRUFBSSxhQUFjLFdBQVcsS0FBSyxJQUFJQSxFQUFJLFdBQVdtRixFQUFNLEtBQUssSUFBSUEsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJLEdBQ3ZKQyxFQUEwQkgsR0FBSyxhQUFhLE9BQU9BLEVBQUksYUFBYyxXQUFXLEtBQUssSUFBSUEsRUFBSSxXQUFXbUYsRUFBTSxLQUFLLElBQUlBLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSTtBQUN2SjtBQUFBLFFBQ0osS0FBSyxZQUFZO0FBQ2IsVUFBQStTLEdBQVdqVCxHQUFLLE9BQU84UyxFQUFlM04sRUFBTSxLQUFLLENBQUMsR0FBR0EsRUFBTSxTQUFTakYsQ0FBSTtBQUN4RTtBQUFBLFFBQ0o7QUFBQSxRQUNBLEtBQUssTUFBTTtBQUNQLFVBQUlpRixFQUFNLFlBQVksUUFDbEI2TixHQUFVaFQsR0FBSyxRQUFRbUYsRUFBTSxTQUFTakYsQ0FBSSxHQUUxQ2lGLEVBQU0sWUFBWSxRQUNsQjZOLEdBQVVoVCxHQUFLLFFBQVFtRixFQUFNLFNBQVNqRixDQUFJO0FBRTlDO0FBQUEsUUFDSjtBQUFBLFFBQ0EsS0FBSztBQUNELFVBQUErUyxHQUFXalQsR0FBSzRTLEdBQVksT0FBT3pOLEVBQU0sU0FBU2pGLENBQUk7QUFDdEQ7QUFBQSxRQUNKLEtBQUssUUFBUTtBQUNULFVBQUErUyxHQUFXalQsR0FBSzRTLEdBQVksTUFBTXpOLEVBQU0sU0FBU2pGLENBQUk7QUFDckQ7QUFBQSxRQUNKO0FBQUEsUUFDQSxLQUFLLFVBQVU7QUFDWCxrQkFBUUEsRUFBSyxnQkFBYztBQUFBLFlBQ3ZCLEtBQUssaUJBQWlCO0FBQ2xCLGNBQUE4UyxHQUFVaFQsR0FBSyxVQUFVbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUM1QztBQUFBLFlBQ0o7QUFBQSxZQUNBLEtBQUssMEJBQTBCO0FBQzNCLGNBQUFDLEVBQTBCSCxHQUFLLG1CQUFtQixVQUFVbUYsRUFBTSxTQUFTakYsQ0FBSTtBQUMvRTtBQUFBLFlBQ0o7QUFBQSxZQUNBLEtBQUssZUFBZTtBQUNoQixjQUFBK1MsR0FBV2pULEdBQUs0UyxHQUFZLFFBQVF6TixFQUFNLFNBQVNqRixDQUFJO0FBQ3ZEO0FBQUEsWUFDSjtBQUFBLFVBQ3hCO0FBQ29CO0FBQUEsUUFDSjtBQUFBLFFBQ0EsS0FBSztBQUNELFVBQUErUyxHQUFXalQsR0FBSzRTLEdBQVksUUFBUXpOLEVBQU0sU0FBU2pGLENBQUk7QUFBQSxNQVEzRTtBQUdJLFNBQU9GO0FBQ1g7QUFDQSxNQUFNK1MsS0FBd0IsQ0FBQzNTLE1BQVUsTUFBTSxLQUFLQSxDQUFLLEVBQ3BELElBQUksQ0FBQzhTLE1BQU8sY0FBYyxLQUFLQSxDQUFDLElBQUlBLElBQUksS0FBS0EsQ0FBQyxFQUFHLEVBQ2pELEtBQUssRUFBRSxHQUNORixLQUFZLENBQUNwWixHQUFRd0csR0FBT3VDLEdBQVN6QyxNQUFTOztBQUNoRCxFQUFJdEcsRUFBTyxXQUFVVSxJQUFBVixFQUFPLFVBQVAsUUFBQVUsRUFBYyxLQUFLLENBQUN5QixNQUFNQSxFQUFFLFdBQ3hDbkMsRUFBTyxVQUNSQSxFQUFPLFFBQVEsQ0FBQSxJQUVmQSxFQUFPLFdBQ1BBLEVBQU8sTUFBTSxLQUFLO0FBQUEsSUFDZCxRQUFRQSxFQUFPO0FBQUEsSUFDZixHQUFJQSxFQUFPLGdCQUNQc0csRUFBSyxpQkFBaUI7QUFBQSxNQUN0QixjQUFjLEVBQUUsUUFBUXRHLEVBQU8sYUFBYSxPQUFNO0FBQUEsSUFDdEU7QUFBQSxFQUNBLENBQWEsR0FDRCxPQUFPQSxFQUFPLFFBQ1ZBLEVBQU8saUJBQ1AsT0FBT0EsRUFBTyxhQUFhLFFBQ3ZCLE9BQU8sS0FBS0EsRUFBTyxZQUFZLEVBQUUsV0FBVyxLQUM1QyxPQUFPQSxFQUFPLGdCQUkxQkEsRUFBTyxNQUFNLEtBQUs7QUFBQSxJQUNkLFFBQVF3RztBQUFBLElBQ1IsR0FBSXVDLEtBQVd6QyxFQUFLLGlCQUFpQixFQUFFLGNBQWMsRUFBRSxRQUFReUMsRUFBTztFQUNsRixDQUFTLEtBR0R4QyxFQUEwQnZHLEdBQVEsVUFBVXdHLEdBQU91QyxHQUFTekMsQ0FBSTtBQUV4RSxHQUNNK1MsS0FBYSxDQUFDclosR0FBUTBCLEdBQU9xSCxHQUFTekMsTUFBUzs7QUFDakQsRUFBSXRHLEVBQU8sWUFBV1UsSUFBQVYsRUFBTyxVQUFQLFFBQUFVLEVBQWMsS0FBSyxDQUFDeUIsTUFBTUEsRUFBRSxZQUN6Q25DLEVBQU8sVUFDUkEsRUFBTyxRQUFRLENBQUEsSUFFZkEsRUFBTyxZQUNQQSxFQUFPLE1BQU0sS0FBSztBQUFBLElBQ2QsU0FBU0EsRUFBTztBQUFBLElBQ2hCLEdBQUlBLEVBQU8sZ0JBQ1BzRyxFQUFLLGlCQUFpQjtBQUFBLE1BQ3RCLGNBQWMsRUFBRSxTQUFTdEcsRUFBTyxhQUFhLFFBQU87QUFBQSxJQUN4RTtBQUFBLEVBQ0EsQ0FBYSxHQUNELE9BQU9BLEVBQU8sU0FDVkEsRUFBTyxpQkFDUCxPQUFPQSxFQUFPLGFBQWEsU0FDdkIsT0FBTyxLQUFLQSxFQUFPLFlBQVksRUFBRSxXQUFXLEtBQzVDLE9BQU9BLEVBQU8sZ0JBSTFCQSxFQUFPLE1BQU0sS0FBSztBQUFBLElBQ2QsU0FBU3VaLEdBQWM3WCxHQUFPNEUsQ0FBSTtBQUFBLElBQ2xDLEdBQUl5QyxLQUFXekMsRUFBSyxpQkFBaUIsRUFBRSxjQUFjLEVBQUUsU0FBU3lDLEVBQU87RUFDbkYsQ0FBUyxLQUdEeEMsRUFBMEJ2RyxHQUFRLFdBQVd1WixHQUFjN1gsR0FBTzRFLENBQUksR0FBR3lDLEdBQVN6QyxDQUFJO0FBRTlGLEdBRU1pVCxLQUFnQixDQUFDQyxHQUFpQmxULE1BQVM7O0FBQzdDLFFBQU01RSxJQUFRLE9BQU84WCxLQUFvQixhQUFhQSxFQUFlLElBQUtBO0FBQzFFLE1BQUksQ0FBQ2xULEVBQUssbUJBQW1CLENBQUM1RSxFQUFNO0FBQ2hDLFdBQU9BLEVBQU07QUFFakIsUUFBTStYLElBQVE7QUFBQSxJQUNWLEdBQUcvWCxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxJQUMzQixHQUFHQSxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxJQUMzQixHQUFHQSxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxFQUNuQyxHQUVVZ1ksSUFBU0QsRUFBTSxJQUFJL1gsRUFBTSxPQUFPLFlBQVcsSUFBS0EsRUFBTTtBQUM1RCxNQUFJeUIsSUFBVSxJQUNWd1csSUFBWSxJQUNaQyxJQUFjLElBQ2RDLElBQWM7QUFDbEIsV0FBU3pYLElBQUksR0FBR0EsSUFBSXNYLEVBQU8sUUFBUXRYLEtBQUs7QUFDcEMsUUFBSXVYLEdBQVc7QUFDWCxNQUFBeFcsS0FBV3VXLEVBQU90WCxDQUFDLEdBQ25CdVgsSUFBWTtBQUNaO0FBQUEsSUFDSjtBQUNBLFFBQUlGLEVBQU07QUFDTixVQUFJRztBQUNBLFlBQUlGLEVBQU90WCxDQUFDLEVBQUUsTUFBTSxPQUFPLEdBQUc7QUFDMUIsVUFBSXlYLEtBQ0ExVyxLQUFXdVcsRUFBT3RYLENBQUMsR0FDbkJlLEtBQVcsR0FBR3VXLEVBQU90WCxJQUFJLENBQUMsQ0FBQyxJQUFJc1gsRUFBT3RYLENBQUMsQ0FBQyxHQUFHLFlBQVcsR0FDdER5WCxJQUFjLE1BRVRILEVBQU90WCxJQUFJLENBQUMsTUFBTSxTQUFPMUIsSUFBQWdaLEVBQU90WCxJQUFJLENBQUMsTUFBWixRQUFBMUIsRUFBZSxNQUFNLGFBQ25EeUMsS0FBV3VXLEVBQU90WCxDQUFDLEdBQ25CeVgsSUFBYyxNQUdkMVcsS0FBVyxHQUFHdVcsRUFBT3RYLENBQUMsQ0FBQyxHQUFHc1gsRUFBT3RYLENBQUMsRUFBRSxZQUFXLENBQUU7QUFFckQ7QUFBQSxRQUNKO0FBQUEsaUJBRUtzWCxFQUFPdFgsQ0FBQyxFQUFFLE1BQU0sT0FBTyxHQUFHO0FBQy9CLFFBQUFlLEtBQVcsSUFBSXVXLEVBQU90WCxDQUFDLENBQUMsR0FBR3NYLEVBQU90WCxDQUFDLEVBQUUsWUFBVyxDQUFFO0FBQ2xEO0FBQUEsTUFDSjtBQUFBO0FBRUosUUFBSXFYLEVBQU07QUFDTixVQUFJQyxFQUFPdFgsQ0FBQyxNQUFNLEtBQUs7QUFDbkIsUUFBQWUsS0FBVztBQUFBO0FBQ1g7QUFBQSxNQUNKLFdBQ1N1VyxFQUFPdFgsQ0FBQyxNQUFNLEtBQUs7QUFDeEIsUUFBQWUsS0FBVztBQUFBO0FBQ1g7QUFBQSxNQUNKO0FBQUE7QUFFSixRQUFJc1csRUFBTSxLQUFLQyxFQUFPdFgsQ0FBQyxNQUFNLEtBQUs7QUFDOUIsTUFBQWUsS0FBV3lXLElBQWMsR0FBR0YsRUFBT3RYLENBQUMsQ0FBQztBQUFBLElBQVMsSUFBSXNYLEVBQU90WCxDQUFDLENBQUM7QUFBQTtBQUMzRDtBQUFBLElBQ0o7QUFDQSxJQUFBZSxLQUFXdVcsRUFBT3RYLENBQUMsR0FDZnNYLEVBQU90WCxDQUFDLE1BQU0sT0FDZHVYLElBQVksS0FFUEMsS0FBZUYsRUFBT3RYLENBQUMsTUFBTSxNQUNsQ3dYLElBQWMsS0FFVCxDQUFDQSxLQUFlRixFQUFPdFgsQ0FBQyxNQUFNLFFBQ25Dd1gsSUFBYztBQUFBLEVBRXRCO0FBQ0EsTUFBSTtBQUNBLFVBQU1FLElBQVksSUFBSSxPQUFPM1csQ0FBTztBQUFBLEVBQ3hDLFFBQ007QUFDRixtQkFBUSxLQUFLLHNDQUFzQ21ELEVBQUssWUFBWSxLQUFLLEdBQUcsQ0FBQyx1RUFBdUUsR0FDN0k1RSxFQUFNO0FBQUEsRUFDakI7QUFDQSxTQUFPeUI7QUFDWDtBQ25UTyxTQUFTNFcsR0FBZXBaLEdBQUsyRixHQUFNOztBQUN0QyxNQUFJQSxFQUFLLFdBQVcsZ0JBQWM1RixJQUFBQyxFQUFJLFlBQUosZ0JBQUFELEVBQWEsS0FBSyxjQUFhbUwsRUFBc0I7QUFDbkYsV0FBTztBQUFBLE1BQ0gsTUFBTTtBQUFBLE1BQ04sVUFBVWxMLEVBQUksUUFBUSxLQUFLO0FBQUEsTUFDM0IsWUFBWUEsRUFBSSxRQUFRLEtBQUssT0FBTyxPQUFPLENBQUNtVixHQUFLL1QsT0FBUztBQUFBLFFBQ3RELEdBQUcrVDtBQUFBLFFBQ0gsQ0FBQy9ULENBQUcsR0FBRzJWLEVBQVMvVyxFQUFJLFVBQVUsTUFBTTtBQUFBLFVBQ2hDLEdBQUcyRjtBQUFBLFVBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxjQUFjdkUsQ0FBRztBQUFBLFFBQ3hFLENBQWlCLEtBQUssQ0FBQTtBQUFBLE1BQ3RCLElBQWdCLENBQUEsQ0FBRTtBQUFBLE1BQ04sc0JBQXNCO0FBQUEsSUFDbEM7QUFFSSxRQUFNL0IsSUFBUztBQUFBLElBQ1gsTUFBTTtBQUFBLElBQ04sc0JBQXNCMFgsRUFBUy9XLEVBQUksVUFBVSxNQUFNO0FBQUEsTUFDL0MsR0FBRzJGO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLHNCQUFzQjtBQUFBLElBQ3JFLENBQVMsS0FBSyxDQUFBO0FBQUEsRUFDZDtBQUNJLE1BQUlBLEVBQUssV0FBVztBQUNoQixXQUFPdEc7QUFFWCxRQUFJZ0IsSUFBQUwsRUFBSSxZQUFKLGdCQUFBSyxFQUFhLEtBQUssY0FBYTZLLEVBQXNCLGVBQWEzSixJQUFBdkIsRUFBSSxRQUFRLEtBQUssV0FBakIsUUFBQXVCLEVBQXlCLFNBQVE7QUFDbkcsVUFBTW1TLElBQVUsT0FBTyxRQUFRNEUsR0FBZXRZLEVBQUksUUFBUSxNQUFNMkYsQ0FBSSxDQUFDLEVBQUUsT0FBTyxDQUFDd1AsR0FBSyxDQUFDL1QsR0FBS3lFLENBQUssTUFBT3pFLE1BQVEsU0FBUytULElBQU0sRUFBRSxHQUFHQSxHQUFLLENBQUMvVCxDQUFHLEdBQUd5RSxFQUFLLEdBQUssQ0FBQSxDQUFFO0FBQzFKLFdBQU87QUFBQSxNQUNILEdBQUd4RztBQUFBLE1BQ0gsZUFBZXFVO0FBQUEsSUFDM0I7QUFBQSxFQUNJLGFBQ1MvUCxJQUFBM0QsRUFBSSxZQUFKLGdCQUFBMkQsRUFBYSxLQUFLLGNBQWF1SCxFQUFzQjtBQUMxRCxXQUFPO0FBQUEsTUFDSCxHQUFHN0w7QUFBQSxNQUNILGVBQWU7QUFBQSxRQUNYLE1BQU1XLEVBQUksUUFBUSxLQUFLO0FBQUEsTUFDdkM7QUFBQSxJQUNBO0FBRUksU0FBT1g7QUFDWDtBQzFDTyxTQUFTZ2EsR0FBWXJaLEdBQUsyRixHQUFNO0FBQ25DLE1BQUlBLEVBQUssZ0JBQWdCO0FBQ3JCLFdBQU95VCxHQUFlcFosR0FBSzJGLENBQUk7QUFFbkMsUUFBTWEsSUFBT3VRLEVBQVMvVyxFQUFJLFFBQVEsTUFBTTtBQUFBLElBQ3BDLEdBQUcyRjtBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxTQUFTLFNBQVMsR0FBRztBQUFBLEVBQ2hFLENBQUssS0FBSyxDQUFBLEdBQ0ExRCxJQUFTOFUsRUFBUy9XLEVBQUksVUFBVSxNQUFNO0FBQUEsSUFDeEMsR0FBRzJGO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsU0FBUyxHQUFHO0FBQUEsRUFDaEUsQ0FBSyxLQUFLLENBQUE7QUFDTixTQUFPO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVO0FBQUEsSUFDVixPQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixPQUFPLENBQUNhLEdBQU12RSxDQUFNO0FBQUEsTUFDcEIsVUFBVTtBQUFBLE1BQ1YsVUFBVTtBQUFBLElBQ3RCO0FBQUEsRUFDQTtBQUNBO0FDeEJPLFNBQVNxWCxHQUFtQnRaLEdBQUs7QUFDcEMsUUFBTXVHLElBQVN2RyxFQUFJLFFBSWJ1WixJQUhhLE9BQU8sS0FBS3ZaLEVBQUksTUFBTSxFQUFFLE9BQU8sQ0FBQ29CLE1BQ3hDLE9BQU9tRixFQUFPQSxFQUFPbkYsQ0FBRyxDQUFDLEtBQU0sUUFDekMsRUFDK0IsSUFBSSxDQUFDQSxNQUFRbUYsRUFBT25GLENBQUcsQ0FBQyxHQUNsRG9ZLElBQWMsTUFBTSxLQUFLLElBQUksSUFBSUQsRUFBYSxJQUFJLENBQUN0WCxNQUFXLE9BQU9BLENBQU0sQ0FBQyxDQUFDO0FBQ25GLFNBQU87QUFBQSxJQUNILE1BQU11WCxFQUFZLFdBQVcsSUFDekJBLEVBQVksQ0FBQyxNQUFNLFdBQ2YsV0FDRSxXQUNKLENBQUMsVUFBVSxRQUFRO0FBQUEsSUFDekIsTUFBTUQ7QUFBQSxFQUNkO0FBQ0E7QUNmTyxTQUFTRSxLQUFnQjtBQUM1QixTQUFPO0FBQUEsSUFDSCxLQUFLLENBQUE7QUFBQSxFQUNiO0FBQ0E7QUNKTyxTQUFTQyxHQUFhL1QsR0FBTTtBQUMvQixTQUFPQSxFQUFLLFdBQVcsYUFDbkI7QUFBQSxJQUNJLE1BQU0sQ0FBQyxNQUFNO0FBQUEsSUFDYixVQUFVO0FBQUEsRUFDdEIsSUFDVTtBQUFBLElBQ0UsTUFBTTtBQUFBLEVBQ2xCO0FBQ0E7QUNSTyxNQUFNZ1UsS0FBb0I7QUFBQSxFQUM3QixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxZQUFZO0FBQUEsRUFDWixTQUFTO0FBQ2I7QUFDTyxTQUFTQyxHQUFjNVosR0FBSzJGLEdBQU07QUFDckMsTUFBSUEsRUFBSyxXQUFXO0FBQ2hCLFdBQU9rVSxHQUFRN1osR0FBSzJGLENBQUk7QUFDNUIsUUFBTVgsSUFBVWhGLEVBQUksbUJBQW1CLE1BQU0sTUFBTSxLQUFLQSxFQUFJLFFBQVEsUUFBUSxJQUFJQSxFQUFJO0FBRXBGLE1BQUlnRixFQUFRLE1BQU0sQ0FBQ3hELE1BQU1BLEVBQUUsS0FBSyxZQUFZbVksT0FBc0IsQ0FBQ25ZLEVBQUUsS0FBSyxVQUFVLENBQUNBLEVBQUUsS0FBSyxPQUFPLE9BQU8sR0FBRztBQUV6RyxVQUFNb1EsSUFBUTVNLEVBQVEsT0FBTyxDQUFDNE0sR0FBT3BRLE1BQU07QUFDdkMsWUFBTXNRLElBQU82SCxHQUFrQm5ZLEVBQUUsS0FBSyxRQUFRO0FBQzlDLGFBQU9zUSxLQUFRLENBQUNGLEVBQU0sU0FBU0UsQ0FBSSxJQUFJLENBQUMsR0FBR0YsR0FBT0UsQ0FBSSxJQUFJRjtBQUFBLElBQzlELEdBQUcsQ0FBQSxDQUFFO0FBQ0wsV0FBTztBQUFBLE1BQ0gsTUFBTUEsRUFBTSxTQUFTLElBQUlBLElBQVFBLEVBQU0sQ0FBQztBQUFBLElBQ3BEO0FBQUEsRUFDSSxXQUNTNU0sRUFBUSxNQUFNLENBQUN4RCxNQUFNQSxFQUFFLEtBQUssYUFBYSxnQkFBZ0IsQ0FBQ0EsRUFBRSxXQUFXLEdBQUc7QUFFL0UsVUFBTW9RLElBQVE1TSxFQUFRLE9BQU8sQ0FBQ21RLEdBQUszVCxNQUFNO0FBQ3JDLFlBQU1zUSxJQUFPLE9BQU90USxFQUFFLEtBQUs7QUFDM0IsY0FBUXNRLEdBQUk7QUFBQSxRQUNSLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFDRCxpQkFBTyxDQUFDLEdBQUdxRCxHQUFLckQsQ0FBSTtBQUFBLFFBQ3hCLEtBQUs7QUFDRCxpQkFBTyxDQUFDLEdBQUdxRCxHQUFLLFNBQVM7QUFBQSxRQUM3QixLQUFLO0FBQ0QsY0FBSTNULEVBQUUsS0FBSyxVQUFVO0FBQ2pCLG1CQUFPLENBQUMsR0FBRzJULEdBQUssTUFBTTtBQUFBLFFBQzlCLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMO0FBQ0ksaUJBQU9BO0FBQUEsTUFDM0I7QUFBQSxJQUNRLEdBQUcsQ0FBQSxDQUFFO0FBQ0wsUUFBSXZELEVBQU0sV0FBVzVNLEVBQVEsUUFBUTtBQUVqQyxZQUFNOFUsSUFBY2xJLEVBQU0sT0FBTyxDQUFDcFEsR0FBRyxHQUFHRSxNQUFNQSxFQUFFLFFBQVFGLENBQUMsTUFBTSxDQUFDO0FBQ2hFLGFBQU87QUFBQSxRQUNILE1BQU1zWSxFQUFZLFNBQVMsSUFBSUEsSUFBY0EsRUFBWSxDQUFDO0FBQUEsUUFDMUQsTUFBTTlVLEVBQVEsT0FBTyxDQUFDbVEsR0FBSzNULE1BQ2hCMlQsRUFBSSxTQUFTM1QsRUFBRSxLQUFLLEtBQUssSUFBSTJULElBQU0sQ0FBQyxHQUFHQSxHQUFLM1QsRUFBRSxLQUFLLEtBQUssR0FDaEUsQ0FBQSxDQUFFO0FBQUEsTUFDckI7QUFBQSxJQUNRO0FBQUEsRUFDSixXQUNTd0QsRUFBUSxNQUFNLENBQUN4RCxNQUFNQSxFQUFFLEtBQUssYUFBYSxTQUFTO0FBQ3ZELFdBQU87QUFBQSxNQUNILE1BQU07QUFBQSxNQUNOLE1BQU13RCxFQUFRLE9BQU8sQ0FBQ21RLEdBQUszVCxNQUFNLENBQUMsR0FBRzJULEdBQUssR0FBRzNULEVBQUUsS0FBSyxPQUFPLE9BQU8sQ0FBQ0EsTUFBTSxDQUFDMlQsRUFBSSxTQUFTM1QsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFO0FBQUEsSUFDM0c7QUFFSSxTQUFPcVksR0FBUTdaLEdBQUsyRixDQUFJO0FBQzVCO0FBQ0EsTUFBTWtVLEtBQVUsQ0FBQzdaLEdBQUsyRixNQUFTO0FBQzNCLFFBQU1vVSxLQUFTL1osRUFBSSxtQkFBbUIsTUFBTSxNQUFNLEtBQUtBLEVBQUksUUFBUSxRQUFRLElBQUlBLEVBQUksU0FDOUUsSUFBSSxDQUFDd0IsR0FBR0MsTUFBTXNWLEVBQVN2VixFQUFFLE1BQU07QUFBQSxJQUNoQyxHQUFHbUU7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHbEUsQ0FBQyxFQUFFO0FBQUEsRUFDMUQsQ0FBSyxDQUFDLEVBQ0csT0FBTyxDQUFDRCxNQUFNLENBQUMsQ0FBQ0EsTUFBTSxDQUFDbUUsRUFBSyxnQkFBaUIsT0FBT25FLEtBQU0sWUFBWSxPQUFPLEtBQUtBLENBQUMsRUFBRSxTQUFTLEVBQUc7QUFDdEcsU0FBT3VZLEVBQU0sU0FBUyxFQUFFLE9BQUFBLEVBQUssSUFBSztBQUN0QztBQ3JFTyxTQUFTQyxHQUFpQmhhLEdBQUsyRixHQUFNO0FBQ3hDLE1BQUksQ0FBQyxhQUFhLGFBQWEsYUFBYSxjQUFjLFNBQVMsRUFBRSxTQUFTM0YsRUFBSSxVQUFVLEtBQUssUUFBUSxNQUNwRyxDQUFDQSxFQUFJLFVBQVUsS0FBSyxVQUFVLENBQUNBLEVBQUksVUFBVSxLQUFLLE9BQU87QUFDMUQsV0FBSTJGLEVBQUssV0FBVyxjQUFjQSxFQUFLLHFCQUFxQixhQUNqRDtBQUFBLE1BQ0gsTUFBTWdVLEdBQWtCM1osRUFBSSxVQUFVLEtBQUssUUFBUTtBQUFBLE1BQ25ELFVBQVU7QUFBQSxJQUMxQixJQUVlO0FBQUEsTUFDSCxNQUFNLENBQUMyWixHQUFrQjNaLEVBQUksVUFBVSxLQUFLLFFBQVEsR0FBRyxNQUFNO0FBQUEsSUFDekU7QUFFSSxNQUFJMkYsRUFBSyxXQUFXLFlBQVk7QUFDNUIsVUFBTXlQLElBQU8yQixFQUFTL1csRUFBSSxVQUFVLE1BQU07QUFBQSxNQUN0QyxHQUFHMkY7QUFBQSxNQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLFdBQVc7QUFBQSxJQUM3QyxDQUFTO0FBQ0QsV0FBSXlQLEtBQVEsVUFBVUEsSUFDWCxFQUFFLE9BQU8sQ0FBQ0EsQ0FBSSxHQUFHLFVBQVUsR0FBSSxJQUNuQ0EsS0FBUSxFQUFFLEdBQUdBLEdBQU0sVUFBVSxHQUFJO0FBQUEsRUFDNUM7QUFDQSxRQUFNQSxJQUFPMkIsRUFBUy9XLEVBQUksVUFBVSxNQUFNO0FBQUEsSUFDdEMsR0FBRzJGO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBRztBQUFBLEVBQ3ZELENBQUs7QUFDRCxTQUFPeVAsS0FBUSxFQUFFLE9BQU8sQ0FBQ0EsR0FBTSxFQUFFLE1BQU0sT0FBTSxDQUFFLEVBQUM7QUFDcEQ7QUM1Qk8sU0FBUzZFLEdBQWVqYSxHQUFLMkYsR0FBTTtBQUN0QyxRQUFNRixJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsRUFDZDtBQUNJLE1BQUksQ0FBQ3pGLEVBQUk7QUFDTCxXQUFPeUY7QUFDWCxhQUFXbUYsS0FBUzVLLEVBQUk7QUFDcEIsWUFBUTRLLEVBQU0sTUFBSTtBQUFBLE1BQ2QsS0FBSztBQUNELFFBQUFuRixFQUFJLE9BQU8sV0FDWEQsR0FBZ0JDLEdBQUssUUFBUW1GLEVBQU0sU0FBU2pGLENBQUk7QUFDaEQ7QUFBQSxNQUNKLEtBQUs7QUFDRCxRQUFJQSxFQUFLLFdBQVcsZ0JBQ1ppRixFQUFNLFlBQ05oRixFQUEwQkgsR0FBSyxXQUFXbUYsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJLElBRzFFQyxFQUEwQkgsR0FBSyxvQkFBb0JtRixFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUksS0FJbEZpRixFQUFNLGNBQ1BuRixFQUFJLG1CQUFtQixLQUUzQkcsRUFBMEJILEdBQUssV0FBV21GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSTtBQUU5RTtBQUFBLE1BQ0osS0FBSztBQUNELFFBQUlBLEVBQUssV0FBVyxnQkFDWmlGLEVBQU0sWUFDTmhGLEVBQTBCSCxHQUFLLFdBQVdtRixFQUFNLE9BQU9BLEVBQU0sU0FBU2pGLENBQUksSUFHMUVDLEVBQTBCSCxHQUFLLG9CQUFvQm1GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSSxLQUlsRmlGLEVBQU0sY0FDUG5GLEVBQUksbUJBQW1CLEtBRTNCRyxFQUEwQkgsR0FBSyxXQUFXbUYsRUFBTSxPQUFPQSxFQUFNLFNBQVNqRixDQUFJO0FBRTlFO0FBQUEsTUFDSixLQUFLO0FBQ0QsUUFBQUMsRUFBMEJILEdBQUssY0FBY21GLEVBQU0sT0FBT0EsRUFBTSxTQUFTakYsQ0FBSTtBQUM3RTtBQUFBLElBQ2hCO0FBRUksU0FBT0Y7QUFDWDtBQ2xEQSxTQUFTeVUsR0FBMkJsYSxHQUFLMkYsR0FBTTtBQUMzQyxTQUFJQSxFQUFLLDZCQUE2QixXQUMzQjNGLEVBQUksU0FBUyxLQUFLLGFBQWEsYUFDbENBLEVBQUksZ0JBQWdCLFdBQ2xCK1csRUFBUy9XLEVBQUksU0FBUyxNQUFNO0FBQUEsSUFDMUIsR0FBRzJGO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLHNCQUFzQjtBQUFBLEVBQ3pFLENBQWEsS0FBSyxLQUdIM0YsRUFBSSxTQUFTLEtBQUssYUFBYSxhQUNsQ0EsRUFBSSxnQkFBZ0IsZ0JBQ2xCK1csRUFBUy9XLEVBQUksU0FBUyxNQUFNO0FBQUEsSUFDMUIsR0FBRzJGO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLHNCQUFzQjtBQUFBLEVBQ3pFLENBQWEsS0FBSztBQUVsQjtBQUNPLFNBQVN3VSxHQUFlbmEsR0FBSzJGLEdBQU07QUFDdEMsUUFBTXhGLElBQVM7QUFBQSxJQUNYLE1BQU07QUFBQSxJQUNOLEdBQUcsT0FBTyxRQUFRSCxFQUFJLE1BQUssQ0FBRSxFQUFFLE9BQU8sQ0FBQ21WLEdBQUssQ0FBQ2lGLEdBQVVDLENBQU8sTUFBTTs7QUFDaEUsVUFBSUEsTUFBWSxVQUFhQSxFQUFRLFNBQVM7QUFDMUMsZUFBT2xGO0FBQ1gsWUFBTW1GLElBQWUsQ0FBQyxHQUFHM1UsRUFBSyxhQUFhLGNBQWN5VSxDQUFRLEdBQzNERyxJQUFZeEQsRUFBU3NELEVBQVEsTUFBTTtBQUFBLFFBQ3JDLEdBQUcxVTtBQUFBLFFBQ0gsYUFBYTJVO0FBQUEsUUFDYixjQUFBQTtBQUFBLE1BQ2hCLENBQWE7QUFDRCxVQUFJQyxNQUFjO0FBQ2QsZUFBT3BGO0FBQ1gsVUFBSXhQLEVBQUssb0JBQ0wwVSxFQUFRLFdBQVUsS0FDbEIsQ0FBQ0EsRUFBUSxXQUFVLEtBQ25CLFNBQU90YSxJQUFBc2EsRUFBUSxTQUFSLGdCQUFBdGEsRUFBYyxnQkFBaUI7QUFDdEMsY0FBTSxJQUFJLE1BQU0sa0JBQWtCdWEsRUFBYSxLQUFLLEdBQUcsQ0FBQyxtTUFBbU07QUFFL1AsYUFBTztBQUFBLFFBQ0gsWUFBWTtBQUFBLFVBQ1IsR0FBR25GLEVBQUk7QUFBQSxVQUNQLENBQUNpRixDQUFRLEdBQUdHO0FBQUEsUUFDaEM7QUFBQSxRQUNnQixVQUFVRixFQUFRLFdBQVUsS0FBTSxDQUFDMVUsRUFBSyxtQkFBbUJ3UCxFQUFJLFdBQVcsQ0FBQyxHQUFHQSxFQUFJLFVBQVVpRixDQUFRO0FBQUEsTUFDcEg7QUFBQSxJQUNRLEdBQUcsRUFBRSxZQUFZLENBQUEsR0FBSSxVQUFVLENBQUEsRUFBRSxDQUFFO0FBQUEsSUFDbkMsc0JBQXNCRixHQUEyQmxhLEdBQUsyRixDQUFJO0FBQUEsRUFDbEU7QUFDSSxTQUFLeEYsRUFBTyxTQUFTLFVBQ2pCLE9BQU9BLEVBQU8sVUFDWEE7QUFDWDtBQ25ETyxNQUFNcWEsS0FBbUIsQ0FBQ3hhLEdBQUsyRixNQUFTO0FBQzNDLE1BQUlBLEVBQUssZ0JBQ0xBLEVBQUssWUFBWSxNQUFNLEdBQUdBLEVBQUssYUFBYSxNQUFNLEVBQUUsU0FBUSxNQUFPQSxFQUFLLGFBQWEsU0FBUTtBQUM3RixXQUFPb1IsRUFBUy9XLEVBQUksVUFBVSxNQUFNLEVBQUUsR0FBRzJGLEdBQU0sYUFBYUEsRUFBSyxhQUFhO0FBRWxGLFFBQU04VSxJQUFjMUQsRUFBUy9XLEVBQUksVUFBVSxNQUFNO0FBQUEsSUFDN0MsR0FBRzJGO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBRztBQUFBLEVBQ3ZELENBQUs7QUFDRCxTQUFPOFUsSUFDSDtBQUFBLElBQ0ksT0FBTztBQUFBLE1BQ0g7QUFBQSxRQUNJLEtBQUssQ0FBQTtBQUFBLE1BQ3pCO0FBQUEsTUFDZ0JBO0FBQUEsSUFDaEI7QUFBQSxFQUNBLElBQ1UsQ0FBQTtBQUNWLEdDbkJhQyxLQUFtQixDQUFDMWEsR0FBSzJGLE1BQVM7QUFDM0MsTUFBSUEsRUFBSyxpQkFBaUI7QUFDdEIsV0FBT29SLEVBQVMvVyxFQUFJLEdBQUcsTUFBTTJGLENBQUk7QUFFaEMsTUFBSUEsRUFBSyxpQkFBaUI7QUFDM0IsV0FBT29SLEVBQVMvVyxFQUFJLElBQUksTUFBTTJGLENBQUk7QUFFdEMsUUFBTWpFLElBQUlxVixFQUFTL1csRUFBSSxHQUFHLE1BQU07QUFBQSxJQUM1QixHQUFHMkY7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHO0FBQUEsRUFDdkQsQ0FBSyxHQUNLaEUsSUFBSW9WLEVBQVMvVyxFQUFJLElBQUksTUFBTTtBQUFBLElBQzdCLEdBQUcyRjtBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxTQUFTakUsSUFBSSxNQUFNLEdBQUc7QUFBQSxFQUNqRSxDQUFLO0FBQ0QsU0FBTztBQUFBLElBQ0gsT0FBTyxDQUFDQSxHQUFHQyxDQUFDLEVBQUUsT0FBTyxDQUFDSCxNQUFNQSxNQUFNLE1BQVM7QUFBQSxFQUNuRDtBQUNBO0FDbEJPLFNBQVNtWixHQUFnQjNhLEdBQUsyRixHQUFNO0FBQ3ZDLFNBQU9vUixFQUFTL1csRUFBSSxLQUFLLE1BQU0yRixDQUFJO0FBQ3ZDO0FDRE8sU0FBU2lWLEdBQVk1YSxHQUFLMkYsR0FBTTtBQUtuQyxRQUFNdEcsSUFBUztBQUFBLElBQ1gsTUFBTTtBQUFBLElBQ04sYUFBYTtBQUFBLElBQ2IsT0FQVTBYLEVBQVMvVyxFQUFJLFVBQVUsTUFBTTtBQUFBLE1BQ3ZDLEdBQUcyRjtBQUFBLE1BQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxPQUFPO0FBQUEsSUFDbEQsQ0FBSztBQUFBLEVBS0w7QUFDSSxTQUFJM0YsRUFBSSxXQUNKNEYsRUFBMEJ2RyxHQUFRLFlBQVlXLEVBQUksUUFBUSxPQUFPQSxFQUFJLFFBQVEsU0FBUzJGLENBQUksR0FFMUYzRixFQUFJLFdBQ0o0RixFQUEwQnZHLEdBQVEsWUFBWVcsRUFBSSxRQUFRLE9BQU9BLEVBQUksUUFBUSxTQUFTMkYsQ0FBSSxHQUV2RnRHO0FBQ1g7QUNsQk8sU0FBU3diLEdBQWM3YSxHQUFLMkYsR0FBTTtBQUNyQyxTQUFJM0YsRUFBSSxPQUNHO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVQSxFQUFJLE1BQU07QUFBQSxJQUNwQixPQUFPQSxFQUFJLE1BQ04sSUFBSSxDQUFDd0IsR0FBR0MsTUFBTXNWLEVBQVN2VixFQUFFLE1BQU07QUFBQSxNQUNoQyxHQUFHbUU7QUFBQSxNQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHbEUsQ0FBQyxFQUFFO0FBQUEsSUFDbEUsQ0FBYSxDQUFDLEVBQ0csT0FBTyxDQUFDMFQsR0FBSzNULE1BQU9BLE1BQU0sU0FBWTJULElBQU0sQ0FBQyxHQUFHQSxHQUFLM1QsQ0FBQyxHQUFJLENBQUEsQ0FBRTtBQUFBLElBQ2pFLGlCQUFpQnVWLEVBQVMvVyxFQUFJLEtBQUssTUFBTTtBQUFBLE1BQ3JDLEdBQUcyRjtBQUFBLE1BQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxpQkFBaUI7QUFBQSxJQUNwRSxDQUFhO0FBQUEsRUFDYixJQUdlO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVM0YsRUFBSSxNQUFNO0FBQUEsSUFDcEIsVUFBVUEsRUFBSSxNQUFNO0FBQUEsSUFDcEIsT0FBT0EsRUFBSSxNQUNOLElBQUksQ0FBQ3dCLEdBQUdDLE1BQU1zVixFQUFTdlYsRUFBRSxNQUFNO0FBQUEsTUFDaEMsR0FBR21FO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBR2xFLENBQUMsRUFBRTtBQUFBLElBQ2xFLENBQWEsQ0FBQyxFQUNHLE9BQU8sQ0FBQzBULEdBQUszVCxNQUFPQSxNQUFNLFNBQVkyVCxJQUFNLENBQUMsR0FBR0EsR0FBSzNULENBQUMsR0FBSSxDQUFBLENBQUU7QUFBQSxFQUM3RTtBQUVBO0FDL0JPLFNBQVNzWixLQUFvQjtBQUNoQyxTQUFPO0FBQUEsSUFDSCxLQUFLLENBQUE7QUFBQSxFQUNiO0FBQ0E7QUNKTyxTQUFTQyxLQUFrQjtBQUM5QixTQUFPLENBQUE7QUFDWDtBQ0RPLE1BQU1DLEtBQW1CLENBQUNoYixHQUFLMkYsTUFDM0JvUixFQUFTL1csRUFBSSxVQUFVLE1BQU0yRixDQUFJO0FDOEJyQyxTQUFTb1IsRUFBUy9XLEdBQUsyRixHQUFNZ1MsSUFBa0IsSUFBTzs7QUFDekQsUUFBTXNELElBQVd0VixFQUFLLEtBQUssSUFBSTNGLENBQUc7QUFDbEMsTUFBSTJGLEVBQUssVUFBVTtBQUNmLFVBQU11VixLQUFpQm5iLElBQUE0RixFQUFLLGFBQUwsZ0JBQUE1RixFQUFBLEtBQUE0RixHQUFnQjNGLEdBQUsyRixHQUFNc1YsR0FBVXREO0FBQzVELFFBQUl1RCxNQUFtQnJXO0FBQ25CLGFBQU9xVztBQUFBLEVBRWY7QUFDQSxNQUFJRCxLQUFZLENBQUN0RCxHQUFpQjtBQUM5QixVQUFNd0QsSUFBYUMsR0FBUUgsR0FBVXRWLENBQUk7QUFDekMsUUFBSXdWLE1BQWU7QUFDZixhQUFJLFVBQVVBLEtBQ1Z4VixFQUFLLFNBQVMsSUFBSXdWLEVBQVcsSUFBSSxHQUU5QkE7QUFBQSxFQUVmO0FBQ0EsUUFBTUUsSUFBVSxFQUFFLEtBQUFyYixHQUFLLE1BQU0yRixFQUFLLGFBQWEsWUFBWSxPQUFTO0FBQ3BFLEVBQUFBLEVBQUssS0FBSyxJQUFJM0YsR0FBS3FiLENBQU87QUFDMUIsUUFBTUMsSUFBYUMsR0FBYXZiLEdBQUtBLEVBQUksVUFBVTJGLEdBQU1nUyxDQUFlO0FBQ3hFLFNBQUkyRCxLQUNBRSxHQUFReGIsR0FBSzJGLEdBQU0yVixDQUFVLEdBRWpDRCxFQUFRLGFBQWFDLEdBQ2RBO0FBQ1g7QUFDQSxNQUFNRixLQUFVLENBQUM1VyxHQUFNbUIsTUFBUztBQUM1QixVQUFRQSxFQUFLLGNBQVk7QUFBQSxJQUNyQixLQUFLO0FBQ0QsYUFBTyxFQUFFLE1BQU1uQixFQUFLLEtBQUssS0FBSyxHQUFHLEVBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFTdEMsS0FBSztBQUNELFlBQU1lLElBQU9mLEVBQUssS0FBSyxNQUFNbUIsRUFBSyxTQUFTLFNBQVMsQ0FBQyxFQUFFLEtBQUssR0FBRztBQUcvRCxhQUFJSixNQUFTSSxFQUFLLFFBQVFBLEVBQUssaUJBQWlCLG9CQUM1Q0EsRUFBSyxZQUFZSixDQUFJLElBQUlmLEVBQUssTUFFM0IsRUFBRSxNQUFNLENBQUMsR0FBR21CLEVBQUssVUFBVUEsRUFBSyxnQkFBZ0JKLENBQUksRUFBRSxLQUFLLEdBQUcsRUFBQztBQUFBLElBQzFFLEtBQUs7QUFDRCxhQUFPLEVBQUUsTUFBTWtXLEdBQWdCOVYsRUFBSyxhQUFhbkIsRUFBSyxJQUFJLEVBQUM7QUFBQSxJQUMvRCxLQUFLO0FBQUEsSUFDTCxLQUFLO0FBQ0QsYUFBSUEsRUFBSyxLQUFLLFNBQVNtQixFQUFLLFlBQVksVUFDcENuQixFQUFLLEtBQUssTUFBTSxDQUFDcUIsR0FBT3VMLE1BQVV6TCxFQUFLLFlBQVl5TCxDQUFLLE1BQU12TCxDQUFLLEtBQ25FLFFBQVEsS0FBSyxtQ0FBbUNGLEVBQUssWUFBWSxLQUFLLEdBQUcsQ0FBQyxxQkFBcUIsR0FDeEYsQ0FBQSxLQUVKQSxFQUFLLGlCQUFpQixTQUFTLENBQUEsSUFBSztBQUFBLEVBRXZEO0FBQ0EsR0FDTThWLEtBQWtCLENBQUNDLEdBQU9DLE1BQVU7QUFDdEMsTUFBSWxhLElBQUk7QUFDUixTQUFPQSxJQUFJaWEsRUFBTSxVQUFVamEsSUFBSWthLEVBQU0sVUFDN0JELEVBQU1qYSxDQUFDLE1BQU1rYSxFQUFNbGEsQ0FBQyxHQURpQkE7QUFDekM7QUFHSixTQUFPLEVBQUVpYSxFQUFNLFNBQVNqYSxHQUFHLFNBQVEsR0FBSSxHQUFHa2EsRUFBTSxNQUFNbGEsQ0FBQyxDQUFDLEVBQUUsS0FBSyxHQUFHO0FBQ3RFLEdBQ004WixLQUFlLENBQUN2YixHQUFLNGIsR0FBVWpXLEdBQU1nUyxNQUFvQjtBQUMzRCxVQUFRaUUsR0FBUTtBQUFBLElBQ1osS0FBSzFRLEVBQXNCO0FBQ3ZCLGFBQU9vTixHQUFldFksR0FBSzJGLENBQUk7QUFBQSxJQUNuQyxLQUFLdUYsRUFBc0I7QUFDdkIsYUFBTytPLEdBQWVqYSxHQUFLMkYsQ0FBSTtBQUFBLElBQ25DLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPaVAsR0FBZW5hLEdBQUsyRixDQUFJO0FBQUEsSUFDbkMsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU84TCxHQUFlaFgsR0FBSzJGLENBQUk7QUFBQSxJQUNuQyxLQUFLdUYsRUFBc0I7QUFDdkIsYUFBTytMLEdBQWU7QUFBQSxJQUMxQixLQUFLL0wsRUFBc0I7QUFDdkIsYUFBT21NLEdBQWFyWCxHQUFLMkYsQ0FBSTtBQUFBLElBQ2pDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPNFAsR0FBaUI7QUFBQSxJQUM1QixLQUFLNVAsRUFBc0I7QUFDdkIsYUFBT3dPLEdBQWEvVCxDQUFJO0FBQUEsSUFDNUIsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU80TCxHQUFjOVcsR0FBSzJGLENBQUk7QUFBQSxJQUNsQyxLQUFLdUYsRUFBc0I7QUFBQSxJQUMzQixLQUFLQSxFQUFzQjtBQUN2QixhQUFPME8sR0FBYzVaLEdBQUsyRixDQUFJO0FBQUEsSUFDbEMsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU80TSxHQUFxQjlYLEdBQUsyRixDQUFJO0FBQUEsSUFDekMsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU8yUCxHQUFjN2EsR0FBSzJGLENBQUk7QUFBQSxJQUNsQyxLQUFLdUYsRUFBc0I7QUFDdkIsYUFBT2tPLEdBQWVwWixHQUFLMkYsQ0FBSTtBQUFBLElBQ25DLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPaU4sR0FBZ0JuWSxHQUFLMkYsQ0FBSTtBQUFBLElBQ3BDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPME0sR0FBYTVYLENBQUc7QUFBQSxJQUMzQixLQUFLa0wsRUFBc0I7QUFDdkIsYUFBT29PLEdBQW1CdFosQ0FBRztBQUFBLElBQ2pDLEtBQUtrTCxFQUFzQjtBQUN2QixhQUFPOE8sR0FBaUJoYSxHQUFLMkYsQ0FBSTtBQUFBLElBQ3JDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPc1AsR0FBaUJ4YSxHQUFLMkYsQ0FBSTtBQUFBLElBQ3JDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPbU8sR0FBWXJaLEdBQUsyRixDQUFJO0FBQUEsSUFDaEMsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU8wUCxHQUFZNWEsR0FBSzJGLENBQUk7QUFBQSxJQUNoQyxLQUFLdUYsRUFBc0I7QUFDdkIsYUFBTzZMLEVBQVMvVyxFQUFJLE9BQU0sRUFBRyxNQUFNMkYsQ0FBSTtBQUFBLElBQzNDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPeVAsR0FBZ0IzYSxHQUFLMkYsQ0FBSTtBQUFBLElBQ3BDLEtBQUt1RixFQUFzQjtBQUFBLElBQzNCLEtBQUtBLEVBQXNCO0FBQ3ZCLGFBQU91TyxHQUFhO0FBQUEsSUFDeEIsS0FBS3ZPLEVBQXNCO0FBQ3ZCLGFBQU93TSxHQUFnQjFYLEdBQUsyRixHQUFNZ1MsQ0FBZTtBQUFBLElBQ3JELEtBQUt6TSxFQUFzQjtBQUN2QixhQUFPMkwsR0FBVztBQUFBLElBQ3RCLEtBQUszTCxFQUFzQjtBQUN2QixhQUFPNlAsR0FBZTtBQUFBLElBQzFCLEtBQUs3UCxFQUFzQjtBQUN2QixhQUFPdU0sR0FBZ0J6WCxHQUFLMkYsQ0FBSTtBQUFBLElBQ3BDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPZ00sR0FBZ0JsWCxHQUFLMkYsQ0FBSTtBQUFBLElBQ3BDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPOFAsR0FBaUJoYixHQUFLMkYsQ0FBSTtBQUFBLElBQ3JDLEtBQUt1RixFQUFzQjtBQUN2QixhQUFPa00sR0FBY3BYLEdBQUsyRixDQUFJO0FBQUEsSUFDbEMsS0FBS3VGLEVBQXNCO0FBQ3ZCLGFBQU93UCxHQUFpQjFhLEdBQUsyRixDQUFJO0FBQUEsSUFDckMsS0FBS3VGLEVBQXNCO0FBQUEsSUFDM0IsS0FBS0EsRUFBc0I7QUFBQSxJQUMzQixLQUFLQSxFQUFzQjtBQUN2QjtBQUFBLElBQ0o7QUFDSSxhQUFRLGtCQUFDL0wsTUFBQztBQUFBLFNBQXdCO0FBQUEsRUFDOUM7QUFDQSxHQUNNcWMsS0FBVSxDQUFDeGIsR0FBSzJGLEdBQU0yVixPQUNwQnRiLEVBQUksZ0JBQ0pzYixFQUFXLGNBQWN0YixFQUFJLGFBQ3pCMkYsRUFBSyx3QkFDTDJWLEVBQVcsc0JBQXNCdGIsRUFBSSxlQUd0Q3NiLElDakxMTyxLQUFrQixDQUFDeGMsR0FBUTJGLE1BQVk7QUFDekMsUUFBTVcsSUFBT1AsR0FBUUosQ0FBTyxHQUN0Qk8sSUFBTyxPQUFPUCxLQUFZLFdBQVdBLEtBQ3JDQSxLQUFBLGdCQUFBQSxFQUFTLGtCQUFpQixXQUN0QkEsS0FBQSxPQURnQyxTQUNoQ0EsRUFBUyxNQUNiOFcsSUFBTy9FLEVBQVMxWCxFQUFPLE1BQU1rRyxNQUFTLFNBQVlJLElBQVE7QUFBQSxJQUM1RCxHQUFHQTtBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssVUFBVUEsRUFBSyxnQkFBZ0JKLENBQUk7QUFBQSxFQUNqRSxHQUFRLEVBQUssS0FBSyxDQUFBLEdBQ1J3VyxJQUFRLE9BQU8vVyxLQUFZLFlBQVlBLEVBQVEsU0FBUyxVQUFhQSxFQUFRLGlCQUFpQixVQUNoR0EsRUFBUSxPQUNOO0FBQ04sRUFBSStXLE1BQVUsV0FDVkQsRUFBSyxRQUFRQztBQUVqQixRQUFNQyxLQUFlLE1BQU07QUFDdkIsUUFBSTlXLEdBQVdTLEVBQUssV0FBVztBQUMzQjtBQUVKLFVBQU1xVyxJQUFjLENBQUEsR0FDZEMsSUFBdUIsb0JBQUksSUFBRztBQU1wQyxhQUFTeGEsSUFBSSxHQUFHQSxJQUFJLEtBQUtBLEtBQUs7QUFDMUIsWUFBTXlhLElBQWlCLE9BQU8sUUFBUXZXLEVBQUssV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDdkUsQ0FBRyxNQUFNLENBQUM2YSxFQUFxQixJQUFJN2EsQ0FBRyxDQUFDO0FBQ3hHLFVBQUk4YSxFQUFlLFdBQVc7QUFDMUI7QUFDSixpQkFBVyxDQUFDOWEsR0FBSy9CLENBQU0sS0FBSzZjO0FBQ3hCLFFBQUFGLEVBQVk1YSxDQUFHLElBQ1gyVixFQUFTOVIsR0FBTzVGLENBQU0sR0FBRyxFQUFFLEdBQUdzRyxHQUFNLGFBQWEsQ0FBQyxHQUFHQSxFQUFLLFVBQVVBLEVBQUssZ0JBQWdCdkUsQ0FBRyxFQUFDLEdBQUksRUFBSSxLQUFLLENBQUEsR0FDOUc2YSxFQUFxQixJQUFJN2EsQ0FBRztBQUFBLElBRXBDO0FBQ0EsV0FBTzRhO0FBQUEsRUFDWCxHQUFDLEdBQ0tHLElBQVc1VyxNQUFTLFNBQ3RCeVcsSUFDSTtBQUFBLElBQ0ksR0FBR0Y7QUFBQSxJQUNILENBQUNuVyxFQUFLLGNBQWMsR0FBR3FXO0FBQUEsRUFDdkMsSUFDY0YsSUFDSm5XLEVBQUssaUJBQWlCLGtCQUNwQjtBQUFBLElBQ0ksR0FBR21XO0FBQUEsSUFDSCxHQUFJRSxLQUFlclcsRUFBSyxTQUFTLE9BQzdCO0FBQUEsTUFDSSxDQUFDQSxFQUFLLGNBQWMsR0FBRztBQUFBLFFBQ25CLEdBQUdxVztBQUFBO0FBQUE7QUFBQSxRQUdILEdBQUlyVyxFQUFLLFNBQVMsT0FBTyxFQUFFLENBQUNKLENBQUksR0FBR3VXLEVBQUksSUFBSztBQUFBLE1BQ3hFO0FBQUEsSUFDQSxJQUNzQjtBQUFBLEVBQ3RCLElBQ2M7QUFBQSxJQUNFLE1BQU0sQ0FBQyxHQUFJblcsRUFBSyxpQkFBaUIsYUFBYSxDQUFBLElBQUtBLEVBQUssVUFBV0EsRUFBSyxnQkFBZ0JKLENBQUksRUFBRSxLQUFLLEdBQUc7QUFBQSxJQUN0RyxDQUFDSSxFQUFLLGNBQWMsR0FBRztBQUFBLE1BQ25CLEdBQUdxVztBQUFBLE1BQ0gsQ0FBQ3pXLENBQUksR0FBR3VXO0FBQUEsSUFDNUI7QUFBQSxFQUNBO0FBQ0ksU0FBSW5XLEVBQUssV0FBVyxnQkFDaEJ3VyxFQUFTLFVBQVUsNENBRWR4VyxFQUFLLFdBQVcsd0JBQ3JCd1csRUFBUyxVQUFVLGtEQUVoQkE7QUFDWDtBQ2tCTyxTQUFTQyxHQUEwQkMsR0FBTSxFQUFFLFFBQUExWCxHQUFRLFVBQUEyWCxFQUFRLEdBQUs7QUFDbkUsUUFBTTFYLElBQU0sRUFBRSxHQUFHeVgsRUFBSTtBQUNyQixnQkFBTyxpQkFBaUJ6WCxHQUFLO0FBQUEsSUFDekIsUUFBUTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ3hCO0FBQUEsSUFDUSxXQUFXO0FBQUEsTUFDUCxPQUFPRDtBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ3hCO0FBQUEsSUFDUSxXQUFXO0FBQUEsTUFDUCxPQUFPMlg7QUFBQSxNQUNQLFlBQVk7QUFBQSxJQUN4QjtBQUFBLEVBQ0EsQ0FBSyxHQUNNMVg7QUFDWDtBQy9HTyxTQUFTMlgsR0FBbUJsZCxHQUFRO0FBQ3ZDLE1BQUlBLEVBQU8sU0FBUztBQUNoQixVQUFNLElBQUksTUFBTSxzREFBc0RBLEVBQU8sT0FBTyxJQUFJQSxFQUFPLElBQUksTUFBTSxXQUFXLEVBQUU7QUFFMUgsUUFBTW1kLElBQWEsZ0JBQWdCbmQsQ0FBTTtBQUN6QyxTQUFPb2QsR0FBdUJELEdBQVksQ0FBQSxHQUFJQSxDQUFVO0FBQzVEO0FBQ0EsU0FBU0UsR0FBV3JkLEdBQVE7QUFDeEIsTUFBSSxPQUFPQSxLQUFXO0FBQ2xCLFdBQU87QUFFWCxNQUFJQSxFQUFPLFNBQVM7QUFDaEIsV0FBTztBQUVYLGFBQVdzZCxLQUFnQnRkLEVBQU8sU0FBUyxDQUFBO0FBQ3ZDLFFBQUlxZCxHQUFXQyxDQUFZO0FBQ3ZCLGFBQU87QUFHZixhQUFXQyxLQUFnQnZkLEVBQU8sU0FBUyxDQUFBO0FBQ3ZDLFFBQUlxZCxHQUFXRSxDQUFZO0FBQ3ZCLGFBQU87QUFHZixTQUFPO0FBQ1g7QUFLQSxTQUFTSCxHQUF1Qm5CLEdBQVk3UyxHQUFNOUYsR0FBTTtBQUNwRCxNQUFJLE9BQU8yWSxLQUFlO0FBQ3RCLFVBQU0sSUFBSSxVQUFVLGdEQUFnRDdTLEVBQUssS0FBSyxHQUFHLENBQUMsRUFBRTtBQUV4RixNQUFJLENBQUNvVSxHQUFTdkIsQ0FBVTtBQUNwQixVQUFNLElBQUksVUFBVSxZQUFZLEtBQUssVUFBVUEsQ0FBVSxDQUFDLDBCQUEwQjdTLEVBQUssS0FBSyxHQUFHLENBQUMsRUFBRTtBQUd4RyxRQUFNNUUsSUFBT3lYLEVBQVc7QUFDeEIsTUFBSXVCLEdBQVNoWixDQUFJO0FBQ2IsZUFBVyxDQUFDaVosR0FBU0MsQ0FBUyxLQUFLLE9BQU8sUUFBUWxaLENBQUk7QUFDbEQ0WSxNQUFBQSxHQUF1Qk0sR0FBVyxDQUFDLEdBQUd0VSxHQUFNLFNBQVNxVSxDQUFPLEdBQUduYSxDQUFJO0FBSTNFLFFBQU1xWixJQUFjVixFQUFXO0FBQy9CLE1BQUl1QixHQUFTYixDQUFXO0FBQ3BCLGVBQVcsQ0FBQ2dCLEdBQWdCQyxDQUFnQixLQUFLLE9BQU8sUUFBUWpCLENBQVc7QUFDdkVTLE1BQUFBLEdBQXVCUSxHQUFrQixDQUFDLEdBQUd4VSxHQUFNLGVBQWV1VSxDQUFjLEdBQUdyYSxDQUFJO0FBSy9GLEVBRFkyWSxFQUFXLFNBQ1gsWUFBWSxFQUFFLDBCQUEwQkEsT0FDaERBLEVBQVcsdUJBQXVCO0FBRXRDLFFBQU00QixJQUFXNUIsRUFBVyxZQUFZLENBQUEsR0FFbEM2QixJQUFhN0IsRUFBVztBQUM5QixNQUFJdUIsR0FBU00sQ0FBVSxHQUFHO0FBQ3RCLGVBQVcsQ0FBQy9iLEdBQUt5RSxDQUFLLEtBQUssT0FBTyxRQUFRc1gsQ0FBVTtBQUNoRCxVQUFJLENBQUNULEdBQVc3VyxDQUFLLEtBQUssQ0FBQ3FYLEVBQVMsU0FBUzliLENBQUc7QUFDNUMsY0FBTSxJQUFJLE1BQU0sa0JBQWtCLENBQUMsR0FBR3FILEdBQU0sY0FBY3JILENBQUcsRUFBRSxLQUFLLEdBQUcsQ0FBQyxtTUFBbU07QUFHblIsSUFBQWthLEVBQVcsV0FBVyxPQUFPLEtBQUs2QixDQUFVLEdBQzVDN0IsRUFBVyxhQUFhLE9BQU8sWUFBWSxPQUFPLFFBQVE2QixDQUFVLEVBQUUsSUFBSSxDQUFDLENBQUMvYixHQUFLZ2MsQ0FBVSxNQUFNO0FBQUEsTUFDN0ZoYztBQUFBLE1BQ0FxYixHQUF1QlcsR0FBWSxDQUFDLEdBQUczVSxHQUFNLGNBQWNySCxDQUFHLEdBQUd1QixDQUFJO0FBQUEsSUFDakYsQ0FBUyxDQUFDO0FBQUEsRUFDTjtBQUVBLFFBQU13RCxJQUFRbVYsRUFBVztBQUN6QixFQUFJdUIsR0FBUzFXLENBQUssTUFDZG1WLEVBQVcsUUFBUW1CLEdBQXVCdFcsR0FBTyxDQUFDLEdBQUdzQyxHQUFNLE9BQU8sR0FBRzlGLENBQUk7QUFHN0UsUUFBTW9YLElBQVF1QixFQUFXO0FBQ3pCLEVBQUksTUFBTSxRQUFRdkIsQ0FBSyxNQUNuQnVCLEVBQVcsUUFBUXZCLEVBQU0sSUFBSSxDQUFDc0QsR0FBUzViLE1BQU1nYixHQUF1QlksR0FBUyxDQUFDLEdBQUc1VSxHQUFNLFNBQVMsT0FBT2hILENBQUMsQ0FBQyxHQUFHa0IsQ0FBSSxDQUFDO0FBR3JILFFBQU1iLElBQVF3WixFQUFXO0FBQ3pCLE1BQUksTUFBTSxRQUFReFosQ0FBSztBQUNuQixRQUFJQSxFQUFNLFdBQVcsR0FBRztBQUNwQixZQUFNd2IsSUFBV2IsR0FBdUIzYSxFQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcyRyxHQUFNLFNBQVMsR0FBRyxHQUFHOUYsQ0FBSTtBQUMvRSxhQUFPLE9BQU8yWSxHQUFZZ0MsQ0FBUSxHQUNsQyxPQUFPaEMsRUFBVztBQUFBLElBQ3RCO0FBRUksTUFBQUEsRUFBVyxRQUFReFosRUFBTSxJQUFJLENBQUNlLEdBQU9wQixNQUFNZ2IsR0FBdUI1WixHQUFPLENBQUMsR0FBRzRGLEdBQU0sU0FBUyxPQUFPaEgsQ0FBQyxDQUFDLEdBQUdrQixDQUFJLENBQUM7QUFJckgsRUFBSTJZLEVBQVcsWUFBWSxRQUN2QixPQUFPQSxFQUFXO0FBR3RCLFFBQU1qWSxJQUFNaVksRUFBVztBQUN2QixNQUFJalksS0FBT2thLEdBQWlCakMsR0FBWSxDQUFDLEdBQUc7QUFDeEMsUUFBSSxPQUFPalksS0FBUTtBQUNmLFlBQU0sSUFBSSxVQUFVLDhCQUE4QkEsQ0FBRyxVQUFVb0YsRUFBSyxLQUFLLEdBQUcsQ0FBQyxFQUFFO0FBRW5GLFVBQU02VSxJQUFXRSxHQUFXN2EsR0FBTVUsQ0FBRztBQUNyQyxRQUFJLE9BQU9pYSxLQUFhO0FBQ3BCLFlBQU0sSUFBSSxNQUFNLG9CQUFvQmphLENBQUcsbURBQW1EO0FBRTlGLFFBQUksQ0FBQ3daLEdBQVNTLENBQVE7QUFDbEIsWUFBTSxJQUFJLE1BQU0sb0JBQW9CamEsQ0FBRyxzQ0FBc0MsS0FBSyxVQUFVaWEsQ0FBUSxDQUFDLEVBQUU7QUFHM0csa0JBQU8sT0FBT2hDLEdBQVksRUFBRSxHQUFHZ0MsR0FBVSxHQUFHaEMsR0FBWSxHQUN4RCxPQUFPQSxFQUFXLE1BR1htQixHQUF1Qm5CLEdBQVk3UyxHQUFNOUYsQ0FBSTtBQUFBLEVBQ3hEO0FBQ0EsU0FBTzJZO0FBQ1g7QUFDQSxTQUFTa0MsR0FBVzdhLEdBQU1VLEdBQUs7QUFDM0IsTUFBSSxDQUFDQSxFQUFJLFdBQVcsSUFBSTtBQUNwQixVQUFNLElBQUksTUFBTSwwQkFBMEIsS0FBSyxVQUFVQSxDQUFHLENBQUMsMEJBQTBCO0FBRTNGLFFBQU1vYSxJQUFZcGEsRUFBSSxNQUFNLENBQUMsRUFBRSxNQUFNLEdBQUc7QUFDeEMsTUFBSWlhLElBQVczYTtBQUNmLGFBQVd2QixLQUFPcWMsR0FBVztBQUN6QixRQUFJLENBQUNaLEdBQVNTLENBQVE7QUFDbEIsWUFBTSxJQUFJLE1BQU0sZ0RBQWdEamEsQ0FBRyxNQUFNLEtBQUssVUFBVWlhLENBQVEsQ0FBQyxFQUFFO0FBRXZHLFVBQU16WCxJQUFReVgsRUFBU2xjLENBQUc7QUFDMUIsUUFBSXlFLE1BQVU7QUFDVixZQUFNLElBQUksTUFBTSxPQUFPekUsQ0FBRyw4QkFBOEJpQyxDQUFHLEVBQUU7QUFFakUsSUFBQWlhLElBQVd6WDtBQUFBLEVBQ2Y7QUFDQSxTQUFPeVg7QUFDWDtBQUNBLFNBQVNULEdBQVNqWSxHQUFLO0FBQ25CLFNBQU8sT0FBT0EsS0FBUSxZQUFZQSxNQUFRLFFBQVEsQ0FBQyxNQUFNLFFBQVFBLENBQUc7QUFDeEU7QUFDQSxTQUFTMlksR0FBaUIzWSxHQUFLOFksR0FBRztBQUM5QixNQUFJamMsSUFBSTtBQUNSLGFBQVd0QyxLQUFLeUY7QUFFWixRQURBbkQsS0FDSUEsSUFBSWljO0FBQ0osYUFBTztBQUdmLFNBQU87QUFDWDtBQ2hKQSxTQUFTQyxHQUFrQnRlLEdBQVEyRixHQUFTO0FBQ3hDLFNBQU80WSxHQUFpQnZlLEdBQVE7QUFBQSxJQUM1QixrQkFBa0I7QUFBQSxJQUNsQixNQUFNMkYsRUFBUTtBQUFBLElBQ2QsY0FBYztBQUFBLElBQ2QsY0FBYztBQUFBLElBQ2Qsa0JBQWtCO0FBQUEsRUFDMUIsQ0FBSztBQUNMO0FBQ0EsU0FBUzZZLEdBQWtCeGUsR0FBUTtBQUMvQixTQUFPa2QsR0FBbUJ1QixHQUFnQnplLEdBQVE7QUFBQSxJQUM5QyxRQUFRO0FBQUEsRUFDaEIsQ0FBSyxDQUFDO0FBQ047QUFDQSxTQUFTMGUsR0FBUUMsR0FBVztBQUN4QixTQUFPLFVBQVVBO0FBQ3JCO0FBaURPLFNBQVNDLEdBQWNELEdBQVd6WSxHQUFNMlksR0FBTztBQUNsRCxTQUFPelosR0FBd0I7QUFBQSxJQUMzQixNQUFNO0FBQUEsSUFDTixHQUFHeVo7QUFBQSxJQUNILE1BQUEzWTtBQUFBLElBQ0EsUUFBUTtBQUFBLElBQ1IsUUFBUXdZLEdBQVFDLENBQVMsSUFBSUgsR0FBa0JHLENBQVMsSUFBSUwsR0FBa0JLLEdBQVcsRUFBRSxNQUFBelksR0FBTTtBQUFBLEVBQ3pHLEdBQU8sQ0FBQzRZLE1BQVlILEVBQVUsTUFBTSxLQUFLLE1BQU1HLENBQU8sQ0FBQyxDQUFDO0FBQ3hEO0FBdUJPLFNBQVNDLEdBQXFCcFosR0FBUztBQUMxQyxTQUFPb1gsR0FBMEI7QUFBQSxJQUM3QixNQUFNO0FBQUEsSUFDTixNQUFNcFgsRUFBUTtBQUFBLElBQ2QsWUFBWStZLEdBQVEvWSxFQUFRLFVBQVUsSUFDbEM2WSxHQUFrQjdZLEVBQVEsVUFBVSxJQUNsQzJZLEdBQWtCM1ksRUFBUSxZQUFZLEVBQUUsTUFBTUEsRUFBUSxNQUFNO0FBQUEsSUFDbEUsUUFBUTtBQUFBLElBQ1IsR0FBSUEsRUFBUSxjQUFjLEVBQUUsYUFBYUEsRUFBUSxZQUFXLElBQUs7QUFBQSxFQUN6RSxHQUFPO0FBQUEsSUFDQyxVQUFVQSxFQUFRO0FBQUEsSUFDbEIsUUFBUSxDQUFDdUksTUFBU3ZJLEVBQVEsV0FBVyxNQUFNLEtBQUssTUFBTXVJLENBQUksQ0FBQztBQUFBLEVBQ25FLENBQUs7QUFDTDtBQy9HTyxNQUFNOFEsV0FBb0IsTUFBTTtBQUFBLEVBRW5DLFlBQVlqVyxHQUFTa1csR0FBTztBQUN4QixVQUFNbFcsQ0FBTztBQUZqQixJQUFBbVcsRUFBQTtBQUdJLFNBQUssUUFBUUQ7QUFBQSxFQUNqQjtBQUNKO0FBS08sTUFBTUUsV0FBb0JILEdBQVk7QUFDN0M7QUFJTyxNQUFNSSxXQUE4QkosR0FBWTtBQUN2RDtBQUlPLE1BQU1LLFdBQTJCTCxHQUFZO0FBQ3BEO0FBSU8sTUFBTU0sVUFBa0JOLEdBQVk7QUFDM0M7QUFJTyxNQUFNTyxXQUFnQ1AsR0FBWTtBQUFBLEVBRXJELFlBQVlqVyxHQUFTdkosR0FBT3lmLEdBQU87QUFDL0IsVUFBTWxXLEdBQVNrVyxDQUFLO0FBRnhCLElBQUFDLEVBQUE7QUFHSSxTQUFLLFFBQVExZjtBQUFBLEVBQ2pCO0FBQ0o7QUFJTyxNQUFNZ2dCLFdBQXNCUixHQUFZO0FBQUEsRUFFM0MsWUFBWWpXLEdBQVN2SixHQUFPeWYsR0FBTztBQUMvQixVQUFNbFcsR0FBU2tXLENBQUs7QUFGeEIsSUFBQUMsRUFBQTtBQUdJLFNBQUssUUFBUTFmO0FBQUEsRUFDakI7QUFDSjtBQUlPLE1BQU1pZ0IsV0FBd0NULEdBQVk7QUFBQSxFQUU3RCxZQUFZalcsR0FBU2pJLEdBQVFtZSxHQUFPO0FBQ2hDLFVBQU1sVyxHQUFTa1csQ0FBSztBQUZ4QixJQUFBQyxFQUFBO0FBR0ksU0FBSyxTQUFTcGU7QUFBQSxFQUNsQjtBQUNKO0FBSU8sTUFBTTRlLFdBQXlDVixHQUFZO0FBQUEsRUFFOUQsWUFBWWpXLEdBQVNqSSxHQUFRbWUsR0FBTztBQUNoQyxVQUFNbFcsR0FBU2tXLENBQUs7QUFGeEIsSUFBQUMsRUFBQTtBQUdJLFNBQUssU0FBU3BlO0FBQUEsRUFDbEI7QUFDSjtBQ25FTyxTQUFTNmUsR0FBa0JoYixHQUFPOztBQUNyQyxNQUFJLE9BQU9BLEtBQVUsWUFBWUEsTUFBVTtBQUN2QztBQUVKLFFBQU1pYixJQUFZamI7QUFDbEIsV0FBT2pFLElBQUFrZixFQUFVLFNBQVYsZ0JBQUFsZixFQUFnQixRQUFPa2YsRUFBVSxRQUFRQSxFQUFVO0FBQzlEO0FBQ08sU0FBU0MsR0FBWWxiLEdBQU87QUFDL0IsUUFBTWhFLElBQU1nZixHQUFrQmhiLENBQUs7QUFDbkMsTUFBSSxDQUFDaEU7QUFDRDtBQUVKLFFBQU1tZixJQUFXLE9BQU9uZixFQUFJLFlBQWEsWUFBWUEsRUFBSSxZQUNwRCxPQUFPQSxFQUFJLFFBQVMsWUFBWUEsRUFBSTtBQUN6QyxNQUFJLE9BQU9tZixLQUFZO0FBQ25CO0FBRUosUUFBTUMsSUFBUUQsRUFBUSxZQUFXO0FBQ2pDLFNBQU9DLEVBQU0sV0FBVyxLQUFLLElBQUlBLEVBQU0sTUFBTSxDQUFDLElBQUlBO0FBQ3REO0FDZk8sU0FBU0MsR0FBWXJiLEdBQU87QUFFL0IsU0FEbUJnYixHQUFrQmhiLENBQUssSUFJN0JrYixHQUFZbGIsQ0FBSyxNQUNkLFdBSEw7QUFJZjtBQU1PLFNBQVNzYixHQUFpQnRiLEdBQU87QUFDcEMsU0FBUSxPQUFPQSxLQUFVLFlBQ3JCQSxNQUFVLFFBQ1YsV0FBV0EsS0FDWCxPQUFPQSxFQUFNLFNBQVU7QUFDL0I7QUN4QkEsTUFBTXViLEtBQXVCLDJDQUN2QkMsS0FBb0Isb0JBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUN4Q0MsS0FBcUIsb0JBQUksSUFBSTtBQUFBLEVBQy9CO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKLENBQUMsR0FHS0MsS0FBc0I7QUFBQSxFQUN4QixRQUFRLEVBQUUsTUFBTSxTQUFRO0FBQUEsRUFDeEIsUUFBUSxFQUFFLE1BQU0sU0FBUTtBQUFBLEVBQ3hCLFFBQVEsRUFBRSxNQUFNLFVBQVM7QUFBQSxFQUN6QixTQUFTLEVBQUUsTUFBTSxVQUFTO0FBQUEsRUFDMUIsTUFBTSxFQUFFLE1BQU0sVUFBVSxRQUFRLFlBQVc7QUFDL0M7QUFDTyxTQUFTQyxHQUF5QjlaLEdBQU87QUFDNUMsU0FBUSxPQUFPQSxLQUFVLFlBQ3JCQSxNQUFVLFFBQ1ZBLEVBQU0sU0FBUyxZQUNmLGdCQUFnQkEsS0FDaEIsMEJBQTBCQTtBQUNsQztBQUNPLFNBQVMrWixHQUFvQjViLEdBQU87QUFJdkMsUUFBTTNFLElBQVN3Z0IsR0FBa0I3YixDQUFLO0FBQ3RDLE1BQUszRTtBQUdMLFdBQUssTUFBTSxRQUFRQSxFQUFPLFFBQVEsTUFDOUJBLEVBQU8sV0FBVyxDQUFBLElBRWxCLE9BQU9BLEVBQU8sdUJBQXlCLFFBQ3ZDQSxFQUFPLHVCQUF1QixLQUU5QixPQUFPQSxFQUFPLFdBQVksYUFDMUJBLEVBQU8sVUFBVWtnQixLQUVkbGdCO0FBQ1g7QUFDQSxTQUFTd2dCLEdBQWtCaGEsR0FBTztBQUM5QixRQUFNMUUsSUFBUTJlLEdBQVVqYSxDQUFLO0FBQzdCLE1BQUksQ0FBQzFFO0FBQ0Q7QUFFSixRQUFNZ2MsSUFBYSxDQUFBLEdBQ2JELElBQVcsQ0FBQTtBQUNqQixhQUFXLENBQUM5YixHQUFLMmUsQ0FBSyxLQUFLLE9BQU8sUUFBUTVlLENBQUssR0FBRztBQUM5QyxVQUFNLEVBQUUsUUFBQTlCLEdBQVEsVUFBQTJnQixNQUFhQyxHQUFnQkYsQ0FBSztBQUNsRCxRQUFJLENBQUMxZ0I7QUFDRDtBQUVKLElBQUE4ZCxFQUFXL2IsQ0FBRyxJQUFJL0IsR0FDYjJnQixLQUNEOUMsRUFBUyxLQUFLOWIsQ0FBRztBQUFBLEVBRXpCO0FBQ0EsU0FBTyxFQUFFLE1BQU0sVUFBVSxZQUFBK2IsR0FBWSxVQUFBRCxHQUFVLHNCQUFzQixHQUFLO0FBQzlFO0FBQ0EsU0FBUytDLEdBQWdCcGEsR0FBTztBQUk1QixNQUFJcWEsSUFBVUMsR0FBaUJ0YSxDQUFLLEdBQ2hDbWEsSUFBVztBQUNmLFNBQU9SLEdBQWtCLElBQUlOLEdBQVlnQixDQUFPLEtBQUssRUFBRSxLQUFHO0FBQ3RELElBQUFGLElBQVc7QUFDWCxVQUFNaGdCLElBQU1nZixHQUFrQmtCLENBQU8sR0FDL0JFLElBQU9ELEdBQWlCbmdCLEtBQUEsZ0JBQUFBLEVBQUssU0FBUztBQUM1QyxRQUFJLENBQUNvZ0IsS0FBUUEsTUFBU0Y7QUFDbEI7QUFFSixJQUFBQSxJQUFVRTtBQUFBLEVBQ2Q7QUFDQSxTQUFPLEVBQUUsUUFBUUMsR0FBY0gsQ0FBTyxHQUFHLFVBQUFGLEVBQVE7QUFDckQ7QUFDQSxTQUFTSyxHQUFjeGEsR0FBTztBQUMxQixNQUFJQSxNQUFVO0FBQ1Y7QUFFSixRQUFNeWEsSUFBWUgsR0FBaUJ0YSxDQUFLLEdBQ2xDaU0sSUFBT29OLEdBQVlvQixDQUFTLEdBQzVCdGdCLElBQU1nZixHQUFrQnNCLENBQVM7QUFDdkMsTUFBS3hPLEdBR0w7QUFBQSxRQUFJQSxLQUFRNE47QUFDUixhQUFPQSxHQUFvQjVOLENBQUk7QUFFbkMsWUFBUUEsR0FBSTtBQUFBLE1BQ1IsS0FBSztBQUNELGVBQU8rTixHQUFrQlMsQ0FBUztBQUFBLE1BQ3RDLEtBQUs7QUFDRCxlQUFPQyxHQUFpQnZnQixDQUFHO0FBQUEsTUFDL0IsS0FBSztBQUNELGVBQU93Z0IsR0FBaUJ4Z0IsQ0FBRztBQUFBLE1BQy9CLEtBQUs7QUFDRCxlQUFPeWdCLEdBQWlCemdCLENBQUc7QUFBQSxNQUMvQixLQUFLO0FBQ0QsZUFBTzBnQixHQUF3QjFnQixDQUFHO0FBQUEsTUFDdEMsS0FBSztBQUNELGVBQU8yZ0IsR0FBYTNnQixDQUFHO0FBQUEsTUFDM0IsS0FBSztBQUFBLE1BQ0wsS0FBSztBQUNELGVBQU80Z0IsR0FBVTVnQixDQUFHO0FBQUEsTUFDeEIsS0FBSztBQUNELGVBQU82Z0IsR0FBa0I3Z0IsQ0FBRztBQUFBLE1BQ2hDLEtBQUs7QUFDRCxlQUFPOGdCLEdBQWU5Z0IsQ0FBRztBQUFBLE1BQzdCLEtBQUs7QUFDRCxlQUFPK2dCLEdBQWUvZ0IsQ0FBRztBQUFBLE1BQzdCLEtBQUs7QUFDRCxlQUFPZ2hCLEdBQW9CaGhCLENBQUc7QUFBQSxNQUNsQztBQUNJO0FBQUEsSUFDWjtBQUFBO0FBQ0E7QUFFQSxTQUFTdWdCLEdBQWlCdmdCLEdBQUs7QUFDM0IsUUFBTW1HLElBQVFrYSxHQUFjWSxHQUFhamhCLEdBQUssV0FBVyxTQUFTLE1BQU0sQ0FBQztBQUN6RSxTQUFPbUcsSUFBUSxFQUFFLE1BQU0sU0FBUyxPQUFBQSxFQUFLLElBQUs7QUFDOUM7QUFDQSxTQUFTcWEsR0FBaUJ4Z0IsR0FBSztBQUMzQixRQUFNbUcsSUFBUSthLEdBQVlsaEIsS0FBQSxnQkFBQUEsRUFBSyxLQUFLLEVBQy9CLElBQUksQ0FBQ3dFLE1BQVM2YixHQUFjN2IsQ0FBSSxDQUFDLEVBQ2pDLE9BQU8sT0FBTztBQUNuQixNQUFJLENBQUMyQixFQUFNO0FBQ1A7QUFFSixRQUFNOUcsSUFBUztBQUFBLElBQ1gsTUFBTTtBQUFBLElBQ04sT0FBQThHO0FBQUEsSUFDQSxVQUFVQSxFQUFNO0FBQUEsRUFDeEI7QUFDSSxTQUFLbkcsS0FBQSxRQUFBQSxFQUFLLFNBQ05YLEVBQU8sV0FBVzhHLEVBQU0sU0FFckI5RztBQUNYO0FBQ0EsU0FBU29oQixHQUFpQnpnQixHQUFLO0FBQzNCLFFBQU1nRixJQUFVa2MsSUFBWWxoQixLQUFBLGdCQUFBQSxFQUFLLGFBQVdBLEtBQUEsZ0JBQUFBLEVBQUssUUFBTyxFQUNuRCxJQUFJLENBQUN1RSxNQUFXOGIsR0FBYzliLENBQU0sQ0FBQyxFQUNyQyxPQUFPLE9BQU87QUFDbkIsU0FBT1MsRUFBUSxTQUFTLEVBQUUsT0FBT0EsRUFBTyxJQUFLO0FBQ2pEO0FBQ0EsU0FBUzBiLEdBQXdCMWdCLEdBQUs7QUFDbEMsUUFBTXNULElBQU8rTSxHQUFjcmdCLEtBQUEsZ0JBQUFBLEVBQUssSUFBSSxHQUM5QnVULElBQVE4TSxHQUFjcmdCLEtBQUEsZ0JBQUFBLEVBQUssS0FBSztBQUN0QyxTQUFPc1QsS0FBUUMsSUFBUSxFQUFFLE9BQU8sQ0FBQ0QsR0FBTUMsQ0FBSyxFQUFDLElBQUs7QUFDdEQ7QUFDQSxTQUFTc04sR0FBa0I3Z0IsR0FBSztBQUM1QixRQUFNbWhCLElBQWNkLElBQWNyZ0IsS0FBQSxnQkFBQUEsRUFBSyxlQUFhQSxLQUFBLGdCQUFBQSxFQUFLLE9BQU07QUFDL0QsU0FBT21oQixJQUNELEVBQUUsTUFBTSxVQUFVLHNCQUFzQkEsRUFBVyxJQUNuRDtBQUNWO0FBQ0EsU0FBU0wsR0FBZTlnQixHQUFLO0FBQ3pCLFFBQU1taEIsSUFBY2QsSUFBY3JnQixLQUFBLGdCQUFBQSxFQUFLLGVBQWFBLEtBQUEsZ0JBQUFBLEVBQUssT0FBTTtBQUMvRCxTQUFPbWhCLElBQWMsRUFBRSxNQUFNLFNBQVMsT0FBT0EsRUFBVyxJQUFLO0FBQ2pFO0FBQ0EsU0FBU0osR0FBZS9nQixHQUFLO0FBQ3pCLFFBQU1taEIsSUFBY2QsR0FBY3JnQixLQUFBLGdCQUFBQSxFQUFLLFNBQVM7QUFDaEQsU0FBT21oQixJQUNELEVBQUUsTUFBTSxTQUFTLE9BQU9BLEdBQWEsYUFBYSxHQUFJLElBQ3REO0FBQ1Y7QUFDQSxTQUFTSCxHQUFvQmhoQixHQUFLO0FBQzlCLFFBQU1zQyxJQUFRK2QsSUFBY3JnQixLQUFBLGdCQUFBQSxFQUFLLGVBQWFBLEtBQUEsZ0JBQUFBLEVBQUssS0FBSTtBQUN2RCxTQUFPc0MsSUFBUSxFQUFFLE9BQU8sQ0FBQ0EsR0FBTyxFQUFFLE1BQU0sUUFBUSxFQUFDLElBQUs7QUFDMUQ7QUFDQSxTQUFTNmQsR0FBaUJ0YSxHQUFPO0FBQzdCLE1BQUlxYSxJQUFVcmE7QUFDZCxTQUFPNFosR0FBbUIsSUFBSVAsR0FBWWdCLENBQU8sS0FBSyxFQUFFLEtBQUc7QUFDdkQsVUFBTWxnQixJQUFNZ2YsR0FBa0JrQixDQUFPLEdBQy9CRSxLQUFPcGdCLEtBQUEsZ0JBQUFBLEVBQUssZUFDZEEsS0FBQSxnQkFBQUEsRUFBSyxZQUNMQSxLQUFBLGdCQUFBQSxFQUFLLFVBQ0xBLEtBQUEsZ0JBQUFBLEVBQUssVUFDTEEsS0FBQSxnQkFBQUEsRUFBSyxhQUNMQSxLQUFBLGdCQUFBQSxFQUFLO0FBQ1QsUUFBSSxDQUFDb2dCLEtBQVFBLE1BQVNGO0FBQ2xCLGFBQU9BO0FBRVgsSUFBQUEsSUFBVUU7QUFBQSxFQUNkO0FBQ0EsU0FBT0Y7QUFDWDtBQUNBLFNBQVNlLEdBQWFqaEIsTUFBUXdHLEdBQU07QUFDaEMsTUFBS3hHO0FBR0wsZUFBV29CLEtBQU9vRjtBQUNkLFVBQUlwRixLQUFPcEIsS0FBT0EsRUFBSW9CLENBQUcsTUFBTTtBQUMzQixlQUFPcEIsRUFBSW9CLENBQUc7QUFBQTtBQUkxQjtBQUNBLFNBQVM4ZixHQUFZcmIsR0FBTztBQUN4QixTQUFJLE1BQU0sUUFBUUEsQ0FBSyxJQUNaQSxJQUVKQSxNQUFVLFNBQVksQ0FBQSxJQUFLLENBQUNBLENBQUs7QUFDNUM7QUFDQSxTQUFTOGEsR0FBYTNnQixHQUFLO0FBQ3ZCLE1BQUksQ0FBQ0E7QUFDRDtBQUVKLFFBQU1vaEIsSUFBVUgsR0FBYWpoQixHQUFLLFNBQVMsU0FBUztBQUNwRCxNQUFJb2hCLE1BQVk7QUFHaEIsV0FBTztBQUFBLE1BQ0gsT0FBT0E7QUFBQSxNQUNQLE1BQU1BLE1BQVksT0FBTyxTQUFTLE9BQU9BO0FBQUEsSUFDakQ7QUFDQTtBQUNBLFNBQVNSLEdBQVU1Z0IsR0FBSztBQUNwQixNQUFLQSxHQUdMO0FBQUEsUUFBSSxNQUFNLFFBQVFBLEVBQUksTUFBTTtBQUN4QixhQUFPLEVBQUUsTUFBTUEsRUFBSSxPQUFNO0FBRTdCLFFBQUksTUFBTSxRQUFRQSxFQUFJLE9BQU87QUFDekIsYUFBTyxFQUFFLE1BQU1BLEVBQUksUUFBTztBQUU5QixRQUFJQSxFQUFJLFVBQVUsT0FBT0EsRUFBSSxVQUFXO0FBQ3BDLGFBQU8sRUFBRSxNQUFNLE9BQU8sT0FBT0EsRUFBSSxNQUFNLEVBQUM7QUFFNUMsUUFBSUEsRUFBSSxRQUFRLE9BQU9BLEVBQUksUUFBUztBQUNoQyxhQUFPLEVBQUUsTUFBTSxPQUFPLE9BQU9BLEVBQUksSUFBSSxFQUFDO0FBQUE7QUFHOUM7QUFDQSxTQUFTOGYsR0FBVTliLEdBQU87QUFDdEIsTUFBSSxPQUFPQSxLQUFVLFlBQVlBLE1BQVU7QUFDdkM7QUFFSixRQUFNaWIsSUFBWWpiO0FBQ2xCLE1BQUlpYixFQUFVLFNBQVMsT0FBT0EsRUFBVSxTQUFVO0FBQzlDLFdBQU9BLEVBQVU7QUFFckIsTUFBSSxPQUFPQSxFQUFVLFNBQVU7QUFDM0IsUUFBSTtBQUNBLGFBQU9BLEVBQVUsTUFBSztBQUFBLElBQzFCLFFBQ2U7QUFDWDtBQUFBLElBQ0o7QUFFSixRQUFNamYsSUFBTWdmLEdBQWtCQyxDQUFTLEdBQ2pDOWQsSUFBUW5CLEtBQUEsZ0JBQUFBLEVBQUs7QUFDbkIsTUFBSW1CLEtBQVMsT0FBT0EsS0FBVTtBQUMxQixXQUFPQTtBQUVYLE1BQUksT0FBT0EsS0FBVTtBQUNqQixRQUFJO0FBQ0EsYUFBT0EsRUFBSztBQUFBLElBQ2hCLFFBQ2U7QUFDWDtBQUFBLElBQ0o7QUFHUjtBQy9RQSxNQUFNa2dCLEtBQTZCakQsSUFFN0JrRCxLQUFzQnJEO0FBSTVCLFNBQVNzRCxHQUF1QkMsR0FBVztBQUN2QyxTQUFPNUIsR0FBb0I0QixDQUFTO0FBQ3hDO0FBT08sU0FBU0MsR0FBbUJsYyxHQUFNO0FBTXJDLE1BSkFBLElBQU9BLEVBQUssUUFBUSxPQUFPLEdBQUcsR0FFOUJBLElBQU9BLEVBQUssUUFBUSxpQkFBaUIsR0FBRyxHQUVwQ0EsRUFBSyxXQUFXO0FBQ2hCLFVBQU0sSUFBSSxNQUFNLDJCQUEyQjtBQUUvQyxTQUFPQTtBQUNYO0FBU08sU0FBU21jLEdBQWdDRixHQUFXamMsR0FBTTtBQUM3RCxRQUFNWixJQUFTLENBQUNYLE1BQVUsS0FBSyxNQUFNQSxDQUFLO0FBQzFDLE1BQUlxYixHQUFZbUMsQ0FBUyxHQUFHO0FBQ3hCLFVBQU1HLElBQWMsQ0FBQ0MsTUFBa0I7QUFDbkMsWUFBTUMsSUFBaUJOLEdBQXVCQyxDQUFTO0FBQ3ZELFVBQUlLO0FBQ0EsZUFBTztBQUFBLFVBQ0gsUUFBUUE7QUFBQSxVQUNSLFFBQVEsQ0FBQ0MsTUFBYU4sRUFBVSxNQUFNLEtBQUssTUFBTU0sQ0FBUSxDQUFDO0FBQUEsUUFDOUU7QUFFWSxZQUFNcGMsSUFBZWtjLGFBQXlCLFFBQ3hDLDJCQUEyQkEsRUFBYyxPQUFPLEtBQ2hEO0FBQ04sWUFBTSxJQUFJakQsRUFBVSw2SkFBNkpqWixDQUFZLEVBQUU7QUFBQSxJQUNuTTtBQUNBLFFBQUlxYztBQUNKLFFBQUk7QUFDQSxNQUFBQSxJQUFvQlYsR0FBMkI7QUFBQSxRQUMzQyxNQUFBOWI7QUFBQSxRQUNBLFlBQXNCaWM7QUFBQSxRQUN0QixVQUFVLE1BQU07QUFBQSxRQUFFO0FBQUE7QUFBQSxRQUNsQixhQUFhO0FBQUEsTUFDN0IsQ0FBYTtBQUFBLElBQ0wsU0FDTzNpQixHQUFPO0FBQ1YsYUFBTzhpQixFQUFZOWlCLENBQUs7QUFBQSxJQUM1QjtBQUNBLFdBQUk4Z0IsR0FBeUJvQyxFQUFrQixVQUFVLElBQzlDO0FBQUEsTUFDSCxRQUFRQSxFQUFrQjtBQUFBLE1BQzFCLFFBQVFBLEVBQWtCO0FBQUEsSUFDMUMsSUFFZUosRUFBVztBQUFBLEVBQ3RCLFdBQ1MsT0FBT0gsS0FBYyxZQUFZQSxNQUFjO0FBQ3BELFdBQU87QUFBQSxNQUNILFFBQVFBO0FBQUEsTUFDUixRQUFBN2M7QUFBQSxJQUNaO0FBRUksUUFBTSxJQUFJZ2EsRUFBVSxzREFBc0Q7QUFDOUU7QUFJTyxTQUFTcUQsR0FBcUNDLEdBQVk7QUFDN0QsTUFBSUEsTUFBZTtBQUNmLFdBQU87QUFFWCxNQUFJNUMsR0FBWTRDLENBQVUsR0FBRztBQUN6QixVQUFNTixJQUFjLENBQUNPLEdBQVVOLE1BQWtCO0FBQzdDLFlBQU1DLElBQWlCTixHQUF1QlUsQ0FBVTtBQUN4RCxVQUFJSjtBQUNBLGVBQU87QUFBQSxVQUNILE9BQU1LLEtBQUEsZ0JBQUFBLEVBQVUsU0FBUTtBQUFBLFVBQ3hCLE9BQU1BLEtBQUEsZ0JBQUFBLEVBQVUsU0FBUTtBQUFBLFVBQ3hCLFNBQVFBLEtBQUEsZ0JBQUFBLEVBQVUsV0FBVTtBQUFBLFVBQzVCLFFBQVFMO0FBQUEsUUFDNUI7QUFFWSxZQUFNbmMsSUFBZWtjLGFBQXlCLFFBQ3hDLDJCQUEyQkEsRUFBYyxPQUFPLEtBQ2hEO0FBQ04sWUFBTSxJQUFJakQsRUFBVSw2SkFBNkpqWixDQUFZLEVBQUU7QUFBQSxJQUNuTTtBQUNBLFFBQUl5YztBQUNKLFFBQUk7QUFDQSxNQUFBQSxJQUFTYixHQUE4QlcsR0FBYSxRQUFRO0FBQUEsSUFDaEUsU0FDT3BqQixHQUFPO0FBQ1YsYUFBTzhpQixFQUFZLFFBQVc5aUIsQ0FBSztBQUFBLElBQ3ZDO0FBQ0EsV0FBSThnQixHQUF5QndDLEVBQU8sTUFBTSxJQUMvQjtBQUFBLE1BQ0gsTUFBTUEsRUFBTztBQUFBLE1BQ2IsTUFBTUEsRUFBTztBQUFBLE1BQ2IsUUFBUUEsRUFBTyxVQUFVO0FBQUEsTUFDekIsUUFBUUEsRUFBTztBQUFBLElBQy9CLElBRWVSLEVBQVlRLENBQU07QUFBQSxFQUM3QjtBQUNBLFNBQU9GO0FBQ1g7Ozs7Ozs7O0FDeEhBLE1BQUlHLElBQUksS0FDSi9mLElBQUkrZixJQUFJLElBQ1JDLElBQUloZ0IsSUFBSSxJQUNSaWdCLElBQUlELElBQUksSUFDUkUsSUFBSUQsSUFBSSxHQUNSRSxJQUFJRixJQUFJO0FBZ0JaLEVBQUFHLEtBQWlCLFNBQVU1Z0IsR0FBS21ELEdBQVM7QUFDdkMsSUFBQUEsSUFBVUEsS0FBVyxDQUFBO0FBQ3JCLFFBQUk4TSxJQUFPLE9BQU9qUTtBQUNsQixRQUFJaVEsTUFBUyxZQUFZalEsRUFBSSxTQUFTO0FBQ3BDLGFBQU82Z0IsRUFBTTdnQixDQUFHO0FBQ1gsUUFBSWlRLE1BQVMsWUFBWSxTQUFTalEsQ0FBRztBQUMxQyxhQUFPbUQsRUFBUSxPQUFPMmQsRUFBUTlnQixDQUFHLElBQUkrZ0IsRUFBUy9nQixDQUFHO0FBRW5ELFVBQU0sSUFBSTtBQUFBLE1BQ1IsMERBQ0UsS0FBSyxVQUFVQSxDQUFHO0FBQUE7RUFFeEI7QUFVQSxXQUFTNmdCLEVBQU1HLEdBQUs7QUFFbEIsUUFEQUEsSUFBTSxPQUFPQSxDQUFHLEdBQ1osRUFBQUEsRUFBSSxTQUFTLE1BR2pCO0FBQUEsVUFBSUMsSUFBUSxtSUFBbUk7QUFBQSxRQUM3SUQ7QUFBQTtBQUVGLFVBQUtDLEdBR0w7QUFBQSxZQUFJcEYsSUFBSSxXQUFXb0YsRUFBTSxDQUFDLENBQUMsR0FDdkJoUixLQUFRZ1IsRUFBTSxDQUFDLEtBQUssTUFBTSxZQUFXO0FBQ3pDLGdCQUFRaFIsR0FBSTtBQUFBLFVBQ1YsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUNILG1CQUFPNEwsSUFBSThFO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU85RSxJQUFJNkU7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFDSCxtQkFBTzdFLElBQUk0RTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUNILG1CQUFPNUUsSUFBSTJFO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU8zRSxJQUFJcmI7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFDSCxtQkFBT3FiLElBQUkwRTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUFBLFVBQ0wsS0FBSztBQUNILG1CQUFPMUU7QUFBQSxVQUNUO0FBQ0U7QUFBQSxRQUNOO0FBQUE7QUFBQTtBQUFBLEVBQ0E7QUFVQSxXQUFTa0YsRUFBU0gsR0FBSTtBQUNwQixRQUFJTSxJQUFRLEtBQUssSUFBSU4sQ0FBRTtBQUN2QixXQUFJTSxLQUFTVCxJQUNKLEtBQUssTUFBTUcsSUFBS0gsQ0FBQyxJQUFJLE1BRTFCUyxLQUFTVixJQUNKLEtBQUssTUFBTUksSUFBS0osQ0FBQyxJQUFJLE1BRTFCVSxLQUFTMWdCLElBQ0osS0FBSyxNQUFNb2dCLElBQUtwZ0IsQ0FBQyxJQUFJLE1BRTFCMGdCLEtBQVNYLElBQ0osS0FBSyxNQUFNSyxJQUFLTCxDQUFDLElBQUksTUFFdkJLLElBQUs7QUFBQSxFQUNkO0FBVUEsV0FBU0UsRUFBUUYsR0FBSTtBQUNuQixRQUFJTSxJQUFRLEtBQUssSUFBSU4sQ0FBRTtBQUN2QixXQUFJTSxLQUFTVCxJQUNKVSxFQUFPUCxHQUFJTSxHQUFPVCxHQUFHLEtBQUssSUFFL0JTLEtBQVNWLElBQ0pXLEVBQU9QLEdBQUlNLEdBQU9WLEdBQUcsTUFBTSxJQUVoQ1UsS0FBUzFnQixJQUNKMmdCLEVBQU9QLEdBQUlNLEdBQU8xZ0IsR0FBRyxRQUFRLElBRWxDMGdCLEtBQVNYLElBQ0pZLEVBQU9QLEdBQUlNLEdBQU9YLEdBQUcsUUFBUSxJQUUvQkssSUFBSztBQUFBLEVBQ2Q7QUFNQSxXQUFTTyxFQUFPUCxHQUFJTSxHQUFPckYsR0FBR25ZLEdBQU07QUFDbEMsUUFBSTBkLElBQVdGLEtBQVNyRixJQUFJO0FBQzVCLFdBQU8sS0FBSyxNQUFNK0UsSUFBSy9FLENBQUMsSUFBSSxNQUFNblksS0FBUTBkLElBQVcsTUFBTTtBQUFBLEVBQzdEOzs7Ozs7O0FDM0pBLFdBQVNDLEVBQU1DLEdBQUs7QUFDbkIsSUFBQUMsRUFBWSxRQUFRQSxHQUNwQkEsRUFBWSxVQUFVQSxHQUN0QkEsRUFBWSxTQUFTQyxHQUNyQkQsRUFBWSxVQUFVRSxHQUN0QkYsRUFBWSxTQUFTRyxHQUNyQkgsRUFBWSxVQUFVSSxHQUN0QkosRUFBWSxXQUFXSyxHQUFBLEdBQ3ZCTCxFQUFZLFVBQVVNLEdBRXRCLE9BQU8sS0FBS1AsQ0FBRyxFQUFFLFFBQVEsQ0FBQS9oQixNQUFPO0FBQy9CLE1BQUFnaUIsRUFBWWhpQixDQUFHLElBQUkraEIsRUFBSS9oQixDQUFHO0FBQUEsSUFDNUIsQ0FBRSxHQU1EZ2lCLEVBQVksUUFBUSxDQUFBLEdBQ3BCQSxFQUFZLFFBQVEsQ0FBQSxHQU9wQkEsRUFBWSxhQUFhLENBQUE7QUFRekIsYUFBU08sRUFBWUMsR0FBVztBQUMvQixVQUFJQyxJQUFPO0FBRVgsZUFBU3BpQixJQUFJLEdBQUdBLElBQUltaUIsRUFBVSxRQUFRbmlCO0FBQ3JDLFFBQUFvaUIsS0FBU0EsS0FBUSxLQUFLQSxJQUFRRCxFQUFVLFdBQVduaUIsQ0FBQyxHQUNwRG9pQixLQUFRO0FBR1QsYUFBT1QsRUFBWSxPQUFPLEtBQUssSUFBSVMsQ0FBSSxJQUFJVCxFQUFZLE9BQU8sTUFBTTtBQUFBLElBQ3RFO0FBQ0MsSUFBQUEsRUFBWSxjQUFjTztBQVMxQixhQUFTUCxFQUFZUSxHQUFXO0FBQy9CLFVBQUlFLEdBQ0FDLElBQWlCLE1BQ2pCQyxHQUNBQztBQUVKLGVBQVNDLEtBQVMzVyxHQUFNO0FBRXZCLFlBQUksQ0FBQzJXLEVBQU07QUFDVjtBQUdELGNBQU1DLElBQU9ELEdBR1BuYyxJQUFPLE9BQU8sb0JBQUksTUFBTSxHQUN4QjBhLElBQUsxYSxLQUFRK2IsS0FBWS9iO0FBQy9CLFFBQUFvYyxFQUFLLE9BQU8xQixHQUNaMEIsRUFBSyxPQUFPTCxHQUNaSyxFQUFLLE9BQU9wYyxHQUNaK2IsSUFBVy9iLEdBRVh3RixFQUFLLENBQUMsSUFBSTZWLEVBQVksT0FBTzdWLEVBQUssQ0FBQyxDQUFDLEdBRWhDLE9BQU9BLEVBQUssQ0FBQyxLQUFNLFlBRXRCQSxFQUFLLFFBQVEsSUFBSTtBQUlsQixZQUFJNkQsSUFBUTtBQUNaLFFBQUE3RCxFQUFLLENBQUMsSUFBSUEsRUFBSyxDQUFDLEVBQUUsUUFBUSxpQkFBaUIsQ0FBQ3VWLEdBQU9uaUIsT0FBVztBQUU3RCxjQUFJbWlCLE1BQVU7QUFDYixtQkFBTztBQUVSLFVBQUExUjtBQUNBLGdCQUFNZ1QsS0FBWWhCLEVBQVksV0FBV3ppQixFQUFNO0FBQy9DLGNBQUksT0FBT3lqQixNQUFjLFlBQVk7QUFDcEMsa0JBQU12aUIsS0FBTTBMLEVBQUs2RCxDQUFLO0FBQ3RCLFlBQUEwUixJQUFRc0IsR0FBVSxLQUFLRCxHQUFNdGlCLEVBQUcsR0FHaEMwTCxFQUFLLE9BQU82RCxHQUFPLENBQUMsR0FDcEJBO0FBQUEsVUFDTDtBQUNJLGlCQUFPMFI7QUFBQSxRQUNYLENBQUksR0FHRE0sRUFBWSxXQUFXLEtBQUtlLEdBQU01VyxDQUFJLElBRXhCNFcsRUFBSyxPQUFPZixFQUFZLEtBQ2hDLE1BQU1lLEdBQU01VyxDQUFJO0FBQUEsTUFDekI7QUFFRSxhQUFBMlcsRUFBTSxZQUFZTixHQUNsQk0sRUFBTSxZQUFZZCxFQUFZLFVBQVMsR0FDdkNjLEVBQU0sUUFBUWQsRUFBWSxZQUFZUSxDQUFTLEdBQy9DTSxFQUFNLFNBQVNHLEdBQ2ZILEVBQU0sVUFBVWQsRUFBWSxTQUU1QixPQUFPLGVBQWVjLEdBQU8sV0FBVztBQUFBLFFBQ3ZDLFlBQVk7QUFBQSxRQUNaLGNBQWM7QUFBQSxRQUNkLEtBQUssTUFDQUgsTUFBbUIsT0FDZkEsS0FFSkMsTUFBb0JaLEVBQVksZUFDbkNZLElBQWtCWixFQUFZLFlBQzlCYSxJQUFlYixFQUFZLFFBQVFRLENBQVMsSUFHdENLO0FBQUEsUUFFUixLQUFLLENBQUFobEIsTUFBSztBQUNULFVBQUE4a0IsSUFBaUI5a0I7QUFBQSxRQUNyQjtBQUFBLE1BQ0EsQ0FBRyxHQUdHLE9BQU9ta0IsRUFBWSxRQUFTLGNBQy9CQSxFQUFZLEtBQUtjLENBQUssR0FHaEJBO0FBQUEsSUFDVDtBQUVDLGFBQVNHLEVBQU9ULEdBQVdVLEdBQVc7QUFDckMsWUFBTUMsSUFBV25CLEVBQVksS0FBSyxhQUFhLE9BQU9rQixJQUFjLE1BQWMsTUFBTUEsS0FBYVYsQ0FBUztBQUM5RyxhQUFBVyxFQUFTLE1BQU0sS0FBSyxLQUNiQTtBQUFBLElBQ1Q7QUFTQyxhQUFTaEIsRUFBT2lCLEdBQVk7QUFDM0IsTUFBQXBCLEVBQVksS0FBS29CLENBQVUsR0FDM0JwQixFQUFZLGFBQWFvQixHQUV6QnBCLEVBQVksUUFBUSxDQUFBLEdBQ3BCQSxFQUFZLFFBQVEsQ0FBQTtBQUVwQixZQUFNcUIsS0FBUyxPQUFPRCxLQUFlLFdBQVdBLElBQWEsSUFDM0QsS0FBSSxFQUNKLFFBQVEsUUFBUSxHQUFHLEVBQ25CLE1BQU0sR0FBRyxFQUNULE9BQU8sT0FBTztBQUVoQixpQkFBV0UsS0FBTUQ7QUFDaEIsUUFBSUMsRUFBRyxDQUFDLE1BQU0sTUFDYnRCLEVBQVksTUFBTSxLQUFLc0IsRUFBRyxNQUFNLENBQUMsQ0FBQyxJQUVsQ3RCLEVBQVksTUFBTSxLQUFLc0IsQ0FBRTtBQUFBLElBRzdCO0FBVUMsYUFBU0MsRUFBZ0JDLEdBQVFDLEdBQVU7QUFDMUMsVUFBSUMsSUFBYyxHQUNkQyxJQUFnQixHQUNoQkMsSUFBWSxJQUNaQyxJQUFhO0FBRWpCLGFBQU9ILElBQWNGLEVBQU87QUFDM0IsWUFBSUcsSUFBZ0JGLEVBQVMsV0FBV0EsRUFBU0UsQ0FBYSxNQUFNSCxFQUFPRSxDQUFXLEtBQUtELEVBQVNFLENBQWEsTUFBTTtBQUV0SCxVQUFJRixFQUFTRSxDQUFhLE1BQU0sT0FDL0JDLElBQVlELEdBQ1pFLElBQWFILEdBQ2JDLFFBRUFELEtBQ0FDO0FBQUEsaUJBRVNDLE1BQWM7QUFFeEIsVUFBQUQsSUFBZ0JDLElBQVksR0FDNUJDLEtBQ0FILElBQWNHO0FBQUE7QUFFZCxpQkFBTztBQUtULGFBQU9GLElBQWdCRixFQUFTLFVBQVVBLEVBQVNFLENBQWEsTUFBTTtBQUNyRSxRQUFBQTtBQUdELGFBQU9BLE1BQWtCRixFQUFTO0FBQUEsSUFDcEM7QUFRQyxhQUFTdkIsSUFBVTtBQUNsQixZQUFNa0IsSUFBYTtBQUFBLFFBQ2xCLEdBQUdwQixFQUFZO0FBQUEsUUFDZixHQUFHQSxFQUFZLE1BQU0sSUFBSSxDQUFBUSxNQUFhLE1BQU1BLENBQVM7QUFBQSxNQUN4RCxFQUFJLEtBQUssR0FBRztBQUNWLGFBQUFSLEVBQVksT0FBTyxFQUFFLEdBQ2RvQjtBQUFBLElBQ1Q7QUFTQyxhQUFTaEIsRUFBUWplLEdBQU07QUFDdEIsaUJBQVcyZixLQUFROUIsRUFBWTtBQUM5QixZQUFJdUIsRUFBZ0JwZixHQUFNMmYsQ0FBSTtBQUM3QixpQkFBTztBQUlULGlCQUFXUixLQUFNdEIsRUFBWTtBQUM1QixZQUFJdUIsRUFBZ0JwZixHQUFNbWYsQ0FBRTtBQUMzQixpQkFBTztBQUlULGFBQU87QUFBQSxJQUNUO0FBU0MsYUFBU3JCLEVBQU94aEIsR0FBSztBQUNwQixhQUFJQSxhQUFlLFFBQ1hBLEVBQUksU0FBU0EsRUFBSSxVQUVsQkE7QUFBQSxJQUNUO0FBTUMsYUFBUzZoQixJQUFVO0FBQ2xCLGNBQVEsS0FBSyx1SUFBdUk7QUFBQSxJQUN0SjtBQUVDLFdBQUFOLEVBQVksT0FBT0EsRUFBWSxNQUFNLEdBRTlCQTtBQUFBLEVBQ1I7QUFFQSxTQUFBK0IsS0FBaUJqQzs7Ozs7QUM3UmpCLElBQUFrQyxFQUFBLGFBQXFCQyxHQUNyQkQsRUFBQSxPQUFlRSxHQUNmRixFQUFBLE9BQWVHLEdBQ2ZILEVBQUEsWUFBb0JJLEdBQ3BCSixFQUFBLFVBQWtCSyxFQUFZLEdBQzlCTCxFQUFBLFVBQW1CLHVCQUFNO0FBQ3hCLFVBQUlNLElBQVM7QUFFYixhQUFPLE1BQU07QUFDWixRQUFLQSxNQUNKQSxJQUFTLElBQ1QsUUFBUSxLQUFLLHVJQUF1STtBQUFBLE1BRXZKO0FBQUEsSUFDQSxHQUFDLEdBTUROLEVBQUEsU0FBaUI7QUFBQSxNQUNoQjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBO0FBWUQsYUFBU0ksSUFBWTtBQUlwQixVQUFJLE9BQU8sU0FBVyxPQUFlLE9BQU8sWUFBWSxPQUFPLFFBQVEsU0FBUyxjQUFjLE9BQU8sUUFBUTtBQUM1RyxlQUFPO0FBSVIsVUFBSSxPQUFPLFlBQWMsT0FBZSxVQUFVLGFBQWEsVUFBVSxVQUFVLFlBQVcsRUFBRyxNQUFNLHVCQUF1QjtBQUM3SCxlQUFPO0FBR1IsVUFBSW5qQjtBQUtKLGFBQVEsT0FBTyxXQUFhLE9BQWUsU0FBUyxtQkFBbUIsU0FBUyxnQkFBZ0IsU0FBUyxTQUFTLGdCQUFnQixNQUFNO0FBQUEsTUFFdEksT0FBTyxTQUFXLE9BQWUsT0FBTyxZQUFZLE9BQU8sUUFBUSxXQUFZLE9BQU8sUUFBUSxhQUFhLE9BQU8sUUFBUTtBQUFBO0FBQUEsTUFHMUgsT0FBTyxZQUFjLE9BQWUsVUFBVSxjQUFjQSxJQUFJLFVBQVUsVUFBVSxZQUFXLEVBQUcsTUFBTSxnQkFBZ0IsTUFBTSxTQUFTQSxFQUFFLENBQUMsR0FBRyxFQUFFLEtBQUs7QUFBQSxNQUVwSixPQUFPLFlBQWMsT0FBZSxVQUFVLGFBQWEsVUFBVSxVQUFVLFlBQVcsRUFBRyxNQUFNLG9CQUFvQjtBQUFBLElBQzFIO0FBUUEsYUFBU2dqQixFQUFXOVgsR0FBTTtBQVF6QixVQVBBQSxFQUFLLENBQUMsS0FBSyxLQUFLLFlBQVksT0FBTyxNQUNsQyxLQUFLLGFBQ0osS0FBSyxZQUFZLFFBQVEsT0FDMUJBLEVBQUssQ0FBQyxLQUNMLEtBQUssWUFBWSxRQUFRLE9BQzFCLE1BQU1vWSxFQUFPLFFBQVEsU0FBUyxLQUFLLElBQUksR0FFcEMsQ0FBQyxLQUFLO0FBQ1Q7QUFHRCxZQUFNLElBQUksWUFBWSxLQUFLO0FBQzNCLE1BQUFwWSxFQUFLLE9BQU8sR0FBRyxHQUFHLEdBQUcsZ0JBQWdCO0FBS3JDLFVBQUk2RCxJQUFRLEdBQ1J3VSxJQUFRO0FBQ1osTUFBQXJZLEVBQUssQ0FBQyxFQUFFLFFBQVEsZUFBZSxDQUFBdVYsTUFBUztBQUN2QyxRQUFJQSxNQUFVLFNBR2QxUixLQUNJMFIsTUFBVSxTQUdiOEMsSUFBUXhVO0FBQUEsTUFFWCxDQUFFLEdBRUQ3RCxFQUFLLE9BQU9xWSxHQUFPLEdBQUcsQ0FBQztBQUFBLElBQ3hCO0FBVUEsSUFBQVIsRUFBQSxNQUFjLFFBQVEsU0FBUyxRQUFRLFFBQVEsTUFBTTtBQUFBLElBQUE7QUFRckQsYUFBU0UsRUFBS2QsR0FBWTtBQUN6QixVQUFJO0FBQ0gsUUFBSUEsSUFDSFksRUFBUSxRQUFRLFFBQVEsU0FBU1osQ0FBVSxJQUUzQ1ksRUFBUSxRQUFRLFdBQVcsT0FBTztBQUFBLE1BRXJDLFFBQWlCO0FBQUEsTUFHakI7QUFBQSxJQUNBO0FBUUEsYUFBU0csSUFBTztBQUNmLFVBQUkxUDtBQUNKLFVBQUk7QUFDSCxRQUFBQSxJQUFJdVAsRUFBUSxRQUFRLFFBQVEsT0FBTyxLQUFLQSxFQUFRLFFBQVEsUUFBUSxPQUFPO0FBQUEsTUFDekUsUUFBaUI7QUFBQSxNQUdqQjtBQUdDLGFBQUksQ0FBQ3ZQLEtBQUssT0FBTyxVQUFZLE9BQWUsU0FBUyxZQUNwREEsSUFBSSxRQUFRLElBQUksUUFHVkE7QUFBQSxJQUNSO0FBYUEsYUFBUzRQLElBQWU7QUFDdkIsVUFBSTtBQUdILGVBQU87QUFBQSxNQUNULFFBQWlCO0FBQUEsTUFHakI7QUFBQSxJQUNBO0FBRUEsSUFBQUUsRUFBQSxVQUFpQmxDLEdBQUEsRUFBb0IyQixDQUFPO0FBRTVDLFVBQU0sRUFBQyxZQUFBUyxFQUFVLElBQUlGLEVBQU87QUFNNUIsSUFBQUUsRUFBVyxJQUFJLFNBQVU1bUIsR0FBRztBQUMzQixVQUFJO0FBQ0gsZUFBTyxLQUFLLFVBQVVBLENBQUM7QUFBQSxNQUN6QixTQUFVSixHQUFPO0FBQ2YsZUFBTyxpQ0FBaUNBLEVBQU07QUFBQSxNQUNoRDtBQUFBLElBQ0E7QUFBQTs7OztBQ3pRTyxTQUFTaW5CLEtBQVU7QUFDdEIsU0FBT0MsR0FBUTtBQUNuQjtBQU9BLFNBQVNDLEdBQVVDLEdBQVU7QUFDekIsUUFBTTlDLElBQU0yQyxHQUFPO0FBQ25CLFNBQVEsT0FBTzNDLElBQVEsUUFDbEJBLEVBQUk4QyxDQUFRLE1BQU0sVUFBVTlDLEVBQUk4QyxDQUFRLE1BQU07QUFDdkQ7QUFJTyxNQUFNQyxLQUFVO0FBQUEsRUFDbkIsSUFBSSxXQUFXO0FBRVAsV0FBTztBQUFBLEVBT2Y7QUFDSixHQUlhQyxLQUFVO0FBQUEsRUFDbkIsSUFBSSxtQkFBbUI7QUFDbkIsV0FBT0gsR0FBVSxtQ0FBbUM7QUFBQSxFQUN4RDtBQUFBLEVBQ0EsSUFBSSxrQkFBa0I7QUFDbEIsV0FBT0EsR0FBVSxrQ0FBa0M7QUFBQSxFQUN2RDtBQUNKLEdDdkNNSSxLQUFtQkQsR0FBUSxrQkFLM0JFLEtBQWtCRixHQUFRO0FBT3pCLFNBQVNHLEdBQVUxQyxJQUFZLGlCQUFpQjtBQUNuRCxTQUFPO0FBQUEsSUFDSCxXQUFBQTtBQUFBLElBQ0EsT0FBT00sR0FBTU4sQ0FBUztBQUFBLElBQ3RCLE9BQU8sUUFBUTtBQUFBLElBQ2YsTUFBTSxRQUFRO0FBQUEsSUFDZCxrQkFBQXdDO0FBQUEsSUFDQSxpQkFBQUM7QUFBQSxFQUNSO0FBQ0E7QUFDTyxNQUFNRSxJQUFTRCxHQUFVLG9CQUFvQixHQzVCOUNFLEtBQXFCO0FBQ3BCLFNBQVNDLEdBQWM1Z0IsR0FBTztBQUNqQyxNQUFJQSxLQUFVO0FBQ1YsV0FBTyxPQUFPQSxDQUFLO0FBRXZCLE1BQUk2Z0IsR0FBa0I3Z0IsQ0FBSztBQUN2QixXQUFPOGdCLEdBQWdCLElBQUksV0FBVzlnQixDQUFLLENBQUM7QUFFaEQsTUFBSStnQixHQUFrQi9nQixDQUFLLEdBQUc7QUFDMUIsVUFBTWdoQixJQUFPaGhCO0FBQ2IsV0FBTzhnQixHQUFnQixJQUFJLFdBQVdFLEVBQUssUUFBUUEsRUFBSyxZQUFZQSxFQUFLLFVBQVUsQ0FBQztBQUFBLEVBQ3hGO0FBQ0EsTUFBSSxPQUFPaGhCLEtBQVU7QUFDakIsV0FBT0E7QUFFWCxNQUFJLE9BQU9BLEtBQVU7QUFDakIsUUFBSTtBQUNBLGFBQU8sS0FBSyxVQUFVQSxHQUFPaWhCLEVBQW1CO0FBQUEsSUFDcEQsUUFDVztBQUNQLGFBQU87QUFBQSxJQUNYO0FBRUosU0FBTyxPQUFPamhCLENBQUs7QUFDdkI7QUFDQSxTQUFTNmdCLEdBQWtCN2dCLEdBQU87QUFDOUIsTUFBSUEsYUFBaUI7QUFDakIsV0FBTztBQUVYLFFBQU1raEIsSUFBd0IsV0FBVztBQUN6QyxTQUFPLEdBQVFBLEtBQXlCbGhCLGFBQWlCa2hCO0FBQzdEO0FBQ0EsU0FBU0gsR0FBa0IvZ0IsR0FBTztBQUM5QixTQUFPLE9BQU8sY0FBZ0IsT0FBZSxZQUFZLE9BQU9BLENBQUs7QUFDekU7QUFDQSxTQUFTbWhCLEdBQTJCbmhCLEdBQU87QUFDdkMsU0FBUSxPQUFPQSxLQUFVLFlBQ3JCQSxNQUFVLFFBQ1ZBLEVBQU0sU0FBUyxZQUNmLE1BQU0sUUFBUUEsRUFBTSxJQUFJO0FBQ2hDO0FBQ0EsU0FBUzhnQixHQUFnQk0sR0FBTztBQUM1QixNQUFJQSxFQUFNLFdBQVc7QUFDakIsV0FBTztBQUVYLFFBQU1DLElBQWdCLEtBQUssSUFBSUQsRUFBTSxRQUFRVCxFQUFrQixHQUN6RFcsSUFBZSxDQUFBO0FBQ3JCLFdBQVMxbEIsSUFBSSxHQUFHQSxJQUFJeWxCLEdBQWV6bEI7QUFDL0IsSUFBQTBsQixFQUFhLEtBQUtDLEdBQVdILEVBQU14bEIsQ0FBQyxDQUFDLENBQUM7QUFFMUMsUUFBTTRsQixJQUFXSixFQUFNLFNBQVNULEtBQXFCLE9BQU87QUFFNUQsU0FBTyxlQURTVyxFQUFhLEtBQUssR0FBRyxDQUNSLEdBQUdFLENBQVEsS0FBS0osRUFBTSxNQUFNO0FBQzdEO0FBQ0EsU0FBU0csR0FBV0UsR0FBTTtBQUN0QixTQUFPLEtBQUtBLEVBQUssU0FBUyxFQUFFLEVBQUUsU0FBUyxHQUFHLEdBQUcsQ0FBQztBQUNsRDtBQUNBLFNBQVNSLEdBQW9CUyxHQUFNQyxHQUFhO0FBQzVDLE1BQUlkLEdBQWtCYyxDQUFXO0FBQzdCLFdBQU9iLEdBQWdCLElBQUksV0FBV2EsQ0FBVyxDQUFDO0FBRXRELE1BQUlaLEdBQWtCWSxDQUFXLEdBQUc7QUFDaEMsVUFBTVgsSUFBT1c7QUFDYixXQUFPYixHQUFnQixJQUFJLFdBQVdFLEVBQUssUUFBUUEsRUFBSyxZQUFZQSxFQUFLLFVBQVUsQ0FBQztBQUFBLEVBQ3hGO0FBQ0EsU0FBSUcsR0FBMkJRLENBQVcsSUFDL0JiLEdBQWdCLFdBQVcsS0FBS2EsRUFBWSxJQUFJLENBQUMsSUFFckRBO0FBQ1g7QUN1REEsU0FBU0MsR0FBeUJDLEdBQVM3b0IsR0FBTztBQUU5QyxTQUFPLHNFQURTQSxhQUFpQixRQUFRQSxFQUFNLFNBQVEsSUFBSyxPQUFPQSxDQUFLLENBQ1k7QUFDeEY7QUFPTyxTQUFTd2QsR0FBS3JYLEdBQVM7QUFDMUIsUUFBTU8sSUFBT1AsRUFBUSxPQUNmeWMsR0FBbUJ6YyxFQUFRLElBQUksSUFDL0J5YyxHQUFtQnpjLEVBQVEsUUFBUSxJQUFJLEdBQ3ZDMmlCLElBQW9CLE9BQU8zaUIsRUFBUSxnQkFBa0IsTUFDckR5aUIsS0FDQXppQixFQUFRO0FBQ2QsTUFBSSxDQUFDTztBQUNELFVBQU0sSUFBSSxNQUFNLHdGQUF3RjtBQUU1RyxRQUFNcWlCLElBQWE1aUIsRUFBUSxVQUFVO0FBQ3JDLE1BQUksQ0FBQzRpQixLQUFjdkksR0FBWXJhLEVBQVEsVUFBVTtBQUM3QyxVQUFNLElBQUkyWixFQUFVLDRDQUE0QztBQUVwRSxRQUFNLEVBQUUsUUFBQWhhLEdBQVEsUUFBUWtqQixFQUFVLElBQUtuRyxHQUFnQzFjLEVBQVEsWUFBWU8sQ0FBSTtBQUMvRixpQkFBZXVpQixFQUFRQyxHQUFZL2pCLEdBQU9na0IsR0FBUztBQUMvQyxVQUFNLENBQUNucEIsR0FBT29wQixDQUFNLElBQUksTUFBTXRwQixHQUFZLE1BQU1nRyxFQUFPWCxDQUFLLENBQUM7QUFDN0QsUUFBSW5GLE1BQVU7QUFDVixZQUFJMG5CLEVBQU8sa0JBQ1BBLEVBQU8sTUFBTSwrQkFBK0JoaEIsQ0FBSSxFQUFFLElBR2xEZ2hCLEVBQU8sTUFBTSwrQkFBK0JoaEIsQ0FBSSxLQUFLdkIsQ0FBSyxFQUFFLEdBRTFELElBQUkwYSxHQUFtQiw2QkFBNkI7QUFFOUQsSUFBSTZILEVBQU8sa0JBQ1BBLEVBQU8sTUFBTSxpQkFBaUJoaEIsQ0FBSSxFQUFFLElBR3BDZ2hCLEVBQU8sTUFBTSxpQkFBaUJoaEIsQ0FBSSxlQUFldkIsQ0FBSyxFQUFFO0FBRTVELFVBQU03RCxJQUFTLE1BQU02RSxFQUFRLFFBQVFpakIsR0FBUUYsR0FBWUMsQ0FBTyxHQUMxREUsSUFBZXpCLEdBQWN0bUIsQ0FBTTtBQUN6QyxXQUFJb21CLEVBQU8sa0JBQ1BBLEVBQU8sTUFBTSxRQUFRaGhCLENBQUksWUFBWSxJQUdyQ2doQixFQUFPLE1BQU0sUUFBUWhoQixDQUFJLGNBQWMyaUIsQ0FBWSxFQUFFLEdBRWxEL25CO0FBQUEsRUFDWDtBQUNBLGlCQUFlZ29CLEVBQU9KLEdBQVkvakIsR0FBT2drQixHQUFTO0FBQzlDLFdBQU9GLEVBQVFDLEdBQVkvakIsR0FBT2drQixDQUFPLEVBQUUsTUFBTSxDQUFDbnBCLE1BQVU7QUFDeEQsVUFBSThvQixHQUFtQjtBQUNuQixjQUFNUyxJQUFjQyxHQUFjO0FBQ2xDLGVBQUFELEtBQUEsUUFBQUEsRUFBYSxTQUFTO0FBQUEsVUFDbEIsU0FBUztBQUFBLFVBQ1QsTUFBTTtBQUFBLFlBQ0YsV0FBVzdpQjtBQUFBLFlBQ1gsT0FBTzFHLEVBQU0sU0FBUTtBQUFBLFVBQzdDO0FBQUEsUUFDQSxJQUN1QjhvQixFQUFrQkksR0FBWWxwQixDQUFLO0FBQUEsTUFDOUM7QUFDQSxZQUFNQTtBQUFBLElBQ1YsQ0FBQztBQUFBLEVBQ0w7QUFDQSxRQUFNeXBCLElBQWdCLE9BQU90akIsRUFBUSxpQkFBa0IsYUFDakRBLEVBQVEsZ0JBQ1IsWUFBWSxPQUFPQSxFQUFRLGlCQUFrQixZQUN6Q0EsRUFBUSxnQkFDUixJQUNKZ2hCLElBQVksT0FBT2hoQixFQUFRLGFBQWMsYUFDekMsT0FBTytpQixHQUFZUSxNQUFVO0FBQzNCLFVBQU1DLElBQVl4akIsRUFBUTtBQUUxQixXQUFPLEVBRFEsTUFBTXdqQixFQUFVLEVBQUUsWUFBQVQsR0FBWSxPQUFBUSxFQUFLLENBQUU7QUFBQSxFQUV4RCxJQUNFLFlBQVksT0FBT3ZqQixFQUFRLGFBQWMsWUFBWUEsRUFBUSxZQUFZO0FBQy9FLFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQUFPO0FBQUEsSUFDQSxhQUFhUCxFQUFRO0FBQUEsSUFDckIsWUFBQTZpQjtBQUFBLElBQ0EsUUFBUUQ7QUFBQSxJQUNSLFFBQUFPO0FBQUEsSUFDQSxlQUFBRztBQUFBLElBQ0EsV0FBQXRDO0FBQUEsRUFDUjtBQUNBO0FDcEl1QnlDLEVBQVM7QUFBQSxFQUM1QixNQUFNQyxFQUFRO0FBQUEsRUFDZCxhQUFhQSxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ2hDLGFBQWFELEVBQVM7QUFBQSxJQUNsQixNQUFNRSxFQUFVLFFBQVE7QUFBQSxJQUN4QixZQUFZQyxHQUFTRixFQUFRLEdBQUlHLEVBQUssQ0FBRTtBQUFBLElBQ3hDLFVBQVVDLEVBQVFKLEdBQVU7QUFBQSxJQUM1QixzQkFBc0JLLEdBQVM7QUFBQSxFQUN2QyxDQUFLO0FBQ0wsQ0FBQztBQXlHRCxNQUFNQyxLQUFlLENBQUE7QUFZckIsZUFBZUMsR0FBMkIsRUFBRSxRQUFBQyxHQUFRLHdCQUFBQyxHQUF3QixZQUFBcEIsR0FBWSxPQUFBUSxFQUFLLEdBQUs7QUFDOUYsU0FBSVcsRUFBTyxrQkFBa0JGLEdBQWFFLEVBQU8sSUFBSSxJQUMxQ0YsR0FBYUUsRUFBTyxJQUFJLEVBQUUsSUFBSSxDQUFDRSxNQUFNQyxHQUFrQkQsR0FBR0YsR0FBUUMsQ0FBc0IsQ0FBQyxJQUU3RkcsR0FBcUIsT0FBT0MsTUFBUztBQUN4QyxVQUFNQyxJQUFrQixNQUFNTixFQUFPLFVBQVM7QUFDOUMsUUFBSU8sSUFBV0Q7QUFDZixRQUFJekIsS0FBY1EsR0FBTztBQUNyQixZQUFNYixJQUFVLEVBQUUsWUFBQUssR0FBWSxPQUFBUSxHQUFPLFlBQVlXLEVBQU8sS0FBSSxHQUN0RFEsSUFBZ0IsQ0FBQTtBQUN0QixpQkFBV3JOLEtBQVFtTixHQUFpQjtBQUNoQyxjQUFNRyxJQUFTVCxFQUFPO0FBQ3RCLFlBQUlTO0FBQ0EsY0FBSSxPQUFPQSxLQUFXO0FBRWxCLGdCQUFJLENBRGEsTUFBTUEsRUFBT2pDLEdBQVNyTCxDQUFJLEdBQzVCO0FBQ1h1TixjQUFBQSxFQUFhLE1BQU0scUJBQXFCVixFQUFPLElBQUksV0FBVzdNLEVBQUssSUFBSSxzQ0FBc0M7QUFDN0c7QUFBQSxZQUNKO0FBQUEsaUJBRUM7QUFDRCxrQkFBTXdOLElBQW1CRixFQUFPLG9CQUFvQixDQUFBLEdBQzlDRyxJQUFtQkgsRUFBTyxvQkFBb0IsQ0FBQTtBQUNwRCxnQkFBSUUsRUFBaUIsU0FBUyxLQUFLQyxFQUFpQixTQUFTLEdBQUc7QUFDNUQsb0JBQU1DLElBQVVGLEVBQWlCLFNBQVMsSUFDcENBLEVBQWlCLFNBQVN4TixFQUFLLElBQUksSUFDbkMsSUFDQTJOLElBQVVGLEVBQWlCLFNBQVMsSUFDcENBLEVBQWlCLFNBQVN6TixFQUFLLElBQUksSUFDbkM7QUFDTixrQkFBSSxDQUFDME4sS0FBV0MsR0FBUztBQUNyQixnQkFBSUEsSUFDQUosRUFBYSxNQUFNLHFCQUFxQlYsRUFBTyxJQUFJLFdBQVc3TSxFQUFLLElBQUksb0NBQW9DLElBRXJHME4sS0FDTkgsRUFBYSxNQUFNLHFCQUFxQlYsRUFBTyxJQUFJLFdBQVc3TSxFQUFLLElBQUksd0NBQXdDO0FBRW5IO0FBQUEsY0FDSjtBQUFBLFlBQ0o7QUFBQSxVQUNKO0FBRUosUUFBQXFOLEVBQWMsS0FBS3JOLENBQUk7QUFBQSxNQUMzQjtBQUNBLE1BQUFvTixJQUFXQztBQUFBLElBQ2Y7QUFDQSxJQUFBSCxFQUFLLFNBQVMsU0FBU0UsRUFBUyxJQUFJLENBQUNMLE1BQU1BLEVBQUUsSUFBSTtBQUNqRCxVQUFNYSxJQUFRUixFQUFTLElBQUksQ0FBQ0wsTUFBTUMsR0FBa0JELEdBQUdGLEdBQVFDLENBQXNCLENBQUM7QUFDdEYsV0FBSUQsRUFBTyxtQkFDUEYsR0FBYUUsRUFBTyxJQUFJLElBQUlPLElBRXpCUTtBQUFBLEVBQ1gsR0FBRyxFQUFFLE1BQU0sRUFBRSxRQUFRZixFQUFPLEtBQUksR0FBSTtBQUN4QztBQUNPLGVBQWVnQixHQUFlQyxHQUFrQnBDLEdBQVlRLEdBQU9ZLElBQXlCLElBQU87QUFDdEcsUUFBTXZiLElBQU8sTUFBTSxRQUFRdWMsQ0FBZ0IsSUFDckM7QUFBQSxJQUNFLFlBQVlBO0FBQUEsSUFDWixZQUFBcEM7QUFBQSxJQUNBLE9BQUFRO0FBQUEsSUFDQSx3QkFBQVk7QUFBQSxFQUNaLElBQ1VnQixHQUNBLEVBQUUsWUFBQUMsR0FBWSx3QkFBd0JDLElBQWlDLElBQU8sWUFBWUMsR0FBb0IsT0FBT0MsRUFBYSxJQUFNM2MsR0FDeEk0YyxJQUFXLENBQUEsR0FDWEMsSUFBWSxvQkFBSSxJQUFHO0FBQ3pCLGFBQVd2QixLQUFVa0IsR0FBWTtBQUM3QixVQUFNTSxJQUFjLE1BQU16QixHQUEyQjtBQUFBLE1BQ2pELFFBQUFDO0FBQUEsTUFDQSx3QkFBd0JtQjtBQUFBLE1BQ3hCLFlBQVlDO0FBQUEsTUFDWixPQUFPQztBQUFBLElBQ25CLENBQVMsR0FFS0ksSUFBZSxDQUFDLEdBREUsSUFBSSxJQUFJRCxFQUFZLElBQUksQ0FBQ3RCLE1BQU1BLEVBQUUsSUFBSSxDQUFDLENBQ3RCLEVBQUUsT0FBTyxDQUFDMUwsTUFBTStNLEVBQVUsSUFBSS9NLENBQUMsQ0FBQztBQUN4RSxRQUFJaU4sRUFBYSxTQUFTO0FBQ3RCLFlBQU0sSUFBSWhNLEVBQVUsa0RBQWtEZ00sRUFBYSxLQUFLLElBQUksQ0FBQyxFQUFFO0FBRW5HLGVBQVd2QixLQUFLc0I7QUFDWixNQUFBRCxFQUFVLElBQUlyQixFQUFFLElBQUksR0FDcEJvQixFQUFTLEtBQUtwQixDQUFDO0FBQUEsRUFFdkI7QUFDQSxTQUFPb0I7QUFDWDtBQUlPLFNBQVNuQixHQUFrQnVCLEdBQVMxQixHQUFRQyxHQUF3Qjs7QUFDdkUsaUJBQWVoQixFQUFPbmtCLEdBQU82bUIsR0FBVTtBQUNuQyxRQUFJdGQsSUFBTyxDQUFBO0FBQ1gsSUFBSSxPQUFPdkosS0FBVSxZQUFZQSxJQUM3QnVKLElBQU8sS0FBSyxNQUFNdkosQ0FBSyxJQUVsQixPQUFPQSxLQUFVLFlBQVlBLEtBQVMsU0FDM0N1SixJQUFPdko7QUFFWCxVQUFNb2tCLElBQWNDLEdBQWM7QUFDbEMsSUFBSUQsTUFDQUEsRUFBWSxTQUFTLFdBQWMsRUFBRSxRQUFRYyxFQUFPLEtBQUk7QUFFNUQsVUFBTS9LLElBQVUsTUFBTStLLEVBQU8sU0FBUzBCLEVBQVEsTUFBTXJkLENBQUk7QUFDeEQsV0FBTzRRLEVBQVEsV0FBVyxJQUFJQSxFQUFRLENBQUMsSUFBSUE7QUFBQSxFQUMvQztBQUNBLFFBQU05ZSxJQUFTO0FBQUEsSUFDWCxHQUFHdXJCLEVBQVE7QUFBQSxJQUNYLFFBQU03cUIsSUFBQTZxQixFQUFRLGdCQUFSLGdCQUFBN3FCLEVBQXFCLFNBQVE7QUFBQSxJQUNuQyxjQUFZTSxJQUFBdXFCLEVBQVEsZ0JBQVIsZ0JBQUF2cUIsRUFBcUIsZUFBYyxDQUFBO0FBQUEsSUFDL0MsWUFBVWtCLElBQUFxcEIsRUFBUSxnQkFBUixnQkFBQXJwQixFQUFxQixhQUFZLENBQUE7QUFBQSxJQUMzQyx3QkFBc0JvQyxJQUFBaW5CLEVBQVEsZ0JBQVIsZ0JBQUFqbkIsRUFBcUIseUJBQXdCO0FBQUEsRUFDM0U7QUFDSSxNQUFJd2xCLEtBQTBCOXBCLEVBQU8seUJBQXlCO0FBQzFELFFBQUk7QUFDQSxZQUFNeXJCLElBQWVyTyxHQUF1QnBkLENBQU07QUFDbEQsYUFBT2dkLEdBQUs7QUFBQSxRQUNSLE1BQU11TyxFQUFRO0FBQUEsUUFDZCxhQUFhQSxFQUFRLGVBQWU7QUFBQSxRQUNwQyxZQUFZRTtBQUFBLFFBQ1osUUFBUTtBQUFBLFFBQ1IsU0FBUzNDO0FBQUEsTUFDekIsQ0FBYTtBQUFBLElBQ0wsU0FDTzdoQixHQUFHO0FBQ05zakIsTUFBQUEsRUFBYSxLQUFLLCtDQUErQ3RqQixDQUFDLEVBQUU7QUFBQSxJQUN4RTtBQUVKLFFBQU15a0IsSUFBa0I7QUFBQSxJQUNwQixHQUFHMXJCO0FBQUEsSUFDSCxzQkFBc0I7QUFBQSxFQUM5QjtBQUNJLFNBQU9nZCxHQUFLO0FBQUEsSUFDUixNQUFNdU8sRUFBUTtBQUFBLElBQ2QsYUFBYUEsRUFBUSxlQUFlO0FBQUEsSUFDcEMsWUFBWUc7QUFBQSxJQUNaLFFBQVE7QUFBQSxJQUNSLFNBQVM1QztBQUFBLEVBQ2pCLENBQUs7QUFDTDtBQUlBLFNBQVMxTCxHQUF1QnBkLEdBQVE7QUFDcEMsUUFBTTJyQixJQUFNO0FBQUEsSUFDUixHQUFHM3JCO0FBQUEsSUFDSCxzQkFBc0I7QUFBQSxFQUM5QjtBQUNJLFNBQUsyckIsRUFBSSxhQUNMQSxFQUFJLFdBQVcsQ0FBQSxJQUNaQTtBQUNYO0FDbFdPLFNBQVNsRixLQUFVO0FBQ3RCLFNBQU8sQ0FBQTtBQUNYOztBQUNPLE1BQU1tRixHQUFvQjtBQUFBLEVBQTFCO0FBQ0gsSUFBQUMsRUFBQSxNQUFBQyxJQUFVLElBQUksWUFBVztBQUN6QixJQUFBRCxFQUFBLE1BQUFFLElBQW9CLG9CQUFJLElBQUc7QUFBQTtBQUFBLEVBQzNCLEdBQUd0WixHQUFNdVosR0FBVTtBQUNmLFVBQU1DLElBQVl4WjtBQUNsQixRQUFJeVosSUFBbUJDLEVBQUEsTUFBS0osSUFBa0IsSUFBSUUsQ0FBUztBQUMzRCxJQUFLQyxNQUNEQSxJQUFtQixvQkFBSSxJQUFHLEdBQzFCQyxFQUFBLE1BQUtKLElBQWtCLElBQUlFLEdBQVdDLENBQWdCO0FBRTFELFFBQUlFLElBQVdGLEVBQWlCLElBQUlGLENBQVE7QUFDNUMsSUFBS0ksTUFDREEsSUFBVyxvQkFBSSxJQUFHLEdBQ2xCRixFQUFpQixJQUFJRixHQUFVSSxDQUFRO0FBRTNDLFVBQU1DLEtBQVcsQ0FBQ0MsTUFBVU4sRUFBUyxHQUFJTSxFQUFNLFVBQVUsQ0FBQSxDQUFHO0FBQzVELFdBQUFGLEVBQVMsSUFBSUMsQ0FBTyxHQUNwQkYsRUFBQSxNQUFLTCxJQUFRLGlCQUFpQkcsR0FBV0ksQ0FBTyxHQUN6QztBQUFBLEVBQ1g7QUFBQSxFQUNBLElBQUk1WixHQUFNdVosR0FBVTtBQUNoQixVQUFNQyxJQUFZeFosR0FDWnlaLElBQW1CQyxFQUFBLE1BQUtKLElBQWtCLElBQUlFLENBQVMsR0FDdkRHLElBQVdGLEtBQUEsZ0JBQUFBLEVBQWtCLElBQUlGO0FBQ3ZDLFFBQUlJLEtBQUEsUUFBQUEsRUFBVSxNQUFNO0FBQ2hCLGlCQUFXQyxLQUFXRDtBQUNsQixRQUFBRCxFQUFBLE1BQUtMLElBQVEsb0JBQW9CRyxHQUFXSSxDQUFPO0FBRXZELE1BQUFILEtBQUEsUUFBQUEsRUFBa0IsT0FBT0YsS0FDckJFLEtBQUEsZ0JBQUFBLEVBQWtCLFVBQVMsS0FDM0JDLEVBQUEsTUFBS0osSUFBa0IsT0FBT0UsQ0FBUztBQUFBLElBRS9DO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUNBLEtBQUt4WixNQUFTdkUsR0FBTTtBQUNoQixVQUFNb2UsSUFBUSxJQUFJLFlBQVk3WixHQUFNLEVBQUUsUUFBUXZFLEdBQU07QUFDcEQsV0FBT2llLEVBQUEsTUFBS0wsSUFBUSxjQUFjUSxDQUFLO0FBQUEsRUFDM0M7QUFBQSxFQUNBLEtBQUs3WixHQUFNdVosR0FBVTtBQUNqQixVQUFNTyxJQUFVLElBQUlyZSxNQUFTO0FBQ3pCLFdBQUssSUFBSXVFLEdBQU04WixDQUFPLEdBQ3RCUCxFQUFTLEdBQUc5ZCxDQUFJO0FBQUEsSUFDcEI7QUFDQSxnQkFBSyxHQUFHdUUsR0FBTThaLENBQU8sR0FDZDtBQUFBLEVBQ1g7QUFDSjtBQTlDSVQsS0FBQSxlQUNBQyxLQUFBO0FBK0NHLE1BQU1TLEtBQWEsTUFDbEIsT0FBTyxTQUFXLE9BQWUsT0FBTyxhQUNqQyxPQUFPLFdBQVUsSUFFckIsdUNBQXVDLFFBQVEsU0FBUyxTQUFVbFQsR0FBRztBQUN4RSxRQUFNOUMsSUFBSyxLQUFLLE9BQU0sSUFBSyxLQUFNO0FBRWpDLFVBRFU4QyxNQUFNLE1BQU05QyxJQUFLQSxJQUFJLElBQU8sR0FDN0IsU0FBUyxFQUFFO0FBQ3hCLENBQUMsR0FFUWlXLEtBQVcsTUFBZTtBQUFBLEVBQ25DLGNBQWM7QUFBQSxFQUFFO0FBQUEsRUFDaEIsT0FBT0MsR0FBYzFtQixHQUFVO0FBQUEsRUFBRTtBQUFBLEVBQ2pDLFlBQVkybUIsR0FBWTNtQixHQUFVO0FBQUEsRUFBRTtBQUN4QyxHQUNhNG1CLEtBQWlCLFdBQVcsZ0JBRTVCQyxLQUFrQixXQUFXO0FBQ25DLE1BQU1DLEdBQWtCO0FBQUEsRUFFM0IsY0FBYztBQURkLElBQUE1TixFQUFBLGlCQUFVO0FBQUEsRUFDTTtBQUFBLEVBQ2hCLElBQUltSixHQUFTOW9CLEdBQUk7QUFDYixnQkFBSyxVQUFVOG9CLEdBQ1I5b0IsRUFBRTtBQUFBLEVBQ2I7QUFBQSxFQUNBLFdBQVc7QUFDUCxXQUFPLEtBQUs7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsVUFBVThvQixHQUFTO0FBQ2YsU0FBSyxVQUFVQTtBQUFBLEVBQ25CO0FBQ0o7QUFRQSxNQUFNMEUsR0FBYTtBQUFBLEVBQ2YsY0FBYztBQUFBLEVBQUU7QUFBQSxFQUNoQixXQUFXOVAsR0FBVW1HLEdBQUk7QUFDckIsVUFBTTRKLElBQVUsV0FBVy9QLEdBQVVtRyxDQUFFO0FBQ3ZDLFdBQUE0SixFQUFRLE1BQ0osT0FBT0EsRUFBUSxPQUFRLGFBQWFBLEVBQVEsTUFBTSxNQUFNQSxHQUM1REEsRUFBUSxRQUNKLE9BQU9BLEVBQVEsU0FBVSxhQUFhQSxFQUFRLFFBQVEsTUFBTUEsR0FDaEVBLEVBQVEsU0FDSixPQUFPQSxFQUFRLFVBQVcsYUFBYUEsRUFBUSxTQUFTLE1BQU0sSUFDbEVBLEVBQVEsVUFDSixPQUFPQSxFQUFRLFdBQVksYUFBYUEsRUFBUSxVQUFVLE1BQU1BLEdBQzdEQTtBQUFBLEVBQ1g7QUFBQSxFQUNBLGFBQWFDLEdBQVc7QUFDcEIsV0FBTyxhQUFhQSxDQUFTO0FBQUEsRUFDakM7QUFDSjtBQUNBLE1BQU1DLEtBQVEsSUFBSUgsR0FBWTtBQy9HdkIsTUFBTUksR0FBcUI7QUFBQSxFQUM5QixHQUFHMWEsR0FBTXVaLEdBQVU7QUFDZixnQkFBSyxhQUFhLEdBQUd2WixHQUFNdVosQ0FBUSxHQUM1QixLQUFLO0FBQUEsRUFDaEI7QUFBQSxFQUNBLElBQUl2WixHQUFNdVosR0FBVTtBQUNoQixnQkFBSyxhQUFhLElBQUl2WixHQUFNdVosQ0FBUSxHQUM3QixLQUFLO0FBQUEsRUFDaEI7QUFBQSxFQUNBLEtBQUt2WixNQUFTdkUsR0FBTTtBQUNoQixXQUFPLEtBQUssYUFBYSxLQUFLdUUsR0FBTSxHQUFHdkUsQ0FBSTtBQUFBLEVBQy9DO0FBQUEsRUFDQSxLQUFLdUUsR0FBTXVaLEdBQVU7QUFDakIsZ0JBQUssYUFBYSxLQUFLdlosR0FBTXVaLENBQVEsR0FDOUIsS0FBSztBQUFBLEVBQ2hCO0FBQ0o7QUFLTyxNQUFNb0IsV0FBbUJELEdBQXFCO0FBQUEsRUFBOUM7QUFBQTtBQUNILElBQUFqTyxFQUFBLHNCQUFlLElBQUltTyxHQUFtQjtBQUFBO0FBQzFDO0FBS08sTUFBTUMsV0FBaUJILEdBQXFCO0FBQUEsRUFBNUM7QUFBQTtBQUNILElBQUFqTyxFQUFBLHNCQUFlLElBQUltTyxHQUFtQjtBQUFBO0FBQzFDO0FDOUJPLE1BQU1FLEtBQXlDO0FBSS9DLFNBQVNDLEdBQThCQyxHQUFXO0FBQ3JELFNBQUlBLEVBQVUsV0FBVyxZQUFZLElBRTFCLEtBR0pBLEVBQVUsV0FBVyxPQUFPO0FBQ3ZDO0FBTU8sU0FBU0MsS0FBZ0I7QUFDNUIsU0FBT0YsR0FBOEJHLElBQWlCO0FBQzFEO0FBSU8sU0FBU0EsS0FBa0I7O0FBRTlCLFdBQVFqdEIsSUFESStsQixHQUFPLEVBQ1A4RyxFQUFzQyxNQUExQyxnQkFBQTdzQixFQUE2QyxrQkFBaUI7QUFDMUU7QUFNTyxTQUFTa3RCLEdBQXdCQyxHQUFPO0FBQzNDLFFBQU1DLElBQWtCSCxHQUFlO0FBQ3ZDLFNBQUlILEdBQThCTSxDQUFNLElBQzdCO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJSCxXQUFXLEVBQUUsUUFBUSxNQUFLO0FBQUEsSUFDMUIsTUFBTSxFQUFFLFdBQVcsTUFBSztBQUFBLEVBQ3BDLElBRVcsQ0FBQTtBQUNYO0FDbENPLFNBQVNDLEdBQW1CN0UsR0FBTztBQUN0QyxTQUFPLEtBQUssVUFBVSxFQUFFLFdBQVdBLEVBQU0sS0FBSSxDQUFFO0FBQ25EO0FBT0EsU0FBUzhFLEdBQXVCOUUsR0FBTztBQUNuQyxTQUFPLGVBQWU5RyxHQUFtQjhHLEVBQU0sSUFBSSxDQUFDO0FBQ3hEO0FBT0EsU0FBUytFLEdBQThCL0UsR0FBTztBQUMxQyxTQUFPLGtCQUFrQkEsRUFBTSxJQUFJLGlDQUFpQ0EsRUFBTSxzQkFBc0IsRUFBRTtBQUN0RztBQUNPLE1BQU1nRixHQUFRO0FBQUEsRUFnRWpCLFlBQVloRixHQUFPaUYsR0FBaUI7QUE1RHBDO0FBQUE7QUFBQTtBQUFBLElBQUFqUCxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEseUJBQWtCO0FBQUEsTUFDZCxNQUFNO0FBQUEsTUFDTixZQUFZLENBQUE7QUFBQSxNQUNaLFVBQVUsQ0FBQTtBQUFBLE1BQ1Ysc0JBQXNCO0FBQUEsSUFDOUI7QUFLSTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsMEJBQW1CO0FBUW5CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFhQSxJQUFBQSxFQUFBLG1CQUFZLFlBQVk7QUFFcEIsU0FBSyxZQUFZZ0ssRUFBTSxNQUN2QixLQUFLLGtCQUFrQmlGLEdBQ3ZCLEtBQUssV0FBV0gsR0FBdUI5RSxDQUFLLEdBQzVDLEtBQUssa0JBQWtCK0UsR0FBOEIvRSxDQUFLLEdBQzFELEtBQUssUUFBUUE7QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBaEJBLDJCQUEyQjtBQUN2QixXQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixNQUFNLEtBQUs7QUFBQSxNQUNYLGFBQWEsS0FBSztBQUFBLE1BQ2xCLFlBQVksS0FBSztBQUFBLE1BQ2pCLFFBQVEsS0FBSztBQUFBLElBQ3pCO0FBQUEsRUFDSTtBQVNKO0FBVU8sU0FBU2tGLEdBQVFsRixHQUFPbUYsSUFBUyxJQUFJO0FBQ3hDLE1BQUkvb0I7QUFDSixRQUFNZ3BCLElBQWUsQ0FBQyxDQUFDRCxFQUFPLFdBQ3hCRSxJQUFlLENBQUMsQ0FBQ0YsRUFBTztBQUU5QixNQUFJLEVBRHdDQyxNQUFpQkM7QUFFekQsVUFBTSxJQUFJalAsRUFBVSxzRUFBc0U7QUFFOUYsaUJBQWU2TyxFQUFnQjlGLEdBQVNtRyxHQUFpQjs7QUFDckQsUUFBSWxwQixHQUFRO0FBQ1IsVUFBSSxDQUFDa3BCO0FBQ0QsY0FBQUMsR0FBc0I7QUFBQSxVQUNsQixTQUFTLHNEQUFzREQsQ0FBZTtBQUFBLFVBQzlFLE1BQU07QUFBQSxZQUNGLFNBQVM7QUFBQSxVQUNqQztBQUFBLFFBQ0EsQ0FBaUIsR0FDSyxJQUFJblAsR0FBbUIsMkNBQTJDO0FBRTVFLFVBQUk7QUFFQSxjQUFNdUosSUFBUyxNQUFNdGpCLEVBQU9rcEIsQ0FBZTtBQUMzQyxRQUFJSCxFQUFPLGFBQ1AsTUFBTUEsRUFBTyxVQUFVaEcsR0FBU08sQ0FBTTtBQUFBLE1BRTlDLFNBQ09wcEIsR0FBTztBQUNWLGNBQUFpdkIsR0FBc0I7QUFBQSxVQUNsQixTQUFTO0FBQUEsVUFDVCxNQUFNLENBQUE7QUFBQSxRQUMxQixDQUFpQixHQUNJdkgsRUFBTyxtQkFDUkEsRUFBTyxNQUFNLDhCQUE4QnNILENBQWUsWUFBWWh2QixDQUFLLEVBQUUsR0FFM0UsSUFBSTZmLEdBQW1CLHVCQUF1QjtBQUFBLE1BQ3hEO0FBQUEsSUFDSjtBQUVJLGNBQU0zZSxJQUFBMnRCLEVBQU8sY0FBUCxnQkFBQTN0QixFQUFBLEtBQUEydEIsR0FBbUJoRztBQUU3QixXQUFPYTtBQUFBLEVBQ1g7QUFDQSxRQUFNa0YsSUFBVSxJQUFJRixHQUFRaEYsR0FBT2lGLENBQWU7QUFDbEQsTUFBSSxPQUFPRSxFQUFPLGFBQWMsWUFBWTtBQUN4QyxVQUFNbEYsSUFBWWtGLEVBQU87QUFDekIsSUFBQUQsRUFBUSxZQUFZLE9BQU8sRUFBRSxZQUFBMUYsR0FBWSxPQUFBUSxFQUFLLE1BRW5DLEVBRFEsTUFBTUMsRUFBVSxFQUFFLFlBQUFULEdBQVksT0FBQVEsRUFBSyxDQUFFO0FBQUEsRUFHNUQsTUFDSyxDQUFJLE9BQU9tRixFQUFPLGFBQWMsY0FDakNELEVBQVEsWUFBWSxZQUFZQyxFQUFPO0FBRTNDLE1BQUlBLEVBQU8sV0FBVztBQUNsQixVQUFNdnRCLElBQVN1aEIsR0FBZ0NnTSxFQUFPLFdBQVdELEVBQVEsUUFBUTtBQUNqRixJQUFBQSxFQUFRLGtCQUFrQnR0QixFQUFPLFFBQ2pDc3RCLEVBQVEsbUJBQW1CLElBQzNCOW9CLElBQVN4RSxFQUFPO0FBQUEsRUFDcEI7QUFDQSxTQUFJdXRCLEVBQU8scUJBQ1BELEVBQVEsV0FBV0MsRUFBTyxtQkFFMUJBLEVBQU8sNEJBQ1BELEVBQVEsa0JBQWtCQyxFQUFPLDBCQUVqQ0EsRUFBTyxnQkFDUEQsRUFBUSxjQUFjQyxFQUFPLGNBRTFCRDtBQUNYO0FBUU8sU0FBU00sR0FBV3hGLEdBQU87QUFDOUIsU0FBSUEsYUFBaUJnRixLQUNWaEYsSUFFSmtGLEdBQVFsRixDQUFLO0FBQ3hCO0FDOUxPLFNBQVN5RixHQUE2QkMsR0FBZTtBQUl4RCxNQUhJQSxFQUFjLFNBQVMsYUFHdkJBLEVBQWMsU0FBUztBQUN2QjtBQUVKLFFBQU1DLElBQVdELEVBQWMsUUFBUUEsRUFBYyxRQUFRLFNBQVMsQ0FBQztBQUN2RSxNQUFJQyxFQUFTLFNBQVM7QUFHdEIsV0FBT0EsRUFBUztBQUNwQjtBQU1PLFNBQVNDLEdBQWNoTSxHQUFRO0FBQ2xDLFNBQUlBLEVBQU8sT0FBTyxXQUFXLElBQ2xCLEtBRUg2TCxHQUE2QjdMLEVBQU8sT0FBT0EsRUFBTyxPQUFPLFNBQVMsQ0FBQyxDQUFDLEtBQUs7QUFDckY7QUNiQSxNQUFNaU0sS0FBc0Isb0JBQUksUUFBTztBQUNoQyxTQUFTQyxHQUF1QkMsR0FBVUMsR0FBVztBQUN4RCxFQUFJRCxLQUNBRixHQUFvQixJQUFJRSxHQUFVQyxDQUFTO0FBRW5EO0FBQ08sU0FBU0MsR0FBMEJGLEdBQVU7QUFDaEQsUUFBTUMsSUFBWUgsR0FBb0IsSUFBSUUsQ0FBUTtBQUNsRCxTQUFJQyxLQUNBSCxHQUFvQixPQUFPRSxDQUFRLEdBRWhDQztBQUNYO0FBRUEsTUFBTUUsS0FBZ0NoRyxFQUFTLEVBQUUsT0FBT0MsRUFBUSxFQUFFLENBQUUsR0FXdkRnRyxLQUFOLE1BQU1BLFdBQWNqQyxHQUFXO0FBQUEsRUEyQmxDLFlBQVlpQixHQUFRO0FBQ2hCLFVBQUs7QUFmVCxJQUFBblAsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLG9CQUFhO0FBQ2IsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFHUSxlQUFPbVAsRUFBTyxRQUFTLFlBQVlBLEVBQU8sS0FBSyxLQUFJLE1BQU87QUFDMUQsWUFBTSxJQUFJL08sRUFBVSx5QkFBeUI7QUFrQ2pELFFBaENBLEtBQUssT0FBTytPLEVBQU8sTUFDbkIsS0FBSyxlQUFlQSxFQUFPLGdCQUFnQmdCLEdBQU0sMkJBQ2pELEtBQUssU0FBU2hCLEVBQU8sUUFDckIsS0FBSyxxQkFBcUJBLEVBQU8sc0JBQXNCLElBQ3ZELEtBQUssV0FBV0EsRUFBTyxZQUFZLENBQUEsR0FDbkMsS0FBSyxRQUFRQSxFQUFPLFNBQVMsSUFDN0IsS0FBSyxnQkFBZ0JBLEVBQU8saUJBQWlCVCxHQUF1QixHQUNwRSxLQUFLLFFBQVFTLEVBQU8sU0FBUyxDQUFBLEdBQzdCLEtBQUssYUFBYUEsRUFBTyxjQUFjLENBQUEsR0FDdkMsS0FBSyxrQkFBa0JBLEVBQU8sbUJBQW1CLENBQUEsR0FDakQsS0FBSyxtQkFBbUJBLEVBQU8sb0JBQW9CLENBQUEsR0FDL0NBLEVBQU8sZUFDUCxLQUFLLGFBQWFBLEVBQU8sYUFFN0IsS0FBSyxrQkFBa0JBLEVBQU8sbUJBQW1CLGlCQUNqRCxLQUFLLGtCQUFrQkEsRUFBTyxtQkFBbUI7QUFBQSxJQUdqREEsRUFBTyxVQUFVO0FBQUEsSUFFYlgsR0FBYTtBQUFBLEtBRVosT0FBT1csRUFBTyxTQUFVLFlBQ3JCLENBQUNiLEdBQThCYSxFQUFPLEtBQUs7QUFBQSxJQUUvQ0EsRUFBTyxrQkFBa0IsV0FJekIsS0FBSyxnQkFBZ0IsQ0FBQSxLQUdyQkEsRUFBTyxvQ0FBb0MsVUFDM0NBLEVBQU8sb0NBQ0gsS0FBSyxZQUFZLEtBQUssWUFBWTtBQUNsQyxZQUFNaUIsSUFBYyxvQkFBSSxJQUFJLENBQUMsS0FBSyxVQUFVLEtBQUssVUFBVSxDQUFDLENBQUM7QUFDN0QsaUJBQVd0TSxLQUFLLEtBQUs7QUFDakIsUUFBSSxnQkFBZ0JBLEtBQUtBLEVBQUUsYUFDdkJzTSxFQUFZLElBQUksS0FBSyxVQUFVdE0sRUFBRSxVQUFVLENBQUMsSUFFdkMsV0FBV0EsS0FBS0EsRUFBRSxNQUFNLGNBQzdCc00sRUFBWSxJQUFJLEtBQUssVUFBVXRNLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFHMUQsTUFBSXNNLEVBQVksT0FBTyxLQUNuQnBJLEVBQU8sS0FBSyxnRUFBZ0UsTUFBTSxLQUFLb0ksQ0FBVyxFQUFFLEtBQUssSUFBSSxDQUFDLDRFQUE0RTtBQUFBLElBRWxNO0FBQUEsRUFFUjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBN0VBLE9BQU8sT0FBT2pCLEdBQVE7QUFDbEIsV0FBTyxJQUFJZ0IsR0FBTTtBQUFBLE1BQ2IsR0FBR2hCO0FBQUEsTUFDSCxVQUFVQSxFQUFPO0FBQUEsTUFDakIsWUFBWUEsRUFBTztBQUFBLE1BQ25CLGlDQUFpQztBQUFBLElBQzdDLENBQVM7QUFBQSxFQUNMO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUEwRUEsSUFBSSxtQkFBbUI7QUFDbkIsUUFBSSxLQUFLLGVBQWU7QUFDcEIsYUFBTztBQUVOLFFBQUlyTyxHQUFZLEtBQUssVUFBVTtBQUNoQyxhQUFPO0FBRU4sUUFBSSxPQUFPLEtBQUssY0FBZTtBQUNoQyxhQUFPLEtBQUssV0FBVztBQUUzQixVQUFNLElBQUksTUFBTSx3QkFBd0IsS0FBSyxVQUFVLEVBQUU7QUFBQSxFQUM3RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFXQSxNQUFNcU8sR0FBUTtBQUNWLFdBQU8sSUFBSWdCLEdBQU07QUFBQSxNQUNiLEdBQUc7QUFBQSxNQUNILEdBQUdoQjtBQUFBLElBQ2YsQ0FBUztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWFBLE9BQU8xb0IsR0FBUztBQUNaLFVBQU0sRUFBRSxVQUFBNHBCLEdBQVUsaUJBQUFDLEdBQWlCLHVCQUFBQyxHQUF1QixlQUFBeEcsR0FBZSxXQUFBeUcsR0FBVyxZQUFBQyxHQUFZLFdBQUFoSixFQUFTLElBQU1oaEI7QUFDL0csV0FBT3FYLEdBQUs7QUFBQSxNQUNSLE1BQU11UyxLQUFZbk4sR0FBbUIsS0FBSyxJQUFJO0FBQUEsTUFDOUMsYUFBYW9OLEtBQW1CO0FBQUEsTUFDaEMsWUFBWUo7QUFBQSxNQUNaLFFBQVE7QUFBQSxNQUNSLGVBQUFuRztBQUFBLE1BQ0EsV0FBQXRDO0FBQUEsTUFDQSxTQUFTLE9BQU83ZSxHQUFNdWdCLEdBQVNNLE1BQVk7QUFDdkMsWUFBSSxDQUFDMUksR0FBaUJuWSxDQUFJO0FBQ3RCLGdCQUFNLElBQUl1WCxHQUFtQixzQ0FBc0M7QUFPdkUsY0FBTXVRLElBSlMsTUFEQSxJQUFJQyxHQUFPSCxLQUFhLENBQUEsQ0FBRSxFQUNiLElBQUksTUFBTTVuQixFQUFLLE9BQU87QUFBQSxVQUM5QyxTQUFBdWdCO0FBQUEsVUFDQSxHQUFJc0gsS0FBYyxDQUFBO0FBQUEsUUFDdEMsQ0FBaUIsR0FFS0csSUFBc0IsT0FBTyxLQUFLLG1CQUFvQixZQUN4RCxLQUFLLG9CQUFvQixRQUN6QixxQkFBcUIsS0FBSztBQUM5QixRQUFJLE9BQU9MLEtBQTBCLGNBQ2pDSyxLQUNBNUksRUFBTyxNQUFNLG1DQUFtQyxLQUFLLElBQUksME1BQTBNO0FBRXZRLGNBQU02SSxJQUFhLE9BQU9OLEtBQTBCLGFBQzlDLE1BQU1BLEVBQXNCRyxDQUFlLElBQzNDZCxHQUFjYyxFQUFnQixhQUFhQSxFQUFnQixhQUFhLFNBQVMsQ0FBQyxDQUFDO0FBQ3pGLGVBQUlqSCxLQUFBLFFBQUFBLEVBQVMsWUFDVHFHLEdBQXVCckcsRUFBUSxVQUFVaUgsQ0FBZSxHQUVyREc7QUFBQSxNQUNYO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxnQkFBZ0JySCxHQUFZO0FBQzlCLFdBQUksT0FBTyxLQUFLLGdCQUFpQixhQUN0QixNQUFNLEtBQUssYUFBYUEsR0FBWSxJQUFJLElBRTVDLEtBQUs7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxVQUFVQSxHQUFZO0FBQ3hCLFdBQUksT0FBTyxLQUFLLFVBQVcsYUFDaEIsTUFBTSxLQUFLLE9BQU9BLEdBQVksSUFBSSxJQUV0QyxLQUFLO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxZQUFZQSxHQUFZO0FBQzFCLFdBQUksS0FBSyxXQUFXLFNBQVMsSUFDbEJtQyxHQUFlO0FBQUEsTUFDbEIsWUFBWSxLQUFLO0FBQUEsTUFDakIsWUFBQW5DO0FBQUEsTUFDQSxPQUFPO0FBQUEsTUFDUCx3QkFBd0I7QUFBQSxJQUN4QyxDQUFhLElBRUUsQ0FBQTtBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxNQUFNLFlBQVlBLEdBQVk7QUFDMUIsVUFBTTBCLElBQVcsTUFBTSxLQUFLLFlBQVkxQixDQUFVLEdBQzVDc0gsSUFBZSxDQUFBO0FBQ3JCLGVBQVdwUSxLQUFhLEtBQUssT0FBTztBQUNoQyxVQUFJQSxFQUFVLFNBQVMsWUFBWTtBQUMvQixjQUFNcVEsSUFBaUJyUSxFQUFVO0FBTWpDLFlBQUksRUFMWSxPQUFPcVEsS0FBbUIsYUFDcEMsTUFBTUEsRUFBZXZILEdBQVksSUFBSSxJQUNyQyxPQUFPdUgsS0FBbUIsWUFDdEJBLElBQ0E7QUFFTjtBQUFBLE1BRVI7QUFDQSxNQUFBRCxFQUFhLEtBQUtwUSxDQUFTO0FBQUEsSUFDL0I7QUFDQSxXQUFPLENBQUMsR0FBR3dLLEdBQVUsR0FBRzRGLENBQVk7QUFBQSxFQUN4QztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLE1BQU0sbUJBQW1CdEgsR0FBWTs7QUFDakMsVUFBTXdILE1BQVd4dkIsSUFBQSxLQUFLLGFBQUwsZ0JBQUFBLEVBQWUsSUFBSSxDQUFDc2lCLE1BQU0wTCxHQUFXMUwsQ0FBQyxPQUFNLENBQUEsR0FDdkRtQixJQUFVLENBQUE7QUFDaEIsZUFBV2lLLEtBQVc4QjtBQUNsQixNQUFJLE1BQU05QixFQUFRLFVBQVUsRUFBRSxZQUFBMUYsR0FBWSxPQUFPLEtBQUksQ0FBRSxLQUNuRHZFLEVBQVEsS0FBS2lLLENBQU87QUFHNUIsV0FBT2pLO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsbUJBQW1CckIsR0FBUTtBQUN2QixRQUFJLEtBQUssZUFBZTtBQUNwQixhQUFPQTtBQUVYLFFBQUksT0FBTyxLQUFLLGNBQWUsVUFBVTtBQUNyQyxZQUFNOEYsSUFBUyxLQUFLLE1BQU05RixDQUFNO0FBQ2hDLGFBQUk5QyxHQUFZLEtBQUssVUFBVSxJQUNwQixLQUFLLFdBQVcsTUFBTTRJLENBQU0sSUFFaENBO0FBQUEsSUFDWDtBQUNBLFVBQU0sSUFBSSxNQUFNLHdCQUF3QixLQUFLLFVBQVUsRUFBRTtBQUFBLEVBQzdEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILE1BQU0sS0FBSztBQUFBLElBQ3ZCO0FBQUEsRUFDSTtBQUNKO0FBaFFJMUosRUFaU21RLElBWUYsNkJBQTRCO0FBWmhDLElBQU1jLEtBQU5kO0FDckNBLFNBQVNlLEdBQXFCLEVBQUUsTUFBQWxxQixHQUFNLFNBQUFtcUIsS0FBWTtBQUNyRCxTQUFPO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFBbnFCO0FBQUEsSUFDQSxtQkFBbUJtcUI7QUFBQSxJQUNuQixNQUFNLElBQUluaUIsR0FBTTtBQUNaLGFBQU87QUFBQSxRQUNILFdBQVcsRUFBRSxNQUFNLFNBQVMsTUFBQWhJLEVBQUk7QUFBQSxRQUNoQyxRQUFRLE1BQU1tcUIsRUFBUW5pQixDQUFJO0FBQUEsTUFDMUM7QUFBQSxJQUNRO0FBQUEsRUFDUjtBQUNBO0FBSU8sU0FBU29pQixHQUFzQixFQUFFLE1BQUFwcUIsR0FBTSxTQUFBbXFCLEtBQVk7QUFDdEQsU0FBTztBQUFBLElBQ0gsTUFBTTtBQUFBLElBQ04sTUFBQW5xQjtBQUFBLElBQ0EsbUJBQW1CbXFCO0FBQUEsSUFDbkIsTUFBTSxJQUFJbmlCLEdBQU07QUFDWixhQUFPO0FBQUEsUUFDSCxXQUFXLEVBQUUsTUFBTSxVQUFVLE1BQUFoSSxFQUFJO0FBQUEsUUFDakMsT0FBT2dJLEVBQUs7QUFBQSxRQUNaLGFBQWFBLEVBQUs7QUFBQSxRQUNsQixRQUFRLE1BQU1taUIsRUFBUW5pQixDQUFJO0FBQUEsTUFDMUM7QUFBQSxJQUNRO0FBQUEsRUFDUjtBQUNBO0FDbkJPLFNBQVNxaUIsS0FBMEI7QUFFbEMsUUFBTSxJQUFJLE1BQU0sK0pBQStKO0FBR3ZMO0FDWE8sTUFBTUMsS0FBYXBILEVBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSy9CLGNBQWNHLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUTtBQUN4RCxDQUFDLEdBSVlpSCxLQUFXRCxHQUFXLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3RDLElBQUluSCxFQUFRLEVBQUcsU0FBUTtBQUMzQixDQUFDLEdBSVlxSCxLQUFVRixHQUFXLE9BQU87QUFBQSxFQUNyQyxNQUFNbEgsRUFBVSxTQUFTO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekIsU0FBU0QsRUFBUTtBQUNyQixDQUFDLEdBQ1lzSCxLQUFhSCxHQUFXLE9BQU87QUFBQSxFQUN4QyxNQUFNbEgsRUFBVSxhQUFhO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJN0IsTUFBTUQsRUFBUTtBQUNsQixDQUFDLEdBQ1l1SCxLQUFZSixHQUFXLE9BQU87QUFBQSxFQUN2QyxNQUFNbEgsRUFBVSxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJNUIsTUFBTUQsRUFBUTtBQUNsQixDQUFDLEdBQ1l3SCxLQUFnQkwsR0FBVyxPQUFPO0FBQUEsRUFDM0MsTUFBTWxILEVBQVUsZ0JBQWdCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJaEMsTUFBTUQsRUFBUTtBQUNsQixDQUFDLEdBQ1l5SCxLQUFhTixHQUFXLE9BQU87QUFBQSxFQUN4QyxNQUFNbEgsRUFBVSxhQUFhO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUs3QixPQUFPeUgsRUFFSSxFQUVOLEdBQUczSCxFQUFTLEVBQUUsSUFBSUMsRUFBUSxFQUFHLFNBQVMsZ0JBQWdCLEdBQUcsQ0FBQyxFQUMxRCxTQUFTLDRFQUE0RSxFQUNyRixTQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtiLFFBQVFBLEVBQVEsRUFBRyxTQUFRO0FBQy9CLENBQUMsR0FDWTJILEtBQVlSLEdBQVcsT0FBTztBQUFBLEVBQ3ZDLE1BQU1sSCxFQUFVLFlBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUk1QixNQUFNMkgsRUFFSyxFQUNOLFNBQVMsbUVBQW1FLEVBRTVFLEdBQUc3SCxFQUFTLEVBQUUsSUFBSUMsRUFBUSxFQUFHLFNBQVMsZ0JBQWdCLEdBQUcsQ0FBQyxFQUUxRCxHQUFHRCxFQUFTLEVBQUUsS0FBS0MsRUFBUSxFQUFHLFNBQVMsOEJBQThCLEdBQUcsQ0FBQyxFQUN6RSxTQUFTLG1EQUFtRCxFQUM1RCxTQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJYixVQUFVQSxFQUFRLEVBQUcsU0FBUTtBQUNqQyxDQUFDLEdBQ1k2SCxLQUFlVixHQUFXLE9BQU87QUFBQSxFQUMxQyxNQUFNbEgsRUFBVSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsT0FBTzZILEVBQ0ksRUFDTixHQUFHL0gsRUFBUztBQUFBLElBQ2IsSUFBSUMsRUFBUTtBQUFBLEVBQ3BCLENBQUssQ0FBQyxFQUNHLFNBQVMsc0NBQXNDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJcEQsUUFBUUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdEMsWUFBWUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQzlDLENBQUMsR0FDWStILEtBQWVaLEdBQVcsT0FBTztBQUFBLEVBQzFDLE1BQU1sSCxFQUFVLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl2QixPQUFPRCxFQUFRLEVBQUcsU0FBUywyQkFBMkI7QUFDMUQsQ0FBQyxHQUNZZ0ksS0FBaUJiLEdBQVcsT0FBTztBQUFBLEVBQzVDLE1BQU1sSCxFQUFVLE1BQU07QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl0QixNQUFNRCxFQUFRO0FBQ2xCLENBQUMsR0FDS2lJLEtBQXdCbEksRUFBUztBQUFBLEVBQ25DLE1BQU1tSSxHQUNLLENBQUNsSSxFQUFRLEdBQUltSSxHQUFhLFVBQVUsQ0FBQyxDQUFDLEVBQzVDLFNBQVMsNEVBQTRFO0FBQUEsRUFDMUYsV0FBV25JLEVBQVEsRUFBRyxTQUFRO0FBQ2xDLENBQUMsR0FDS29JLEtBQXVCckksRUFBUztBQUFBLEVBQ2xDLEtBQUsrSCxFQUNNLEVBQ04sU0FBUyx1REFBdUQ7QUFDekUsQ0FBQyxHQUNLTyxLQUEwQnRJLEVBQVM7QUFBQSxFQUNyQyxRQUFRK0gsRUFDRyxFQUNOLFNBQVMsbURBQW1EO0FBQ3JFLENBQUMsR0FDS1EsS0FBb0JDLEdBQ2YsQ0FBQ04sSUFBdUJHLElBQXNCQyxFQUF1QixDQUFDLEVBQzVFLFNBQVMsc0RBQXNELEdBQzlERyxLQUF1QnpJLEVBQVM7QUFBQSxFQUNsQyxNQUFNbUksR0FDSyxDQUFDbEksRUFBUSxHQUFJbUksR0FBYSxVQUFVLENBQUMsQ0FBQyxFQUM1QyxTQUFTLDRFQUE0RTtBQUFBLEVBQzFGLFdBQVdMLEVBQ0EsRUFDTixTQUFTLDhDQUE4QztBQUFBLEVBQzVELFVBQVU5SCxFQUFRLEVBQUcsU0FBUywwQ0FBMEM7QUFDNUUsQ0FBQyxHQUNLeUksS0FBc0IxSSxFQUFTO0FBQUEsRUFDakMsS0FBS0MsRUFBUSxFQUFHLFNBQVMsOENBQThDO0FBQUEsRUFDdkUsVUFBVUEsRUFBUSxFQUFHLFNBQVE7QUFDakMsQ0FBQyxHQUNLMEksS0FBcUIzSSxFQUFTO0FBQUEsRUFDaEMsSUFBSUMsRUFBUSxFQUFHLFNBQVMsNkNBQTZDO0FBQUEsRUFDckUsVUFBVUEsRUFBUSxFQUFHLFNBQVE7QUFDakMsQ0FBQyxHQUNLMkksS0FBc0JKLEdBQ2pCO0FBQUEsRUFDUHZJLEVBQVEsRUFBRyxTQUFTLG9DQUFvQztBQUFBLEVBQ3hEd0k7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQ0osQ0FBQyxFQUNJLFNBQVMsc0VBQXNFLEdBQzlFRSxLQUFtQixJQUFJQyxNQUFXN0ksRUFBUSxHQUNuQzhJLEtBQWtCM0IsR0FBVyxPQUFPO0FBQUEsRUFDN0MsTUFBTWxILEVBQVUsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLdkIsT0FBT0QsRUFBUSxFQUFHLEdBQUdzSSxFQUFpQixFQUFFLFNBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS2hELFFBQVFNLEdBQWlCLE9BQU8sUUFBUSxNQUFNLEVBQUUsU0FBUTtBQUM1RCxDQUFDLEdBQ1lHLEtBQXdCNUIsR0FBVyxPQUFPO0FBQUEsRUFDbkQsTUFBTWxILEVBQVUsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLdEIsTUFBTTBJO0FBQ1YsQ0FBQyxHQUNZSyxLQUFxQjdCLEdBQVcsT0FBTztBQUFBLEVBQ2hELE1BQU1sSCxFQUFVLHFCQUFxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXJDLE1BQU1ELEVBQVEsRUFBRyxTQUFTLGtDQUFrQztBQUNoRSxDQUFDLEdBQ1lpSixLQUFrQkMsR0FBcUIsUUFBUTtBQUFBLEVBQ3hEbkosRUFBUyxFQUFFLE1BQU1FLEVBQVUsWUFBWSxFQUFDLENBQUU7QUFBQSxFQUMxQ0YsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxPQUFPO0FBQUEsSUFDdkIsR0FBR2tKLEVBQVE7QUFBQSxJQUNYLEdBQUdBLEVBQVE7QUFBQSxJQUNYLFFBQVFDLEdBQU8sQ0FBQyxRQUFRLFNBQVMsU0FBUyxRQUFRLFNBQVMsQ0FBQztBQUFBLEVBQ3BFLENBQUs7QUFBQSxFQUNEckosRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxjQUFjO0FBQUEsSUFDOUIsR0FBR2tKLEVBQVE7QUFBQSxJQUNYLEdBQUdBLEVBQVE7QUFBQSxFQUNuQixDQUFLO0FBQUEsRUFDRHBKLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsUUFBUTtBQUFBLElBQ3hCLEdBQUdrSixFQUFRO0FBQUEsSUFDWCxHQUFHQSxFQUFRO0FBQUEsSUFDWCxVQUFVQSxFQUFRO0FBQUEsSUFDbEIsVUFBVUEsRUFBUTtBQUFBLEVBQzFCLENBQUs7QUFBQSxFQUNEcEosRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxNQUFNO0FBQUEsSUFDdEIsTUFBTUQsRUFBUTtBQUFBLEVBQ3RCLENBQUs7QUFBQSxFQUNERCxFQUFTLEVBQUUsTUFBTUUsRUFBVSxNQUFNLEVBQUMsQ0FBRTtBQUFBLEVBQ3BDRixFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLE1BQU07QUFBQSxJQUN0QixHQUFHa0osRUFBUTtBQUFBLElBQ1gsR0FBR0EsRUFBUTtBQUFBLEVBQ25CLENBQUs7QUFBQSxFQUNEcEosRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxVQUFVO0FBQUEsSUFDMUIsTUFBTUcsRUFBUUosR0FBVTtBQUFBLEVBQ2hDLENBQUs7QUFBQSxFQUNERCxFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLE1BQU07QUFBQSxJQUN0QixNQUFNRyxFQUFRTCxFQUFTLEVBQUUsR0FBR29KLEVBQVEsR0FBSSxHQUFHQSxFQUFRLEVBQUUsQ0FBRSxDQUFDO0FBQUEsRUFDaEUsQ0FBSztBQUNMLENBQUMsR0FJWUUsS0FBbUJILEdBQXFCLFFBQVE7QUFBQSxFQUN6RDVCO0FBQUEsRUFDQUQ7QUFBQSxFQUNBUTtBQUFBLEVBQ0FFO0FBQ0osQ0FBQyxHQUNLdUIsS0FBY2xDLEdBQVMsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSWhDLE1BQU1uSCxFQUFVLFNBQVMsRUFBRSxTQUFRO0FBQ3ZDLENBQUMsR0FDWXNKLEtBQXVCRCxHQUFZLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUluRCxNQUFNckosRUFBVSxXQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJM0IsUUFBUW1KLEdBQU8sQ0FBQyxlQUFlLGFBQWEsWUFBWSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekQsU0FBU2hKLEVBQVFpSixFQUFnQjtBQUNyQyxDQUFDLEdBQ1lHLEtBQWNOLEdBQXFCLFFBQVE7QUFBQSxFQUNwRDNCO0FBQUEsRUFDQUU7QUFBQSxFQUNBRTtBQUFBLEVBQ0FFO0FBQ0osQ0FBQyxHQUNZNEIsS0FBa0JILEdBQVksT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLOUMsTUFBTXJKLEVBQVUsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXRCLFNBQVNHLEVBQVFvSixFQUFXLEVBQUUsR0FBR3hKLEVBQVEsQ0FBRTtBQUMvQyxDQUFDLEdBQ0swSixLQUFvQkosR0FBWSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUt6QyxNQUFNckosRUFBVSxRQUFRO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJeEIsU0FBU0QsRUFBUTtBQUNyQixDQUFDO0FBQzBCa0osR0FBcUIsUUFBUTtBQUFBLEVBQ3BEUTtBQUFBLEVBQ0FIO0FBQUEsRUFDQUU7QUFDSixDQUFDO0FBSU0sTUFBTUUsS0FBcUJ2QyxHQUFTLE9BQU87QUFBQSxFQUM5QyxNQUFNbkgsRUFBVSxrQkFBa0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlsQyxNQUFNRCxFQUFRLEVBQUcsU0FBUyw2QkFBNkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl2RCxXQUFXOEgsRUFDQSxFQUNOLFNBQVMsdUNBQXVDLEVBQ2hELFNBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUliLFFBQVE5SCxFQUFRLEVBQUcsU0FBUTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSTNCLFFBQVFBLEVBQVEsRUFBRyxTQUFRO0FBQy9CLENBQUMsR0FDWTRKLEtBQW1CeEMsR0FBUyxPQUFPO0FBQUEsRUFDNUMsTUFBTW5ILEVBQVUsZUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSS9CLFFBQVFELEVBQVEsRUFBRyxTQUFTLHlCQUF5QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXJELE1BQU1BLEVBQVEsRUFBRyxTQUFTLDBCQUEwQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXBELFFBQVFvSixHQUFPLENBQUMsZUFBZSxhQUFhLFlBQVksQ0FBQyxFQUFFLFNBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUluRSxXQUFXcEosRUFBUTtBQUN2QixDQUFDLEdBQ1k2SixLQUF3QlgsR0FBcUIsUUFBUTtBQUFBLEVBQzlEbEI7QUFBQSxFQUNBYztBQUFBLEVBQ0FDO0FBQ0osQ0FBQyxHQUNZZSxLQUEyQlosR0FBcUIsUUFBUTtBQUFBLEVBQ2pFM0I7QUFBQSxFQUNBRTtBQUFBLEVBQ0FFO0FBQ0osQ0FBQyxHQUNZb0MsS0FBeUIzQyxHQUFTLE9BQU87QUFBQSxFQUNsRCxNQUFNbkgsRUFBVSxzQkFBc0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl0QyxNQUFNRCxFQUFRLEVBQUcsU0FBUyxzQkFBc0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUloRCxRQUFRQSxFQUFRLEVBQUcsU0FBUyx5QkFBeUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlyRCxRQUFRb0osR0FBTyxDQUFDLGVBQWUsYUFBYSxZQUFZLENBQUM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl6RCxRQUFRbEIsR0FDRztBQUFBLElBQ1BsSSxFQUFRO0FBQUEsSUFDUjZKO0FBQUEsSUFDQXpKLEVBQVEwSixFQUF3QjtBQUFBLEVBQ3hDLENBQUssRUFDSSxTQUFTLGlIQUFpSDtBQUNuSSxDQUFDLEdBQ1lFLEtBQXNCNUMsR0FBUyxPQUFPO0FBQUEsRUFDL0MsTUFBTW5ILEVBQVUsZUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSS9CLFFBQVFELEVBQVEsRUFBRyxTQUFTLDZCQUE2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXpELFFBQVFvSixHQUFPLENBQUMsZUFBZSxhQUFhLFlBQVksQ0FBQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXpELFFBQVFIO0FBQ1osQ0FBQyxHQUNZZ0IsS0FBeUI3QyxHQUFTLE9BQU87QUFBQSxFQUNsRCxNQUFNbkgsRUFBVSxzQkFBc0I7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl0QyxRQUFRRCxFQUFRLEVBQUcsU0FBUyw2QkFBNkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl6RCxRQUFRZ0o7QUFDWixDQUFDLEdBQ1lrQixLQUFlaEIsR0FBcUIsUUFBUTtBQUFBLEVBQ3JEYztBQUFBLEVBQ0FKO0FBQUEsRUFDQUQ7QUFDSixDQUFDLEdBSVlRLEtBQWdCaEQsR0FBVyxPQUFPO0FBQUEsRUFDM0MsSUFBSW5ILEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDdkIsTUFBTUMsRUFBVSxXQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJM0IsU0FBU0csRUFBUW1ILEVBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUkxQixZQUFZbkgsRUFBUW9ILEVBQWEsRUFBRSxTQUFRO0FBQy9DLENBQUMsR0FVWTRDLEtBQWNoRCxHQUFTLE9BQU87QUFBQSxFQUN2QyxNQUFNbkgsRUFBVSxTQUFTO0FBQzdCLENBQUMsR0FJWW9LLEtBQWtCbkIsR0FBcUIsUUFBUTtBQUFBLEVBQ3hESztBQUFBLEVBQ0FJO0FBQUEsRUFDQUM7QUFBQSxFQUNBSTtBQUFBLEVBQ0FHO0FBQUEsRUFDQUM7QUFDSixDQUFDLEdBQ1lFLEtBQVlDLEdBQVE7QUFBQSxFQUM3QmQ7QUFBQSxFQUNBRjtBQUFBLEVBQ0FHO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FJO0FBQUEsRUFDQUQ7QUFBQSxFQUNBRTtBQUFBLEVBQ0FFO0FBQUEsRUFDQUM7QUFDSixDQUFDLEdBSVlJLEtBQVl6SyxFQUFTO0FBQUEsRUFDOUIsVUFBVW9KLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDN0IsYUFBYUEsRUFBUTtBQUFBLEVBQ3JCLGNBQWNBLEVBQVE7QUFBQSxFQUN0QixhQUFhQSxFQUFRO0FBQUEsRUFDckIsb0JBQW9CakosR0FBU0YsRUFBUSxHQUFJbUosRUFBUSxDQUFFLEVBQUUsU0FBUTtBQUFBLEVBQzdELHFCQUFxQmpKLEdBQVNGLEVBQVEsR0FBSW1KLEVBQVEsQ0FBRSxFQUFFLFNBQVE7QUFDbEUsQ0FBQyxHQU9Zc0IsS0FBd0J0RCxHQUFXLE9BQU87QUFBQSxFQUNuRCxNQUFNbEgsRUFBVSxtQkFBbUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUluQyxPQUFPRCxFQUFRO0FBQ25CLENBQUMsR0FJWTBLLEtBQTZCdkQsR0FBVyxPQUFPO0FBQUEsRUFDeEQsTUFBTWxILEVBQVUsa0JBQWtCO0FBQ3RDLENBQUMsR0FJWTBLLEtBQStCeEQsR0FBVyxPQUFPO0FBQUEsRUFDMUQsTUFBTWxILEVBQVUsZUFBZTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSS9CLFVBQVVrSCxHQUFXLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUl4QixJQUFJbkgsRUFBUTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBSVosT0FBT3dLO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJUCxRQUFRcEssRUFBUWlLLEVBQWU7QUFBQSxFQUN2QyxDQUFLO0FBQ0wsQ0FBQyxHQUtZTyxLQUF5QnpELEdBQVcsT0FBTztBQUFBLEVBQ3BELE1BQU1sSCxFQUFVLE9BQU87QUFBQSxFQUN2QixPQUFPRSxFQUFLLEVBQUcsU0FBUywwQkFBMEI7QUFDdEQsQ0FBQztBQUMwQitJLEdBQXFCLFFBQVE7QUFBQSxFQUNwRHVCO0FBQUEsRUFDQUU7QUFBQSxFQUNBRDtBQUFBLEVBQ0FFO0FBQ0osQ0FBQztBQzdnQk0sTUFBTUMsR0FBTTtBQUFBLEVBeUJmLFlBQVl2dkIsR0FBTztBQXJCbkI7QUFBQTtBQUFBO0FBQUEsSUFBQXVhLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBLDRCQUFxQixDQUFBO0FBSXJCO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsNkJBQXNCLENBQUE7QUFFbEIsUUFBSSxPQUFPdmEsSUFBVTtBQUNqQixXQUFLLFdBQVcsR0FDaEIsS0FBSyxjQUFjLEdBQ25CLEtBQUssZUFBZSxHQUNwQixLQUFLLGNBQWMsR0FDbkIsS0FBSyxxQkFBcUIsQ0FBQSxHQUMxQixLQUFLLHNCQUFzQixDQUFBO0FBQUEsU0FFMUI7QUFDRCxXQUFLLFlBQVdBLEtBQUEsZ0JBQUFBLEVBQU8sYUFBWSxHQUNuQyxLQUFLLGVBQWNBLEtBQUEsZ0JBQUFBLEVBQU8saUJBQWVBLEtBQUEsZ0JBQUFBLEVBQU8saUJBQWdCLEdBQ2hFLEtBQUssZ0JBQWVBLEtBQUEsZ0JBQUFBLEVBQU8sa0JBQWdCQSxLQUFBLGdCQUFBQSxFQUFPLGtCQUFpQixHQUNuRSxLQUFLLGVBQWNBLEtBQUEsZ0JBQUFBLEVBQU8saUJBQWVBLEtBQUEsZ0JBQUFBLEVBQU8saUJBQWdCO0FBQ2hFLFlBQU13dkIsS0FBcUJ4dkIsS0FBQSxnQkFBQUEsRUFBTyx3QkFBc0JBLEtBQUEsZ0JBQUFBLEVBQU87QUFDL0QsV0FBSyxxQkFBcUJ3dkIsSUFDcEIsQ0FBQ0EsQ0FBa0IsSUFDbkIsQ0FBQTtBQUNOLFlBQU1DLEtBQXNCenZCLEtBQUEsZ0JBQUFBLEVBQU8seUJBQXVCQSxLQUFBLGdCQUFBQSxFQUFPO0FBQ2pFLFdBQUssc0JBQXNCeXZCLElBQ3JCLENBQUNBLENBQW1CLElBQ3BCLENBQUE7QUFBQSxJQUNWO0FBQUEsRUFDSjtBQUFBLEVBQ0EsSUFBSUMsR0FBVTtBQUNWLFNBQUssWUFBWUEsRUFBUyxVQUMxQixLQUFLLGVBQWVBLEVBQVMsYUFDN0IsS0FBSyxnQkFBZ0JBLEVBQVMsY0FDOUIsS0FBSyxlQUFlQSxFQUFTLGFBQ3pCQSxFQUFTLHNCQUVULEtBQUssbUJBQW1CLEtBQUssR0FBR0EsRUFBUyxrQkFBa0IsR0FFM0RBLEVBQVMsdUJBRVQsS0FBSyxvQkFBb0IsS0FBSyxHQUFHQSxFQUFTLG1CQUFtQjtBQUFBLEVBRXJFO0FBQ0o7O0FDOURPLE1BQU1DLEdBQVc7QUFBQSxFQWNwQixZQUFZak0sSUFBVSxJQUFJO0FBVjFCO0FBQUE7QUFBQTtBQUFBLElBQUFuSixFQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQTJNLEVBQUEsTUFBQTBJO0FBRUksU0FBSyxVQUFVbE0sR0FDZixLQUFLLFFBQVEsSUFBSTZMLEdBQUssR0FDdEJNLEVBQUEsTUFBS0QsSUFBYSxvQkFBSSxJQUFHO0FBQUEsRUFDN0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGtCQUFrQkUsR0FBVztBQUN6QixJQUFBRCxFQUFBLE1BQUtELElBQWEsSUFBSSxJQUFJLE9BQU8sUUFBUUUsQ0FBUyxDQUFDO0FBQUEsRUFDdkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLGVBQWVDLEdBQVU7QUFDckIsVUFBTSxFQUFFLFVBQUFuRixHQUFVLFFBQUFvRixFQUFNLElBQUtELEdBQ3ZCRSxJQUFnQnpJLEVBQUEsTUFBS29JLElBQVcsSUFBSWhGLENBQVE7QUFDbEQsU0FBSXFGLEtBQUEsZ0JBQUFBLEVBQWUsY0FBYSxNQUFRQSxFQUFjLGFBQWE7QUFDL0QxTixhQUFBQSxFQUFPLEtBQUssdUZBQXVGLEdBQzVGO0FBRVgsU0FBSTBOLEtBQUEsZ0JBQUFBLEVBQWUsY0FBYTtBQUM1QixhQUFPO0FBRVgsU0FBSUEsS0FBQSxnQkFBQUEsRUFBZSxjQUFhO0FBQzVCLGFBQU87QUFFWCxVQUFNQyxJQUF5QixNQUFNLFFBQVFELEtBQUEsZ0JBQUFBLEVBQWUsUUFBUSxJQUM5REEsRUFBYyxTQUFTLFNBQVNELENBQU0sSUFDdEMsSUFDQUcsSUFBMEIsTUFBTSxRQUFRRixLQUFBLGdCQUFBQSxFQUFlLFFBQVEsSUFDL0RBLEVBQWMsU0FBUyxTQUFTRCxDQUFNLElBQ3RDO0FBQ04sUUFBSUUsS0FBMEJDO0FBQzFCNU4sYUFBQUEsRUFBTyxLQUFLLGFBQWF5TixDQUFNLDRFQUE0RSxHQUNwRztBQUVYLFFBQUlFO0FBQ0EsYUFBTztBQUVYLFFBQUlDO0FBQ0EsYUFBTztBQUFBLEVBR2Y7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLFlBQVlDLEdBQWMsRUFBRSxlQUFBQyxJQUFnQixHQUFLLElBQUssQ0FBQSxHQUFJO0FBQ3RELFVBQU16RixJQUFXd0YsRUFBYSxRQUFRO0FBQ3RDLFFBQUlDLEdBQWU7QUFDZixNQUFBN0ksRUFBQSxNQUFLb0ksSUFBVyxJQUFJaEYsR0FBVTtBQUFBLFFBQzFCLFVBQVU7QUFBQSxRQUNWLFVBQVUsQ0FBQTtBQUFBLE1BQzFCLENBQWE7QUFDRDtBQUFBLElBQ0o7QUFDQSxVQUFNcUYsSUFBZ0J6SSxFQUFBLE1BQUtvSSxJQUFXLElBQUloRixDQUFRLEtBQUs7QUFBQSxNQUNuRCxVQUFVLENBQUE7QUFBQSxNQUNWLFVBQVUsQ0FBQTtBQUFBLElBQ3RCO0FBQ1EsUUFBSSxNQUFNLFFBQVFxRixFQUFjLFFBQVEsR0FBRztBQUV2QyxZQUFNRCxJQUFTLFlBQVlJLEVBQWEsVUFDbENBLEVBQWEsUUFBUSxTQUNyQkEsRUFBYSxRQUFRO0FBQzNCLE1BQUFILEVBQWMsU0FBUyxLQUFLRCxDQUFNO0FBQUEsSUFDdEM7QUFDQSxJQUFBeEksRUFBQSxNQUFLb0ksSUFBVyxJQUFJaEYsR0FBVXFGLENBQWE7QUFBQSxFQUMvQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLFdBQVdHLEdBQWMsRUFBRSxjQUFBRSxJQUFlLEdBQUssSUFBSyxDQUFBLEdBQUk7QUFDcEQsVUFBTTFGLElBQVd3RixFQUFhLFFBQVE7QUFDdEMsUUFBSUUsR0FBYztBQUNkLE1BQUE5SSxFQUFBLE1BQUtvSSxJQUFXLElBQUloRixHQUFVO0FBQUEsUUFDMUIsVUFBVTtBQUFBLFFBQ1YsVUFBVTtBQUFBLE1BQzFCLENBQWE7QUFDRDtBQUFBLElBQ0o7QUFDQSxVQUFNcUYsSUFBZ0J6SSxFQUFBLE1BQUtvSSxJQUFXLElBQUloRixDQUFRLEtBQUs7QUFBQSxNQUNuRCxVQUFVLENBQUE7QUFBQSxNQUNWLFVBQVUsQ0FBQTtBQUFBLElBQ3RCO0FBQ1EsUUFBSSxNQUFNLFFBQVFxRixFQUFjLFFBQVEsR0FBRztBQUV2QyxZQUFNRCxJQUFTLFlBQVlJLEVBQWEsVUFDbENBLEVBQWEsUUFBUSxTQUNyQkEsRUFBYSxRQUFRO0FBQzNCLE1BQUFILEVBQWMsU0FBUyxLQUFLRCxDQUFNO0FBQUEsSUFDdEM7QUFDQSxJQUFBeEksRUFBQSxNQUFLb0ksSUFBVyxJQUFJaEYsR0FBVXFGLENBQWE7QUFBQSxFQUMvQztBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILFNBQVMsS0FBSztBQUFBLE1BQ2QsT0FBTyxLQUFLO0FBQUEsTUFDWixXQUFXLE9BQU8sWUFBWXpJLEVBQUEsTUFBS29JLElBQVcsUUFBTyxDQUFFO0FBQUEsSUFDbkU7QUFBQSxFQUNJO0FBQ0o7QUFsSElBLEtBQUE7QUNsQkcsU0FBU1csR0FBY2xZLEdBQU07QUFDaEMsU0FBSUEsRUFBSyxTQUFTLGFBQ1A7QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQU1BLEVBQUs7QUFBQSxJQUNYLGFBQWFBLEVBQUs7QUFBQSxJQUNsQixZQUFZQSxFQUFLO0FBQUEsSUFDakIsUUFBUUEsRUFBSztBQUFBLEVBQ3pCLElBRVFBLEVBQUssU0FBUyxhQUNQO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFNQSxFQUFLO0FBQUEsSUFDWCxhQUFhQSxFQUFLLFNBQVM7QUFBQSxJQUMzQixZQUFZQSxFQUFLLFNBQVM7QUFBQSxFQUN0QyxJQUVXO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFNQSxFQUFLO0FBQUEsSUFDWCxjQUFjQSxFQUFLO0FBQUEsRUFDM0I7QUFDQTtBQUNPLFNBQVNtWSxHQUFpQm5TLEdBQUc7QUFDaEMsU0FBTztBQUFBLElBQ0gsVUFBVUEsRUFBRTtBQUFBLElBQ1osaUJBQWlCQSxFQUFFO0FBQUEsSUFDbkIsaUJBQWlCQSxFQUFFO0FBQUEsSUFDbkIsa0JBQWtCQSxFQUFFO0FBQUEsRUFDNUI7QUFDQTtBQzlCTyxNQUFNb1MsR0FBWTtBQUFBLEVBQWxCO0FBQ0gsSUFBQWxXLEVBQUEsY0FBTztBQUNQLElBQUFBLEVBQUE7QUFBQTtBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILE1BQU0sS0FBSztBQUFBLE1BQ1gsU0FBUyxLQUFLO0FBQUEsSUFDMUI7QUFBQSxFQUNJO0FBQ0o7QUFDTyxNQUFNbVcsV0FBNkJELEdBQVk7QUFBQSxFQUlsRCxZQUFZRSxHQUFTcE0sR0FBTztBQUN4QixVQUFLO0FBSlQsSUFBQWhLLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQSxjQUFPO0FBR0gsU0FBSyxVQUFVb1csR0FDZixLQUFLLFFBQVFwTTtBQUFBLEVBQ2pCO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQU07QUFBQSxNQUNmLE9BQU8sS0FBSyxNQUFNLE9BQU07QUFBQSxJQUNwQztBQUFBLEVBQ0k7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFFBQUlwSyxJQUFVO0FBQ2QsZUFBV3lXLEtBQVEsS0FBSyxRQUFRO0FBQzVCLE1BQUlBLEVBQUssU0FBUyxrQkFDZHpXLEtBQVd5VyxFQUFLO0FBR3hCLFdBQU96VztBQUFBLEVBQ1g7QUFDSjtBQUNPLE1BQU0wVyxXQUF3QkosR0FBWTtBQUFBLEVBSTdDLFlBQVlFLEdBQVNwTSxHQUFPO0FBQ3hCLFVBQUs7QUFKVCxJQUFBaEssRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVVvVyxHQUNmLEtBQUssUUFBUXBNO0FBQUEsRUFDakI7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxHQUFHLE1BQU0sT0FBTTtBQUFBLE1BQ2YsT0FBTyxLQUFLLE1BQU0sT0FBTTtBQUFBLElBQ3BDO0FBQUEsRUFDSTtBQUNKO0FBQ08sTUFBTXVNLFdBQThCTCxHQUFZO0FBQUEsRUFLbkQsWUFBWUUsR0FBU3BNLEdBQU9wRyxHQUFRO0FBQ2hDLFVBQUs7QUFMVCxJQUFBNUQsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQSxjQUFPO0FBR0gsU0FBSyxVQUFVb1csR0FDZixLQUFLLFFBQVFwTSxHQUNiLEtBQUssU0FBU3BHO0FBQUEsRUFDbEI7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxHQUFHLE1BQU0sT0FBTTtBQUFBLE1BQ2YsT0FBTyxLQUFLLE1BQU0sT0FBTTtBQUFBLE1BQ3hCLFFBQVFzRSxHQUFjLEtBQUssTUFBTTtBQUFBLElBQzdDO0FBQUEsRUFDSTtBQUNKO0FBQ08sTUFBTXNPLFdBQXlCTixHQUFZO0FBQUEsRUFJOUMsWUFBWUUsR0FBU3BNLEdBQU87QUFDeEIsVUFBSztBQUpULElBQUFoSyxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUEsY0FBTztBQUdILFNBQUssVUFBVW9XLEdBQ2YsS0FBSyxRQUFRcE07QUFBQSxFQUNqQjtBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILEdBQUcsTUFBTSxPQUFNO0FBQUEsTUFDZixPQUFPLEtBQUssTUFBTSxPQUFNO0FBQUEsSUFDcEM7QUFBQSxFQUNJO0FBQ0o7QUFDTyxNQUFNeU0sV0FBMkJQLEdBQVk7QUFBQSxFQUloRCxZQUFZRSxHQUFTcE0sR0FBTztBQUN4QixVQUFLO0FBSlQsSUFBQWhLLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQSxjQUFPO0FBR0gsU0FBSyxVQUFVb1csR0FDZixLQUFLLFFBQVFwTTtBQUFBLEVBQ2pCO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQU07QUFBQSxNQUNmLE9BQU8sS0FBSyxNQUFNLE9BQU07QUFBQSxJQUNwQztBQUFBLEVBQ0k7QUFDSjtBQUNPLE1BQU0wTSxXQUE2QlIsR0FBWTtBQUFBLEVBS2xELFlBQVlFLEdBQVNPLEdBQWFDLEdBQWE7QUFDM0MsVUFBSztBQUxULElBQUE1VyxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVVvVyxHQUNmLEtBQUssY0FBY08sR0FDbkIsS0FBSyxjQUFjQztBQUFBLEVBQ3ZCO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQU07QUFBQSxNQUNmLGFBQWEsS0FBSyxZQUFZLE9BQU07QUFBQSxNQUNwQyxhQUFhLEtBQUssWUFBWSxPQUFNO0FBQUEsSUFDaEQ7QUFBQSxFQUNJO0FBQ0o7QUFDTyxNQUFNQyxXQUE0QlgsR0FBWTtBQUFBLEVBSWpELFlBQVlFLEdBQVNwTSxHQUFPO0FBQ3hCLFVBQUs7QUFKVCxJQUFBaEssRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVVvVyxHQUNmLEtBQUssUUFBUXBNO0FBQUEsRUFDakI7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxHQUFHLE1BQU0sT0FBTTtBQUFBLE1BQ2YsT0FBTyxLQUFLLE1BQU0sT0FBTTtBQUFBLElBQ3BDO0FBQUEsRUFDSTtBQUNKO0FDdklBLFNBQVM4TSxHQUFpQkMsR0FBWTtBQUNsQyxTQUFPLE9BQU8xMkIsTUFBTzJPLE1BRVZnb0IsR0FBbUIsWUFBWTtBQUNsQyxVQUFNaE0sSUFBTytMLEVBQVcsR0FBRy9uQixDQUFJO0FBQy9CLElBQUFpb0IsR0FBZWpNLENBQUk7QUFDbkIsUUFBSTtBQUNBLGFBQUFBLEVBQUssTUFBSyxHQUNILE1BQU0zcUIsRUFBRzJxQixDQUFJO0FBQUEsSUFDeEIsU0FDTzFxQixHQUFPO0FBQ1YsWUFBQTBxQixFQUFLLFNBQVM7QUFBQSxRQUNWLFNBQVMxcUIsRUFBTTtBQUFBLFFBQ2YsTUFBTUEsRUFBTTtBQUFBLE1BQ2hDLENBQWlCLEdBQ0tBO0FBQUEsSUFDVixVQUNaO0FBQ2dCLE1BQUEwcUIsRUFBSyxJQUFHLEdBQ1JrTSxHQUFnQjtBQUFBLElBQ3BCO0FBQUEsRUFDSixDQUFDO0FBRVQ7QUEyQ08sU0FBU0MsR0FBZ0Ixd0IsR0FBUzFFLEdBQVE7O0FBQzdDLFNBQU9xMUIsR0FBc0IsRUFBRyxXQUFXO0FBQUEsSUFDdkMsR0FBRzN3QjtBQUFBLElBQ0gsTUFBTTtBQUFBLE1BQ0YsTUFBTTtBQUFBLE1BQ04sUUFBTWpGLElBQUFpRixLQUFBLGdCQUFBQSxFQUFTLFNBQVQsZ0JBQUFqRixFQUFlLFNBQVE7QUFBQSxNQUM3QixHQUFHaUYsS0FBQSxnQkFBQUEsRUFBUztBQUFBLElBQ3hCO0FBQUEsRUFDQSxHQUFPMUUsQ0FBTTtBQUNiO0FBZU8sU0FBU3MxQixHQUFtQjV3QixHQUFTMUUsR0FBUTs7QUFDaEQsU0FBT3ExQixHQUFzQixFQUFHLFdBQVc7QUFBQSxJQUN2QyxHQUFHM3dCO0FBQUEsSUFDSCxNQUFNO0FBQUEsTUFDRixNQUFNO0FBQUEsTUFDTixTQUFPakYsSUFBQWlGLEtBQUEsZ0JBQUFBLEVBQVMsU0FBVCxnQkFBQWpGLEVBQWUsVUFBUztBQUFBLE1BQy9CLFVBQVFNLElBQUEyRSxLQUFBLGdCQUFBQSxFQUFTLFNBQVQsZ0JBQUEzRSxFQUFlLFdBQVU7QUFBQSxNQUNqQyxHQUFHMkUsS0FBQSxnQkFBQUEsRUFBUztBQUFBLElBQ3hCO0FBQUEsRUFDQSxHQUFPMUUsQ0FBTTtBQUNiO0FBSU8sTUFBTXUxQixLQUFtQlIsR0FBaUJPLEVBQWtCO0FBVzVELFNBQVNFLEdBQWtCOXdCLEdBQVMxRSxHQUFRO0FBQy9DLFNBQU9xMUIsR0FBc0IsRUFBRyxXQUFXO0FBQUEsSUFDdkMsR0FBRzN3QjtBQUFBLElBQ0gsTUFBTSxFQUFFLE1BQU0sV0FBVyxHQUFHQSxLQUFBLGdCQUFBQSxFQUFTLEtBQUk7QUFBQSxFQUNqRCxHQUFPMUUsQ0FBTTtBQUNiO0FBSU8sTUFBTXkxQixLQUFrQlYsR0FBaUJTLEVBQWlCO0FBdUMxRCxTQUFTRSxHQUFvQmh4QixHQUFTMUUsR0FBUTtBQUNqRCxTQUFPcTFCLEdBQXNCLEVBQUcsV0FBVztBQUFBLElBQ3ZDLEdBQUczd0I7QUFBQSxJQUNILE1BQU07QUFBQSxNQUNGLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLEdBQUdBLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxJQUN4QjtBQUFBLEVBQ0EsR0FBTzFFLENBQU07QUFDYjtBQUNPLE1BQU0yMUIsS0FBb0JaLEdBQWlCVyxFQUFtQjtBQTJDOUQsU0FBU0UsR0FBdUJseEIsR0FBUzFFLEdBQVE7QUFDcEQsU0FBT3ExQixHQUFzQixFQUFHLFdBQVc7QUFBQSxJQUN2QyxHQUFHM3dCO0FBQUEsSUFDSCxNQUFNO0FBQUEsTUFDRixNQUFNO0FBQUEsTUFDTixHQUFHQSxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsSUFDeEI7QUFBQSxFQUNBLEdBQU8xRSxDQUFNO0FBQ2I7QUFDTyxNQUFNZ3BCLEtBQXVCK0wsR0FBaUJhLEVBQXNCO0FDaE9wRSxTQUFTQyxHQUF5Qmh2QixHQUFNO0FBQzNDLE1BQUlBLEVBQUssV0FBVztBQUNoQixXQUFPO0FBRVgsUUFBTWl2QixJQUFlLE9BQU8sYUFBZSxPQUFlLFdBQVcsU0FDL0QsV0FBVyxTQUNYO0FBQ04sTUFBSUE7QUFDQSxXQUFPQSxFQUFhLEtBQUtqdkIsQ0FBSSxFQUFFLFNBQVMsUUFBUTtBQUVwRCxNQUFJa3ZCLElBQVM7QUFDYixXQUFTLElBQUksR0FBRyxJQUFJbHZCLEVBQUssUUFBUSxLQUFLO0FBQ2xDLElBQUFrdkIsS0FBVSxPQUFPLGFBQWFsdkIsRUFBSyxDQUFDLENBQUM7QUFFekMsTUFBSSxPQUFPLFdBQVcsUUFBUztBQUMzQixXQUFPLFdBQVcsS0FBS2t2QixDQUFNO0FBRWpDLFFBQU1DLElBQVE7QUFDZCxNQUFJbjJCLElBQVMsSUFDVHNCLElBQUk7QUFDUixTQUFPQSxJQUFJNDBCLEVBQU8sVUFBUTtBQUN0QixVQUFNRSxJQUFLRixFQUFPLFdBQVc1MEIsR0FBRyxHQUMxQiswQixJQUFLSCxFQUFPLFdBQVc1MEIsR0FBRyxHQUMxQmcxQixJQUFLSixFQUFPLFdBQVc1MEIsR0FBRyxHQUMxQmkxQixJQUFPSCxLQUFNLEdBQ2JJLEtBQVNKLElBQUssTUFBUSxJQUFNQyxLQUFNLEdBQ2xDSSxJQUFPLE1BQU1KLENBQUUsSUFBSSxNQUFPQSxJQUFLLE9BQVEsSUFBTUMsS0FBTSxHQUNuREksSUFBTyxNQUFNSixDQUFFLElBQUksS0FBS0EsSUFBSztBQUNuQyxJQUFBdDJCLEtBQ0ltMkIsRUFBTSxPQUFPSSxDQUFJLElBQ2JKLEVBQU0sT0FBT0ssQ0FBSSxJQUNqQkwsRUFBTSxPQUFPTSxDQUFJLElBQ2pCTixFQUFNLE9BQU9PLENBQUk7QUFBQSxFQUM3QjtBQUNBLFNBQU8xMkI7QUFDWDtBQ2xDTyxNQUFNMjJCLEdBQXVCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFTaEMsWUFBWTN2QixHQUFNO0FBUmxCLElBQUFvWCxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQSxjQUFPO0FBS0gsU0FBSyxPQUFPcFg7QUFBQSxFQUNoQjtBQUNKO0FBS08sTUFBTTR2QixHQUFtQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRNUIsWUFBWXh4QixHQUFNZixHQUFNO0FBUHhCLElBQUErWixFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUEsY0FBTztBQU1ILFNBQUssT0FBT2haLEdBQ1osS0FBSyxPQUFPZjtBQUFBLEVBQ2hCO0FBQ0o7QUFJTyxNQUFNd3lCLEdBQTJCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNcEMsWUFBWXpPLEdBQU87QUFMbkIsSUFBQWhLLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFLSCxTQUFLLFFBQVFnSztBQUFBLEVBQ2pCO0FBQ0o7QUM1Qk8sU0FBUzBPLEdBQXFCQyxHQUFlM08sR0FBTzBCLEdBQU9zRixHQUFVOztBQUN4RSxRQUFNcHBCLElBQVEsQ0FBQSxHQUNSZ3hCLElBQWMsQ0FBQSxHQUNkQyxJQUFlLENBQUEsR0FDZkMsSUFBcUIsQ0FBQSxHQUNyQkMsSUFBeUIsQ0FBQSxHQUN6QkMsSUFBWSxDQUFBLEdBQ1pDLElBQWEsSUFBSSxJQUFJakksRUFBUyxJQUFJLENBQUNsTixNQUFNLENBQUNBLEVBQUUsVUFBVUEsQ0FBQyxDQUFDLENBQUMsR0FDekRvVixJQUFjLElBQUksSUFBSXhOLEVBQU0sT0FBTyxDQUFDYixNQUFNQSxFQUFFLFNBQVMsVUFBVSxFQUFFLElBQUksQ0FBQ0EsTUFBTSxDQUFDQSxFQUFFLE1BQU1BLENBQUMsQ0FBQyxDQUFDLEdBQ3hGc08sSUFBZXpOLEVBQU0sS0FBSyxDQUFDYixNQUFNQSxFQUFFLFNBQVMsVUFBVSxHQUN0RHVPLElBQWEsSUFBSSxJQUFJMU4sRUFDdEIsT0FBTyxDQUFDYixNQUFDOztBQUFLLFdBQUFBLEVBQUUsU0FBUyxtQkFBaUJycEIsSUFBQXFwQixFQUFFLGlCQUFGLGdCQUFBcnBCLEVBQWdCLFVBQVM7QUFBQSxHQUFLLEVBQ3hFLElBQUksQ0FBQ3FwQixNQUFNQSxDQUFDLEVBQ1osSUFBSSxDQUFDQSxNQUFNLENBQUNBLEVBQUUsYUFBYSxjQUFjQSxDQUFDLENBQUMsQ0FBQztBQUNqRCxhQUFXakgsS0FBVStVLEVBQWMsUUFBUTtBQUN2QyxRQUFJL1UsRUFBTyxTQUFTO0FBQ2hCLE1BQUlBLEVBQU8sU0FBUyxlQUNoQmhjLEVBQU0sS0FBSyxJQUFJdXVCLEdBQXFCdlMsR0FBUW9HLENBQUssQ0FBQztBQUFBLGFBR2pEcEcsRUFBTyxTQUFTLG9CQUFvQjtBQUN6QyxNQUFBaGMsRUFBTSxLQUFLLElBQUkwdUIsR0FBZ0IxUyxHQUFRb0csQ0FBSyxDQUFDO0FBQzdDLFlBQU1xRyxJQUFXek0sRUFBTztBQUV4QixVQURBb1YsRUFBVSxLQUFLM0ksQ0FBUSxLQUNuQjd1QixJQUFBb2lCLEVBQU8saUJBQVAsZ0JBQUFwaUIsRUFBcUIsVUFBUywwQkFDOUJvaUIsRUFBTyxTQUFTLHdCQUF3QjtBQUV4QyxjQUFNeVYsSUFBZXpWLEVBQU8sY0FDdEIwVixJQUFpQkQsRUFBYSxjQUM5QkUsSUFBZ0JILEVBQVcsSUFBSUUsQ0FBYztBQUNuRCxZQUFJLE9BQU9DLElBQWtCLEtBQWE7QUFDdEMsZ0JBQU0xdkIsSUFBVSxlQUFleXZCLENBQWMseUJBQXlCdFAsRUFBTSxJQUFJO0FBQ2hGLGdCQUFBdUYsR0FBc0I7QUFBQSxZQUNsQixTQUFBMWxCO0FBQUEsWUFDQSxNQUFNLEVBQUUsa0JBQWtCeXZCLEVBQWM7QUFBQSxVQUNoRSxDQUFxQixHQUNLLElBQUluWixHQUFtQnRXLENBQU87QUFBQSxRQUN4QztBQUdBLGNBQU1nc0IsSUFBZSxJQUFJZ0IsR0FBb0I7QUFBQSxVQUN6QyxNQUFNO0FBQUE7QUFBQSxVQUVOLE1BQU13QyxFQUFhO0FBQUEsVUFDbkIsSUFBSUEsRUFBYTtBQUFBLFVBQ2pCLFFBQVE7QUFBQSxVQUNSLGNBQUFBO0FBQUEsUUFDcEIsR0FBbUJyUCxDQUFLO0FBQ1IsUUFBQStPLEVBQXVCLEtBQUs7QUFBQSxVQUN4QixhQUFhbEQ7QUFBQSxVQUNiLFNBQVMwRDtBQUFBLFFBQzdCLENBQWlCLEdBQ0lBLEVBQWMsYUFBYSxlQUc1QjN4QixFQUFNLEtBQUtpdUIsQ0FBWTtBQUFBLE1BRS9CO0FBQUEsSUFDSixXQUNTalMsRUFBTyxTQUFTO0FBQ3JCLE1BQUFoYyxFQUFNLEtBQUssSUFBSTR1QixHQUFpQjVTLEdBQVFvRyxDQUFLLENBQUM7QUFBQSxhQUV6Q3BHLEVBQU8sU0FBUyxpQkFBaUI7QUFHdEMsVUFGQWhjLEVBQU0sS0FBSyxJQUFJMHVCLEdBQWdCMVMsR0FBUW9HLENBQUssQ0FBQyxHQUM3Q2dQLEVBQVUsS0FBSyxjQUFjLEdBQ3pCLENBQUNHO0FBQ0QsY0FBQTVKLEdBQXNCO0FBQUEsVUFDbEIsU0FBUztBQUFBLFVBQ1QsTUFBTTtBQUFBLFlBQ0YsWUFBWXZGLEVBQU07QUFBQSxVQUMxQztBQUFBLFFBQ0EsQ0FBaUIsR0FDSyxJQUFJN0osR0FBbUIseURBQXlEO0FBRTFGLE1BQUEyWSxFQUFtQixLQUFLO0FBQUEsUUFDcEIsVUFBVWxWO0FBQUEsUUFDVixVQUFVdVY7QUFBQSxNQUMxQixDQUFhO0FBQUEsSUFDTDtBQUNBLFFBQUl2VixFQUFPLFNBQVM7QUFDaEI7QUFFSixJQUFBb1YsRUFBVSxLQUFLcFYsRUFBTyxJQUFJO0FBQzFCLFVBQU1zTCxJQUFVK0osRUFBVyxJQUFJclYsRUFBTyxJQUFJO0FBQzFDLFFBQUlzTDtBQUNBLE1BQUF0bkIsRUFBTSxLQUFLLElBQUk2dUIsR0FBbUI3UyxHQUFRb0csQ0FBSyxDQUFDLEdBQ2hENE8sRUFBWSxLQUFLO0FBQUEsUUFDYixVQUFVaFY7QUFBQSxRQUNWLFNBQVNzTDtBQUFBLE1BQ3pCLENBQWE7QUFBQSxTQUVBO0FBQ0QsWUFBTXNLLElBQWVOLEVBQVksSUFBSXRWLEVBQU8sSUFBSTtBQUNoRCxVQUFJLENBQUM0VjtBQUNELGNBQUFqSyxHQUFzQjtBQUFBLFVBQ2xCLFNBQVMsUUFBUTNMLEVBQU8sSUFBSSx1QkFBdUJvRyxFQUFNLElBQUk7QUFBQSxVQUM3RCxNQUFNO0FBQUEsWUFDRixXQUFXcEcsRUFBTztBQUFBLFlBQ2xCLFlBQVlvRyxFQUFNO0FBQUEsVUFDMUM7QUFBQSxRQUNBLENBQWlCLEdBQ0ssSUFBSTdKLEdBQW1CLFFBQVF5RCxFQUFPLElBQUksdUJBQXVCb0csRUFBTSxJQUFJLEdBQUc7QUFFeEYsTUFBQXBpQixFQUFNLEtBQUssSUFBSTB1QixHQUFnQjFTLEdBQVFvRyxDQUFLLENBQUMsR0FDN0M2TyxFQUFhLEtBQUs7QUFBQSxRQUNkLFVBQVVqVjtBQUFBLFFBQ1YsTUFBTTRWO0FBQUEsTUFDdEIsQ0FBYTtBQUFBLElBQ0w7QUFBQSxFQUNKO0FBQ0EsU0FBTztBQUFBLElBQ0gsVUFBVTV4QjtBQUFBLElBQ1YsVUFBVWd4QjtBQUFBLElBQ1YsV0FBV0M7QUFBQSxJQUNYLGlCQUFpQkM7QUFBQSxJQUNqQixxQkFBcUJDO0FBQUEsSUFDckIsV0FBV0M7QUFBQSxJQUNYLDJCQUEyQjtBQUN2QixhQUFRSixFQUFZLFNBQVMsS0FDekJDLEVBQWEsU0FBUyxLQUN0QkUsRUFBdUIsU0FBUyxLQUNoQ0QsRUFBbUIsU0FBUztBQUFBLElBQ3BDO0FBQUEsRUFDUjtBQUNBO0FBQ08sTUFBTVcsS0FBaUJwRyxHQUFxQixRQUFRO0FBQUEsRUFDdkRuSixFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLG1CQUFtQjtBQUFBLElBQ25DLFVBQVVFLEVBQUs7QUFBQSxFQUN2QixDQUFLO0FBQUEsRUFDREosRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSx3QkFBd0I7QUFBQSxJQUN4QyxRQUFRRCxFQUFRO0FBQUEsRUFDeEIsQ0FBSztBQUFBLEVBQ0RELEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUscUJBQXFCO0FBQUEsRUFDN0MsQ0FBSztBQUFBLEVBQ0RGLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsd0JBQXdCO0FBQUEsSUFDeEMsTUFBTUMsR0FBU0YsRUFBUSxHQUFJRyxFQUFLLENBQUU7QUFBQSxFQUMxQyxDQUFLO0FBQ0wsQ0FBQztBQUNELE1BQU1vUCxHQUFpQjtBQUFBLEVBTW5CLFlBSUFDLEdBSUFoQixHQUlBaUIsR0FJQUMsR0FJQUMsR0FBVTtBQXpCVixJQUFBOVosRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFzQkksU0FBSyxnQkFBZ0IyWixHQUNyQixLQUFLLGdCQUFnQmhCLEdBQ3JCLEtBQUssZUFBZWlCLEdBQ3BCLEtBQUssZUFBZUMsR0FDcEIsS0FBSyxXQUFXQztBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxJQUFJLGlCQUFpQjtBQUNqQixXQUFPLEtBQUssYUFBYSxPQUFPLEtBQUssWUFBWTtBQUFBLEVBQ3JEO0FBQ0o7QUFJTyxTQUFTQyxHQUFxQi9QLEdBQU9nUSxHQUFnQkMsR0FBZTtBQUN2RSxTQUFJalEsRUFBTSxtQkFBbUJnUSxFQUFlLGFBQWFoUSxDQUFLLElBQ25ELEVBQUUsR0FBR2lRLEdBQWUsWUFBWSxPQUFTLElBRTdDQTtBQUNYO0FBSU8sZUFBZUMsR0FBc0NsUSxHQUFPMlAsR0FBZVEsR0FBc0JDLEdBQWFDLEdBQW1CQyxHQUFRdmEsR0FBTztBQUVuSixRQUFNd2EsSUFBa0JKLEVBQ25CLE9BQU8sQ0FBQ2wwQixNQUFTQSxhQUFnQjR3QixNQUNsQyxZQUFZNXdCLEVBQUssV0FDakJBLEVBQUssUUFBUSxTQUFTLGVBQWUsRUFDcEMsSUFBSSxDQUFDQSxNQUFTQSxFQUFLLFFBQVEsTUFBTSxHQUVoQ3UwQixJQUFtQkgsRUFBa0IsVUFBVSxPQUFPLENBQUNJLE1BQ2xERixFQUFnQixTQUFTRSxFQUFJLFNBQVMsTUFBTSxDQUN0RCxHQUNLQyxJQUFrQixNQUFNQyxHQUF5QjNRLEdBQU93USxHQUFrQkYsR0FBUXZhLENBQUssR0FFdkY2YSxJQUFXRixFQUFnQixJQUFJLENBQUNwakIsTUFBTUEsRUFBRSxPQUFPLEdBRS9DdWpCLElBQWtCUixFQUFrQixvQkFBb0IsT0FBTyxDQUFDSSxNQUFROztBQUMxRSxXQUFRQSxFQUFJLFlBQVksU0FBUyx3QkFDN0JBLEVBQUksWUFBWSxRQUFRLFNBQVMsd0JBQ2pDajVCLElBQUFpNUIsRUFBSSxZQUFZLFFBQVEsaUJBQXhCLGdCQUFBajVCLEVBQXNDLFVBQVM7QUFBQSxFQUN2RCxDQUFDO0FBQ0QsYUFBV2k1QixLQUFPSSxHQUFpQjtBQUUvQixVQUFNQyxJQUFvQkwsRUFBSSxZQUFZLFFBQVEsSUFDNUNNLElBQVdoYixFQUFNLFNBQVMsZUFBZTtBQUFBO0FBQUEsTUFFM0MsVUFBVTBhLEVBQUksWUFBWSxRQUFRO0FBQUEsTUFDbEMsUUFBUUs7QUFBQSxJQUNwQixDQUFTO0FBQ0QsUUFBSSxPQUFPQyxJQUFhLEtBQWE7QUFDakMsWUFBTTFCLElBQWU7QUFBQSxRQUNqQixTQUFTMEI7QUFBQSxRQUNULHFCQUFxQkQ7QUFBQSxRQUNyQixRQUFRO0FBQUEsTUFDeEI7QUFFWSxNQUFBRixFQUFTLEtBQUssSUFBSXRFLEdBQWdCO0FBQUEsUUFDOUIsTUFBTTtBQUFBLFFBQ04sTUFBTTtBQUFBLFFBQ04sY0FBQStDO0FBQUEsTUFDaEIsR0FBZXJQLENBQUssQ0FBQztBQUFBLElBQ2I7QUFBQSxFQUNKO0FBQ0EsUUFBTWdSLElBQWtCLE1BQU1DLEdBQTZCalIsR0FBTzBRLEdBQWlCM2EsQ0FBSyxHQUdsRjZaLElBQWVPLEVBQXFCLE9BQU8sQ0FBQ2wwQixNQUN2QyxFQUFFQSxhQUFnQjR3QixHQUM1QjtBQUNELFNBQUltRSxFQUFnQixpQkFDaEJWLEVBQU8sS0FBSyxhQUFhdmEsRUFBTSxVQUFVaUssR0FBT2dSLEVBQWdCLFdBQVcsR0FDM0VoUixFQUFNLEtBQUssYUFBYWpLLEVBQU0sVUFBVWliLEVBQWdCLFdBQVcsR0FDNUQsSUFBSXRCLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVTtBQUFBLElBQzVFLE1BQU07QUFBQSxJQUNOLFFBQVFJLEVBQWdCO0FBQUEsRUFDcEMsQ0FBUyxLQUVJQSxFQUFnQixnQkFDZCxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsSUFDNUUsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLE1BQ0YsZUFBZUksRUFBZ0I7QUFBQSxJQUMvQztBQUFBLEVBQ0EsQ0FBUyxJQUdFLElBQUl0QixHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY2dCLEdBQVUsRUFBRSxNQUFNLHVCQUF1QjtBQUNuSDtBQUlPLGVBQWVNLEdBQTJCbFIsR0FBTzJQLEdBQWVRLEdBQXNCQyxHQUFhQyxHQUFtQkMsR0FBUXZhLEdBQU87O0FBQ3hJLFFBQU02WixJQUFlTztBQUNyQixNQUFJUyxJQUFXUCxFQUFrQjtBQUNqQyxRQUFNLENBQUNLLEdBQWlCUyxDQUFlLElBQUksTUFBTSxRQUFRLElBQUk7QUFBQSxJQUN6RFIsR0FBeUIzUSxHQUFPcVEsRUFBa0IsV0FBV0MsR0FBUXZhLENBQUs7QUFBQSxJQUMxRXFiLEdBQXVCcFIsR0FBT3FRLEVBQWtCLGlCQUFpQkMsR0FBUXZhLEVBQU0sUUFBUTtBQUFBLEVBQy9GLENBQUs7QUFJRCxNQUhBNmEsSUFBV0EsRUFBUyxPQUFPRixFQUFnQixJQUFJLENBQUNwakIsTUFBTUEsRUFBRSxPQUFPLENBQUMsR0FDaEVzakIsSUFBV0EsRUFBUyxPQUFPTyxDQUFlLEdBRXRDZCxFQUFrQixvQkFBb0IsU0FBUztBQUMvQyxlQUFXZ0IsS0FBbUJoQixFQUFrQixxQkFBcUI7QUFDakUsWUFBTWlCLElBQVdELEVBQWdCLFFBQzVCLGNBQ0NFLElBQWNGLEVBQWdCLFlBQVksUUFDM0M7QUFDTCxVQUFJQyxFQUFTLGFBQWE7QUFFdEIsY0FBTUUsSUFBaUIsTUFBTUYsRUFBUyxZQUFZdmIsRUFBTSxVQUFVc2IsRUFBZ0IsV0FBVyxHQUN2RkksS0FBdUI7QUFBQSxVQUN6QixTQUFTRCxFQUFlO0FBQUEsVUFDeEIscUJBQXFCRCxFQUFZO0FBQUEsVUFDakMsUUFBUUMsRUFBZTtBQUFBLFFBQzNDO0FBQ2dCLFFBQUFaLEVBQVMsS0FBSyxJQUFJdEUsR0FBZ0I7QUFBQSxVQUM5QixNQUFNO0FBQUEsVUFDTixNQUFNO0FBQUEsVUFDTixjQUFjbUY7QUFBQSxRQUNsQyxHQUFtQnpSLENBQUssQ0FBQztBQUFBLE1BQ2IsT0FDSztBQUVELFFBQUE0USxFQUFTLEtBQUtTLEVBQWdCLFdBQVc7QUFDekMsY0FBTXhGLElBQWU7QUFBQSxVQUNqQixNQUFNO0FBQUEsVUFDTixNQUFNd0YsRUFBZ0I7QUFBQSxVQUN0QixTQUFTLElBQUl4RSxHQUFvQjtBQUFBLFlBQzdCLE1BQU07QUFBQSxZQUNOLE1BQU0wRSxFQUFZO0FBQUEsWUFDbEIsSUFBSUEsRUFBWTtBQUFBLFlBQ2hCLFdBQVdBLEVBQVk7QUFBQSxZQUN2QixRQUFRO0FBQUEsWUFDUixjQUFjQTtBQUFBLFVBQ3RDLEdBQXVCdlIsQ0FBSztBQUFBLFFBQzVCO0FBQ2dCLFFBQUEwUSxFQUFnQixLQUFLN0UsQ0FBWTtBQUFBLE1BRXJDO0FBQUEsSUFDSjtBQUdKLE1BQUl3RSxFQUFrQixTQUFTLFNBQVM7QUFDcEMsV0FBTyxNQUFNcUIsR0FBb0IxUixHQUFPMlAsR0FBZUMsR0FBY2dCLEdBQVVSLEdBQWFDLEVBQWtCLFVBQVVDLEdBQVF2YSxFQUFNLFFBQVE7QUFFbEosUUFBTWliLElBQWtCLE1BQU1DLEdBQTZCalIsR0FBTzBRLEdBQWlCM2EsQ0FBSztBQUN4RixNQUFJaWIsRUFBZ0I7QUFDaEIsV0FBQVYsRUFBTyxLQUFLLGFBQWF2YSxFQUFNLFVBQVVpSyxHQUFPZ1IsRUFBZ0IsV0FBVyxHQUMzRWhSLEVBQU0sS0FBSyxhQUFhakssRUFBTSxVQUFVaWIsRUFBZ0IsV0FBVyxHQUM1RCxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsTUFDNUUsTUFBTTtBQUFBLE1BQ04sUUFBUUksRUFBZ0I7QUFBQSxJQUNwQyxDQUFTO0FBRUEsTUFBSUEsRUFBZ0I7QUFDckIsV0FBTyxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsTUFDNUUsTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLFFBQ0YsZUFBZUksRUFBZ0I7QUFBQSxNQUMvQztBQUFBLElBQ0EsQ0FBUztBQVNMLFNBSitCeDVCLElBQUE2NEIsRUFBa0IsY0FBbEIsZ0JBQUE3NEIsRUFBNkIsV0FBVSxLQUFLLFFBQ3RFTSxJQUFBdTRCLEVBQWtCLG9CQUFsQixnQkFBQXY0QixFQUFtQyxXQUFVLEtBQUssUUFDbERrQixJQUFBcTNCLEVBQWtCLHdCQUFsQixnQkFBQXIzQixFQUF1QyxXQUFVLEtBQUssUUFDdERvQyxJQUFBaTFCLEVBQWtCLGFBQWxCLGdCQUFBajFCLEVBQTRCLFdBQVUsS0FBSztBQUU1QyxXQUFPLElBQUlzMEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVLEVBQUUsTUFBTSx1QkFBdUI7QUFHbkgsUUFBTWUsSUFBZWYsRUFBUyxPQUFPLENBQUMzMEIsTUFBU0EsYUFBZ0Jrd0IsRUFBb0IsR0FFN0V5RixJQUF1QkQsRUFBYSxTQUFTLElBQzdDbE0sR0FBNkJrTSxFQUFhQSxFQUFhLFNBQVMsQ0FBQyxFQUFFLE9BQU8sSUFDMUU7QUFFTixNQUFJLE9BQU9DLElBQXlCO0FBQ2hDLFdBQU8sSUFBSWxDLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVSxFQUFFLE1BQU0sdUJBQXVCO0FBR25ILE1BQUksQ0FEK0JGLEVBQWdCLEtBQUssQ0FBQzk0QixNQUFXQSxFQUFPLG1CQUFtQmkxQixFQUFtQixHQUNoRjtBQUM3QixRQUFJN00sRUFBTSxlQUFlO0FBQ3JCLGFBQU8sSUFBSTBQLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVTtBQUFBLFFBQzVFLE1BQU07QUFBQSxRQUNOLFFBQVFnQjtBQUFBLE1BQ3hCLENBQWE7QUFFTCxRQUFJNVIsRUFBTSxlQUFlLFVBQVU0UixHQUFzQjtBQUVyRCxZQUFNLEVBQUUsUUFBQXgxQixFQUFNLElBQUsrYyxHQUFnQzZHLEVBQU0sWUFBWSxjQUFjLEdBQzdFLENBQUMxcEIsQ0FBSyxJQUFJLE1BQU1GLEdBQVksTUFBTWdHLEVBQU93MUIsQ0FBb0IsQ0FBQztBQUNwRSxVQUFJdDdCO0FBQ0EsY0FBQWl2QixHQUFzQjtBQUFBLFVBQ2xCLFNBQVM7QUFBQSxVQUNULE1BQU07QUFBQSxZQUNGLE9BQU8sT0FBT2p2QixDQUFLO0FBQUEsVUFDM0M7QUFBQSxRQUNBLENBQWlCLEdBQ0ssSUFBSTZmLEdBQW1CLHFCQUFxQjtBQUV0RCxhQUFPLElBQUl1WixHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY2dCLEdBQVUsRUFBRSxNQUFNLDBCQUEwQixRQUFRZ0IsRUFBb0IsQ0FBRTtBQUFBLElBQ3BKO0FBQUEsRUFDSjtBQUNBLFNBQU8sSUFBSWxDLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVSxFQUFFLE1BQU0sdUJBQXVCO0FBQ25IO0FBSU8sU0FBU2lCLEdBQXNCOUwsR0FBVW5NLEdBQVE7QUFDcEQsUUFBTWtZLElBQXlCQyxHQUErQm5ZLENBQU07QUFDcEUsTUFBSWtZLEdBQXdCO0FBQ3hCLFVBQU1FLElBQWtCRixFQUF1QixJQUFJRyxFQUFzQztBQUN6RixXQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixNQUFNbE0sRUFBUztBQUFBLE1BQ2YsUUFBUUEsRUFBUztBQUFBLE1BQ2pCLFFBQVE7QUFBQSxNQUNSLFFBQVFpTTtBQUFBLElBQ3BCO0FBQUEsRUFDSTtBQUNBLFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQU1qTSxFQUFTO0FBQUEsSUFDZixRQUFRQSxFQUFTO0FBQUEsSUFDakIsUUFBUTtBQUFBLElBQ1IsUUFBUTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sTUFBTTdILEdBQWN0RSxDQUFNO0FBQUEsSUFDdEM7QUFBQSxFQUNBO0FBQ0E7QUFPQSxTQUFTbVksR0FBK0JuWSxHQUFRO0FBQzVDLE1BQUksTUFBTSxRQUFRQSxDQUFNLEdBQUc7QUFDdkIsVUFBTXNZLElBQWEsQ0FBQTtBQUNuQixlQUFXajJCLEtBQVEyZCxHQUFRO0FBQ3ZCLFlBQU11WSxJQUFhQyxHQUE4Qm4yQixDQUFJO0FBQ3JELFVBQUksQ0FBQ2syQjtBQUNELGVBQU87QUFFWCxNQUFBRCxFQUFXLEtBQUtDLENBQVU7QUFBQSxJQUM5QjtBQUNBLFdBQU9EO0FBQUEsRUFDWDtBQUNBLFFBQU1DLElBQWFDLEdBQThCeFksQ0FBTTtBQUN2RCxTQUFPdVksSUFBYSxDQUFDQSxDQUFVLElBQUk7QUFDdkM7QUFNQSxTQUFTQyxHQUE4QjkwQixHQUFPO0FBQzFDLE1BQUksQ0FBQyswQixHQUFTLzBCLENBQUs7QUFDZixXQUFPO0FBRVgsUUFBTWlNLElBQU9qTSxFQUFNO0FBQ25CLE1BQUlpTSxNQUFTLFVBQVUsT0FBT2pNLEVBQU0sUUFBUyxVQUFVO0FBQ25ELFVBQU1zYyxJQUFTLEVBQUUsTUFBTSxRQUFRLE1BQU10YyxFQUFNLEtBQUk7QUFDL0MsV0FBSSswQixHQUFTLzBCLEVBQU0sWUFBWSxNQUMzQnNjLEVBQU8sZUFBZXRjLEVBQU0sZUFFekJzYztBQUFBLEVBQ1g7QUFDQSxNQUFJclEsTUFBUyxTQUFTO0FBQ2xCLFVBQU1xUSxJQUFTLEVBQUUsTUFBTSxRQUFPO0FBQzlCLFFBQUkwWSxHQUNBQztBQUNKLFVBQU1DLElBQXlCQyxHQUFpQm4xQixFQUFNLFNBQVMsSUFDekRBLEVBQU0sWUFDTixRQUNBbzFCLElBQWFwMUIsRUFBTTtBQUN6QixRQUFJLE9BQU9vMUIsS0FBZSxZQUFZQSxFQUFXLFNBQVM7QUFDdEQsTUFBQUosSUFBY0k7QUFBQSxhQUVUTCxHQUFTSyxDQUFVLEdBQUc7QUFDM0IsWUFBTUMsSUFBV0QsR0FDWEUsSUFBa0JILEdBQWlCRSxFQUFTLFNBQVMsSUFDckRBLEVBQVMsWUFDVEg7QUFXTixVQVZJQyxHQUFpQkUsRUFBUyxHQUFHLElBQzdCTCxJQUFjSyxFQUFTLE9BRWxCRixHQUFpQkUsRUFBUyxJQUFJLEtBRzlCQSxFQUFTLGdCQUFnQixjQUM5QkEsRUFBUyxLQUFLLFNBQVMsT0FDdkJMLElBQWNPLEdBQW9CRixFQUFTLE1BQU1DLENBQWUsSUFFaEUsQ0FBQ04sR0FBYTtBQUNkLGNBQU1RLElBQWVMLEdBQWlCRSxFQUFTLE1BQU0sS0FBS0EsRUFBUyxVQUM5REYsR0FBaUJFLEVBQVMsRUFBRSxLQUFLQSxFQUFTLE1BQzNDO0FBQ0osUUFBSUcsTUFDQVAsSUFBY087QUFBQSxNQUV0QjtBQUFBLElBQ0o7QUEwQkEsUUF6QkksQ0FBQ1IsS0FDRCxPQUFPaDFCLEVBQU0sWUFBYSxZQUMxQkEsRUFBTSxTQUFTLFNBQVMsTUFDeEJnMUIsSUFBY2gxQixFQUFNLFdBRXBCLENBQUNpMUIsS0FDRCxPQUFPajFCLEVBQU0sVUFBVyxZQUN4QkEsRUFBTSxPQUFPLFNBQVMsTUFDdEJpMUIsSUFBY2oxQixFQUFNLFNBRXBCLENBQUNnMUIsS0FDRCxPQUFPaDFCLEVBQU0sUUFBUyxZQUN0QkEsRUFBTSxLQUFLLFNBQVMsSUFDcEJnMUIsSUFBY0UsSUFDUkssR0FBb0J2MUIsRUFBTSxNQUFNazFCLENBQXNCLElBQ3REbDFCLEVBQU0sT0FFUCxDQUFDZzFCLEtBQ05oMUIsRUFBTSxnQkFBZ0IsY0FDdEJBLEVBQU0sS0FBSyxTQUFTLE1BQ3BCZzFCLElBQWNPLEdBQW9CdjFCLEVBQU0sTUFBTWsxQixDQUFzQixJQUVwRSxPQUFPbDFCLEVBQU0sVUFBVyxZQUFZQSxFQUFNLE9BQU8sU0FBUyxNQUMxRHNjLEVBQU8sU0FBU3RjLEVBQU0sU0FFdEJnMUI7QUFDQSxNQUFBMVksRUFBTyxRQUFRMFk7QUFBQSxhQUVWQztBQUNMLE1BQUEzWSxFQUFPLFFBQVEsRUFBRSxRQUFRMlksRUFBVztBQUFBO0FBR3BDLGFBQU87QUFFWCxXQUFJRixHQUFTLzBCLEVBQU0sWUFBWSxNQUMzQnNjLEVBQU8sZUFBZXRjLEVBQU0sZUFFekJzYztBQUFBLEVBQ1g7QUFDQSxNQUFJclEsTUFBUyxRQUFRO0FBQ2pCLFVBQU13cEIsSUFBWUMsR0FBbUIxMUIsQ0FBSztBQUMxQyxRQUFJLENBQUN5MUI7QUFDRCxhQUFPO0FBRVgsVUFBTW5aLElBQVMsRUFBRSxNQUFNLFFBQVEsTUFBTW1aLEVBQVM7QUFDOUMsV0FBSVYsR0FBUy8wQixFQUFNLFlBQVksTUFDM0JzYyxFQUFPLGVBQWV0YyxFQUFNLGVBRXpCc2M7QUFBQSxFQUNYO0FBQ0EsU0FBTztBQUNYO0FBTUEsU0FBU3FZLEdBQXVDclksR0FBUTtBQUNwRCxNQUFJQSxFQUFPLFNBQVMsUUFBUTtBQUN4QixVQUFNaGlCLElBQVM7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLE1BQU1naUIsRUFBTztBQUFBLElBQ3pCO0FBQ1EsV0FBSUEsRUFBTyxpQkFDUGhpQixFQUFPLGVBQWVnaUIsRUFBTyxlQUUxQmhpQjtBQUFBLEVBQ1g7QUFDQSxNQUFJZ2lCLEVBQU8sU0FBUyxTQUFTO0FBQ3pCLFVBQU1oaUIsSUFBUyxFQUFFLE1BQU0sY0FBYTtBQUlwQyxRQUhJLE9BQU9naUIsRUFBTyxVQUFXLFlBQVlBLEVBQU8sT0FBTyxTQUFTLE1BQzVEaGlCLEVBQU8sU0FBU2dpQixFQUFPLFNBRXZCLE9BQU9BLEVBQU8sU0FBVSxZQUFZQSxFQUFPLE1BQU0sU0FBUztBQUMxRCxNQUFBaGlCLEVBQU8sUUFBUWdpQixFQUFPO0FBQUEsYUFFakJ5WSxHQUFTelksRUFBTyxLQUFLLEdBQUc7QUFDN0IsWUFBTStZLElBQVcvWSxFQUFPLE9BQ2xCZ1osSUFBa0JILEdBQWlCRSxFQUFTLFNBQVMsSUFDckRBLEVBQVMsWUFDVDtBQUNOLFVBQUlGLEdBQWlCRSxFQUFTLEdBQUc7QUFDN0IsUUFBQS82QixFQUFPLFFBQVErNkIsRUFBUztBQUFBLGVBRW5CRixHQUFpQkUsRUFBUyxJQUFJO0FBQ25DLFFBQUEvNkIsRUFBTyxRQUNIZzdCLEtBQW1CLENBQUNELEVBQVMsS0FBSyxXQUFXLE9BQU8sSUFDOUNNLEdBQVVOLEVBQVMsTUFBTUMsQ0FBZSxJQUN4Q0QsRUFBUztBQUFBLGVBRWRBLEVBQVMsZ0JBQWdCLGNBQzlCQSxFQUFTLEtBQUssU0FBUyxHQUFHO0FBQzFCLGNBQU05c0IsSUFBUytuQixHQUF5QitFLEVBQVMsSUFBSTtBQUNyRCxRQUFBLzZCLEVBQU8sUUFBUXE3QixHQUFVcHRCLEdBQVErc0IsQ0FBZTtBQUFBLE1BQ3BELE9BQ0s7QUFDRCxjQUFNTSxJQUFnQlQsR0FBaUJFLEVBQVMsTUFBTSxLQUFLQSxFQUFTLFVBQy9ERixHQUFpQkUsRUFBUyxFQUFFLEtBQUtBLEVBQVMsTUFDM0M7QUFDSixRQUFJTyxNQUNBdDdCLEVBQU8sUUFBUSxFQUFFLElBQUlzN0IsRUFBWTtBQUFBLE1BRXpDO0FBQUEsSUFDSjtBQUNBLFdBQUl0WixFQUFPLGlCQUNQaGlCLEVBQU8sZUFBZWdpQixFQUFPLGVBRTFCaGlCO0FBQUEsRUFDWDtBQUNBLE1BQUlnaUIsRUFBTyxTQUFTLFFBQVE7QUFDeEIsVUFBTWhpQixJQUFTLEVBQUUsTUFBTSxhQUFZLEdBQzdCbTdCLElBQVluWixFQUFPO0FBQ3pCLFFBQUksT0FBT21aLEtBQWM7QUFDckIsTUFBQW43QixFQUFPLE9BQU9tN0I7QUFBQSxhQUVUQSxLQUFhLE9BQU9BLEtBQWMsVUFBVTtBQUNqRCxZQUFNSSxJQUFTSjtBQUNmLFVBQUksVUFBVUksS0FBVUEsRUFBTyxNQUFNO0FBQ2pDLGNBQU1DLElBQVlELEVBQU8sYUFBYTtBQUN0QyxZQUFJLE9BQU9BLEVBQU8sUUFBUztBQUN2QixVQUFBdjdCLEVBQU8sT0FBT3E3QixHQUFVRSxFQUFPLE1BQU1DLENBQVM7QUFBQSxhQUU3QztBQUNELGdCQUFNdnRCLElBQVMrbkIsR0FBeUJ1RixFQUFPLElBQUk7QUFDbkQsVUFBQXY3QixFQUFPLE9BQU9xN0IsR0FBVXB0QixHQUFRdXRCLENBQVM7QUFBQSxRQUM3QztBQUFBLE1BQ0osV0FDUyxPQUFPRCxFQUFPLE9BQVEsWUFBWUEsRUFBTyxJQUFJLFNBQVM7QUFDM0QsUUFBQXY3QixFQUFPLE9BQU8sRUFBRSxLQUFLdTdCLEVBQU8sSUFBRztBQUFBLFdBRTlCO0FBQ0QsY0FBTUQsSUFBZ0IsT0FBT0MsRUFBTyxNQUFPLFlBQ3ZDQSxFQUFPLEdBQUcsU0FBUyxLQUNuQkEsRUFBTyxPQUNOLE9BQU9BLEVBQU8sVUFBVyxZQUFZQSxFQUFPLE9BQU8sU0FBUyxJQUN2REEsRUFBTyxTQUNQO0FBQ1YsUUFBSUQsTUFDQXQ3QixFQUFPLE9BQU8sRUFBRSxJQUFJczdCLEVBQVk7QUFBQSxNQUV4QztBQUNBLE1BQUksT0FBT0MsRUFBTyxZQUFhLFlBQVlBLEVBQU8sU0FBUyxTQUFTLE1BQ2hFdjdCLEVBQU8sV0FBV3U3QixFQUFPO0FBQUEsSUFFakM7QUFDQSxXQUFJdlosRUFBTyxpQkFDUGhpQixFQUFPLGVBQWVnaUIsRUFBTyxlQUUxQmhpQjtBQUFBLEVBQ1g7QUFFQSxTQUR3QmdpQjtBQUU1QjtBQUNBLFNBQVNvWixHQUFtQjExQixHQUFPO0FBQy9CLFFBQU0rMUIsSUFBYS8xQixFQUFNO0FBQ3pCLE1BQUksT0FBTysxQixLQUFlLFlBQVlBLEVBQVcsU0FBUztBQUN0RCxXQUFPQTtBQUVYLFFBQU1DLElBQW1CQyxHQUE2QkYsQ0FBVTtBQUNoRSxNQUFJQztBQUNBLFdBQU9BO0FBRVgsUUFBTUUsSUFBY0MsR0FBeUJuMkIsQ0FBSztBQUNsRCxTQUFJazJCLEtBR0c7QUFDWDtBQUNBLFNBQVNELEdBQTZCajJCLEdBQU87QUFDekMsTUFBSSxDQUFDKzBCLEdBQVMvMEIsQ0FBSztBQUNmLFdBQU87QUFFWCxNQUFJLFVBQVVBLEtBQVNBLEVBQU0sU0FBUyxRQUFXO0FBQzdDLFVBQU1vMkIsSUFBWXAyQixFQUFNLE1BQ2xCcTJCLElBQWdCLE9BQU9ELEtBQWMsWUFBWUEsRUFBVSxTQUFTLEdBQ3BFRSxJQUFnQkYsYUFBcUIsY0FBY0EsRUFBVSxTQUFTO0FBSTVFLFdBSEksQ0FBQ0MsS0FBaUIsQ0FBQ0MsS0FHbkIsQ0FBQ25CLEdBQWlCbjFCLEVBQU0sU0FBUyxLQUNqQyxDQUFDbTFCLEdBQWlCbjFCLEVBQU0sUUFBUSxJQUN6QixPQUVKO0FBQUEsTUFDSCxNQUFNLE9BQU9vMkIsS0FBYyxXQUFXQSxJQUFZLElBQUksV0FBV0EsQ0FBUztBQUFBLE1BQzFFLFdBQVdwMkIsRUFBTTtBQUFBLE1BQ2pCLFVBQVVBLEVBQU07QUFBQSxJQUM1QjtBQUFBLEVBQ0k7QUFDQSxNQUFJbTFCLEdBQWlCbjFCLEVBQU0sR0FBRyxHQUFHO0FBQzdCLFVBQU0xRixJQUFTLEVBQUUsS0FBSzBGLEVBQU0sSUFBRztBQUMvQixXQUFJbTFCLEdBQWlCbjFCLEVBQU0sUUFBUSxNQUMvQjFGLEVBQU8sV0FBVzBGLEVBQU0sV0FFckIxRjtBQUFBLEVBQ1g7QUFDQSxRQUFNczdCLElBQWdCVCxHQUFpQm4xQixFQUFNLEVBQUUsS0FBS0EsRUFBTSxNQUNyRG0xQixHQUFpQm4xQixFQUFNLE1BQU0sS0FBS0EsRUFBTTtBQUM3QyxNQUFJNDFCLEdBQWM7QUFDZCxVQUFNdDdCLElBQVMsRUFBRSxJQUFJczdCLEVBQVk7QUFDakMsV0FBSVQsR0FBaUJuMUIsRUFBTSxRQUFRLE1BQy9CMUYsRUFBTyxXQUFXMEYsRUFBTSxXQUVyQjFGO0FBQUEsRUFDWDtBQUNBLFNBQU87QUFDWDtBQUNBLFNBQVM2N0IsR0FBeUJuMkIsR0FBTztBQUNyQyxRQUFNdTJCLElBQVcsT0FBT3YyQixFQUFNLFlBQWEsWUFBWUEsRUFBTSxTQUFTLFNBQVMsSUFDekVBLEVBQU0sV0FDTixRQUNBODFCLElBQVksT0FBTzkxQixFQUFNLGFBQWMsWUFBWUEsRUFBTSxVQUFVLFNBQVMsSUFDNUVBLEVBQU0sWUFDTjtBQUNOLE1BQUksT0FBT0EsRUFBTSxZQUFhLFlBQVlBLEVBQU0sU0FBUyxTQUFTO0FBQzlELFdBQUksQ0FBQzgxQixLQUFhLENBQUNTLElBQ1IsT0FFSixFQUFFLE1BQU12MkIsRUFBTSxVQUFVLFdBQUE4MUIsR0FBVyxVQUFBUyxFQUFRO0FBRXRELE1BQUl2MkIsRUFBTSxvQkFBb0IsY0FBY0EsRUFBTSxTQUFTLFNBQVM7QUFDaEUsV0FBSSxDQUFDODFCLEtBQWEsQ0FBQ1MsSUFDUixPQUVKLEVBQUUsTUFBTSxJQUFJLFdBQVd2MkIsRUFBTSxRQUFRLEdBQUcsV0FBQTgxQixHQUFXLFVBQUFTLEVBQVE7QUFFdEUsTUFBSSxPQUFPdjJCLEVBQU0sV0FBWSxZQUFZQSxFQUFNLFFBQVEsU0FBUyxHQUFHO0FBQy9ELFVBQU0xRixJQUFTLEVBQUUsS0FBSzBGLEVBQU0sUUFBTztBQUNuQyxXQUFJdTJCLE1BQ0FqOEIsRUFBTyxXQUFXaThCLElBRWZqOEI7QUFBQSxFQUNYO0FBQ0EsTUFBSSxPQUFPMEYsRUFBTSxVQUFXLFlBQVlBLEVBQU0sT0FBTyxTQUFTLEdBQUc7QUFDN0QsVUFBTTFGLElBQVMsRUFBRSxJQUFJMEYsRUFBTSxPQUFNO0FBQ2pDLFdBQUl1MkIsTUFDQWo4QixFQUFPLFdBQVdpOEIsSUFFZmo4QjtBQUFBLEVBQ1g7QUFDQSxTQUFPO0FBQ1g7QUFDQSxTQUFTeTZCLEdBQVMvMEIsR0FBTztBQUNyQixTQUFPLE9BQU9BLEtBQVUsWUFBWUEsTUFBVTtBQUNsRDtBQUNBLFNBQVNtMUIsR0FBaUJuMUIsR0FBTztBQUM3QixTQUFPLE9BQU9BLEtBQVUsWUFBWUEsRUFBTSxTQUFTO0FBQ3ZEO0FBQ0EsU0FBU3UxQixHQUFvQmowQixHQUFNdzBCLEdBQVc7QUFDMUMsTUFBSSxPQUFPeDBCLEtBQVM7QUFDaEIsV0FBSXcwQixLQUFhLENBQUN4MEIsRUFBSyxXQUFXLE9BQU8sSUFDOUJxMEIsR0FBVXIwQixHQUFNdzBCLENBQVMsSUFFN0J4MEI7QUFFWCxRQUFNaUgsSUFBUytuQixHQUF5Qmh2QixDQUFJO0FBQzVDLFNBQU9xMEIsR0FBVXB0QixHQUFRdXRCLENBQVM7QUFDdEM7QUFDQSxTQUFTSCxHQUFVcHRCLEdBQVF1dEIsR0FBVztBQUNsQyxTQUFPQSxJQUFZLFFBQVFBLENBQVMsV0FBV3Z0QixDQUFNLEtBQUtBO0FBQzlEO0FBSU8sZUFBZThxQixHQUF5QjNRLEdBQU84VCxHQUFVeEQsR0FBUXZhLEdBQU87QUFDM0UsaUJBQWVnZSxFQUFjQyxHQUFTO0FBQ2xDLFFBQUlDLElBQWFELEVBQVEsU0FBUztBQVVsQyxRQVRJQSxFQUFRLEtBQUssZUFDVGxkLEdBQVlrZCxFQUFRLEtBQUssVUFBVSxJQUNuQ0MsSUFBYUQsRUFBUSxLQUFLLFdBQVcsTUFBTUMsQ0FBVSxJQUdyREEsSUFBYSxLQUFLLE1BQU1BLENBQVUsSUFHcEIsTUFBTUQsRUFBUSxLQUFLLGNBQWNqZSxFQUFNLFVBQVVrZSxHQUFZRCxFQUFRLFNBQVMsTUFBTSxHQUN2RjtBQUNmLFlBQU14SSxJQUFXelYsRUFBTSxTQUFTLGVBQWU7QUFBQSxRQUMzQyxVQUFVaWUsRUFBUSxLQUFLO0FBQUEsUUFDdkIsUUFBUUEsRUFBUSxTQUFTO0FBQUEsTUFDekMsQ0FBYTtBQUNELFVBQUl4SSxNQUFhO0FBRWIsZUFBTzhCLEdBQWlCLE9BQU90TSxNQUFTO0FBQ3BDLGdCQUFNa1QsSUFBVztBQUNqQixpQkFBQWxULEVBQUssU0FBUztBQUFBLFlBQ1YsU0FBU2tUO0FBQUEsWUFDVCxNQUFNO0FBQUEsY0FDRixXQUFXRixFQUFRLEtBQUs7QUFBQSxjQUN4QixPQUFPLHNCQUFzQkEsRUFBUSxTQUFTLE1BQU07QUFBQSxZQUNoRjtBQUFBLFVBQ0EsQ0FBcUIsR0FDRGhULEVBQUssU0FBUyxTQUFTa1QsR0FDaEI7QUFBQSxZQUNILE1BQU07QUFBQSxZQUNOLE1BQU1GLEVBQVE7QUFBQSxZQUNkLFFBQVFFO0FBQUEsWUFDUixTQUFTLElBQUkzSCxHQUFzQnNGLEdBQXNCbUMsRUFBUSxVQUFVRSxDQUFRLEdBQUdsVSxHQUFPa1UsQ0FBUTtBQUFBLFVBQzdIO0FBQUEsUUFDZ0IsR0FBRztBQUFBLFVBQ0MsTUFBTTtBQUFBLFlBQ0YsTUFBTUYsRUFBUSxLQUFLO0FBQUEsVUFDM0M7QUFBQSxRQUNBLENBQWlCO0FBRUwsVUFBSXhJLE1BQWE7QUFFYixlQUFPO0FBQUEsVUFDSCxNQUFNO0FBQUEsVUFDTixNQUFNd0ksRUFBUTtBQUFBLFVBQ2QsU0FBUyxJQUFJbkgsR0FBb0JtSCxFQUFRLFVBQVVoVSxDQUFLO0FBQUEsUUFDNUU7QUFBQSxJQUVRO0FBQ0EsV0FBT3NOLEdBQWlCLE9BQU90TSxNQUFTO0FBQ3BDLE1BQUlzUCxFQUFPLE9BQU8sOEJBQ2R0UCxFQUFLLFNBQVMsUUFBUWdULEVBQVEsU0FBUztBQUUzQyxVQUFJO0FBQ0EsUUFBQTFELEVBQU8sS0FBSyxvQkFBb0J2YSxFQUFNLFVBQVVpSyxHQUFPZ1UsRUFBUSxNQUFNO0FBQUEsVUFDakUsVUFBVUEsRUFBUTtBQUFBLFFBQ3RDLENBQWlCLEdBQ0RoVSxFQUFNLEtBQUssb0JBQW9CakssRUFBTSxVQUFVaWUsRUFBUSxNQUFNO0FBQUEsVUFDekQsVUFBVUEsRUFBUTtBQUFBLFFBQ3RDLENBQWlCO0FBQ0QsY0FBTUcsSUFBYSxNQUFNSCxFQUFRLEtBQUssT0FBT2plLEVBQU0sVUFBVWllLEVBQVEsU0FBUyxXQUFXLEVBQUUsVUFBVUEsRUFBUSxTQUFRLENBQUUsR0FFakhyVSxJQUFlekIsR0FBY2lXLENBQVU7QUFDN0MsUUFBQTdELEVBQU8sS0FBSyxrQkFBa0J2YSxFQUFNLFVBQVVpSyxHQUFPZ1UsRUFBUSxNQUFNclUsR0FBYyxFQUFFLFVBQVVxVSxFQUFRLFNBQVEsQ0FBRSxHQUMvR2hVLEVBQU0sS0FBSyxrQkFBa0JqSyxFQUFNLFVBQVVpZSxFQUFRLE1BQU1yVSxHQUFjLEVBQUUsVUFBVXFVLEVBQVEsU0FBUSxDQUFFLEdBQ25HMUQsRUFBTyxPQUFPLDhCQUNkdFAsRUFBSyxTQUFTLFNBQVNyQjtBQUUzQixjQUFNeVUsSUFBaUI7QUFBQSxVQUNuQixNQUFNO0FBQUEsVUFDTixNQUFNSixFQUFRO0FBQUEsVUFDZCxRQUFRRztBQUFBLFVBQ1IsU0FBUyxJQUFJNUgsR0FBc0JzRixHQUFzQm1DLEVBQVEsVUFBVUcsQ0FBVSxHQUFHblUsR0FBT21VLENBQVU7QUFBQSxRQUM3SCxHQUNzQkUsSUFBa0JwTyxHQUEwQitOLEVBQVEsUUFBUTtBQUNsRSxZQUFJSyxHQUFpQjtBQUNqQixVQUFBRCxFQUFlLGlCQUFpQkM7QUFDaEMsZ0JBQU1DLElBQXNCRCxFQUFnQjtBQUM1QyxVQUFJQyxFQUFvQixTQUFTLE1BQzdCRixFQUFlLGdCQUFnQkU7QUFBQSxRQUV2QztBQUNBLGVBQU9GO0FBQUEsTUFDWCxTQUNPOTlCLEdBQU87QUFDVixjQUFBMHFCLEVBQUssU0FBUztBQUFBLFVBQ1YsU0FBUztBQUFBLFVBQ1QsTUFBTTtBQUFBLFlBQ0YsV0FBV2dULEVBQVEsS0FBSztBQUFBLFlBQ3hCLE9BQU8sT0FBTzE5QixDQUFLO0FBQUEsVUFDM0M7QUFBQSxRQUNBLENBQWlCLEdBQ0tBO0FBQUEsTUFDVjtBQUFBLElBQ0osR0FBRztBQUFBLE1BQ0MsTUFBTTtBQUFBLFFBQ0YsTUFBTTA5QixFQUFRLEtBQUs7QUFBQSxNQUNuQztBQUFBLElBQ0EsQ0FBUztBQUFBLEVBQ0w7QUFDQSxNQUFJO0FBRUEsV0FEZ0IsTUFBTSxRQUFRLElBQUlGLEVBQVMsSUFBSUMsQ0FBYSxDQUFDO0FBQUEsRUFFakUsU0FDT2gyQixHQUFHO0FBQ04sVUFBTSxJQUFJdVksR0FBYyxpQ0FBaUN2WSxDQUFDLElBQUlBLEdBQUdnWSxDQUFLO0FBQUEsRUFDMUU7QUFDSjtBQUtBLGVBQWV3ZSxHQUFnQ0MsR0FBVXpPLEdBQVU7QUFDL0QsUUFBTTBPLElBQVMxTyxFQUFTO0FBQ3hCLE1BQUkyTztBQUVKLFVBQVFELEVBQU8sTUFBSTtBQUFBLElBQ2YsS0FBSztBQUNELFlBQU1ELEVBQVMsTUFBTUMsRUFBTyxHQUFHQSxFQUFPLEdBQUdBLEVBQU8sTUFBTTtBQUN0RDtBQUFBLElBQ0osS0FBSztBQUNELFlBQU1ELEVBQVMsWUFBWUMsRUFBTyxHQUFHQSxFQUFPLENBQUM7QUFDN0M7QUFBQSxJQUNKLEtBQUs7QUFDRCxZQUFNRCxFQUFTLEtBQUtDLEVBQU8sS0FBSyxJQUFJLENBQUN4OUIsTUFBTSxDQUFDQSxFQUFFLEdBQUdBLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDdEQ7QUFBQSxJQUNKLEtBQUs7QUFDRCxZQUFNdTlCLEVBQVMsU0FBU0MsRUFBTyxJQUFJO0FBQ25DO0FBQUEsSUFDSixLQUFLO0FBQ0QsWUFBTUQsRUFBUyxLQUFLQyxFQUFPLEdBQUdBLEVBQU8sQ0FBQztBQUN0QztBQUFBLElBQ0osS0FBSztBQUNELE1BQUFDLElBQWEsTUFBTUYsRUFBUyxXQUFVO0FBQ3RDO0FBQUEsSUFDSixLQUFLO0FBQ0QsWUFBTUEsRUFBUyxPQUFPQyxFQUFPLEdBQUdBLEVBQU8sR0FBR0EsRUFBTyxVQUFVQSxFQUFPLFFBQVE7QUFDMUU7QUFBQSxJQUNKLEtBQUs7QUFDRCxZQUFNRCxFQUFTLEtBQUtDLEVBQU8sSUFBSTtBQUMvQjtBQUFBLElBQ0osS0FBSztBQUNELFlBQU1ELEVBQVMsS0FBSTtBQUNuQjtBQUFBLEVBS1o7QUFLSSxNQUpJLE9BQU9FLElBQWUsT0FJdEIsT0FBT0YsRUFBUyxjQUFlLGVBQy9CRSxJQUFhLE1BQU1GLEVBQVMsV0FBVSxHQUNsQyxPQUFPRSxJQUFlO0FBQ3RCLFdBQU9BO0FBR2YsUUFBTSxJQUFJLE1BQU0sMENBQTBDO0FBQzlEO0FBSU8sZUFBZXRELEdBQXVCcFIsR0FBTzJVLEdBQVNyRSxHQUFROVEsR0FBWW9WLElBQWUsUUFBVztBQUN2RyxRQUFNQyxJQUFVRCxLQUFnQjVXLEdBQzFCbmQsSUFBVSxDQUFBO0FBQ2hCLGFBQVc0ekIsS0FBVUUsR0FBUztBQUMxQixVQUFNSCxJQUFXQyxFQUFPLFNBQVMsVUFDM0IxTyxJQUFXME8sRUFBTztBQUV4QixJQUFBbkUsRUFBTyxLQUFLLG9CQUFvQjlRLEdBQVlRLEdBQU95VSxFQUFPLFVBQVU7QUFBQSxNQUNoRSxVQUFBMU87QUFBQSxJQUNaLENBQVMsR0FDRyxPQUFPL0YsRUFBTSxRQUFTLGNBQ3RCQSxFQUFNLEtBQUssb0JBQW9CUixHQUFZaVYsRUFBTyxVQUFVLEVBQUUsVUFBQTFPLEdBQVU7QUFHNUUsUUFBSW5NO0FBQ0osUUFBSTtBQUNBLE1BQUFBLElBQVMsTUFBTTJhLEdBQWdDQyxHQUFVek8sQ0FBUTtBQUFBLElBQ3JFLFNBQ081akIsR0FBSztBQUNSLE1BQUEweUIsRUFBUSxNQUFNLHNDQUFzQzF5QixDQUFHLEdBQ3ZEeVgsSUFBUztBQUFBLElBQ2I7QUFFQSxJQUFBMFcsRUFBTyxLQUFLLGtCQUFrQjlRLEdBQVlRLEdBQU95VSxFQUFPLFVBQVU3YSxHQUFRO0FBQUEsTUFDdEUsVUFBQW1NO0FBQUEsSUFDWixDQUFTLEdBQ0csT0FBTy9GLEVBQU0sUUFBUyxjQUN0QkEsRUFBTSxLQUFLLGtCQUFrQlIsR0FBWWlWLEVBQU8sVUFBVTdhLEdBQVE7QUFBQSxNQUM5RCxVQUFBbU07QUFBQSxJQUNoQixDQUFhO0FBR0wsVUFBTStPLElBQVdsYixJQUFTLHlCQUF5QkEsQ0FBTSxLQUFLLElBQ3hEd1MsSUFBVTtBQUFBLE1BQ1osTUFBTTtBQUFBLE1BQ04sUUFBUXJHLEVBQVM7QUFBQSxNQUNqQixRQUFRLEVBQUUsTUFBTSx1QkFBdUIsTUFBTStPLEVBQVE7QUFBQSxJQUNqRTtBQUNRLElBQUFqMEIsRUFBUSxLQUFLLElBQUkwckIsR0FBc0JILEdBQVNwTSxHQUFPOFUsQ0FBUSxDQUFDO0FBQUEsRUFDcEU7QUFDQSxTQUFPajBCO0FBQ1g7QUFJTyxlQUFlNndCLEdBQW9CMVIsR0FBTzJQLEdBQWVDLEdBQWNDLEdBQWNPLEdBQWF4QixHQUFhMEIsR0FBUTlRLEdBQVk7QUFFdEksTUFEQXFRLElBQWUsQ0FBQyxHQUFHQSxDQUFZLEdBQzNCakIsRUFBWSxXQUFXO0FBQ3ZCNVEsV0FBQUEsRUFBTyxLQUFLLDZGQUE2RixHQUNsRyxJQUFJMFIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNDLEdBQWMsRUFBRSxNQUFNLHVCQUF1QjtBQUV2SCxNQUFJakIsRUFBWSxTQUFTLEdBQUc7QUFFeEIsVUFBTWxKLElBQWdCO0FBQ3RCLGFBQVN4c0IsSUFBSSxHQUFHQSxJQUFJMDFCLEVBQVksUUFBUTExQjtBQUNwQyxNQUFBMjJCLEVBQWEsS0FBSyxJQUFJdEQsR0FBc0JzRixHQUFzQmpELEVBQVkxMUIsQ0FBQyxFQUFFLFVBQVV3c0IsQ0FBYSxHQUFHMUYsR0FBTzBGLENBQWEsQ0FBQztBQUFBLEVBRXhJO0FBQ0EsUUFBTXFQLElBQWdCbkcsRUFBWSxDQUFDO0FBQ25DLFNBQU9wQixHQUFnQixPQUFPd0gsTUFBZ0I7QUFDMUMsVUFBTTlQLElBQVU2UCxFQUFjLFNBQ3hCRSxJQUFXLE1BQU0vUCxFQUFRLGdCQUFnQjFGLEdBQVl1VixFQUFjLFNBQVMsU0FBUztBQUUzRixRQURBQyxFQUFZLFNBQVMsV0FBV0MsRUFBUyxNQUNyQ3JHLEVBQVksU0FBUyxHQUFHO0FBQ3hCLFlBQU1zRyxJQUFrQnRHLEVBQVksSUFBSSxDQUFDOVUsTUFBTUEsRUFBRSxRQUFRLFNBQVM7QUFDbEUsTUFBQWtiLEVBQVksU0FBUztBQUFBLFFBQ2pCLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxVQUNGLGtCQUFrQkU7QUFBQSxRQUN0QztBQUFBLE1BQ0EsQ0FBYTtBQUFBLElBQ0w7QUFDQSxJQUFBckYsRUFBYSxLQUFLLElBQUluRCxHQUFxQm1GLEdBQXNCa0QsRUFBYyxVQUFVbFEsR0FBbUJvUSxDQUFRLENBQUMsR0FBR2pWLEdBQU9pVixDQUFRLENBQUMsR0FDeEkzRSxFQUFPLEtBQUssaUJBQWlCOVEsR0FBWVEsR0FBT2lWLENBQVEsR0FDeERqVixFQUFNLEtBQUssaUJBQWlCUixHQUFZeVYsQ0FBUTtBQUNoRCxVQUFNRSxJQUFjalEsRUFBUSxlQUFlb0wsRUFBTyxPQUFPO0FBQ3pELFFBQUk2RSxHQUFhO0FBQ2JuWCxNQUFBQSxFQUFPLE1BQU0sOEJBQThCLEdBQ3ZDLE9BQU9tWCxLQUFnQixjQUN2QkgsRUFBWSxTQUFTO0FBQUEsUUFDakIsU0FBUztBQUFBLFFBQ1QsTUFBTTtBQUFBLFVBQ0YsU0FBUztBQUFBLFFBQ2pDO0FBQUEsTUFDQSxDQUFpQjtBQUVMLFlBQU1JLElBQW1CO0FBQUEsUUFDckIsY0FBYyxNQUFNLFFBQVF6RixDQUFhLElBQ25DLENBQUMsR0FBR0EsQ0FBYSxJQUNqQkE7QUFBQSxRQUNOLGlCQUFpQixDQUFDLEdBQUdDLENBQVk7QUFBQSxRQUNqQyxVQUFVLENBQUMsR0FBR0MsQ0FBWTtBQUFBLFFBQzFCLFlBQUFyUTtBQUFBLE1BQ2hCLEdBQ2tCMWhCLElBQVdxM0IsRUFBWUMsQ0FBZ0I7QUFDN0MsTUFBQXpGLElBQWdCN3hCLEVBQVMsY0FDekI4eEIsSUFBZTl4QixFQUFTLGlCQUN4Qit4QixJQUFlL3hCLEVBQVM7QUFBQSxJQUM1QjtBQUNBLFdBQU8sSUFBSTR4QixHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY0MsR0FBYyxFQUFFLE1BQU0scUJBQXFCLFVBQUFvRixHQUFVO0FBQUEsRUFDL0gsR0FBRztBQUFBLElBQ0MsTUFBTTtBQUFBLE1BQ0YsWUFBWWpWLEVBQU07QUFBQSxJQUM5QjtBQUFBLEVBQ0EsQ0FBSztBQUNMO0FBQ0EsTUFBTXFWLEtBQW1CO0FBQUEsRUFDckIsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUNuQjtBQUlPLGVBQWVwRSxHQUE2QmpSLEdBQU9zVixHQUFhdmYsR0FBTztBQUMxRSxNQUFJdWYsRUFBWSxXQUFXO0FBQ3ZCLFdBQU9EO0FBRVgsUUFBTUUsSUFBZ0IsQ0FBQTtBQUN0QixhQUFXMzlCLEtBQVUwOUI7QUFJakIsUUFISTE5QixFQUFPLG1CQUFtQmkxQixNQUMxQjBJLEVBQWMsS0FBSzM5QixFQUFPLE9BQU8sR0FFakNBLEVBQU8sU0FBUztBQUNoQixVQUFJLE1BQU0sUUFBUUEsRUFBTyxhQUFhO0FBQ2xDLFFBQUEyOUIsRUFBYyxLQUFLLEdBQUczOUIsRUFBTyxhQUFhO0FBQUEsZUFFckNBLEVBQU8sZ0JBQWdCO0FBQzVCLGNBQU0wOEIsSUFBc0IxOEIsRUFBTyxlQUFlO0FBQ2xELFFBQUkwOEIsRUFBb0IsU0FBUyxLQUM3QmlCLEVBQWMsS0FBSyxHQUFHakIsQ0FBbUI7QUFBQSxNQUVqRDtBQUFBO0FBR1IsTUFBSWlCLEVBQWMsU0FBUztBQUN2QixXQUFPO0FBQUEsTUFDSCxlQUFlO0FBQUEsTUFDZixlQUFlO0FBQUEsTUFDZixlQUFBQTtBQUFBLElBQ1o7QUFFSSxNQUFJdlYsRUFBTSxvQkFBb0I7QUFDMUIsV0FBT3FWO0FBRVgsUUFBTUcsSUFBa0JGLEVBQVksQ0FBQztBQUNyQyxNQUFJdFYsRUFBTSxvQkFBb0I7QUFDMUIsWUFBSXdWLEtBQUEsZ0JBQUFBLEVBQWlCLFVBQVMsb0JBRW5CO0FBQUEsTUFDSCxlQUFlO0FBQUEsTUFDZixlQUFlO0FBQUEsTUFDZixhQUppQnRYLEdBQWNzWCxFQUFnQixNQUFNO0FBQUEsSUFLckUsSUFFZUg7QUFFWCxRQUFNSSxJQUFrQnpWLEVBQU07QUFDOUIsTUFBSSxPQUFPeVYsS0FBb0IsVUFBVTtBQUNyQyxVQUFNQyxJQUFlSixFQUFZLEtBQUssQ0FBQ2hvQixNQUFNbW9CLEVBQWdCLGdCQUFnQixTQUFTbm9CLEVBQUUsS0FBSyxJQUFJLENBQUM7QUFDbEcsWUFBSW9vQixLQUFBLGdCQUFBQSxFQUFjLFVBQVMsb0JBRWhCO0FBQUEsTUFDSCxlQUFlO0FBQUEsTUFDZixlQUFlO0FBQUEsTUFDZixhQUppQnhYLEdBQWN3WCxFQUFhLE1BQU07QUFBQSxJQUtsRSxJQUVlTDtBQUFBLEVBQ1g7QUFDQSxNQUFJLE9BQU9JLEtBQW9CO0FBQzNCLFdBQU9BLEVBQWdCMWYsRUFBTSxVQUFVdWYsQ0FBVztBQUV0RCxRQUFNLElBQUlsZixFQUFVLDRCQUE0QnFmLENBQWUsSUFBSTFmLENBQUs7QUFDNUU7QUFDQSxTQUFTNGYsR0FBMEIxNUIsR0FBTTtBQUNyQyxNQUFJQSxhQUFnQmt3QjtBQUNoQixXQUFPO0FBRVgsTUFBSWx3QixhQUFnQnd3QjtBQUNoQixXQUFPO0FBRVgsTUFBSXh3QixhQUFnQnl3QjtBQUNoQixXQUFPO0FBRVgsTUFBSXp3QixhQUFnQnF3QjtBQUNoQixXQUFPO0FBRVgsTUFBSXJ3QixhQUFnQnN3QjtBQUNoQixXQUFPO0FBRVgsTUFBSXR3QixhQUFnQnV3QjtBQUNoQixXQUFPO0FBRVgsTUFBSXZ3QixhQUFnQjR3QjtBQUNoQixXQUFPO0FBR2Y7QUFDQSxTQUFTK0ksR0FBMEJoK0IsR0FBUXFFLEdBQU07QUFDN0MsUUFBTTQ1QixJQUFXRixHQUEwQjE1QixDQUFJO0FBQy9DLE1BQUksQ0FBQzQ1QixHQUFVO0FBQ1g3WCxJQUFBQSxFQUFPLEtBQUssdUJBQXVCL2hCLENBQUk7QUFDdkM7QUFBQSxFQUNKO0FBQ0EsRUFBQXJFLEVBQU8sU0FBUyxJQUFJNDJCLEdBQW1CcUgsR0FBVTU1QixDQUFJLENBQUM7QUFDMUQ7QUFDTyxTQUFTNjVCLEdBQTJCbCtCLEdBQVFnRyxHQUFPO0FBR3RELGFBQVczQixLQUFRMkI7QUFDZixJQUFBZzRCLEdBQTBCaCtCLEdBQVFxRSxDQUFJO0FBRTlDO0FBQ08sU0FBUzg1QixHQUFtQm4rQixHQUFRK08sR0FBTWxLLEdBQVM7QUFHdEQsUUFBTXU1QixJQUFldjVCLEtBQUEsZ0JBQUFBLEVBQVM7QUFDOUIsYUFBV1IsS0FBUTBLLEVBQUs7QUFDcEIsSUFBSXF2QixLQUFBLFFBQUFBLEVBQWMsSUFBSS81QixNQUd0QjI1QixHQUEwQmgrQixHQUFRcUUsQ0FBSTtBQUU5Qzs7QUFDTyxNQUFNZzZCLEdBQW9CO0FBQUEsRUFBMUI7QUFDSCxJQUFBdFQsRUFBQSxNQUFBdVQsSUFBZ0Isb0JBQUksSUFBRztBQUFBO0FBQUEsRUFDdkIsV0FBV2xXLEdBQU9rQyxHQUFXO0FBQ3pCLElBQUFlLEVBQUEsTUFBS2lULElBQWMsSUFBSWxXLEdBQU9rQyxDQUFTO0FBQUEsRUFDM0M7QUFBQSxFQUNBLGFBQWFsQyxHQUFPO0FBQ2hCLFdBQU9pRCxFQUFBLE1BQUtpVCxJQUFjLElBQUlsVyxDQUFLO0FBQUEsRUFDdkM7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPLE9BQU8sWUFBWSxNQUFNLEtBQUtpRCxFQUFBLE1BQUtpVCxJQUFjLFFBQU8sQ0FBRSxFQUFFLElBQUksQ0FBQyxDQUFDbFcsR0FBT2tDLENBQVMsTUFDOUUsQ0FBQ2xDLEVBQU0sTUFBTWtDLENBQVMsQ0FDaEMsQ0FBQztBQUFBLEVBQ047QUFDSjtBQVpJZ1UsS0FBQTtBQzdtQ0csTUFBTUMsS0FBeUIsT0FDaENDLEtBQWlCaFcsRUFBVStWLEVBQXNCLEdBQ2pERSxLQUF3Qm5XLEVBQVM7QUFBQSxFQUNuQyxNQUFNQyxFQUFRO0FBQ2xCLENBQUMsR0FDS21XLEtBQXFCcFcsRUFBUztBQUFBLEVBQ2hDLFFBQVFFLEVBQVUsWUFBWTtBQUFBLEVBQzlCLElBQUlELEVBQVE7QUFBQSxFQUNaLFVBQVVBLEVBQVE7QUFBQSxFQUNsQixXQUFXQSxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzlCLFlBQVlBLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDL0IsVUFBVUEsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUM3QixPQUFPb1csRUFDSztBQUFBLElBQ1IsU0FBU3BXLEVBQVE7QUFBQSxJQUNqQixNQUFNRSxHQUFTRixFQUFRLEdBQUlHLEVBQUssQ0FBRSxFQUFFLFNBQVE7QUFBQSxFQUNwRCxDQUFLLEVBQ0ksU0FBUTtBQUFBLEVBQ2IsV0FBV0QsR0FBU0YsRUFBUSxHQUFJRyxFQUFLLENBQUU7QUFDM0MsQ0FBQyxHQUNLa1csS0FBaUJGLEdBQW1CLE9BQU87QUFBQSxFQUM3QyxlQUFlRyxHQUFPLE1BQU1ELEVBQWMsRUFBRSxTQUFRO0FBQ3hELENBQUMsR0FDS0UsS0FBY3hXLEVBQVM7QUFBQSxFQUN6QixVQUFVb0osRUFBUTtBQUFBLEVBQ2xCLGFBQWFBLEVBQVE7QUFBQSxFQUNyQixjQUFjQSxFQUFRO0FBQUEsRUFDdEIsYUFBYUEsRUFBUTtBQUN6QixDQUFDLEdBQ0txTixLQUFzQnpXLEVBQVM7QUFBQSxFQUNqQyxPQUFPd1c7QUFBQSxFQUNQLFFBQVFuVyxFQUFRcVcsRUFBd0I7QUFBQSxFQUN4QyxZQUFZelcsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUMvQixjQUFjRSxHQUFTRixFQUFRLEdBQUlHLEVBQUssQ0FBRSxFQUFFLFNBQVE7QUFDeEQsQ0FBQyxHQUNLdVcsS0FBYXhOLEdBQXFCLFFBQVE7QUFBQSxFQUM1Q25KLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUscUJBQXFCO0FBQUEsSUFDckMsU0FBUzBXO0FBQUFBLElBQ1QsT0FBT1Q7QUFBQSxFQUNmLENBQUs7QUFBQSxFQUNEblcsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxnQkFBZ0I7QUFBQSxJQUNoQyxTQUFTMlcsR0FBc0IsR0FBR0MsRUFBMkI7QUFBQSxJQUM3RCxPQUFPWDtBQUFBLEVBQ2YsQ0FBSztBQUFBLEVBQ0RuVyxFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLHVCQUF1QjtBQUFBLElBQ3ZDLFNBQVM2VztBQUFBQSxJQUNULE9BQU9aO0FBQUEsSUFDUCxRQUFRbFcsRUFBUTtBQUFBLEVBQ3hCLENBQUs7QUFBQSxFQUNERCxFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLGdCQUFnQjtBQUFBLElBQ2hDLFNBQVM4VztBQUFBQSxJQUNULE9BQU9iO0FBQUEsRUFDZixDQUFLO0FBQUEsRUFDRG5XLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsbUJBQW1CO0FBQUEsSUFDbkMsU0FBUytXO0FBQUFBLElBQ1QsT0FBT2Q7QUFBQSxFQUNmLENBQUs7QUFBQSxFQUNEblcsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxxQkFBcUI7QUFBQSxJQUNyQyxTQUFTNlc7QUFBQUEsSUFDVCxhQUFhWjtBQUFBLElBQ2IsYUFBYUE7QUFBQSxFQUNyQixDQUFLO0FBQUEsRUFDRG5XLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsb0JBQW9CO0FBQUEsSUFDcEMsU0FBUytXLEdBQTBCLEdBQUdILEVBQTJCO0FBQUEsSUFDakUsT0FBT1g7QUFBQSxFQUNmLENBQUs7QUFDTCxDQUFDLEdBQ0tlLEtBQXdCbFgsRUFBUztBQUFBLEVBQ25DLFFBQVFFLEVBQVUsT0FBTztBQUFBLEVBQ3pCLElBQUlELEVBQVE7QUFBQSxFQUNaLGVBQWVBLEVBQVE7QUFBQSxFQUN2QixVQUFVQSxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzdCLFVBQVVFLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFO0FBQzFDLENBQUMsR0FDSytXLEtBQW9DblgsRUFBUztBQUFBLEVBQy9DLFVBQVVLLEVBQVFzVyxFQUFVO0FBQUEsRUFDNUIsV0FBV3RXLEVBQVFKLEdBQVU7QUFBQSxFQUM3QixVQUFVSSxFQUFRTCxFQUFTO0FBQUEsSUFDdkIsVUFBVUksRUFBSztBQUFBLElBQ2YsU0FBU0EsRUFBSztBQUFBLEVBQ3RCLENBQUssQ0FBQztBQUFBLEVBQ0YsV0FBV0MsRUFBUUwsRUFBUztBQUFBLElBQ3hCLFVBQVVJLEVBQUs7QUFBQSxJQUNmLE1BQU1BLEVBQUs7QUFBQSxFQUNuQixDQUFLLENBQUM7QUFBQSxFQUNGLGlCQUFpQkMsRUFBUUwsRUFBUztBQUFBLElBQzlCLFVBQVVJLEVBQUs7QUFBQSxJQUNmLFVBQVVBLEVBQUs7QUFBQSxFQUN2QixDQUFLLENBQUM7QUFBQSxFQUNGLHFCQUFxQmdYLEVBQ1ZwWCxFQUFTO0FBQUEsSUFDaEIsYUFBYUEsRUFBUztBQUFBO0FBQUEsTUFFbEIsU0FBU0EsRUFBUztBQUFBLFFBQ2QsTUFBTUUsRUFBVSxrQkFBa0I7QUFBQSxRQUNsQyxNQUFNRCxFQUFRO0FBQUEsUUFDZCxXQUFXQSxFQUFRLEVBQUcsU0FBUTtBQUFBLFFBQzlCLFFBQVFBLEVBQVEsRUFBRyxTQUFRO0FBQUEsUUFDM0IsUUFBUUEsRUFBUSxFQUFHLFNBQVE7QUFBQTtBQUFBLFFBRTNCLGNBQWNFLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFBQSxNQUMvRSxDQUFhO0FBQUEsSUFDYixDQUFTO0FBQUE7QUFBQSxJQUVELFNBQVNKLEVBQVM7QUFBQSxNQUNkLE1BQU1FLEVBQVUsYUFBYTtBQUFBLE1BQzdCLE1BQU1BLEVBQVUsWUFBWTtBQUFBLE1BQzVCLGNBQWNDLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFO0FBQUEsSUFDdEQsQ0FBUztBQUFBLEVBQ1QsQ0FBSyxDQUFDLEVBQ0csU0FBUTtBQUNqQixDQUFDLEdBQ0tpWCxLQUFnQ3JYLEVBQVM7QUFBQSxFQUMzQyxtQkFBbUJNLEdBQVM7QUFBQSxFQUM1QixZQUFZRixFQUFLO0FBQ3JCLENBQUMsR0FDS2tYLEtBQTZCdFgsRUFBUztBQUFBLEVBQ3hDLFdBQVdBLEVBQVM7QUFBQSxJQUNoQixNQUFNRSxFQUFVLE9BQU87QUFBQSxJQUN2QixNQUFNRCxFQUFRO0FBQUEsRUFDdEIsQ0FBSztBQUFBLEVBQ0QsUUFBUW9YO0FBQ1osQ0FBQyxHQUNLRSxLQUE4QnZYLEVBQVM7QUFBQSxFQUN6QyxXQUFXQSxFQUFTO0FBQUEsSUFDaEIsTUFBTUUsRUFBVSxRQUFRO0FBQUEsSUFDeEIsTUFBTUQsRUFBUTtBQUFBLEVBQ3RCLENBQUs7QUFBQSxFQUNELGFBQWFHLEVBQUs7QUFBQSxFQUNsQixPQUFPK1Y7QUFBQSxFQUNQLFFBQVFrQjtBQUNaLENBQUMsR0FDWUcsS0FBcUJ4WCxFQUFTO0FBQUEsRUFDdkMsZ0JBQUFrVztBQUFBLEVBQ0EsYUFBYTlNLEVBQVE7QUFBQSxFQUNyQixjQUFjK007QUFBQSxFQUNkLGVBQWVsVyxFQUFRLEVBQUcsR0FBR0ksRUFBUW9YLEVBQWtCLENBQUM7QUFBQSxFQUN4RCxnQkFBZ0JwWCxFQUFRb1csRUFBbUI7QUFBQSxFQUMzQyxTQUFTelcsRUFBUztBQUFBLElBQ2QsT0FBT3dXO0FBQUEsSUFDUCxXQUFXclcsR0FBU0YsRUFBUSxHQUFJRCxFQUFTO0FBQUEsTUFDckMsVUFBVUssRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFO0FBQUEsTUFDNUMsVUFBVUQsRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFO0FBQUEsSUFDeEQsQ0FBUyxDQUFDO0FBQUEsSUFDRixTQUFTSCxHQUFTRixFQUFRLEdBQUlHLEVBQUssQ0FBRTtBQUFBLEVBQzdDLENBQUs7QUFBQSxFQUNELGdCQUFnQkQsR0FBU0YsRUFBUSxHQUFJSSxFQUFRSixFQUFRLENBQUUsQ0FBQztBQUFBLEVBQ3hELFVBQVVtSixFQUFRO0FBQUEsRUFDbEIsa0JBQWtCa04sR0FBZSxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3BELGtCQUFrQmhXLEdBQVM7QUFBQSxFQUMzQix1QkFBdUJELEVBQVFpWCxFQUEwQjtBQUFBLEVBQ3pELHdCQUF3QmpYLEVBQVFrWCxFQUEyQjtBQUFBLEVBQzNELGFBQWFoSSxHQUFlLFNBQVE7QUFBQSxFQUNwQyxtQkFBbUJrSCxHQUFvQixTQUFRO0FBQUEsRUFDL0MsZ0JBQWdCcFcsRUFBUXNXLEVBQVU7QUFBQSxFQUNsQyx1QkFBdUJRLEdBQWtDLFNBQVE7QUFBQSxFQUNqRSxPQUFPRCxHQUFzQixTQUFRO0FBQ3pDLENBQUM7QUFTTSxNQUFNUSxHQUFTO0FBQUEsRUFpRWxCLFlBQVl6WSxHQUFTd1EsR0FBZWtJLEdBQWVDLEdBQVU7QUE3RDdEO0FBQUE7QUFBQTtBQUFBLElBQUE5aEIsRUFBQSxzQkFBZTtBQUlmO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQSwyQkFBb0I7QUFJcEI7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBLGdCQUFTO0FBRUwsU0FBSyxXQUFXbUosR0FDaEIsS0FBSyxpQkFBaUIsZ0JBQWdCd1EsQ0FBYSxHQUNuRCxLQUFLLGtCQUFrQixDQUFBLEdBQ3ZCLEtBQUssb0JBQW9CLFFBQ3pCLEtBQUssZ0JBQWdCa0ksR0FDckIsS0FBSyxrQkFBa0IsSUFBSTVCLEdBQW1CLEdBQzlDLEtBQUssa0JBQWtCLENBQUEsR0FDdkIsS0FBSyxZQUFZNkIsR0FDakIsS0FBSyx5QkFBeUIsQ0FBQSxHQUM5QixLQUFLLDBCQUEwQixDQUFBLEdBQy9CLEtBQUssU0FBU0MsR0FBZTtBQUFBLEVBQ2pDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsSUFBSSxVQUFVO0FBQ1YsV0FBT0MsR0FBYSxLQUFLLGdCQUFnQixLQUFLLGVBQWU7QUFBQSxFQUNqRTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsbUJBQW1COztBQUNmLGFBQUl4Z0MsSUFBQSxLQUFLLGlCQUFMLGdCQUFBQSxFQUFtQixVQUFTLDJCQUNyQixDQUFBLElBRUosS0FBSyxhQUFhLEtBQUs7QUFBQSxFQUNsQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBYUEsUUFBUXEwQixHQUFjcHZCLElBQVUsRUFBRSxlQUFlLEdBQUssR0FBSTtBQUN0RCxTQUFLLFNBQVMsWUFBWW92QixHQUFjcHZCLENBQU87QUFBQSxFQUNuRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBYUEsT0FBT292QixHQUFjcHZCLElBQVUsRUFBRSxjQUFjLEdBQUssR0FBSTtBQUNwRCxTQUFLLFNBQVMsV0FBV292QixHQUFjcHZCLENBQU87QUFBQSxFQUNsRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNBLFNBQVM7O0FBQ0wsVUFBTW1kLElBQVM7QUFBQSxNQUNYLGdCQUFnQnVjO0FBQUEsTUFDaEIsYUFBYSxLQUFLO0FBQUEsTUFDbEIsY0FBYztBQUFBLFFBQ1YsTUFBTSxLQUFLLGNBQWM7QUFBQSxNQUN6QztBQUFBLE1BQ1ksZUFBZSxLQUFLO0FBQUEsTUFDcEIsZ0JBQWdCLEtBQUssZ0JBQWdCLElBQUksQ0FBQ2pDLE9BQy9CO0FBQUEsUUFDSCxPQUFPO0FBQUEsVUFDSCxVQUFVQSxFQUFTLE1BQU07QUFBQSxVQUN6QixhQUFhQSxFQUFTLE1BQU07QUFBQSxVQUM1QixjQUFjQSxFQUFTLE1BQU07QUFBQSxVQUM3QixhQUFhQSxFQUFTLE1BQU07QUFBQSxRQUNwRDtBQUFBLFFBQ29CLFFBQVFBLEVBQVM7QUFBQSxRQUNqQixZQUFZQSxFQUFTO0FBQUEsUUFDckIsY0FBY0EsRUFBUztBQUFBLE1BQzNDLEVBQ2E7QUFBQSxNQUNELFNBQVMsS0FBSyxTQUFTLE9BQU07QUFBQSxNQUM3QixnQkFBZ0IsS0FBSyxnQkFBZ0IsT0FBTTtBQUFBLE1BQzNDLFVBQVUsS0FBSztBQUFBLE1BQ2YsbUJBQWtCMThCLElBQUEsS0FBSyxzQkFBTCxnQkFBQUEsRUFBd0I7QUFBQSxNQUMxQyxrQkFBa0IsS0FBSztBQUFBLE1BQ3ZCLHVCQUF1QixLQUFLO0FBQUEsTUFDNUIsd0JBQXdCLEtBQUssd0JBQXdCLElBQUksQ0FBQzhWLE9BQU87QUFBQSxRQUM3RCxHQUFHQTtBQUFBLFFBQ0gsT0FBT0EsRUFBRSxNQUFNLE9BQU07QUFBQSxNQUNyQyxFQUFjO0FBQUEsTUFDRixhQUFhLEtBQUs7QUFBQSxNQUNsQixtQkFBbUIsS0FBSztBQUFBLE1BQ3hCLGdCQUFnQixLQUFLLGdCQUFnQixJQUFJLENBQUNyUixNQUFTQSxFQUFLLFFBQVE7QUFBQSxNQUNoRSx1QkFBdUIsS0FBSztBQUFBLE1BQzVCLE9BQU8sS0FBSyxTQUFTLEtBQUssT0FBTyxPQUFNLElBQUs7QUFBQSxJQUN4RCxHQUVjeWpCLElBQVNnWSxHQUFtQixVQUFVOWQsQ0FBTTtBQUNsRCxRQUFJLENBQUM4RixFQUFPO0FBQ1IsWUFBTSxJQUFJekosR0FBWSxrQ0FBa0N5SixFQUFPLE1BQU0sT0FBTyxFQUFFO0FBRWxGLFdBQU9BLEVBQU87QUFBQSxFQUNsQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNBLFdBQVc7QUFDUCxXQUFPLEtBQUssVUFBVSxLQUFLLE9BQU0sQ0FBRTtBQUFBLEVBQ3ZDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxhQUFhLFdBQVd1WSxHQUFjM2QsR0FBSzs7QUFDdkMsVUFBTSxDQUFDNGQsR0FBY0MsQ0FBVSxJQUFJLE1BQU0vaEMsR0FBWSxNQUFNLEtBQUssTUFBTWtrQixDQUFHLENBQUM7QUFDMUUsUUFBSTRkO0FBQ0EsWUFBTSxJQUFJOWhCLEVBQVUsOEJBQThCOGhCLGFBQXdCLFFBQVFBLEVBQWEsVUFBVSxPQUFPQSxDQUFZLENBQUMsRUFBRTtBQUVuSSxVQUFNRSxJQUF1QkQsRUFBVztBQUN4QyxRQUFJLENBQUNDO0FBQ0QsWUFBTSxJQUFJaGlCLEVBQVUscUNBQXFDO0FBRTdELFFBQUlnaUIsTUFBeUJqQztBQUN6QixZQUFNLElBQUkvZixFQUFVLDRCQUE0QmdpQixDQUFvQix5Q0FBeUNqQyxFQUFzQixFQUFFO0FBRXpJLFVBQU1rQyxJQUFZWCxHQUFtQixNQUFNLEtBQUssTUFBTXBkLENBQUcsQ0FBQyxHQUNwRGdlLElBQVdDLEdBQWNOLENBQVksR0FJckM5WSxJQUFVLElBQUlpTSxHQUFXaU4sRUFBVSxRQUFRLE9BQU87QUFDeEQsSUFBQWxaLEVBQVEsa0JBQWtCa1osRUFBVSxRQUFRLFNBQVM7QUFJckQsVUFBTUcsSUFBZUYsRUFBUyxJQUFJRCxFQUFVLGFBQWEsSUFBSTtBQUM3RCxRQUFJLENBQUNHO0FBQ0QsWUFBTSxJQUFJcGlCLEVBQVUsU0FBU2lpQixFQUFVLGFBQWEsSUFBSSxZQUFZO0FBRXhFLFVBQU10aUIsSUFBUSxJQUFJNmhCLEdBQVN6WSxHQUFTLElBQUlxWixHQUFjSCxFQUFVLFFBQVE7QUFDeEUsSUFBQXRpQixFQUFNLGVBQWVzaUIsRUFBVSxhQUUvQnRpQixFQUFNLGtCQUFrQixJQUFJa2dCLEdBQW1CO0FBQy9DLGVBQVcsQ0FBQ3dDLEdBQVd2VyxDQUFTLEtBQUssT0FBTyxRQUFRbVcsRUFBVSxjQUFjO0FBQ3hFLE1BQUF0aUIsRUFBTSxnQkFBZ0IsV0FBV3VpQixFQUFTLElBQUlHLENBQVMsR0FBR3ZXLENBQVM7QUFHdkUsUUFBSW1XLEVBQVUsa0JBQWtCO0FBQzVCLE1BQUtBLEVBQVUsU0FDWHJhLEVBQU8sS0FBSywwQ0FBMEM7QUFFMUQsWUFBTTBhLElBQVF0TCxHQUFzQixFQUFHLFlBQVk7QUFBQSxRQUMvQyxVQUFTNTFCLElBQUE2Z0MsRUFBVSxVQUFWLGdCQUFBN2dDLEVBQWlCO0FBQUEsUUFDMUIsT0FBTU0sSUFBQXVnQyxFQUFVLFVBQVYsZ0JBQUF2Z0MsRUFBaUI7QUFBQSxRQUN2QixXQUFTa0IsSUFBQXEvQixFQUFVLFVBQVYsZ0JBQUFyL0IsRUFBaUIsYUFBWTtBQUFBLFFBQ3RDLFdBQVVvQyxJQUFBaTlCLEVBQVUsVUFBVixnQkFBQWo5QixFQUFpQjtBQUFBLE1BQzNDLENBQWE7QUFDRCxNQUFBMmEsRUFBTSxvQkFBb0I0aUIsR0FBZ0JELEdBQU9MLEVBQVUsZ0JBQWdCLEdBQzNFdGlCLEVBQU0sU0FBUzJpQjtBQUFBLElBQ25CO0FBQ0EsV0FBQTNpQixFQUFNLG9CQUFvQnNpQixFQUFVLGtCQUNwQ3RpQixFQUFNLHlCQUNGc2lCLEVBQVUsdUJBQ2R0aUIsRUFBTSwwQkFBMEJzaUIsRUFBVSx1QkFBdUIsSUFBSSxDQUFDL3FCLE9BQU87QUFBQSxNQUN6RSxHQUFHQTtBQUFBLE1BQ0gsT0FBT2dyQixFQUFTLElBQUlockIsRUFBRSxNQUFNLElBQUk7QUFBQSxJQUM1QyxFQUFVLEdBQ0Z5SSxFQUFNLGVBQWVzaUIsRUFBVSxhQUMvQnRpQixFQUFNLGlCQUFpQnNpQixFQUFVLGVBQ2pDdGlCLEVBQU0sa0JBQWtCc2lCLEVBQVUsZUFBZSxJQUFJTyxFQUF3QixHQUM3RTdpQixFQUFNLG9CQUFvQnNpQixFQUFVLG9CQUM5Qk8sR0FBeUJQLEVBQVUsaUJBQWlCLElBQ3BELFFBQ050aUIsRUFBTSxrQkFBa0JzaUIsRUFBVSxlQUFlLElBQUksQ0FBQ3A4QixNQUFTNDhCLEdBQWdCNThCLEdBQU1xOEIsQ0FBUSxDQUFDLEdBQzlGdmlCLEVBQU0seUJBQXlCc2lCLEVBQVUsd0JBQ25DLE1BQU1TLEdBQTZCUixHQUFVdmlCLEVBQU0sZUFBZUEsRUFBTSxVQUFVc2lCLEVBQVUscUJBQXFCLElBQ2pILFVBQ0ZoOUIsSUFBQWc5QixFQUFVLGdCQUFWLGdCQUFBaDlCLEVBQXVCLFVBQVMsd0JBQ2hDMGEsRUFBTSxlQUFlO0FBQUEsTUFDakIsTUFBTTtBQUFBLE1BQ04sVUFBVXVpQixFQUFTLElBQUlELEVBQVUsWUFBWSxTQUFTLElBQUk7QUFBQSxJQUMxRSxJQUVldGlCO0FBQUEsRUFDWDtBQUNKO0FBSU8sU0FBU3dpQixHQUFjTixHQUFjO0FBQ3hDLFFBQU16M0IsSUFBTSxvQkFBSSxJQUFHLEdBQ2J1NEIsSUFBUSxDQUFDZCxDQUFZO0FBQzNCLFNBQU9jLEVBQU0sU0FBUyxLQUFHO0FBQ3JCLFVBQU1QLElBQWVPLEVBQU0sTUFBSztBQUNoQyxRQUFJLENBQUF2NEIsRUFBSSxJQUFJZzRCLEVBQWEsSUFBSSxHQUc3QjtBQUFBLE1BQUFoNEIsRUFBSSxJQUFJZzRCLEVBQWEsTUFBTUEsQ0FBWTtBQUN2QyxpQkFBV3RULEtBQVdzVCxFQUFhO0FBQy9CLFFBQUl0VCxhQUFtQitCLEtBQ2R6bUIsRUFBSSxJQUFJMGtCLEVBQVEsSUFBSSxLQUNyQjZULEVBQU0sS0FBSzdULENBQU8sSUFHakJBLEVBQVEsVUFDUjFrQixFQUFJLElBQUkwa0IsRUFBUSxNQUFNLElBQUksS0FDM0I2VCxFQUFNLEtBQUs3VCxFQUFRLEtBQUs7QUFBQTtBQUFBLEVBSXhDO0FBQ0EsU0FBTzFrQjtBQUNYO0FBSU8sU0FBU200QixHQUFnQkQsR0FBT00sR0FBZ0I7QUFDbkQsUUFBTUMsSUFBV0QsRUFBZSxXQUMxQkUsSUFBZUYsRUFBZSxnQkFDOUJMLEdBQWdCRCxHQUFPTSxFQUFlLGFBQWEsSUFDbkQsUUFDQWhZLElBQU9vTSxHQUFzQixFQUFHLFdBQVc7QUFBQSxJQUM3QyxRQUFRNEwsRUFBZTtBQUFBLElBQ3ZCLFNBQVNBLEVBQWU7QUFBQSxJQUN4QixVQUFVQSxFQUFlLGFBQWE7QUFBQSxJQUN0QyxXQUFXQSxFQUFlLGNBQWM7QUFBQSxJQUN4QyxTQUFTQSxFQUFlLFlBQVk7QUFBQSxJQUNwQyxNQUFNQztBQUFBLEVBQ2QsR0FBT1AsQ0FBSztBQUNSLFNBQUExWCxFQUFLLGVBQWVrWSxHQUNibFk7QUFDWDtBQUlPLFNBQVM0WCxHQUF5Qk8sR0FBeUI7QUFDOUQsUUFBTUMsSUFBUSxJQUFJcE8sR0FBSztBQUN2QixTQUFBb08sRUFBTSxXQUFXRCxFQUF3QixNQUFNLFVBQy9DQyxFQUFNLGNBQWNELEVBQXdCLE1BQU0sYUFDbERDLEVBQU0sZUFBZUQsRUFBd0IsTUFBTSxjQUNuREMsRUFBTSxjQUFjRCxFQUF3QixNQUFNLGFBQzNDO0FBQUEsSUFDSCxPQUFBQztBQUFBLElBQ0EsUUFBUUQsRUFBd0IsT0FBTyxJQUFJLENBQUNsOUIsTUFBUzI2QixHQUF5QixNQUFNMzZCLENBQUksQ0FBQztBQUFBLElBQ3pGLFlBQVlrOUIsRUFBd0I7QUFBQSxJQUNwQyxjQUFjQSxFQUF3QjtBQUFBLEVBQzlDO0FBQ0E7QUFJTyxTQUFTTixHQUFnQlEsR0FBZ0JmLEdBQVU7QUFDdEQsVUFBUWUsRUFBZSxNQUFJO0FBQUEsSUFDdkIsS0FBSztBQUNELGFBQU8sSUFBSWxOLEdBQXFCa04sRUFBZSxTQUFTZixFQUFTLElBQUllLEVBQWUsTUFBTSxJQUFJLENBQUM7QUFBQSxJQUNuRyxLQUFLO0FBQ0QsYUFBTyxJQUFJL00sR0FBZ0IrTSxFQUFlLFNBQVNmLEVBQVMsSUFBSWUsRUFBZSxNQUFNLElBQUksQ0FBQztBQUFBLElBQzlGLEtBQUs7QUFDRCxhQUFPLElBQUk5TSxHQUFzQjhNLEVBQWUsU0FBU2YsRUFBUyxJQUFJZSxFQUFlLE1BQU0sSUFBSSxHQUFHQSxFQUFlLE1BQU07QUFBQSxJQUMzSCxLQUFLO0FBQ0QsYUFBTyxJQUFJN00sR0FBaUI2TSxFQUFlLFNBQVNmLEVBQVMsSUFBSWUsRUFBZSxNQUFNLElBQUksQ0FBQztBQUFBLElBQy9GLEtBQUs7QUFDRCxhQUFPLElBQUk1TSxHQUFtQjRNLEVBQWUsU0FBU2YsRUFBUyxJQUFJZSxFQUFlLE1BQU0sSUFBSSxDQUFDO0FBQUEsSUFDakcsS0FBSztBQUNELGFBQU8sSUFBSTNNLEdBQXFCMk0sRUFBZSxTQUFTZixFQUFTLElBQUllLEVBQWUsWUFBWSxJQUFJLEdBQUdmLEVBQVMsSUFBSWUsRUFBZSxZQUFZLElBQUksQ0FBQztBQUFBLElBQ3hKLEtBQUs7QUFDRCxhQUFPLElBQUl4TSxHQUFvQndNLEVBQWUsU0FBU2YsRUFBUyxJQUFJZSxFQUFlLE1BQU0sSUFBSSxDQUFDO0FBQUEsRUFDMUc7QUFDQTtBQUlBLGVBQWVQLEdBQTZCUixHQUFVRSxHQUFjclosR0FBU21hLEdBQTZCO0FBQ3RHLFFBQU1yWCxJQUFXLE1BQU11VyxFQUFhLFlBQVlyWixDQUFPLEdBQ2pEdUMsSUFBUSxJQUFJLElBQUlPLEVBQ2pCLE9BQU8sQ0FBQ25PLE1BQVNBLEVBQUssU0FBUyxVQUFVLEVBQ3pDLElBQUksQ0FBQ0EsTUFBUyxDQUFDQSxFQUFLLE1BQU1BLENBQUksQ0FBQyxDQUFDLEdBQy9CeWxCLElBQWdCLElBQUksSUFBSXRYLEVBQ3pCLE9BQU8sQ0FBQ25PLE1BQVNBLEVBQUssU0FBUyxVQUFVLEVBQ3pDLElBQUksQ0FBQ0EsTUFBUyxDQUFDQSxFQUFLLE1BQU1BLENBQUksQ0FBQyxDQUFDLEdBQy9Ca1QsSUFBVyxJQUFJLElBQUl3UixFQUFhLFNBQVMsSUFBSSxDQUFDbCtCLE1BQzVDQSxhQUFpQjJzQixLQUNWLENBQUMzc0IsRUFBTSxNQUFNNHFCLEdBQVE1cUIsQ0FBSyxDQUFDLElBRS9CLENBQUNBLEVBQU0sVUFBVUEsQ0FBSyxDQUNoQyxDQUFDLEdBQ0kxQyxJQUFTO0FBQUEsSUFDWCxVQUFVMGhDLEVBQTRCLFNBQVMsSUFBSSxDQUFDcjlCLE1BQVM0OEIsR0FBZ0I1OEIsR0FBTXE4QixDQUFRLENBQUM7QUFBQSxJQUM1RixXQUFXZ0IsRUFBNEI7QUFBQSxJQUN2QyxVQUFVQSxFQUE0QixTQUFTLElBQUksQ0FBQ3BVLE1BQVk7QUFDNUQsVUFBSSxDQUFDOEIsRUFBUyxJQUFJOUIsRUFBUSxRQUFRLFFBQVE7QUFDdEMsY0FBTSxJQUFJOU8sRUFBVSxXQUFXOE8sRUFBUSxRQUFRLFFBQVEsWUFBWTtBQUV2RSxhQUFPO0FBQUEsUUFDSCxVQUFVQSxFQUFRO0FBQUEsUUFDbEIsU0FBUzhCLEVBQVMsSUFBSTlCLEVBQVEsUUFBUSxRQUFRO0FBQUEsTUFDOUQ7QUFBQSxJQUNRLENBQUM7QUFBQSxJQUNELFdBQVcsTUFBTSxRQUFRLElBQUlvVSxFQUE0QixVQUFVLElBQUksT0FBT0UsTUFBaUI7QUFDM0YsVUFBSSxDQUFDOVgsRUFBTSxJQUFJOFgsRUFBYSxLQUFLLElBQUk7QUFDakMsY0FBTSxJQUFJcGpCLEVBQVUsUUFBUW9qQixFQUFhLEtBQUssSUFBSSxZQUFZO0FBRWxFLGFBQU87QUFBQSxRQUNILFVBQVVBLEVBQWE7QUFBQSxRQUN2QixNQUFNOVgsRUFBTSxJQUFJOFgsRUFBYSxLQUFLLElBQUk7QUFBQSxNQUN0RDtBQUFBLElBQ1EsQ0FBQyxDQUFDO0FBQUEsSUFDRixpQkFBaUJGLEVBQTRCLGdCQUFnQixJQUFJLENBQUNHLE1BQW1CO0FBQ2pGLFlBQU1wVCxJQUFXb1QsRUFBZSxTQUFTO0FBQ3pDLFVBQUksQ0FBQ0YsRUFBYyxJQUFJbFQsQ0FBUTtBQUMzQixjQUFNLElBQUlqUSxFQUFVLGlCQUFpQmlRLENBQVEsWUFBWTtBQUU3RCxhQUFPO0FBQUEsUUFDSCxVQUFVb1QsRUFBZTtBQUFBLFFBQ3pCLFVBQVVGLEVBQWMsSUFBSWxULENBQVE7QUFBQSxNQUNwRDtBQUFBLElBQ1EsQ0FBQztBQUFBLElBQ0Qsc0JBQXNCaVQsRUFBNEIsdUJBQXVCLENBQUEsR0FBSSxJQUFJLENBQUNqSSxPQUFxQjtBQUFBLE1BQ25HLGFBQWEsSUFBSXhFLEdBQW9Cd0UsRUFBZ0IsWUFDaEQsU0FBU21ILENBQVk7QUFBQSxNQUMxQixTQUFTbkgsRUFBZ0I7QUFBQSxJQUNyQyxFQUFVO0FBQUEsRUFDVjtBQUNJLFNBQU87QUFBQSxJQUNILEdBQUd6NUI7QUFBQSxJQUNILDJCQUEyQjtBQUN2QixhQUFRQSxFQUFPLFNBQVMsU0FBUyxLQUM3QkEsRUFBTyxVQUFVLFNBQVMsS0FDMUJBLEVBQU8sb0JBQW9CLFNBQVMsS0FDcENBLEVBQU8sZ0JBQWdCLFNBQVM7QUFBQSxJQUN4QztBQUFBLEVBQ1I7QUFDQTtBQzNrQkEsTUFBTThoQyxLQUFvQjtBQUluQixTQUFTQyxHQUFXQyxHQUFpQkMsR0FBMkI7QUFDbkUsU0FBSUQsSUFDTyxLQUVQQyxJQUNPLEtBRUo7QUFDWDtBQUNBLFNBQVNDLEdBQWlCbkssR0FBZTtBQUNyQyxTQUFJLE9BQU9BLEtBQWtCLFdBQ2xCLENBQUMsRUFBRSxNQUFNLFdBQVcsTUFBTSxRQUFRLFNBQVNBLEdBQWUsSUFFOUQsQ0FBQyxHQUFHQSxDQUFhO0FBQzVCO0FBU0EsTUFBTW9LLEdBQTBCO0FBQUEsRUFjNUIsWUFBWSxFQUFFLGdCQUFBQyxHQUFnQixvQkFBQUMsS0FBdUI7QUFWckQ7QUFBQTtBQUFBO0FBQUEsSUFBQWprQixFQUFBO0FBR0E7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFFQTtBQUFBLElBQUFBLEVBQUEsMEJBQW1CO0FBRW5CO0FBQUEsSUFBQUEsRUFBQSxtQkFBWSxvQkFBSSxRQUFPO0FBRXZCO0FBQUEsSUFBQUEsRUFBQSxxQkFBYyxvQkFBSSxRQUFPO0FBRXJCLFNBQUssaUJBQWlCZ2tCLEtBQWtCLFFBQ3hDLEtBQUsscUJBQXFCQyxLQUFzQjtBQUFBLEVBQ3BEO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxlQUFlLEVBQUUsZUFBQXRLLEdBQWUsZ0JBQUF1SyxHQUFnQixnQkFBQUMsRUFBYyxHQUFLO0FBQy9ELFFBQUksS0FBSztBQUNMO0FBRUosZUFBV2wrQixLQUFRNjlCLEdBQWlCbkssQ0FBYTtBQUM3QyxNQUFJMXpCLEtBQVEsT0FBT0EsS0FBUyxZQUN4QixLQUFLLFVBQVUsSUFBSUEsQ0FBSTtBQUcvQixTQUFLLG1CQUFtQjtBQUN4QixVQUFNbStCLElBQWlCRCxFQUFlQSxFQUFlLFNBQVMsQ0FBQztBQUMvRCxlQUFXakcsS0FBWWlHO0FBQ25CLGlCQUFXbCtCLEtBQVFpNEIsRUFBUztBQUN4QixRQUFJajRCLEtBQVEsT0FBT0EsS0FBUyxZQUN4QixLQUFLLFlBQVksSUFBSUEsQ0FBSTtBQUlyQyxJQUFJLENBQUMsS0FBSyxtQkFBa0JtK0IsS0FBQSxRQUFBQSxFQUFnQixnQkFDeEMsS0FBSyxxQkFBcUJBLEVBQWU7QUFFN0MsZUFBV24rQixLQUFRaStCLEdBQWdCO0FBQy9CLFlBQU05TixJQUFVbndCLEVBQUs7QUFDckIsTUFBSSxDQUFDbXdCLEtBQVcsT0FBT0EsS0FBWSxZQUcvQixLQUFLLFlBQVksSUFBSUEsQ0FBTyxLQUM1QixLQUFLLFVBQVUsSUFBSUEsQ0FBTztBQUFBLElBRWxDO0FBQUEsRUFDSjtBQUFBLEVBQ0EsaUJBQWlCdUMsR0FBZTtBQUM1QixRQUFLQSxHQUdMO0FBQUEsaUJBQVcxeUIsS0FBUTB5QixFQUFjO0FBQzdCLFFBQUkxeUIsS0FBUSxPQUFPQSxLQUFTLFlBQ3hCLEtBQUssWUFBWSxJQUFJQSxDQUFJO0FBR2pDLE1BQUksQ0FBQyxLQUFLLGtCQUNOLEtBQUssdUJBQXVCLFVBQzVCMHlCLEVBQWMsZUFDZCxLQUFLLHFCQUFxQkEsRUFBYztBQUFBO0FBQUEsRUFFaEQ7QUFBQSxFQUNBLGFBQWFnQixHQUFldUssR0FBZ0I7QUFDeEMsVUFBTUcsSUFBYSxDQUFBO0FBQ25CLFFBQUksQ0FBQyxLQUFLLGtCQUFrQjtBQUN4QixZQUFNQyxJQUFlUixHQUFpQm5LLENBQWE7QUFDbkQsaUJBQVcxekIsS0FBUXErQjtBQUNmLFFBQUFELEVBQVcsS0FBS3ArQixDQUFJLEdBQ2hCQSxLQUFRLE9BQU9BLEtBQVMsWUFDeEIsS0FBSyxVQUFVLElBQUlBLENBQUk7QUFHL0IsV0FBSyxtQkFBbUI7QUFBQSxJQUM1QjtBQUNBLGVBQVdBLEtBQVFpK0IsR0FBZ0I7QUFDL0IsVUFBSWorQixFQUFLLFNBQVM7QUFDZDtBQUVKLFlBQU1td0IsSUFBVW53QixFQUFLO0FBQ3JCLE1BQUksQ0FBQ213QixLQUFXLE9BQU9BLEtBQVksWUFHL0IsS0FBSyxVQUFVLElBQUlBLENBQU8sS0FBSyxLQUFLLFlBQVksSUFBSUEsQ0FBTyxNQUcvRGlPLEVBQVcsS0FBS2pPLENBQU8sR0FDdkIsS0FBSyxVQUFVLElBQUlBLENBQU87QUFBQSxJQUM5QjtBQUNBLFdBQU9pTztBQUFBLEVBQ1g7QUFDSjtBQUNPLFNBQVNyQyxHQUFhckksR0FBZXVLLEdBQWdCO0FBQ3hELFFBQU1LLElBQVdMLEVBQ1osT0FBTyxDQUFDaitCLE1BQVNBLEVBQUssU0FBUyxvQkFBb0IsRUFDbkQsSUFBSSxDQUFDQSxNQUFTQSxFQUFLLE9BQU87QUFDL0IsU0FBTyxDQUFDLEdBQUc2OUIsR0FBaUJuSyxDQUFhLEdBQUcsR0FBRzRLLENBQVE7QUFDM0Q7O0FBSU8sTUFBTTVULFdBQWV2QyxHQUFTO0FBQUEsRUFJakMsWUFBWWUsSUFBUyxJQUFJO0FBQ3JCLFVBQUs7QUFMTixJQUFBeEMsRUFBQSxNQUFBNlg7QUFDSCxJQUFBeGtCLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUdJLFNBQUssU0FBUztBQUFBLE1BQ1YsZUFBZW1QLEVBQU8saUJBQWlCa0MsR0FBdUI7QUFBQSxNQUM5RCxPQUFPbEMsRUFBTztBQUFBLE1BQ2QsZUFBZUEsRUFBTztBQUFBLE1BQ3RCLG9CQUFvQkEsRUFBTztBQUFBLE1BQzNCLGlCQUFpQkEsRUFBTztBQUFBLE1BQ3hCLGtCQUFrQkEsRUFBTztBQUFBLE1BQ3pCLGlCQUFpQkEsRUFBTyxtQkFBbUI7QUFBQSxNQUMzQywyQkFBMkJBLEVBQU8sNkJBQTZCO0FBQUEsTUFDL0QsY0FBY0EsRUFBTyxnQkFBZ0I7QUFBQSxNQUNyQyxTQUFTQSxFQUFPO0FBQUEsTUFDaEIsU0FBU0EsRUFBTztBQUFBLE1BQ2hCLGVBQWVBLEVBQU87QUFBQSxJQUNsQyxHQUNRLEtBQUssc0JBQXNCQSxFQUFPLG1CQUFtQixDQUFBLEdBQUksSUFBSStCLEVBQW9CLEdBQ2pGLEtBQUssdUJBQXVCL0IsRUFBTyxvQkFBb0IsQ0FBQSxHQUFJLElBQUlpQyxFQUFxQjtBQUFBLEVBQ3hGO0FBQUEsRUFxZUEsSUFBSXBILEdBQU92a0IsR0FBT2dCLElBQVU7QUFBQSxJQUN4QixRQUFRO0FBQUEsSUFDUixTQUFTO0FBQUEsRUFDakIsR0FBTztBQUNDLFdBQUloQixhQUFpQm04QixNQUFZbjhCLEVBQU0sU0FDNUJnL0IsR0FBVWgvQixFQUFNLFFBQVEsYUFDdkJBLEVBQU0scUJBQ053eEIsR0FBZXh4QixFQUFNLGlCQUFpQixHQUV0Q2dCLEtBQUEsUUFBQUEsRUFBUyxTQUNGaStCLEVBQUEsTUFBS0YsSUFBQUcsSUFBTCxXQUEwQjNhLEdBQU92a0IsR0FBT2dCLEtBR3hDaStCLEVBQUEsTUFBS0YsSUFBQUksSUFBTCxXQUE2QjVhLEdBQU92a0IsR0FBT2dCLEdBRXpELElBRUVvK0IsR0FBaUIsWUFDaEJwK0IsS0FBQSxRQUFBQSxFQUFTLFNBQ0ZpK0IsRUFBQSxNQUFLRixJQUFBRyxJQUFMLFdBQTBCM2EsR0FBT3ZrQixHQUFPZ0IsS0FHeENpK0IsRUFBQSxNQUFLRixJQUFBSSxJQUFMLFdBQTZCNWEsR0FBT3ZrQixHQUFPZ0IsSUFFdkQ7QUFBQSxNQUNDLFNBQVMsS0FBSyxPQUFPO0FBQUEsTUFDckIsTUFBTSxLQUFLLE9BQU87QUFBQSxNQUNsQixTQUFTLEtBQUssT0FBTztBQUFBLE1BQ3JCLFVBQVUsS0FBSyxPQUFPO0FBQUEsSUFDbEMsQ0FBUztBQUFBLEVBQ0w7QUFDSjtBQTFoQk8rOUIsS0FBQSxlQTBCR0ksS0FBdUIsZUFBQy9DLEdBQWVwOEIsR0FBT2dCLEdBQVM7QUFDekQsU0FBT3V3QixHQUFtQixZQUFZOztBQUVsQyxVQUFNOE4sSUFBaUJyL0IsYUFBaUJtOEIsSUFDbEM3aEIsSUFBUStrQixJQUNSci9CLElBQ0EsSUFBSW04QixHQUFTbjdCLEVBQVEsbUJBQW1CMnVCLEtBQ3BDM3VCLEVBQVEsVUFDUixJQUFJMnVCLEdBQVczdUIsRUFBUSxPQUFPLEdBQUdoQixHQUFPbzhCLEdBQWVwN0IsRUFBUSxZQUFZaTlCLEVBQWlCLEdBQ2hHcUIsSUFBNEJ0K0IsRUFBUSxrQkFBa0JBLEVBQVEscUJBQzlELElBQUlzOUIsR0FBMEI7QUFBQSxNQUM1QixnQkFBZ0J0OUIsRUFBUTtBQUFBLE1BQ3hCLG9CQUFvQkEsRUFBUTtBQUFBLElBQ2hELENBQWlCLElBQ0M7QUFDTixJQUFJcytCLEtBQTZCRCxLQUM3QkMsRUFBMEIsZUFBZTtBQUFBLE1BQ3JDLGVBQWVobEIsRUFBTTtBQUFBLE1BQ3JCLGdCQUFnQkEsRUFBTTtBQUFBLE1BQ3RCLGdCQUFnQkEsRUFBTTtBQUFBLElBQzFDLENBQWlCO0FBRUwsUUFBSTtBQUNBLGlCQUFhO0FBQ1QsY0FBTWlsQixJQUFxQmpsQixFQUFNLGNBQWMsVUFBVSxVQUNyREEsRUFBTSxjQUFjLFVBQVUsTUFDN0IsS0FBSyxPQUFPLFVBQVUsVUFBYSxLQUFLLE9BQU8sVUFBVTtBQUM5RCxZQUFJNE8sSUFBUXNXLEdBQVlsbEIsRUFBTSxjQUFjLE9BQU8sS0FBSyxPQUFPLEtBQUs7QUFRcEUsWUFQSSxPQUFPNE8sS0FBVSxhQUNqQkEsSUFBUSxNQUFNLEtBQUssT0FBTyxjQUFjLFNBQVNBLENBQUssSUFHMUQ1TyxFQUFNLGVBQWVBLEVBQU0sZ0JBQWdCO0FBQUEsVUFDdkMsTUFBTTtBQUFBLFFBQzlCLEdBQ3dCQSxFQUFNLGFBQWEsU0FBUywwQkFBMEI7QUFFdEQsY0FEQWlJLEVBQU8sTUFBTSw4QkFBOEIsR0FDdkMsQ0FBQ2pJLEVBQU0scUJBQXFCLENBQUNBLEVBQU07QUFDbkMsa0JBQU0sSUFBSUssRUFBVSw2Q0FBNkNMLENBQUs7QUFFMUUsZ0JBQU1tbEIsSUFBYSxNQUFNaEwsR0FBc0NuYSxFQUFNLGVBQWVBLEVBQU0sZ0JBQWdCQSxFQUFNLGlCQUFpQkEsRUFBTSxtQkFBbUJBLEVBQU0sd0JBQXdCLE1BQU1BLENBQUs7QUFLbk0sY0FKQUEsRUFBTSxnQkFBZ0IsV0FBV0EsRUFBTSxlQUFlQSxFQUFNLHVCQUF1QixTQUFTLEdBQzVGQSxFQUFNLGlCQUFpQm1sQixFQUFXLGVBQ2xDbmxCLEVBQU0sa0JBQWtCbWxCLEVBQVcsZ0JBQ25DbmxCLEVBQU0sZUFBZW1sQixFQUFXLFVBQzVCQSxFQUFXLFNBQVMsU0FBUztBQUU3QixtQkFBTyxJQUFJQyxHQUFVcGxCLENBQUs7QUFFOUI7QUFBQSxRQUNKO0FBQ0EsWUFBSUEsRUFBTSxhQUFhLFNBQVMsdUJBQXVCO0FBQ25ELGdCQUFNaVIsSUFBVyxNQUFNalIsRUFBTSxjQUFjLG1CQUFtQkEsRUFBTSxRQUFRO0FBQzVFLGNBQUksQ0FBQ0EsRUFBTSxtQkFBbUI7QUFDMUIsa0JBQU1xbEIsSUFBZXBVLEVBQVMsSUFBSSxDQUFDbE4sT0FBTUEsR0FBRSxTQUFTO0FBQ3BELFlBQUEvRCxFQUFNLG9CQUFvQm9YLEdBQWdCO0FBQUEsY0FDdEMsTUFBTTtBQUFBLGdCQUNGLE1BQU1wWCxFQUFNLGNBQWM7QUFBQSxnQkFDMUIsVUFBVXFsQjtBQUFBLGdCQUNWLGFBQWFybEIsRUFBTSxjQUFjO0FBQUEsY0FDckU7QUFBQSxZQUNBLENBQTZCLEdBQ0RBLEVBQU0sa0JBQWtCLE1BQUssR0FDN0JrWCxHQUFlbFgsRUFBTSxpQkFBaUI7QUFBQSxVQUMxQztBQUNBLGdCQUFNMkwsSUFBUSxNQUFNM0wsRUFBTSxjQUFjLFlBQVlBLEVBQU0sUUFBUSxHQUM1RHNsQixJQUFrQjNaLEVBQU0sSUFBSSxDQUFDYixNQUFNbUwsR0FBY25MLENBQUMsQ0FBQyxHQUNuRHlhLElBQXFCdFUsRUFBUyxJQUFJLENBQUNsTixNQUFNbVMsR0FBaUJuUyxDQUFDLENBQUM7QUFLbEUsY0FKSS9ELEVBQU0sc0JBQ05BLEVBQU0sa0JBQWtCLFNBQVMsUUFBUTJMLEVBQU0sSUFBSSxDQUFDYixNQUFNQSxFQUFFLElBQUksSUFFcEU5SyxFQUFNLGdCQUNGQSxFQUFNLGVBQWVBLEVBQU07QUFDM0IsbUJBQUF2ZSxJQUFBdWUsRUFBTSxzQkFBTixRQUFBdmUsRUFBeUIsU0FBUztBQUFBLGNBQzlCLFNBQVM7QUFBQSxjQUNULE1BQU0sRUFBRSxXQUFXdWUsRUFBTSxVQUFTO0FBQUEsWUFDbEUsSUFDa0MsSUFBSUcsR0FBc0IsY0FBY0gsRUFBTSxTQUFTLGNBQWNBLENBQUs7QUFFcEZpSSxVQUFBQSxFQUFPLE1BQU0saUJBQWlCakksRUFBTSxjQUFjLElBQUksVUFBVUEsRUFBTSxZQUFZLEdBQUcsR0FDakZBLEVBQU0saUJBQWlCLEtBQ3ZCLE1BQU0ya0IsRUFBQSxNQUFLRixJQUFBZSxJQUFMLFdBQXlCeGxCO0FBRW5DLGdCQUFNeWxCLElBQVlULElBQ1pBLEVBQTBCLGFBQWFobEIsRUFBTSxnQkFBZ0JBLEVBQU0sZUFBZSxJQUNsRmlpQixHQUFhamlCLEVBQU0sZ0JBQWdCQSxFQUFNLGVBQWU7QUFDOUQsVUFBSUEsRUFBTSxzQkFDTkEsRUFBTSxjQUFjLEtBQUssZUFBZUEsRUFBTSxVQUFVQSxFQUFNLGFBQWEsR0FDM0UsS0FBSyxLQUFLLGVBQWVBLEVBQU0sVUFBVUEsRUFBTSxhQUFhO0FBRWhFLGNBQUlrYSxJQUFnQjtBQUFBLFlBQ2hCLEdBQUcsS0FBSyxPQUFPO0FBQUEsWUFDZixHQUFHbGEsRUFBTSxjQUFjO0FBQUEsVUFDbkQ7QUFDd0IsZ0JBQU0wbEIsSUFBcUIxbEIsRUFBTSxjQUFjO0FBQy9DLFVBQUFrYSxJQUFnQnlMLEdBQXlDVixHQUFtQlMsR0FBb0I5VyxHQUFPc0wsQ0FBYSxHQUNwSEEsSUFBZ0JGLEdBQXFCaGEsRUFBTSxlQUFlQSxFQUFNLGlCQUFpQmthLENBQWE7QUFDOUYsZ0JBQU1nSyxLQUFxQmMsS0FBQSxnQkFBQUEsRUFBMkIsdUJBQ2xEdCtCLEVBQVEsb0JBQ051OUIsS0FBaUJlLEtBQUEsZ0JBQUFBLEVBQTJCLG1CQUM5Q3QrQixFQUFRO0FBQ1osVUFBQXNaLEVBQU0sb0JBQW9CLE1BQU00TyxFQUFNLFlBQVk7QUFBQSxZQUM5QyxvQkFBb0IsTUFBTTVPLEVBQU0sY0FBYyxnQkFBZ0JBLEVBQU0sUUFBUTtBQUFBLFlBQzVFLFFBQVEsTUFBTUEsRUFBTSxjQUFjLFVBQVVBLEVBQU0sUUFBUTtBQUFBO0FBQUEsWUFFMUQsR0FBSWlsQixJQUFvQixFQUFFLHFCQUFxQixHQUFJLElBQUssQ0FBQTtBQUFBLFlBQ3hELE9BQU9RO0FBQUEsWUFDUCxvQkFBQXZCO0FBQUEsWUFDQSxnQkFBQUQ7QUFBQSxZQUNBLGVBQUEvSjtBQUFBLFlBQ0EsT0FBT29MO0FBQUEsWUFDUCxZQUFZNWhCLEdBQXFDMUQsRUFBTSxjQUFjLFVBQVU7QUFBQSxZQUMvRSxVQUFVdWxCO0FBQUEsWUFDVixTQUFTM0IsR0FBVyxLQUFLLE9BQU8saUJBQWlCLEtBQUssT0FBTyx5QkFBeUI7QUFBQSxZQUN0RixRQUFRbDlCLEVBQVE7QUFBQSxVQUM1QyxDQUF5QixHQUNEc1osRUFBTSxnQkFBZ0IsS0FBS0EsRUFBTSxpQkFBaUIsR0FDbERBLEVBQU0sU0FBUyxNQUFNLElBQUlBLEVBQU0sa0JBQWtCLEtBQUssR0FDdERBLEVBQU0sb0JBQW9CLElBQzFCZ2xCLEtBQUEsUUFBQUEsRUFBMkIsaUJBQWlCaGxCLEVBQU07QUFDbEQsZ0JBQU1zYSxJQUFvQjNCLEdBQXFCM1ksRUFBTSxtQkFBbUJBLEVBQU0sZUFBZTJMLEdBQU9zRixDQUFRO0FBQzVHLFVBQUFqUixFQUFNLHlCQUF5QnNhO0FBQy9CLGdCQUFNNkssSUFBYSxNQUFNaEssR0FBMkJuYixFQUFNLGVBQWVBLEVBQU0sZ0JBQWdCQSxFQUFNLGlCQUFpQkEsRUFBTSxtQkFBbUJBLEVBQU0sd0JBQXdCLE1BQU1BLENBQUs7QUFDeEwsVUFBQUEsRUFBTSxnQkFBZ0IsV0FBV0EsRUFBTSxlQUFlQSxFQUFNLHVCQUF1QixTQUFTLEdBQzVGQSxFQUFNLGlCQUFpQm1sQixFQUFXLGVBQ2xDbmxCLEVBQU0sa0JBQWtCbWxCLEVBQVcsZ0JBQ25DbmxCLEVBQU0sZUFBZW1sQixFQUFXO0FBQUEsUUFDcEM7QUFDQSxZQUFJbmxCLEVBQU0sZ0JBQ05BLEVBQU0sYUFBYSxTQUFTO0FBQzVCLHVCQUFNMmtCLEVBQUEsTUFBS0YsSUFBQW1CLElBQUwsV0FBMEI1bEIsR0FBT0EsRUFBTSxhQUFhLFNBQzFELEtBQUssS0FBSyxhQUFhQSxFQUFNLFVBQVVBLEVBQU0sZUFBZUEsRUFBTSxhQUFhLE1BQU0sR0FDckZBLEVBQU0sY0FBYyxLQUFLLGFBQWFBLEVBQU0sVUFBVUEsRUFBTSxhQUFhLE1BQU0sR0FDeEUsSUFBSW9sQixHQUFVcGxCLENBQUs7QUFFekIsWUFBSUEsRUFBTSxnQkFDWEEsRUFBTSxhQUFhLFNBQVM7QUFDNUIsVUFBQUEsRUFBTSxnQkFBZ0JBLEVBQU0sYUFBYSxVQUNyQ0EsRUFBTSxzQkFDTkEsRUFBTSxrQkFBa0IsSUFBRyxHQUMzQm1YLEdBQWdCLEdBQ2hCblgsRUFBTSxvQkFBb0IsU0FFOUJBLEVBQU0sb0JBQW9CLElBRTFCQSxFQUFNLGVBQWUsRUFBRSxNQUFNLHNCQUFxQjtBQUFBLGFBRWpEO0FBQUEsY0FBSUEsRUFBTSxnQkFDWEEsRUFBTSxhQUFhLFNBQVM7QUFFNUIsbUJBQU8sSUFBSW9sQixHQUFVcGxCLENBQUs7QUFHMUJpSSxVQUFBQSxFQUFPLE1BQU0sbUJBQW1CO0FBQUE7QUFBQSxNQUV4QztBQUFBLElBQ0osU0FDTzdiLEdBQUs7QUFDUixZQUFJNFQsRUFBTSxxQkFDTkEsRUFBTSxrQkFBa0IsU0FBUztBQUFBLFFBQzdCLFNBQVM7QUFBQSxRQUNULE1BQU0sRUFBRSxPQUFPLE9BQU81VCxDQUFHLEVBQUM7QUFBQSxNQUNsRCxDQUFxQixHQUVDQTtBQUFBLElBQ1YsVUFDWjtBQUNnQixNQUFJNFQsRUFBTSx3QkFDRmplLElBQUFpZSxFQUFNLGlCQUFOLGdCQUFBamUsRUFBb0IsVUFBUyw0QkFFN0JpZSxFQUFNLGtCQUFrQixJQUFHLEdBRS9CbVgsR0FBZ0I7QUFBQSxJQUV4QjtBQUFBLEVBQ0osQ0FBQztBQUNMLEdBQ01xTyxLQUFtQixlQUFDeGxCLEdBQU87QUFDN0IsUUFBTTZsQixJQUFhLEtBQUssbUJBQW1CLE9BQU83bEIsRUFBTSxjQUFjLGdCQUFnQixJQUFJbVIsRUFBb0IsQ0FBQztBQUMvRyxNQUFJMFUsRUFBVyxTQUFTLEdBQUc7QUFDdkIsVUFBTUMsSUFBZ0I7QUFBQSxNQUNsQixPQUFPOWxCLEVBQU07QUFBQSxNQUNiLE9BQU9BLEVBQU07QUFBQSxNQUNiLFNBQVNBLEVBQU07QUFBQSxJQUMvQjtBQUNZLFFBQUk7QUFDQSxZQUFNbFYsSUFBVSxNQUFNLFFBQVEsSUFBSSs2QixFQUFXLElBQUksT0FBT0UsTUFDN0NwTyxHQUFrQixPQUFPMU0sTUFBUztBQUNyQyxjQUFNcHBCLElBQVMsTUFBTWtrQyxFQUFVLElBQUlELENBQWE7QUFDaEQsZUFBQTdhLEVBQUssU0FBUyxZQUFZcHBCLEVBQU8sT0FBTyxtQkFDakNBO0FBQUEsTUFDWCxHQUFHLEVBQUUsTUFBTSxFQUFFLE1BQU1ra0MsRUFBVSxLQUFJLEVBQUUsR0FBSS9sQixFQUFNLGlCQUFpQixDQUNqRSxDQUFDO0FBQ0YsaUJBQVduZSxLQUFVaUo7QUFDakIsWUFBSWpKLEVBQU8sT0FBTztBQUNkLGdCQUFJbWUsRUFBTSxxQkFDTkEsRUFBTSxrQkFBa0IsU0FBUztBQUFBLFlBQzdCLFNBQVM7QUFBQSxZQUNULE1BQU0sRUFBRSxXQUFXbmUsRUFBTyxVQUFVLEtBQUk7QUFBQSxVQUN4RSxDQUE2QixHQUVDLElBQUkyZSxHQUFnQyw4QkFBOEIsS0FBSyxVQUFVM2UsRUFBTyxPQUFPLFVBQVUsQ0FBQyxJQUFJQSxHQUFRbWUsQ0FBSztBQUFBLElBRzdJLFNBQ09oWSxHQUFHO0FBQ04sWUFBSUEsYUFBYXdZLEtBQ1B4WSxLQUdWZ1ksRUFBTSxnQkFDQSxJQUFJTSxHQUF3Qix1Q0FBdUN0WSxDQUFDLElBQUlBLEdBQUdnWSxDQUFLO0FBQUEsSUFDMUY7QUFBQSxFQUNKO0FBQ0osR0FDTTRsQixLQUFvQixlQUFDNWxCLEdBQU82RCxHQUFRO0FBQ3RDLFFBQU1naUIsSUFBYSxLQUFLLG9CQUFvQixPQUFPN2xCLEVBQU0sY0FBYyxpQkFBaUIsSUFBSXFSLEVBQXFCLENBQUM7QUFDbEgsTUFBSXdVLEVBQVcsU0FBUyxHQUFHO0FBQ3ZCLFVBQU1HLElBQWNobUIsRUFBTSxjQUFjLG1CQUFtQjZELENBQU0sR0FDM0RpaUIsSUFBZ0I7QUFBQSxNQUNsQixPQUFPOWxCLEVBQU07QUFBQSxNQUNiLGFBQUFnbUI7QUFBQSxNQUNBLFNBQVNobUIsRUFBTTtBQUFBLE1BQ2YsU0FBUyxFQUFFLGVBQWVBLEVBQU0sa0JBQWlCO0FBQUEsSUFDakU7QUFDWSxRQUFJO0FBQ0EsWUFBTWxWLElBQVUsTUFBTSxRQUFRLElBQUkrNkIsRUFBVyxJQUFJLE9BQU9FLE1BQzdDcE8sR0FBa0IsT0FBTzFNLE1BQVM7QUFDckMsY0FBTXBwQixJQUFTLE1BQU1ra0MsRUFBVSxJQUFJRCxDQUFhO0FBQ2hELGVBQUE3YSxFQUFLLFNBQVMsWUFBWXBwQixFQUFPLE9BQU8sbUJBQ2pDQTtBQUFBLE1BQ1gsR0FBRyxFQUFFLE1BQU0sRUFBRSxNQUFNa2tDLEVBQVUsS0FBSSxFQUFFLEdBQUkvbEIsRUFBTSxpQkFBaUIsQ0FDakUsQ0FBQztBQUNGLGlCQUFXbmUsS0FBVWlKO0FBQ2pCLFlBQUlqSixFQUFPLE9BQU87QUFDZCxnQkFBSW1lLEVBQU0scUJBQ05BLEVBQU0sa0JBQWtCLFNBQVM7QUFBQSxZQUM3QixTQUFTO0FBQUEsWUFDVCxNQUFNLEVBQUUsV0FBV25lLEVBQU8sVUFBVSxLQUFJO0FBQUEsVUFDeEUsQ0FBNkIsR0FFQyxJQUFJNGUsR0FBaUMsK0JBQStCLEtBQUssVUFBVTVlLEVBQU8sT0FBTyxVQUFVLENBQUMsSUFBSUEsR0FBUW1lLENBQUs7QUFBQSxJQUcvSSxTQUNPaFksR0FBRztBQUNOLFlBQUlBLGFBQWF5WSxLQUNQelksSUFFSixJQUFJc1ksR0FBd0Isd0NBQXdDdFksQ0FBQyxJQUFJQSxHQUFHZ1ksQ0FBSztBQUFBLElBQzNGO0FBQUEsRUFDSjtBQUNKLEdBSU1pbUIsS0FBYyxlQUFDcGtDLEdBQVE2RSxHQUFTcStCLEdBQWdCOztBQUNsRCxRQUFNQyxJQUE0QnQrQixFQUFRLGtCQUFrQkEsRUFBUSxxQkFDOUQsSUFBSXM5QixHQUEwQjtBQUFBLElBQzVCLGdCQUFnQnQ5QixFQUFRO0FBQUEsSUFDeEIsb0JBQW9CQSxFQUFRO0FBQUEsRUFDNUMsQ0FBYSxJQUNDO0FBQ04sRUFBSXMrQixLQUE2QkQsS0FDN0JDLEVBQTBCLGVBQWU7QUFBQSxJQUNyQyxlQUFlbmpDLEVBQU8sTUFBTTtBQUFBLElBQzVCLGdCQUFnQkEsRUFBTyxNQUFNO0FBQUEsSUFDN0IsZ0JBQWdCQSxFQUFPLE1BQU07QUFBQSxFQUM3QyxDQUFhO0FBRUwsTUFBSTtBQUNBLGVBQWE7QUFDVCxZQUFNNGdDLElBQWU1Z0MsRUFBTyxNQUFNLGVBQzVCb3ZCLElBQVcsTUFBTXdSLEVBQWEsbUJBQW1CNWdDLEVBQU8sTUFBTSxRQUFRLEdBQ3RFOHBCLElBQVEsTUFBTThXLEVBQWEsWUFBWTVnQyxFQUFPLE1BQU0sUUFBUSxHQUM1RHlqQyxJQUFrQjNaLEVBQU0sSUFBSSxDQUFDYixNQUFNbUwsR0FBY25MLENBQUMsQ0FBQyxHQUNuRHlhLElBQXFCdFUsRUFBUyxJQUFJLENBQUNsTixNQUFNbVMsR0FBaUJuUyxDQUFDLENBQUM7QUFJbEUsVUFIQWxpQixFQUFPLE1BQU0sZUFBZUEsRUFBTyxNQUFNLGdCQUFnQjtBQUFBLFFBQ3JELE1BQU07QUFBQSxNQUMxQixHQUNvQkEsRUFBTyxNQUFNLGFBQWEsU0FBUywwQkFBMEI7QUFFN0QsWUFEQW9tQixFQUFPLE1BQU0sOEJBQThCLEdBQ3ZDLENBQUNwbUIsRUFBTyxNQUFNLHFCQUNkLENBQUNBLEVBQU8sTUFBTTtBQUNkLGdCQUFNLElBQUl3ZSxFQUFVLDZDQUE2Q3hlLEVBQU8sS0FBSztBQUVqRixjQUFNc2pDLElBQWEsTUFBTWhMLEdBQXNDdDRCLEVBQU8sTUFBTSxlQUFlQSxFQUFPLE1BQU0sZ0JBQWdCQSxFQUFPLE1BQU0saUJBQWlCQSxFQUFPLE1BQU0sbUJBQW1CQSxFQUFPLE1BQU0sd0JBQXdCLE1BQU1BLEVBQU8sS0FBSztBQU03TyxZQUxBbStCLEdBQW1CbitCLEdBQVFzakMsQ0FBVSxHQUNyQ3RqQyxFQUFPLE1BQU0sZ0JBQWdCLFdBQVdBLEVBQU8sTUFBTSxlQUFlQSxFQUFPLE1BQU0sdUJBQXVCLFNBQVMsR0FDakhBLEVBQU8sTUFBTSxpQkFBaUJzakMsRUFBVyxlQUN6Q3RqQyxFQUFPLE1BQU0sa0JBQWtCc2pDLEVBQVcsZ0JBQzFDdGpDLEVBQU8sTUFBTSxlQUFlc2pDLEVBQVcsVUFDbkNBLEVBQVcsU0FBUyxTQUFTO0FBRTdCO0FBRUo7QUFBQSxNQUNKO0FBQ0EsVUFBSXRqQyxFQUFPLE1BQU0sYUFBYSxTQUFTLHVCQUF1QjtBQUMxRCxZQUFJLENBQUNBLEVBQU8sTUFBTSxtQkFBbUI7QUFDakMsZ0JBQU13akMsS0FBZXBVLEVBQVMsSUFBSSxDQUFDbE4sT0FBTUEsR0FBRSxTQUFTO0FBQ3BELFVBQUFsaUIsRUFBTyxNQUFNLG9CQUFvQnUxQixHQUFnQjtBQUFBLFlBQzdDLE1BQU07QUFBQSxjQUNGLE1BQU1xTCxFQUFhO0FBQUEsY0FDbkIsVUFBVTRDO0FBQUEsY0FDVixPQUFPMVosRUFBTSxJQUFJLENBQUNiLE9BQU1BLEdBQUUsSUFBSTtBQUFBLGNBQzlCLGFBQWEyWCxFQUFhO0FBQUEsWUFDMUQ7QUFBQSxVQUNBLENBQXlCLEdBQ0Q1Z0MsRUFBTyxNQUFNLGtCQUFrQixNQUFLLEdBQ3BDcTFCLEdBQWVyMUIsRUFBTyxNQUFNLGlCQUFpQjtBQUFBLFFBQ2pEO0FBRUEsWUFEQUEsRUFBTyxNQUFNLGdCQUNUQSxFQUFPLE1BQU0sZUFBZUEsRUFBTyxNQUFNO0FBQ3pDLGlCQUFBSixJQUFBSSxFQUFPLE1BQU0sc0JBQWIsUUFBQUosRUFBZ0MsU0FBUztBQUFBLFlBQ3JDLFNBQVM7QUFBQSxZQUNULE1BQU0sRUFBRSxXQUFXSSxFQUFPLE1BQU0sVUFBUztBQUFBLFVBQ3JFLElBQzhCLElBQUlzZSxHQUFzQixjQUFjdGUsRUFBTyxNQUFNLFNBQVMsY0FBY0EsRUFBTyxLQUFLO0FBRWxHb21CLFFBQUFBLEVBQU8sTUFBTSxpQkFBaUJ3YSxFQUFhLElBQUksVUFBVTVnQyxFQUFPLE1BQU0sWUFBWSxHQUFHO0FBQ3JGLGNBQU1vakMsSUFBcUJ4QyxFQUFhLFVBQVUsVUFBYUEsRUFBYSxVQUFVLE1BQ2pGLEtBQUssT0FBTyxVQUFVLFVBQWEsS0FBSyxPQUFPLFVBQVU7QUFDOUQsWUFBSTdULElBQVFzVyxHQUFZekMsRUFBYSxPQUFPLEtBQUssT0FBTyxLQUFLO0FBQzdELFFBQUksT0FBTzdULEtBQVUsYUFDakJBLElBQVEsTUFBTSxLQUFLLE9BQU8sY0FBYyxTQUFTQSxDQUFLLElBRXREL3NCLEVBQU8sTUFBTSxpQkFBaUIsS0FDOUIsTUFBTThpQyxFQUFBLE1BQUtGLElBQUFlLElBQUwsV0FBeUIzakMsRUFBTztBQUUxQyxZQUFJcTRCLElBQWdCO0FBQUEsVUFDaEIsR0FBRyxLQUFLLE9BQU87QUFBQSxVQUNmLEdBQUd1SSxFQUFhO0FBQUEsUUFDeEM7QUFDb0IsY0FBTWlELElBQXFCakQsRUFBYTtBQUN4QyxRQUFBdkksSUFBZ0J5TCxHQUF5Q1YsR0FBbUJTLEdBQW9COVcsR0FBT3NMLENBQWEsR0FDcEhBLElBQWdCRixHQUFxQnlJLEdBQWM1Z0MsRUFBTyxNQUFNLGlCQUFpQnE0QixDQUFhO0FBQzlGLGNBQU11TCxJQUFZVCxJQUNaQSxFQUEwQixhQUFhbmpDLEVBQU8sT0FBT0EsRUFBTyxRQUFRLElBQ3BFb2dDLEdBQWFwZ0MsRUFBTyxPQUFPQSxFQUFPLFFBQVE7QUFDaEQsUUFBSUEsRUFBTyxNQUFNLHNCQUNiNGdDLEVBQWEsS0FBSyxlQUFlNWdDLEVBQU8sTUFBTSxVQUFVNGdDLENBQVksR0FDcEUsS0FBSyxLQUFLLGVBQWU1Z0MsRUFBTyxNQUFNLFVBQVU0Z0MsQ0FBWTtBQUVoRSxZQUFJeUQ7QUFDSixjQUFNaEMsS0FBcUJjLEtBQUEsZ0JBQUFBLEVBQTJCLHVCQUNsRHQrQixFQUFRLG9CQUNOdTlCLEtBQWlCZSxLQUFBLGdCQUFBQSxFQUEyQixtQkFBa0J0K0IsRUFBUTtBQUM1RSx5QkFBaUIybUIsTUFBU3VCLEVBQU0sb0JBQW9CO0FBQUEsVUFDaEQsb0JBQW9CLE1BQU02VCxFQUFhLGdCQUFnQjVnQyxFQUFPLE1BQU0sUUFBUTtBQUFBLFVBQzVFLFFBQVEsTUFBTTRnQyxFQUFhLFVBQVU1Z0MsRUFBTyxNQUFNLFFBQVE7QUFBQTtBQUFBLFVBRTFELEdBQUlvakMsSUFBb0IsRUFBRSxxQkFBcUIsR0FBSSxJQUFLLENBQUE7QUFBQSxVQUN4RCxPQUFPUTtBQUFBLFVBQ1Asb0JBQUF2QjtBQUFBLFVBQ0EsZ0JBQUFEO0FBQUEsVUFDQSxlQUFBL0o7QUFBQSxVQUNBLE9BQU9vTDtBQUFBLFVBQ1AsVUFBVUM7QUFBQSxVQUNWLFlBQVk3aEIsR0FBcUMrZSxFQUFhLFVBQVU7QUFBQSxVQUN4RSxTQUFTbUIsR0FBVyxLQUFLLE9BQU8saUJBQWlCLEtBQUssT0FBTyx5QkFBeUI7QUFBQSxVQUN0RixRQUFRbDlCLEVBQVE7QUFBQSxRQUN4QyxDQUFxQixHQUFHO0FBQ0EsY0FBSTJtQixHQUFNLFNBQVMsaUJBQWlCO0FBQ2hDLGtCQUFNMUQsS0FBU29MLEdBQTZCLE1BQU0xSCxFQUFLO0FBQ3ZELFlBQUE2WSxJQUFnQjtBQUFBLGNBQ1osT0FBTyxJQUFJalIsR0FBTXRMLEdBQU8sU0FBUyxLQUFLO0FBQUEsY0FDdEMsUUFBUUEsR0FBTyxTQUFTO0FBQUEsY0FDeEIsWUFBWUEsR0FBTyxTQUFTO0FBQUEsWUFDNUQ7QUFBQSxVQUN3QjtBQUNBLGNBQUk5bkIsRUFBTztBQUdQO0FBRUosVUFBQUEsRUFBTyxTQUFTLElBQUkyMkIsR0FBdUJuTCxFQUFLLENBQUM7QUFBQSxRQUNyRDtBQUVBLFlBREF4ckIsRUFBTyxNQUFNLG9CQUFvQixJQUM3QixDQUFDcWtDO0FBQ0QsZ0JBQU0sSUFBSTlsQixHQUFtQiwyQ0FBMkN2ZSxFQUFPLEtBQUs7QUFFeEYsUUFBQUEsRUFBTyxNQUFNLG9CQUFvQnFrQyxHQUNqQ2xCLEtBQUEsUUFBQUEsRUFBMkIsaUJBQWlCa0IsSUFDNUNya0MsRUFBTyxNQUFNLGdCQUFnQixLQUFLQSxFQUFPLE1BQU0saUJBQWlCO0FBQ2hFLGNBQU15NEIsSUFBb0IzQixHQUFxQjkyQixFQUFPLE1BQU0sbUJBQW1CNGdDLEdBQWM5VyxHQUFPc0YsQ0FBUTtBQUM1RyxRQUFBcHZCLEVBQU8sTUFBTSx5QkFBeUJ5NEI7QUFHdEMsY0FBTTZMLElBQWUsSUFBSSxJQUFJN0wsRUFBa0IsUUFBUTtBQUN2RCxRQUFJNkwsRUFBYSxPQUFPLEtBQ3BCcEcsR0FBMkJsK0IsR0FBUXk0QixFQUFrQixRQUFRO0FBRWpFLGNBQU02SyxLQUFhLE1BQU1oSyxHQUEyQnNILEdBQWM1Z0MsRUFBTyxNQUFNLGdCQUFnQkEsRUFBTyxNQUFNLGlCQUFpQkEsRUFBTyxNQUFNLG1CQUFtQkEsRUFBTyxNQUFNLHdCQUF3QixNQUFNQSxFQUFPLEtBQUs7QUFDcE4sUUFBQW0rQixHQUFtQm4rQixHQUFRc2pDLElBQVk7QUFBQSxVQUNuQyxXQUFXZ0I7QUFBQSxRQUNuQyxDQUFxQixHQUNEdGtDLEVBQU8sTUFBTSxnQkFBZ0IsV0FBVzRnQyxHQUFjbkksRUFBa0IsU0FBUyxHQUNqRno0QixFQUFPLE1BQU0saUJBQWlCc2pDLEdBQVcsZUFDekN0akMsRUFBTyxNQUFNLGtCQUFrQnNqQyxHQUFXLGdCQUMxQ3RqQyxFQUFPLE1BQU0sZUFBZXNqQyxHQUFXO0FBQUEsTUFDM0M7QUFDQSxVQUFJdGpDLEVBQU8sTUFBTSxhQUFhLFNBQVMsMEJBQTBCO0FBQzdELGNBQU04aUMsRUFBQSxNQUFLRixJQUFBbUIsSUFBTCxXQUEwQi9qQyxFQUFPLE9BQU9BLEVBQU8sTUFBTSxhQUFhLFNBQ3hFLEtBQUssS0FBSyxhQUFhQSxFQUFPLE1BQU0sVUFBVTRnQyxHQUFjNWdDLEVBQU8sTUFBTSxhQUFhLE1BQU0sR0FDNUY0Z0MsRUFBYSxLQUFLLGFBQWE1Z0MsRUFBTyxNQUFNLFVBQVVBLEVBQU8sTUFBTSxhQUFhLE1BQU07QUFDdEY7QUFBQSxNQUNKLE9BQ0s7QUFBQSxZQUFJQSxFQUFPLE1BQU0sYUFBYSxTQUFTO0FBRXhDO0FBRUMsUUFBSUEsRUFBTyxNQUFNLGFBQWEsU0FBUyx1QkFDeENBLEVBQU8sTUFBTSxpQkFBZ0JFLElBQUFGLEVBQU8sTUFBTSxpQkFBYixnQkFBQUUsRUFDdkIsVUFDRkYsRUFBTyxNQUFNLHNCQUNiQSxFQUFPLE1BQU0sa0JBQWtCLElBQUcsR0FDbENzMUIsR0FBZ0IsSUFFcEJ0MUIsRUFBTyxNQUFNLG9CQUFvQixRQUNqQ0EsRUFBTyxTQUFTLElBQUk2MkIsR0FBMkI3MkIsRUFBTyxNQUFNLGFBQWEsQ0FBQyxHQUMxRUEsRUFBTyxNQUFNLG9CQUFvQixJQUVqQ0EsRUFBTyxNQUFNLGVBQWU7QUFBQSxVQUN4QixNQUFNO0FBQUEsUUFDOUIsS0FHb0JvbUIsRUFBTyxNQUFNLG1CQUFtQjtBQUFBO0FBQUEsSUFFeEM7QUFBQSxFQUNKLFNBQ08xbkIsR0FBTztBQUNWLFVBQUlzQixFQUFPLE1BQU0scUJBQ2JBLEVBQU8sTUFBTSxrQkFBa0IsU0FBUztBQUFBLE1BQ3BDLFNBQVM7QUFBQSxNQUNULE1BQU0sRUFBRSxPQUFPLE9BQU90QixDQUFLLEVBQUM7QUFBQSxJQUNoRCxDQUFpQixHQUVDQTtBQUFBLEVBQ1YsVUFDUjtBQUNZLElBQUlzQixFQUFPLE1BQU0sd0JBQ1RvQixJQUFBcEIsRUFBTyxNQUFNLGlCQUFiLGdCQUFBb0IsRUFBMkIsVUFBUyw0QkFDcENwQixFQUFPLE1BQU0sa0JBQWtCLElBQUcsR0FFdENzMUIsR0FBZ0I7QUFBQSxFQUV4QjtBQUNKLEdBSU15TixLQUFvQixlQUFDM2EsR0FBT3ZrQixHQUFPZ0IsR0FBUztBQUM5QyxTQUFBQSxJQUFVQSxLQUFXLENBQUEsR0FDZHV3QixHQUFtQixZQUFZO0FBRWxDLFVBQU04TixJQUFpQnIvQixhQUFpQm04QixJQUNsQzdoQixJQUFRK2tCLElBQ1JyL0IsSUFDQSxJQUFJbThCLEdBQVNuN0IsRUFBUSxtQkFBbUIydUIsS0FDcEMzdUIsRUFBUSxVQUNSLElBQUkydUIsR0FBVzN1QixFQUFRLE9BQU8sR0FBR2hCLEdBQU91a0IsR0FBT3ZqQixFQUFRLFlBQVlpOUIsRUFBaUIsR0FFeEY5aEMsSUFBUyxJQUFJdWtDLEdBQWtCO0FBQUEsTUFDakMsUUFBUTEvQixFQUFRO0FBQUEsTUFDaEIsT0FBQXNaO0FBQUEsSUFDaEIsQ0FBYTtBQUVELElBQUFuZSxFQUFPLFdBQVc2RSxFQUFRLFlBQVlzWixFQUFNO0FBRTVDLFVBQU1xbUIsSUFBb0IxQixFQUFBLE1BQUtGLElBQUF3QixJQUFMLFdBQW9CcGtDLEdBQVE2RSxHQUFTcStCLEdBQWdCLEtBQUssTUFBTTtBQUN0RixNQUFBbGpDLEVBQU8sTUFBSztBQUFBLElBQ2hCLEdBQUcsQ0FBQ3VLLE1BQVE7QUFDUixNQUFBdkssRUFBTyxZQUFZdUssQ0FBRztBQUFBLElBQzFCLENBQUM7QUFFRCxXQUFBdkssRUFBTyxzQkFBc0J3a0MsQ0FBaUIsR0FDdkN4a0M7QUFBQSxFQUNYLENBQUM7QUFDTDtBQXlDRyxTQUFTcWpDLEdBQVlvQixHQUFZQyxHQUFnQjtBQUlwRCxTQUFLLE9BQU9ELEtBQWUsWUFDdkJBLE1BQWVwVixHQUFNLDZCQUNyQm9WLElBRU9BLElBRUpDLEtBQWtCRCxLQUFjcFYsR0FBTTtBQUNqRDtBQWdCQSxTQUFTeVUsR0FBeUNWLEdBQW1CUyxHQUFvQmMsR0FBYXRNLEdBQWU7O0FBQ2pIO0FBQUE7QUFBQSxJQUVBekwsR0FBYTtBQUFBLElBRVR3VztBQUFBLEtBRUMsT0FBT3VCLEtBQWdCLFlBQ3BCLENBQUNqWSxHQUE4QmlZLENBQVcsUUFDN0Mva0MsSUFBQWlrQyxFQUFtQixpQkFBbkIsUUFBQWprQyxFQUFpQyxjQUM5QndCLEtBQUFsQixJQUFBMmpDLEVBQW1CLGlCQUFuQixnQkFBQTNqQyxFQUFpQyxTQUFqQyxRQUFBa0IsRUFBdUMsY0FDdkNvQyxJQUFBcWdDLEVBQW1CLGlCQUFuQixRQUFBcmdDLEVBQWlDO0FBQUEsSUFBbUI7QUFDeEQsVUFBTW9oQyxJQUFzQixFQUFFLEdBQUd2TSxFQUFhO0FBRTlDLFlBQUE1MEIsSUFBT21oQyxFQUFvQixpQkFBM0IsZUFBQW5oQyxFQUF5QyxZQUN6Q29oQyxLQUFPbGhDLElBQUFpaEMsRUFBb0IsaUJBQXBCLGdCQUFBamhDLEVBQWtDLFNBQXpDLGVBQUFraEMsRUFBK0MsWUFDL0NDLElBQU9GLEVBQW9CLGlCQUEzQixlQUFBRSxFQUF5QyxrQkFDckNGLEVBQW9CLGNBQ3BCLE9BQU9BLEVBQW9CLFVBQVUsUUFDckMsT0FBT0EsRUFBb0IsVUFBVSxVQUVyQ0EsRUFBb0IsUUFDcEIsT0FBT0EsRUFBb0IsS0FBSyxXQUU3QkE7QUFBQSxFQUNYO0FBQ0EsU0FBT3ZNO0FBQ1g7QUMzdUJBLE1BQU0wTSxHQUFjO0FBQUEsRUFFaEIsWUFBWTVtQixHQUFPO0FBRG5CLElBQUFDLEVBQUE7QUFFSSxTQUFLLFFBQVFEO0FBQUEsRUFDakI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLElBQUksVUFBVTtBQUNWLFdBQU9paUIsR0FBYSxLQUFLLE9BQU8sS0FBSyxRQUFRO0FBQUEsRUFDakQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFTQSxJQUFJLFNBQVM7QUFDVCxXQUFPQSxHQUFhLENBQUEsR0FBSSxLQUFLLFFBQVE7QUFBQSxFQUN6QztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxRQUFRO0FBQ1IsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLElBQUksV0FBVztBQUNYLFdBQU8sS0FBSyxNQUFNO0FBQUEsRUFDdEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksZUFBZTtBQUNmLFdBQU8sS0FBSyxNQUFNO0FBQUEsRUFDdEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksaUJBQWlCO0FBQ2pCLFVBQU00RSxJQUFZLEtBQUs7QUFDdkIsV0FBT0EsS0FBYUEsRUFBVSxTQUFTLElBQ2pDQSxFQUFVQSxFQUFVLFNBQVMsQ0FBQyxFQUFFLGFBQ2hDO0FBQUEsRUFDVjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxZQUFZO0FBQ1osV0FBTyxLQUFLLE1BQU07QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSx3QkFBd0I7QUFDeEIsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSx5QkFBeUI7QUFDekIsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxnQkFBZ0I7O0FBQ2hCLGFBQUlwbEMsSUFBQSxLQUFLLE1BQU0saUJBQVgsZ0JBQUFBLEVBQXlCLFVBQVMsMkJBQzNCLEtBQUssTUFBTSxhQUFhLEtBQUssZ0JBRWpDLENBQUE7QUFBQSxFQUNYO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksY0FBYzs7QUFDZCxVQUFJQSxJQUFBLEtBQUssTUFBTSxpQkFBWCxnQkFBQUEsRUFBeUIsVUFBUztBQUNsQyxhQUFPLEtBQUssTUFBTSxjQUFjLG1CQUFtQixLQUFLLE1BQU0sYUFBYSxNQUFNO0FBRXJGd21CLElBQUFBLEVBQU8sS0FBSyxxREFBcUQ7QUFBQSxFQUVyRTtBQUNKO0FBSU8sTUFBTW1kLFdBQWtCd0IsR0FBYztBQUFBLEVBQ3pDLFlBQVk1bUIsR0FBTztBQUNmLFVBQU1BLENBQUs7QUFBQSxFQUNmO0FBQ0o7O0FBSU8sTUFBTW9tQixXQUEwQlEsR0FBYztBQUFBLEVBd0JqRCxZQUFZL2tDLElBQVMsSUFBSTtBQUNyQixVQUFNQSxFQUFPLEtBQUs7QUFmdEI7QUFBQTtBQUFBO0FBQUEsSUFBQW9lLEVBQUEscUJBQWM7QUFJZDtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQTJNLEVBQUEsTUFBQWthLElBQVM7QUFDVCxJQUFBbGEsRUFBQSxNQUFBbWE7QUFDQSxJQUFBbmEsRUFBQSxNQUFBb2E7QUFDQSxJQUFBcGEsRUFBQSxNQUFBcWE7QUFDQSxJQUFBcmEsRUFBQSxNQUFBc2E7QUFDQSxJQUFBdGEsRUFBQSxNQUFBdWE7QUFDQSxJQUFBdmEsRUFBQSxNQUFBd2E7QUFDQSxJQUFBeGEsRUFBQSxNQUFBeWEsSUFBYTtBQUNiLElBQUF6YSxFQUFBLE1BQUEwYTtBQUdJLFFBQUEvUixFQUFBLE1BQUt3UixJQUFVbGxDLEVBQU8sU0FDdEIwekIsRUFBQSxNQUFLMFIsSUFBa0IsSUFBSU0sR0FBZ0I7QUFBQSxNQUN2QyxPQUFPLENBQUNDLE1BQWU7QUFDbkIsUUFBQWpTLEVBQUEsTUFBS3lSLElBQXNCUTtBQUFBLE1BQy9CO0FBQUEsTUFDQSxRQUFRLE1BQU07QUFDVixRQUFBalMsRUFBQSxNQUFLOFIsSUFBYTtBQUFBLE1BQ3RCO0FBQUEsSUFDWixDQUFTLElBQ0Q5UixFQUFBLE1BQUsyUixJQUFvQixJQUFJLFFBQVEsQ0FBQ08sR0FBU0MsTUFBVztBQUN0RCxNQUFBblMsRUFBQSxNQUFLNFIsSUFBMkJNLElBQ2hDbFMsRUFBQSxNQUFLNlIsSUFBMEJNO0FBQUEsSUFDbkMsQ0FBQyxJQUNHeGEsRUFBQSxNQUFLNlosS0FBUztBQUNkLFlBQU1ZLElBQWMsTUFBTTs7QUFDdEIsWUFBSXphLEVBQUEsTUFBS21hO0FBQ0w7QUFFSixRQUFBOVIsRUFBQSxNQUFLOFIsSUFBYTtBQUNsQixjQUFNRyxJQUFhdGEsRUFBQSxNQUFLOFo7QUFFeEIsWUFEQXpSLEVBQUEsTUFBS3lSLElBQXNCLFNBQ3ZCOVosRUFBQSxNQUFLK1osSUFBZ0I7QUFDckIsY0FBSU87QUFDQSxnQkFBSTtBQUNBLGNBQUFBLEVBQVcsTUFBSztBQUFBLFlBQ3BCLFNBQ09wN0IsR0FBSztBQUNSNmIsY0FBQUEsRUFBTyxNQUFNLDZDQUE2QzdiLENBQUcsRUFBRTtBQUFBLFlBQ25FO0FBQUE7QUFJSixVQUFLOGdCLEVBQUEsTUFBSytaLElBQ0wsUUFBT3hsQyxJQUFBeXJCLEVBQUEsTUFBSzZaLFFBQUwsZ0JBQUF0bEMsRUFBYyxNQUFNLEVBQzNCLE1BQU0sQ0FBQzJLLE1BQVE7QUFDaEI2YixZQUFBQSxFQUFPLE1BQU0sOENBQThDN2IsQ0FBRyxFQUFFO0FBQUEsVUFDcEUsQ0FBQztBQUVMLFNBQUFySyxJQUFBbXJCLEVBQUEsTUFBS2lhLFFBQUwsUUFBQXBsQyxFQUFBO0FBQUEsTUFDSjtBQUNBLE1BQUltckIsRUFBQSxNQUFLNlosSUFBUSxVQUNiWSxFQUFXLElBR1h6YSxFQUFBLE1BQUs2WixJQUFRLGlCQUFpQixTQUFTWSxHQUFhLEVBQUUsTUFBTSxJQUFNO0FBQUEsSUFFMUU7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFyRUEsSUFBSSxlQUFlO0FBQ2YsV0FBTyxLQUFLO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBd0VBLFNBQVN6aEMsR0FBTTs7QUFDWCxJQUFLLEtBQUssY0FDTnpFLElBQUF5ckIsRUFBQSxNQUFLOFosUUFBTCxRQUFBdmxDLEVBQTBCLFFBQVF5RTtBQUFBLEVBRTFDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFFBQVE7O0FBQ0osSUFBSSxDQUFDLEtBQUssYUFBYWduQixFQUFBLE1BQUs4WixRQUN4QjlaLEVBQUEsTUFBSzhaLElBQW9CLE1BQUssR0FDOUJ6UixFQUFBLE1BQUt5UixJQUFzQixVQUMzQnZsQyxJQUFBeXJCLEVBQUEsTUFBS2lhLFFBQUwsUUFBQTFsQyxFQUFBO0FBQUEsRUFFUjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxZQUFZMkssR0FBSzs7QUFDYixJQUFJLENBQUMsS0FBSyxhQUFhOGdCLEVBQUEsTUFBSzhaLFFBQ3hCOVosRUFBQSxNQUFLOFosSUFBb0IsTUFBTTU2QixDQUFHLEdBQ2xDbXBCLEVBQUEsTUFBS3lSLElBQXNCLFVBRS9CelIsRUFBQSxNQUFLdVIsSUFBUzE2QixLQUNkM0ssSUFBQXlyQixFQUFBLE1BQUtrYSxRQUFMLFFBQUEzbEMsRUFBQSxXQUErQjJLLElBQy9COGdCLEVBQUEsTUFBS2dhLElBQWtCLE1BQU0sQ0FBQ2wvQixNQUFNO0FBQ2hDaWdCLE1BQUFBLEVBQU8sTUFBTSx5QkFBeUJqZ0IsQ0FBQyxFQUFFO0FBQUEsSUFDN0MsQ0FBQztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksWUFBWTtBQUNaLFdBQU9rbEIsRUFBQSxNQUFLbWE7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxXQUFXO0FBQ1AsV0FBT25hLEVBQUEsTUFBSytaO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxZQUFZO0FBQ1osV0FBTy9aLEVBQUEsTUFBS2dhO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksUUFBUTtBQUNSLFdBQU9oYSxFQUFBLE1BQUs0WjtBQUFBLEVBQ2hCO0FBQUEsRUFDQSxhQUFhcGdDLElBQVUsSUFBSTtBQUN2QixVQUFNa2hDLElBQVMxYSxFQUFBLE1BQUsrWixJQUFnQixZQUFZLElBQUlyWixHQUFnQjtBQUFBLE1BQ2hFLFVBQVVQLEdBQU9tYSxHQUFZO0FBQ3pCLFlBQUluYSxFQUFNLFNBQVMsNEJBQ2ZBLEVBQU0sS0FBSyxTQUFTLHFCQUFxQjtBQUN6QyxnQkFBTW5uQixJQUFPMnVCLEdBQXNCLE1BQU14SCxFQUFNLElBQUk7QUFDbkQsVUFBQW1hLEVBQVcsUUFBUXRoQyxFQUFLLEtBQUs7QUFBQSxRQUNqQztBQUFBLE1BQ0o7QUFBQSxJQUNaLENBQVMsQ0FBQztBQUNGLFdBQUlRLEVBQVEsNEJBQ0Q4bUIsR0FBUyxRQUFRb2EsQ0FBTSxJQUUzQkE7QUFBQSxFQUNYO0FBQUEsRUFDQSxDQUFDLE9BQU8sYUFBYSxJQUFJO0FBQ3JCLFdBQU8xYSxFQUFBLE1BQUsrWixJQUFnQixPQUFPLGFBQWEsRUFBQztBQUFBLEVBQ3JEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsc0JBQXNCWSxHQUFTO0FBQzNCLElBQUF0UyxFQUFBLE1BQUsrUixJQUFxQk87QUFBQSxFQUM5QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLHdCQUF3QjtBQUNwQixXQUFPM2EsRUFBQSxNQUFLb2E7QUFBQSxFQUNoQjtBQUNKO0FBMUpJUixLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQTtBQ2hJSixJQUFJUTtBQUNKLFNBQVNDLEtBQThCO0FBQ25DLFNBQUFELFlBQThCLElBQUlqYSxHQUFpQixJQUM1Q2lhO0FBQ1g7QUFNTyxTQUFTOUYsS0FBa0I7QUFDOUIsUUFBTWdHLElBQWVELEdBQTJCLEVBQUcsU0FBUTtBQUMzRCxTQUFJQyxLQUFBLFFBQUFBLEVBQWMsUUFDUEEsRUFBYSxRQUVqQjtBQUNYO0FBTU8sU0FBU2plLEtBQWlCO0FBQzdCLFFBQU1ELElBQWNpZSxHQUEyQixFQUFHLFNBQVE7QUFDMUQsU0FBSWplLEtBQUEsUUFBQUEsRUFBYSxPQUNOQSxFQUFZLE9BRWhCO0FBQ1g7QUFPQSxTQUFTbWUsR0FBZ0MzbkMsR0FBSTtBQUN6QyxTQUFPLFlBQVk7QUFDZixVQUFNcWlDLElBQVFYLEdBQWU7QUFDN0IsUUFBSSxDQUFDVztBQUNELFlBQU0sSUFBSSxNQUFNLGdCQUFnQjtBQUVwQyxVQUFNQSxFQUFNLE1BQUs7QUFDakIsVUFBTTlnQyxJQUFTLE1BQU12QixFQUFHcWlDLENBQUs7QUFFN0IsUUFBSTlnQyxhQUFrQnVrQyxJQUFtQjtBQUNyQyxZQUFNQyxJQUFvQnhrQyxFQUFPLHNCQUFxQjtBQUN0RCxVQUFJd2tDO0FBQ0EsZUFBQUEsRUFBa0IsUUFBUSxNQUFNMUQsRUFBTSxJQUFHLENBQUUsR0FDcEM5Z0M7QUFBQSxJQUVmO0FBRUEsaUJBQU04Z0MsRUFBTSxJQUFHLEdBQ1I5Z0M7QUFBQSxFQUNYO0FBQ0o7QUFRTyxlQUFlNmlDLEdBQVUvQixHQUFPcmlDLEdBQUlvRyxJQUFVLENBQUEsR0FBSTtBQUNyRCxRQUFNd2hDLElBQVcsT0FBT3ZGLEtBQVUsV0FDNUJ0TCxHQUFzQixFQUFHLFlBQVk7QUFBQSxJQUNuQyxHQUFHM3dCO0FBQUEsSUFDSCxNQUFNaThCO0FBQUEsRUFDbEIsQ0FBUyxJQUNDQTtBQUNOLFNBQU9vRixHQUEyQixFQUFHLElBQUksRUFBRSxPQUFPRyxLQUFZRCxHQUFnQzNuQyxDQUFFLENBQUM7QUFDckc7QUFTTyxlQUFld2tDLEdBQWlCeGtDLEdBQUlvRyxJQUFVLElBQUk7QUFFckQsTUFEcUJzN0IsR0FBZTtBQUdoQyxXQUFPLE1BQU0xaEMsRUFBRTtBQUVuQixRQUFNNG5DLElBQVc3USxLQUF5QixZQUFZM3dCLENBQU87QUFDN0QsU0FBT3FoQyxHQUEyQixFQUFHLElBQUksRUFBRSxPQUFPRyxLQUFZRCxHQUFnQzNuQyxDQUFFLENBQUM7QUFDckc7QUFNTyxTQUFTNDJCLEdBQWVqTSxHQUFNO0FBQ2pDLFFBQU03QixJQUFVMmUsR0FBMkIsRUFBRyxTQUFRO0FBQ3RELE1BQUksQ0FBQzNlO0FBQ0QsVUFBTSxJQUFJLE1BQU0seUJBQXlCO0FBRTdDLEVBQUlBLEVBQVEsU0FDUkEsRUFBUSxLQUFLLGVBQWVBLEVBQVEsY0FDcENBLEVBQVEsZUFBZUEsRUFBUSxPQUVuQ0EsRUFBUSxPQUFPNkIsR0FDZjhjLEdBQTJCLEVBQUcsVUFBVTNlLENBQU87QUFDbkQ7QUFDTyxTQUFTK04sS0FBbUI7O0FBQy9CLFFBQU0vTixJQUFVMmUsR0FBMkIsRUFBRyxTQUFRO0FBQ3RELEVBQUkzZSxNQUNBQSxFQUFRLE9BQU9BLEVBQVEsY0FDdkJBLEVBQVEsZ0JBQWUzbkIsSUFBQTJuQixFQUFRLGlCQUFSLGdCQUFBM25CLEVBQXNCLGNBQzdDc21DLEdBQTJCLEVBQUcsVUFBVTNlLENBQU87QUFFdkQ7QUFNTyxTQUFTb0csR0FBc0IyWSxHQUFXO0FBQzdDLFFBQU1yZSxJQUFjQyxHQUFjO0FBQ2xDLEVBQUlELEtBQ0FBLEVBQVksU0FBU3FlLENBQVM7QUFFdEM7QUFRTyxTQUFTQyxHQUFvQmhmLEdBQVM7O0FBQ3pDLFNBQU87QUFBQSxJQUNILFFBQU8zbkIsSUFBQTJuQixFQUFRLFVBQVIsZ0JBQUEzbkIsRUFBZTtBQUFBLElBQ3RCLE9BQU1NLElBQUFxbkIsRUFBUSxTQUFSLGdCQUFBcm5CLEVBQWM7QUFBQSxJQUNwQixlQUFja0IsSUFBQW1tQixFQUFRLGlCQUFSLGdCQUFBbm1CLEVBQXNCO0FBQUEsRUFDNUM7QUFDQTtBQU1PLFNBQVNnMEIsR0FBbUIzMkIsR0FBSTtBQUNuQyxRQUFNK25DLElBQWlCTixHQUEyQixFQUFHLFNBQVE7QUFDN0QsTUFBSSxDQUFDTTtBQUNELFVBQU0sSUFBSSxNQUFNLHlCQUF5QjtBQUU3QyxRQUFNQyxJQUFnQkYsR0FBb0JDLENBQWM7QUFDeEQsU0FBT04sR0FBMkIsRUFBRyxJQUFJTyxHQUFlaG9DLENBQUU7QUFDOUQ7QUNwSk8sTUFBTWlvQyxHQUFvQjtBQUFBLEVBQzdCLE1BQU0sT0FBTzFnQyxHQUFPO0FBQ2hCLFFBQUkrZixHQUFRLFVBQVU7QUFDbEJLLE1BQUFBLEVBQU8sTUFBTSxzQ0FBc0M7QUFDbkQ7QUFBQSxJQUNKO0FBQ0EsZUFBVy9oQixLQUFRMkI7QUFDZixNQUFJM0IsRUFBSyxTQUFTLFVBQ2QsUUFBUSxJQUFJLG1DQUFtQ0EsRUFBSyxPQUFPLFNBQVNBLEVBQUssSUFBSSxHQUFHQSxFQUFLLFVBQVUsWUFBWUEsRUFBSyxPQUFPLEtBQUssRUFBRSxFQUFFLElBR2hJLFFBQVEsSUFBSSwyQkFBMkIsS0FBSyxVQUFVQSxDQUFJLENBQUMsRUFBRTtBQUFBLEVBR3pFO0FBQ0o7O0FBQ08sTUFBTXNpQyxHQUFvQjtBQUFBLEVBVzdCLFlBQVlDLEdBQVU7QUFBQSxJQUFFLGNBQUFDLElBQWU7QUFBQSxJQUFNLGNBQUFDLElBQWU7QUFBQSxJQUFLLGVBQUFDLElBQWdCO0FBQUE7QUFBQSxJQUNqRixvQkFBQUMsSUFBcUI7QUFBQSxFQUFHLElBQU0sSUFBSTtBQVovQixJQUFBamMsRUFBQSxNQUFBa2M7QUFDSCxJQUFBbGMsRUFBQSxNQUFBbWM7QUFDQSxJQUFBbmMsRUFBQSxNQUFBb2M7QUFDQSxJQUFBcGMsRUFBQSxNQUFBcWM7QUFDQSxJQUFBcmMsRUFBQSxNQUFBc2M7QUFDQSxJQUFBdGMsRUFBQSxNQUFBdWM7QUFDQSxJQUFBdmMsRUFBQSxNQUFBd2MsSUFBVSxDQUFBO0FBQ1YsSUFBQXhjLEVBQUEsTUFBQXljO0FBQ0EsSUFBQXpjLEVBQUEsTUFBQTBjLElBQVc7QUFDWCxJQUFBMWMsRUFBQSxNQUFBMmMsSUFBb0I7QUFDcEIsSUFBQTNjLEVBQUEsTUFBQTRjLElBQTBCO0FBR3RCLElBQUFqVSxFQUFBLE1BQUt3VCxJQUFnQkwsSUFDckJuVCxFQUFBLE1BQUt5VCxJQUFnQkwsSUFDckJwVCxFQUFBLE1BQUswVCxJQUFpQkwsSUFDdEJyVCxFQUFBLE1BQUsyVCxJQUFxQlIsSUFBZUcsSUFDekN0VCxFQUFBLE1BQUs0VCxJQUFZVixJQUNqQmxULEVBQUEsTUFBSzhULElBQVNBLEtBS1ZwaEIsRUFBTyxNQUFNLHVKQUF1SjtBQUFBLEVBRTVLO0FBQUEsRUFDQSxRQUFRO0FBQ0osSUFBQXNOLEVBQUEsTUFBS2lVLElBQTBCLElBQUksZ0JBQWUsSUFDbEQ3RSxFQUFBLE1BQUttRSxJQUFBVyxJQUFMO0FBQUEsRUFDSjtBQUFBLEVBNENBLE1BQU0sYUFBYTlHLEdBQU87QUFDdEIsVUFBTWdDLEVBQUEsTUFBS21FLElBQUFZLElBQUwsV0FBa0IvRztBQUFBLEVBQzVCO0FBQUEsRUFDQSxNQUFNLFdBQVdnSCxHQUFRO0FBQUEsRUFFekI7QUFBQSxFQUNBLE1BQU0sWUFBWUMsR0FBTztBQUFBLEVBRXpCO0FBQUEsRUFDQSxNQUFNLFVBQVUzZSxHQUFNO0FBQ2xCLFVBQU0wWixFQUFBLE1BQUttRSxJQUFBWSxJQUFMLFdBQWtCemU7QUFBQSxFQUM1QjtBQUFBLEVBQ0EsTUFBTSxTQUFTOEMsR0FBUzs7QUFRcEIsU0FQSUEsS0FDQWIsRUFBQSxNQUFLbWMsSUFBTyxXQUFXLE1BQU07O0FBRXpCLE9BQUE1bkMsSUFBQXlyQixFQUFBLE1BQUtzYyxRQUFMLFFBQUEvbkMsRUFBOEI7QUFBQSxJQUNsQyxHQUFHc3NCLENBQU8sR0FFZDlGLEVBQU8sTUFBTSwwQkFBMEIsR0FDaENpRixFQUFBLE1BQUtrYyxJQUFRLFNBQVMsS0FBRztBQU01QixVQUxBbmhCLEVBQU8sTUFBTSw0Q0FBNENpRixFQUFBLE1BQUtrYyxJQUFRLE1BQU0sRUFBRSxHQUN6RWxjLEVBQUEsTUFBS3FjLE9BRU4sTUFBTTVFLEVBQUEsTUFBS21FLElBQUFlLElBQUwsV0FBb0IsTUFFMUJwb0MsSUFBQXlyQixFQUFBLE1BQUtzYyxRQUFMLFFBQUEvbkMsRUFBOEIsT0FBTyxTQUFTO0FBQzlDd21CLFFBQUFBLEVBQU8sTUFBTSxpQ0FBaUMsR0FDOUMsTUFBTTBjLEVBQUEsTUFBS21FLElBQUFlLElBQUwsV0FBb0I7QUFDMUI7QUFBQSxNQUNKO0FBRUEsWUFBTSxJQUFJLFFBQVEsQ0FBQ3BDLE1BQVl2YSxFQUFBLE1BQUttYyxJQUFPLFdBQVc1QixHQUFTLEdBQUcsQ0FBQztBQUFBLElBQ3ZFO0FBQ0F4ZixJQUFBQSxFQUFPLE1BQU0sdUJBQXVCLEdBQ2hDaUYsRUFBQSxNQUFLbWMsT0FBVW5jLEVBQUEsTUFBS29jLE9BRXBCcGMsRUFBQSxNQUFLbWMsSUFBTyxhQUFhbmMsRUFBQSxNQUFLb2MsR0FBUTtBQUFBLEVBRTlDO0FBQUEsRUFDQSxNQUFNLGFBQWE7QUFDZixJQUFJcGMsRUFBQSxNQUFLa2MsSUFBUSxTQUFTLEtBQ3RCLE1BQU16RSxFQUFBLE1BQUttRSxJQUFBZSxJQUFMLFdBQW9CO0FBQUEsRUFFbEM7QUFDSjtBQXJISWQsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQVZHVixLQUFBLGVBOEJHWSxLQUFZLGVBQUN4akMsR0FBTTtBQUNyQixNQUFJZ25CLEVBQUEsTUFBS2tjLElBQVEsU0FBUyxJQUFJbGMsRUFBQSxNQUFLNmIsS0FBZTtBQUM5QzlnQixJQUFBQSxFQUFPLE1BQU0sdUNBQXVDO0FBQ3BEO0FBQUEsRUFDSjtBQUVBLEVBQUFpRixFQUFBLE1BQUtrYyxJQUFRLEtBQUtsakMsQ0FBSSxHQUNsQmduQixFQUFBLE1BQUtrYyxJQUFRLFNBQVNsYyxFQUFBLE1BQUtnYyxPQUUzQixNQUFNdkUsRUFBQSxNQUFLbUUsSUFBQWUsSUFBTDtBQUVkLEdBQ0FKLEtBQWMsV0FBRztBQUNiLEVBQUFsVSxFQUFBLE1BQUsrVCxJQUFXcGMsRUFBQSxNQUFLbWMsSUFBTyxXQUFXLFlBQVk7QUFFL0MsVUFBTTFFLEVBQUEsTUFBS21FLElBQUFlLElBQUwsWUFDTmxGLEVBQUEsTUFBS21FLElBQUFXLElBQUw7QUFBQSxFQUNKLEdBQUd2YyxFQUFBLE1BQUsrYixHQUFjLElBR2xCLE9BQU8vYixFQUFBLE1BQUtvYyxJQUFTLFNBQVUsY0FDL0JwYyxFQUFBLE1BQUtvYyxJQUFTLE1BQUs7QUFFM0IsR0FDTU8sS0FBYyxlQUFDQyxJQUFRLElBQU87QUFDaEMsTUFBSTVjLEVBQUEsTUFBS2tjLElBQVEsV0FBVztBQUk1QixRQURBbmhCLEVBQU8sTUFBTSw2QkFBNkI2aEIsQ0FBSyxrQkFBa0I1YyxFQUFBLE1BQUtrYyxJQUFRLE1BQU0sRUFBRSxHQUNsRlUsS0FBUzVjLEVBQUEsTUFBS2tjLElBQVEsU0FBU2xjLEVBQUEsTUFBSzhiLEtBQWU7QUFDbkQsWUFBTWUsSUFBVyxDQUFDLEdBQUc3YyxFQUFBLE1BQUtrYyxHQUFPO0FBQ2pDLE1BQUE3VCxFQUFBLE1BQUs2VCxJQUFVLENBQUEsSUFDZjdULEVBQUEsTUFBS2dVLElBQW9CLEtBQ3pCLE1BQU1yYyxFQUFBLE1BQUtpYyxJQUFVLE9BQU9ZLENBQVEsR0FDcEN4VSxFQUFBLE1BQUtnVSxJQUFvQjtBQUFBLElBQzdCLFdBQ1NyYyxFQUFBLE1BQUtrYyxJQUFRLFNBQVMsR0FBRztBQUM5QixZQUFNWSxJQUFROWMsRUFBQSxNQUFLa2MsSUFBUSxPQUFPLEdBQUdsYyxFQUFBLE1BQUs4YixHQUFhO0FBQ3ZELE1BQUF6VCxFQUFBLE1BQUtnVSxJQUFvQixLQUN6QixNQUFNcmMsRUFBQSxNQUFLaWMsSUFBVSxPQUFPYSxDQUFLLEdBQ2pDelUsRUFBQSxNQUFLZ1UsSUFBb0I7QUFBQSxJQUM3QjtBQUFBO0FBQ0o7O0FBK0NHLE1BQU1VLEdBQXNCO0FBQUEsRUFBNUI7QUFDSCxJQUFBcmQsRUFBQSxNQUFBc2QsSUFBYyxDQUFBO0FBQUE7QUFBQSxFQUNkLFFBQVE7QUFDSixlQUFXQyxLQUFhamQsRUFBQSxNQUFLZ2Q7QUFDekIsTUFBSUMsRUFBVSxTQUNWQSxFQUFVLE1BQUs7QUFBQSxFQUczQjtBQUFBLEVBQ0Esa0JBQWtCQSxHQUFXO0FBQ3pCLElBQUFqZCxFQUFBLE1BQUtnZCxJQUFZLEtBQUtDLENBQVM7QUFBQSxFQUNuQztBQUFBLEVBQ0EsY0FBY0MsR0FBWTtBQUN0Qm5pQixJQUFBQSxFQUFPLE1BQU0sOEJBQThCO0FBQzNDLGVBQVdraUIsS0FBYWpkLEVBQUEsTUFBS2dkO0FBQ3pCLE1BQUFDLEVBQVUsU0FBUTtBQUV0QixJQUFBNVUsRUFBQSxNQUFLMlUsSUFBY0U7QUFBQSxFQUN2QjtBQUFBLEVBQ0EsTUFBTSxhQUFhekgsR0FBTztBQUN0QixlQUFXd0gsS0FBYWpkLEVBQUEsTUFBS2dkO0FBQ3pCLFlBQU1DLEVBQVUsYUFBYXhILENBQUs7QUFBQSxFQUUxQztBQUFBLEVBQ0EsTUFBTSxXQUFXQSxHQUFPO0FBQ3BCLGVBQVd3SCxLQUFhamQsRUFBQSxNQUFLZ2Q7QUFDekIsWUFBTUMsRUFBVSxXQUFXeEgsQ0FBSztBQUFBLEVBRXhDO0FBQUEsRUFDQSxNQUFNLFlBQVkxWCxHQUFNO0FBQ3BCLGVBQVdrZixLQUFhamQsRUFBQSxNQUFLZ2Q7QUFDekIsWUFBTUMsRUFBVSxZQUFZbGYsQ0FBSTtBQUFBLEVBRXhDO0FBQUEsRUFDQSxNQUFNLFVBQVVBLEdBQU07QUFDbEIsZUFBV2tmLEtBQWFqZCxFQUFBLE1BQUtnZDtBQUN6QixZQUFNQyxFQUFVLFVBQVVsZixDQUFJO0FBQUEsRUFFdEM7QUFBQSxFQUNBLE1BQU0sU0FBUzhDLEdBQVM7QUFDcEIsZUFBV29jLEtBQWFqZCxFQUFBLE1BQUtnZDtBQUN6QixZQUFNQyxFQUFVLFNBQVNwYyxDQUFPO0FBQUEsRUFFeEM7QUFBQSxFQUNBLE1BQU0sYUFBYTtBQUNmLGVBQVdvYyxLQUFhamQsRUFBQSxNQUFLZ2Q7QUFDekIsWUFBTUMsRUFBVSxXQUFVO0FBQUEsRUFFbEM7QUFDSjtBQWhESUQsS0FBQTtBQWlESixJQUFJRyxLQUFtQixNQUNuQkMsS0FBb0I7QUFDakIsU0FBU0MsS0FBa0I7QUFDOUIsU0FBS0YsT0FDREEsS0FBbUIsSUFBSTlCLEdBQW1CLElBRXZDOEI7QUFDWDtBQUNPLFNBQVNHLEtBQW1CO0FBQy9CLFNBQUtGLE9BQ0RBLEtBQW9CLElBQUk5QixHQUFvQitCLElBQWlCLElBRTFERDtBQUNYO0FDdk1PLFNBQVNHLEtBQVU7QUFDdEIsVUFBTyxvQkFBSSxLQUFJLEdBQUcsWUFBVztBQUNqQztBQU1PLFNBQVNDLEtBQWtCO0FBQzlCLFNBQU8sU0FBU25kLEdBQVUsRUFBRyxRQUFRLE1BQU0sRUFBRSxDQUFDO0FBQ2xEO0FBTU8sU0FBU29kLEtBQWlCO0FBQzdCLFNBQU8sUUFBUXBkLEdBQVUsRUFBRyxRQUFRLE1BQU0sRUFBRSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDOUQ7QUFjTyxTQUFTcWQsR0FBb0J0a0MsR0FBSztBQUNyQyxTQUFPLE9BQU8sWUFBWSxPQUFPLFFBQVFBLENBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQ3hELENBQUcsTUFBTSxDQUFDQSxFQUFJLFdBQVcsR0FBRyxDQUFDLENBQUM7QUFDekY7O0FDckNPLE1BQU0rbkMsS0FBTixNQUFNQSxHQUFLO0FBQUEsRUFXZCxZQUFZbmtDLEdBQVN5akMsR0FBVztBQVZoQyxJQUFBbHFCLEVBQUEsY0FBTztBQUNQLElBQUEyTSxFQUFBLE1BQUFrZTtBQUNBLElBQUFsZSxFQUFBLE1BQUFtZTtBQUNBLElBQUFuZSxFQUFBLE1BQUFvZTtBQUNBLElBQUFwZSxFQUFBLE1BQUFxZTtBQUNBLElBQUFyZSxFQUFBLE1BQUFzZTtBQUNBLElBQUF0ZSxFQUFBLE1BQUF1ZTtBQUNBLElBQUF2ZSxFQUFBLE1BQUF3ZTtBQUNBLElBQUF4ZSxFQUFBLE1BQUFrYTtBQUNBLElBQUFsYSxFQUFBLE1BQUF5ZTtBQUVJLElBQUE5VixFQUFBLE1BQUt3VixJQUFXcmtDLEVBQVEsVUFDeEI2dUIsRUFBQSxNQUFLeVYsSUFBVXRrQyxFQUFRLFVBQVVpa0MsR0FBYyxJQUMvQ3BWLEVBQUEsTUFBS3VWLElBQVFwa0MsRUFBUSxPQUNyQjZ1QixFQUFBLE1BQUsyVixJQUFhZixJQUNsQjVVLEVBQUEsTUFBSzBWLElBQVl2a0MsRUFBUSxZQUFZLE9BQ3JDNnVCLEVBQUEsTUFBS3VSLElBQVNwZ0MsRUFBUSxTQUFTLE9BQy9CNnVCLEVBQUEsTUFBSzRWLElBQWF6a0MsRUFBUSxhQUFhLE9BQ3ZDNnVCLEVBQUEsTUFBSzZWLElBQVcxa0MsRUFBUSxXQUFXO0FBQUEsRUFDdkM7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU93bUIsRUFBQSxNQUFLNmQ7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsSUFBSSxXQUFXO0FBQ1gsV0FBTzdkLEVBQUEsTUFBSzRkO0FBQUEsRUFDaEI7QUFBQSxFQUNBLElBQUksU0FBUztBQUNULFdBQU81ZCxFQUFBLE1BQUs4ZDtBQUFBLEVBQ2hCO0FBQUEsRUFDQSxJQUFJLFdBQVc7QUFDWCxXQUFPOWQsRUFBQSxNQUFLK2Q7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsSUFBSSxlQUFlO0FBQ2YsV0FBTy9kLEVBQUEsTUFBS21lO0FBQUEsRUFDaEI7QUFBQSxFQUNBLElBQUksYUFBYXBnQixHQUFNO0FBQ25CLElBQUFzSyxFQUFBLE1BQUs4VixJQUFnQnBnQjtBQUFBLEVBQ3pCO0FBQUEsRUFDQSxRQUFRO0FBQ0osUUFBSWlDLEVBQUEsTUFBS2llLEtBQVk7QUFDakJsakIsTUFBQUEsRUFBTyxLQUFLLHNCQUFzQjtBQUNsQztBQUFBLElBQ0o7QUFDQSxJQUFBc04sRUFBQSxNQUFLNFYsSUFBYVYsR0FBTyxJQUN6QnZkLEVBQUEsTUFBS2dlLElBQVcsWUFBWSxJQUFJO0FBQUEsRUFDcEM7QUFBQSxFQUNBLE1BQU07QUFDRixRQUFJaGUsRUFBQSxNQUFLa2UsS0FBVTtBQUNmbmpCLE1BQUFBLEVBQU8sTUFBTSx5QkFBeUIsS0FBSyxRQUFRO0FBQ25EO0FBQUEsSUFDSjtBQUNBLElBQUFzTixFQUFBLE1BQUs2VixJQUFXWCxHQUFPLElBQ3ZCdmQsRUFBQSxNQUFLZ2UsSUFBVyxVQUFVLElBQUk7QUFBQSxFQUNsQztBQUFBLEVBQ0EsU0FBUzNxQyxHQUFPO0FBQ1osSUFBQWcxQixFQUFBLE1BQUt1UixJQUFTdm1DO0FBQUEsRUFDbEI7QUFBQSxFQUNBLElBQUksUUFBUTtBQUNSLFdBQU8yc0IsRUFBQSxNQUFLNFo7QUFBQSxFQUNoQjtBQUFBLEVBQ0EsSUFBSSxZQUFZO0FBQ1osV0FBTzVaLEVBQUEsTUFBS2llO0FBQUEsRUFDaEI7QUFBQSxFQUNBLElBQUksVUFBVTtBQUNWLFdBQU9qZSxFQUFBLE1BQUtrZTtBQUFBLEVBQ2hCO0FBQUEsRUFDQSxRQUFROztBQUNKLFVBQU1uZ0IsSUFBTyxJQUFJNGYsR0FBSztBQUFBLE1BQ2xCLFNBQVMsS0FBSztBQUFBLE1BQ2QsUUFBUSxLQUFLO0FBQUEsTUFDYixVQUFVLEtBQUssWUFBWTtBQUFBLE1BQzNCLE1BQU0sS0FBSztBQUFBLE1BQ1gsV0FBVzNkLEVBQUEsTUFBS2llLE9BQWM7QUFBQSxNQUM5QixTQUFTamUsRUFBQSxNQUFLa2UsT0FBWTtBQUFBLE1BQzFCLE9BQU9sZSxFQUFBLE1BQUs0WixPQUFVO0FBQUEsSUFDbEMsR0FBVzVaLEVBQUEsTUFBS2dlLEdBQVU7QUFDbEIsV0FBQWpnQixFQUFLLGdCQUFleHBCLElBQUEsS0FBSyxpQkFBTCxnQkFBQUEsRUFBbUIsU0FDaEN3cEI7QUFBQSxFQUNYO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsUUFBUSxLQUFLO0FBQUEsTUFDYixJQUFJLEtBQUs7QUFBQSxNQUNULFVBQVUsS0FBSztBQUFBLE1BQ2YsV0FBVyxLQUFLO0FBQUEsTUFDaEIsWUFBWSxLQUFLO0FBQUEsTUFDakIsVUFBVSxLQUFLO0FBQUEsTUFDZixXQUFXMmYsR0FBb0IsS0FBSyxRQUFRO0FBQUEsTUFDNUMsT0FBTyxLQUFLO0FBQUEsSUFDeEI7QUFBQSxFQUNJO0FBQ0o7QUExRklFLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQXRFLEtBQUEsZUFDQXVFLEtBQUE7QUFWRyxJQUFNQyxLQUFOVDtBQTZGQSxNQUFNVSxXQUFpQkQsR0FBSztBQUFBLEVBQy9CLFlBQVl6aUMsR0FBTXNoQyxHQUFXO0FBQ3pCLFVBQU0sRUFBRSxTQUFTLFNBQVMsUUFBUSxTQUFTLE1BQUF0aEMsRUFBSSxHQUFJc2hDLENBQVM7QUFBQSxFQUNoRTtBQUFBLEVBQ0EsUUFBUTtBQUFBLEVBRVI7QUFBQSxFQUNBLE1BQU07QUFBQSxFQUVOO0FBQUEsRUFDQSxXQUFXO0FBQUEsRUFFWDtBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU87QUFBQSxFQUNYO0FBQ0o7O0FDN0dPLE1BQU1xQixLQUFOLE1BQU1BLEdBQU07QUFBQSxFQVFmLFlBQVk5a0MsR0FBU3lqQyxHQUFXO0FBUGhDLElBQUFscUIsRUFBQSxjQUFPO0FBQ1AsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGlCQUFVO0FBQ1YsSUFBQUEsRUFBQTtBQUNBLElBQUEyTSxFQUFBLE1BQUFzZTtBQUNBLElBQUF0ZSxFQUFBLE1BQUE2ZTtBQUVJLFNBQUssVUFBVS9rQyxFQUFRLFdBQVdna0MsR0FBZSxHQUNqRCxLQUFLLE9BQU9oa0MsRUFBUSxRQUFRLGtCQUM1QixLQUFLLFVBQVVBLEVBQVEsV0FBVyxNQUNsQyxLQUFLLFdBQVdBLEVBQVEsWUFBWSxDQUFBLEdBQ3BDNnVCLEVBQUEsTUFBSzJWLElBQWFmLEtBQWFLLEdBQWdCLElBQy9DalYsRUFBQSxNQUFLa1csSUFBVy9rQyxFQUFRLFdBQVc7QUFBQSxFQUN2QztBQUFBLEVBQ0EsTUFBTSxRQUFRO0FBQ1YsSUFBSXdtQixFQUFBLE1BQUt1ZSxRQUdUbFcsRUFBQSxNQUFLa1csSUFBVyxLQUNoQixNQUFNdmUsRUFBQSxNQUFLZ2UsSUFBVyxhQUFhLElBQUk7QUFBQSxFQUMzQztBQUFBLEVBQ0EsTUFBTSxNQUFNO0FBQ1IsSUFBS2hlLEVBQUEsTUFBS3VlLFFBR1ZsVyxFQUFBLE1BQUtrVyxJQUFXLEtBQ2hCLE1BQU12ZSxFQUFBLE1BQUtnZSxJQUFXLFdBQVcsSUFBSTtBQUFBLEVBQ3pDO0FBQUEsRUFDQSxRQUFRO0FBQ0osV0FBTyxJQUFJTSxHQUFNO0FBQUEsTUFDYixTQUFTLEtBQUs7QUFBQSxNQUNkLE1BQU0sS0FBSztBQUFBLE1BQ1gsU0FBUyxLQUFLLFdBQVc7QUFBQSxNQUN6QixVQUFVLEtBQUs7QUFBQSxNQUNmLFNBQVN0ZSxFQUFBLE1BQUt1ZTtBQUFBLElBQzFCLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsUUFBUSxLQUFLO0FBQUEsTUFDYixJQUFJLEtBQUs7QUFBQSxNQUNULGVBQWUsS0FBSztBQUFBLE1BQ3BCLFVBQVUsS0FBSztBQUFBLE1BQ2YsVUFBVSxLQUFLO0FBQUEsSUFDM0I7QUFBQSxFQUNJO0FBQ0o7QUExQ0lQLEtBQUEsZUFDQU8sS0FBQTtBQVBHLElBQU1DLEtBQU5GO0FBaURBLE1BQU1HLFdBQWtCRCxHQUFNO0FBQUEsRUFDakMsY0FBYztBQUNWLFVBQU0sQ0FBQSxDQUFFO0FBQUEsRUFDWjtBQUFBLEVBQ0EsTUFBTSxRQUFRO0FBQUEsRUFFZDtBQUFBLEVBQ0EsTUFBTSxNQUFNO0FBQUEsRUFFWjtBQUFBLEVBQ0EsU0FBUztBQUNMLFdBQU87QUFBQSxFQUNYO0FBQ0o7O0FDekRPLE1BQU1FLEdBQWM7QUFBQSxFQUd2QixjQUFjO0FBSFgsSUFBQWhmLEVBQUEsTUFBQWlmO0FBQ0gsSUFBQWpmLEVBQUEsTUFBQWtmO0FBQ0EsSUFBQWxmLEVBQUEsTUFBQW1mO0FBRUksSUFBQXhXLEVBQUEsTUFBS3VXLElBQWtCLElBQUk3QixHQUFxQixJQUNoRDFVLEVBQUEsTUFBS3dXLElBQVlua0IsR0FBUSxXQUN6QitjLEVBQUEsTUFBS2tILElBQUFHLElBQUw7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsa0JBQWtCN0IsR0FBVztBQUN6QixJQUFBamQsRUFBQSxNQUFLNGUsSUFBZ0Isa0JBQWtCM0IsQ0FBUztBQUFBLEVBQ3BEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsY0FBY0MsR0FBWTtBQUN0QixJQUFBbGQsRUFBQSxNQUFLNGUsSUFBZ0IsY0FBYzFCLENBQVU7QUFBQSxFQUNqRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1BLGtCQUFrQjtBQUNkLFdBQU9wSSxHQUFlO0FBQUEsRUFDMUI7QUFBQSxFQUNBLGlCQUFpQjtBQUNiLFdBQU9qWSxHQUFjO0FBQUEsRUFDekI7QUFBQSxFQUNBLFlBQVlraUIsR0FBVTtBQUNsQixJQUFBMVcsRUFBQSxNQUFLd1csSUFBWUU7QUFBQSxFQUNyQjtBQUFBLEVBQ0Esa0JBQWtCO0FBQ2QsSUFBQS9lLEVBQUEsTUFBSzRlLElBQWdCLE1BQUs7QUFBQSxFQUM5QjtBQUFBLEVBQ0EsWUFBWUksR0FBYztBQUN0QixRQUFJaGYsRUFBQSxNQUFLNmU7QUFDTDlqQixhQUFBQSxFQUFPLE1BQU0sOENBQThDaWtCLENBQVksR0FDaEUsSUFBSVAsR0FBUztBQUV4QixVQUFNUSxJQUFVRCxFQUFhLFdBQVd4QixHQUFlLEdBQ2pEempDLElBQU9pbEMsRUFBYSxRQUFRO0FBQ2xDamtCLFdBQUFBLEVBQU8sTUFBTSxrQ0FBa0Nra0IsR0FBU2xsQyxDQUFJLEdBQ3JELElBQUl5a0MsR0FBTSxFQUFFLEdBQUdRLEdBQWMsTUFBQWpsQyxHQUFNLFNBQUFrbEMsRUFBTyxHQUFJamYsRUFBQSxNQUFLNGUsR0FBZTtBQUFBLEVBQzdFO0FBQUEsRUFDQSxXQUFXTSxHQUFhcHFDLEdBQVE7QUFDNUIsUUFBSWtyQixFQUFBLE1BQUs2ZSxPQUFhSyxFQUFZO0FBQzlCbmtCLGFBQUFBLEVBQU8sTUFBTSw2Q0FBNkNta0IsQ0FBVyxHQUM5RCxJQUFJYixHQUFTYSxFQUFZLE1BQU1sZixFQUFBLE1BQUs0ZSxHQUFlO0FBRTlELFFBQUlPLEdBQ0FGO0FBQ0osUUFBS25xQztBQXFCQSxVQUFJQSxhQUFrQjBwQyxJQUFPO0FBQzlCLFlBQUkxcEMsYUFBa0IycEM7QUFDbEIxakIsaUJBQUFBLEVBQU8sTUFBTSwyQ0FBMkMsR0FDakQsSUFBSXNqQixHQUFTYSxFQUFZLE1BQU1sZixFQUFBLE1BQUs0ZSxHQUFlO0FBRTlELFFBQUFLLElBQVVucUMsRUFBTztBQUFBLE1BQ3JCLFdBQ1NBLGFBQWtCc3BDLElBQU07QUFDN0IsWUFBSXRwQyxhQUFrQnVwQztBQUNsQnRqQixpQkFBQUEsRUFBTyxNQUFNLDBDQUEwQyxHQUNoRCxJQUFJc2pCLEdBQVNhLEVBQVksTUFBTWxmLEVBQUEsTUFBSzRlLEdBQWU7QUFFOUQsUUFBQU8sSUFBV3JxQyxFQUFPLFFBQ2xCbXFDLElBQVVucUMsRUFBTztBQUFBLE1BQ3JCO0FBQUEsV0FuQ2E7QUFDVCxZQUFNZ21DLElBQWVoRyxHQUFlLEdBQzlCbFksSUFBY0MsR0FBYztBQUNsQyxVQUFJLENBQUNpZTtBQUNEL2YsZUFBQUEsRUFBTyxNQUFNLDJGQUEyRixHQUNqRyxJQUFJc2pCLEdBQVNhLEVBQVksTUFBTWxmLEVBQUEsTUFBSzRlLEdBQWU7QUFFOUQsVUFBSWhpQixhQUF1QnloQixNQUN2QnZELGFBQXdCMkQ7QUFDeEIxakIsZUFBQUEsRUFBTyxNQUFNLFVBQVU2QixDQUFXLE9BQU9rZSxDQUFZLCtCQUErQixHQUM3RSxJQUFJdUQsR0FBU2EsRUFBWSxNQUFNbGYsRUFBQSxNQUFLNGUsR0FBZTtBQUU5RCxNQUFBSyxJQUFVbkUsRUFBYSxTQUNuQmxlLEtBQ0E3QixFQUFPLE1BQU0sd0JBQXdCNkIsRUFBWSxNQUFNLEdBQ3ZEdWlCLElBQVd2aUIsRUFBWSxVQUd2QjdCLEVBQU8sTUFBTSwwQ0FBMEMrZixFQUFhLE9BQU87QUFBQSxJQUVuRjtBQWdCQSxXQUFLbUUsS0FJTGxrQixFQUFPLE1BQU0saUJBQWlCLEtBQUssVUFBVW1rQixFQUFZLElBQUksQ0FBQyxZQUFZQSxFQUFZLFVBQVVELENBQU8sRUFBRSxHQUNsRyxJQUFJYixHQUFLO0FBQUEsTUFDWixHQUFHYztBQUFBLE1BQ0gsU0FBQUQ7QUFBQSxNQUNBLFVBQUFFO0FBQUEsSUFDWixHQUFXbmYsRUFBQSxNQUFLNGUsR0FBZSxNQVJuQjdqQixFQUFPLE1BQU0sNEZBQTRGLEdBQ2xHLElBQUlzakIsR0FBU2EsRUFBWSxNQUFNbGYsRUFBQSxNQUFLNGUsR0FBZTtBQUFBLEVBUWxFO0FBQUEsRUFDQSxNQUFNLFNBQVMvZCxHQUFTO0FBQ3BCLFFBQUk7QUFDQTlGLE1BQUFBLEVBQU8sTUFBTSxnQ0FBZ0MsR0FDN0MsTUFBTWlGLEVBQUEsTUFBSzRlLElBQWdCLFNBQVMvZCxDQUFPO0FBQUEsSUFDL0MsU0FDT3h0QixHQUFPO0FBQ1YwbkIsTUFBQUEsRUFBTyxNQUFNLDJDQUEyQzFuQixDQUFLO0FBQUEsSUFDakU7QUFBQSxFQUNKO0FBQUEsRUE2Q0EsTUFBTSxhQUFhO0FBQ2YsVUFBTTJzQixFQUFBLE1BQUs0ZSxJQUFnQixXQUFVO0FBQUEsRUFDekM7QUFDSjtBQWhLSUEsS0FBQSxlQUNBQyxLQUFBLGVBRkdGLEtBQUE7QUFtSEhHLEtBQW9CLFdBQUc7QUFDbkIsTUFBSSxPQUFPLFVBQVksT0FBZSxPQUFPLFFBQVEsTUFBTyxZQUFZO0FBRXBFLFVBQU1NLElBQVUsWUFBWTtBQUN4QixZQUFNdmUsSUFBVSxXQUFXLE1BQU07QUFDN0IsZ0JBQVEsS0FBSywrQkFBK0IsR0FDNUMsUUFBUSxLQUFLLENBQUM7QUFBQSxNQUNsQixHQUFHLEdBQUk7QUFDUCxVQUFJO0FBQ0EsY0FBTSxLQUFLLFNBQVE7QUFBQSxNQUN2QixVQUNoQjtBQUNvQixxQkFBYUEsQ0FBTztBQUFBLE1BQ3hCO0FBQUEsSUFDSjtBQUVBLFlBQVEsR0FBRyxjQUFjdWUsQ0FBTyxHQUVoQyxRQUFRLEdBQUcsVUFBVSxZQUFZO0FBQzdCLFlBQU1BLEVBQU8sR0FDUkMsR0FBNEIsUUFBUSxLQUVyQyxRQUFRLEtBQUssR0FBRztBQUFBLElBRXhCLENBQUMsR0FFRCxRQUFRLEdBQUcsV0FBVyxZQUFZO0FBQzlCLFlBQU1ELEVBQU8sR0FDUkMsR0FBNEIsU0FBUyxLQUV0QyxRQUFRLEtBQUssQ0FBQztBQUFBLElBRXRCLENBQUMsR0FDRCxRQUFRLEdBQUcsc0JBQXNCLE9BQU9DLEdBQVEzRSxNQUFZO0FBQ3hENWYsTUFBQUEsRUFBTyxNQUFNLHVCQUF1QnVrQixHQUFRM0UsQ0FBTyxHQUNuRCxNQUFNeUUsRUFBTyxHQUNSRyxHQUEyQixvQkFBb0IsS0FFaEQsUUFBUSxLQUFLLENBQUM7QUFBQSxJQUV0QixDQUFDO0FBQUEsRUFDTDtBQUNKO0FBS0osU0FBU0YsR0FBNEJsZixHQUFPO0FBQ3hDLFNBQU8sUUFBUSxVQUFVQSxDQUFLLEVBQUUsU0FBUztBQUM3QztBQUNBLFNBQVNvZixHQUEyQnBmLEdBQU87QUFDdkMsU0FBTyxRQUFRLFVBQVVBLENBQUssRUFBRSxTQUFTO0FBQzdDO0FBQ0EsSUFBSXFmO0FBQ0csU0FBU3JWLEtBQXlCO0FBQ3JDLFNBQUtxVixPQUNEQSxLQUF3QixJQUFJZCxHQUFhLElBRXRDYztBQUNYO0FDektPLFNBQVNDLEdBQWtCeEMsR0FBVztBQUN6QyxFQUFBOVMsR0FBc0IsRUFBRyxrQkFBa0I4UyxDQUFTO0FBQ3hEO0FDaUJBd0MsR0FBa0JuQyxHQUFnQixDQUFFO0FDeEI3QixTQUFTb0MsR0FBb0I5OEIsR0FBUTtBQUN4QyxRQUFNKzhCLElBQWUsS0FBSy84QixDQUFNLEdBQzFCUyxJQUFNczhCLEVBQWEsUUFDbkJsa0IsSUFBUSxJQUFJLFdBQVdwWSxDQUFHO0FBQ2hDLFdBQVNwTixJQUFJLEdBQUdBLElBQUlvTixHQUFLcE47QUFDckIsSUFBQXdsQixFQUFNeGxCLENBQUMsSUFBSTBwQyxFQUFhLFdBQVcxcEMsQ0FBQztBQUV4QyxTQUFPd2xCLEVBQU07QUFDakI7QUFNTyxTQUFTbWtCLEdBQW9CQyxHQUFhO0FBQzdDLFFBQU1GLElBQWUsT0FBTyxhQUFhLEdBQUcsSUFBSSxXQUFXRSxDQUFXLENBQUM7QUFDdkUsU0FBTyxLQUFLRixDQUFZO0FBQzVCO0FBTU8sU0FBU0csR0FBa0M5bUMsR0FBTTtBQVlwRCxNQVhJLE9BQU9BLElBQVMsT0FDaEJBLE1BQVMsUUFDVCxPQUFPQSxLQUFTLFlBQ2hCLEVBQUUsVUFBVUEsTUFDWixPQUFPQSxFQUFLLFFBQVMsWUFDckIsQ0FBQ0EsRUFBSyxRQUdOQSxFQUFLLFNBQVMsYUFHZCxFQUFFLGFBQWFBLE1BQ2YsQ0FBQyxNQUFNLFFBQVFBLEVBQUssT0FBTyxLQUMzQkEsRUFBSyxRQUFRLFNBQVM7QUFDdEI7QUFFSixRQUFNK21DLElBQWtCL21DLEVBQUssUUFBUUEsRUFBSyxRQUFRLFNBQVMsQ0FBQztBQUM1RCxNQUFJLElBQUUsVUFBVSttQyxNQUNaLE9BQU9BLEVBQWdCLFFBQVMsV0FHcEM7QUFBQSxRQUFJQSxFQUFnQixTQUFTO0FBQ3pCLGFBQU8sT0FBT0EsRUFBZ0IsUUFBUyxXQUNqQ0EsRUFBZ0IsT0FDaEI7QUFFVixRQUFJQSxFQUFnQixTQUFTO0FBQ3pCLGFBQU8sT0FBT0EsRUFBZ0IsY0FBZSxXQUN2Q0EsRUFBZ0IsYUFDaEI7QUFBQTtBQUdkO0FBT08sU0FBU0MsR0FBb0JDLEdBQVlDLEdBQVk7QUFDeEQsUUFBTUMsSUFBV0YsRUFBVyxPQUFPLENBQUNqbkMsTUFBUyxDQUFDa25DLEVBQVcsS0FBSyxDQUFDcndCLE1BQVlBLEVBQVEsV0FBVzdXLEVBQUssTUFBTSxDQUFDLEdBQ3BHb25DLElBQVlGLEVBQVcsT0FBTyxDQUFDbG5DLE1BQVMsQ0FBQ2luQyxFQUFXLEtBQUssQ0FBQ0ksTUFBWUEsRUFBUSxXQUFXcm5DLEVBQUssTUFBTSxDQUFDLEdBQ3JHc25DLElBQVVKLEVBQVcsT0FBTyxDQUFDbG5DLE1BQVNpbkMsRUFBVyxLQUFLLENBQUNJLE1BQVlBLEVBQVEsV0FBV3JuQyxFQUFLLFVBQzdGLEtBQUssVUFBVXFuQyxDQUFPLE1BQU0sS0FBSyxVQUFVcm5DLENBQUksQ0FBQyxDQUFDO0FBQ3JELFNBQU87QUFBQSxJQUNILFVBQUFtbkM7QUFBQSxJQUNBLFdBQUFDO0FBQUEsSUFDQSxTQUFBRTtBQUFBLEVBQ1I7QUFDQTtBQUtPLFNBQVNDLEtBQW1CO0FBQy9CLFNBQUksT0FBTyxTQUFXLE1BQ1gsS0FFSixPQUFPLE9BQU8sb0JBQXlCO0FBQ2xEO0FBTU8sU0FBU0MsR0FBdUJ4bkMsR0FBTTtBQUN6QyxTQUFJQSxFQUFLLFNBQVMsV0FDUEEsSUFFUEEsRUFBSyxTQUFTLGNBQ1A7QUFBQSxJQUNILEdBQUdBO0FBQUEsSUFDSCxTQUFTQSxFQUFLLFFBQVEsSUFBSSxDQUFDM0IsTUFDbkJBLEVBQU0sU0FBUyxpQkFDUjtBQUFBLE1BQ0gsR0FBR0E7QUFBQSxNQUNILE9BQU87QUFBQSxJQUMvQixJQUV1QkEsQ0FDVjtBQUFBLEVBQ2IsSUFFUTJCLEVBQUssU0FBUyxTQUNQO0FBQUEsSUFDSCxHQUFHQTtBQUFBLElBQ0gsU0FBU0EsRUFBSyxRQUFRLElBQUksQ0FBQzNCLE1BQ25CQSxFQUFNLFNBQVMsZ0JBQ1I7QUFBQSxNQUNILEdBQUdBO0FBQUEsTUFDSCxPQUFPO0FBQUEsSUFDL0IsSUFFdUJBLENBQ1Y7QUFBQSxFQUNiLElBRVcyQjtBQUNYO0FBUU8sU0FBU3luQyxHQUFzQkMsR0FBU3ZnQixHQUFPd2dCLEdBQXdCO0FBRTFFLE1BQUl4Z0IsRUFBTSxTQUFTO0FBQ2YsV0FBT3VnQixFQUFRLElBQUksQ0FBQzFuQyxNQUFTO0FBQ3pCLFVBQUlBLEVBQUssV0FBV21uQixFQUFNLFdBQ3RCbm5CLEVBQUssU0FBUyxhQUNkLFVBQVVBLEtBQ1ZBLEVBQUssU0FBUyxRQUFRO0FBQ3RCLGNBQU00bkMsSUFBaUI1bkMsRUFBSyxRQUFRLElBQUksQ0FBQzNCLE1BQ2pDQSxFQUFNLFNBQVMsZ0JBQ1I7QUFBQSxVQUNILEdBQUdBO0FBQUEsVUFDSCxZQUFZOG9CLEVBQU07QUFBQSxRQUM5QyxJQUUyQjlvQixDQUNWO0FBQ0QsZUFBTztBQUFBLFVBQ0gsR0FBRzJCO0FBQUEsVUFDSCxTQUFTNG5DO0FBQUEsVUFDVCxRQUFRO0FBQUEsUUFDNUI7QUFBQSxNQUNZO0FBQ0EsYUFBTzVuQztBQUFBLElBQ1gsQ0FBQztBQUVMLFFBQU02bkMsSUFBVyxDQUFDRixLQUEwQnhnQixFQUFNLFNBQVMsWUFDckRxZ0IsR0FBdUJyZ0IsQ0FBSyxJQUM1QkEsR0FDQTJnQixJQUFnQkosRUFBUSxVQUFVLENBQUMxbkMsTUFBU0EsRUFBSyxXQUFXbW5CLEVBQU0sTUFBTTtBQUM5RSxNQUFJMmdCLE1BQWtCO0FBRWxCLFdBQU9KLEVBQVEsSUFBSSxDQUFDMW5DLEdBQU0rbkMsTUFDbEJBLE1BQVFELElBQ0RELElBRVAsQ0FBQ0YsS0FBMEIzbkMsRUFBSyxTQUFTLFlBQ2xDd25DLEdBQXVCeG5DLENBQUksSUFFL0JBLENBQ1Y7QUFFQSxNQUFJbW5CLEVBQU0sZ0JBQWdCO0FBRTNCLFVBQU02Z0IsSUFBWU4sRUFBUSxVQUFVLENBQUMxbkMsTUFBU0EsRUFBSyxXQUFXbW5CLEVBQU0sY0FBYztBQUNsRixXQUFJNmdCLE1BQWMsS0FDUDtBQUFBLE1BQ0gsR0FBR04sRUFBUSxNQUFNLEdBQUdNLElBQVksQ0FBQztBQUFBLE1BQ2pDSDtBQUFBLE1BQ0EsR0FBR0gsRUFBUSxNQUFNTSxJQUFZLENBQUM7QUFBQSxJQUM5QyxJQUdtQixDQUFDLEdBQUdOLEdBQVNHLENBQVE7QUFBQSxFQUVwQztBQUVJLFdBQU8sQ0FBQyxHQUFHSCxHQUFTRyxDQUFRO0FBRXBDO0FBSU8sTUFBTUksS0FBVTtBQUFBLEVBQ25CLGNBQWMscUJBQXFCL3RDLEdBQVMsT0FBTztBQUFBLEVBQ25ELHVCQUF1QixxQkFBcUJBLEdBQVMsT0FBTztBQUNoRSxHQUlhZ3VDLEtBQWlCLHFCQUFxQmh1QyxHQUFTLE9BQU87QUFDNUQsU0FBU2l1QyxHQUFtQ3BrQixHQUFPL2pCLEdBQU07QUFDNUQsUUFBTSxFQUFFLE1BQUFlLEdBQU0sV0FBV2dJLEdBQU0sR0FBR3ZMLEVBQUksSUFBS3dDO0FBQzNDLFNBQU8sSUFBSTR3QixHQUFvQjtBQUFBLElBQzNCLE1BQU07QUFBQSxJQUNOLE1BQUE3dkI7QUFBQSxJQUNBLFdBQVcsS0FBSyxVQUFVZ0ksQ0FBSTtBQUFBLElBQzlCLFFBQVE7QUFBQSxJQUNSLGNBQWM7QUFBQSxNQUNWLEdBQUd2TDtBQUFBLElBQ2Y7QUFBQSxFQUNBLEdBQU91bUIsQ0FBSztBQUNaO0FBQ08sU0FBU3FrQixHQUFtQ3BvQyxHQUFNO0FBQ3JELFFBQU0sRUFBRSxNQUFBZSxHQUFNLFdBQVdnSSxHQUFNLGNBQUFxcUIsRUFBWSxJQUFLcHpCLEVBQUssU0FDL0MsRUFBRSxRQUFBcW9DLEdBQVEsYUFBQUMsR0FBYSxHQUFHOXFDLEVBQUksSUFBSzQxQixLQUFnQixDQUFBO0FBQ3pELE1BQUksQ0FBQ2lWLEtBQVUsQ0FBQ0M7QUFDWixVQUFNLElBQUksTUFBTSx5REFBeUQ7QUFFN0UsU0FBTztBQUFBLElBQ0gsTUFBTTtBQUFBLElBQ04sUUFBQUQ7QUFBQSxJQUNBLGFBQUFDO0FBQUEsSUFDQSxHQUFHOXFDO0FBQUEsSUFDSCxNQUFBdUQ7QUFBQSxJQUNBLFdBQVdnSSxJQUFPLEtBQUssTUFBTUEsQ0FBSSxJQUFJLENBQUE7QUFBQSxJQUNyQyxVQUFVO0FBQUEsRUFDbEI7QUFDQTtBQ2xOTyxNQUFNdy9CLFdBQXNCdmQsR0FBTTtBQUFBLEVBTXJDLFlBQVk5QixHQUFRO0FBQ2hCLFVBQU1BLENBQU07QUFGaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBblAsRUFBQTtBQUdJLFNBQUssUUFBUW1QLEVBQU87QUFBQSxFQUN4QjtBQUNKO0FDbENPLFNBQVNzZixHQUE2QkMsR0FBVTtBQUNuRCxTQUFPO0FBQUEsSUFDSCxvQkFBb0JBLEVBQVMsc0JBQXNCO0FBQUEsRUFDM0Q7QUFDQTtBQUNPLFNBQVNDLEdBQThCLEVBQUUsWUFBWUMsR0FBaUIsR0FBR25vQyxFQUFPLEdBQUk7QUFDdkYsUUFBTW9vQyxJQUFnQnpkLEdBQXNCM3FCLENBQU8sR0FDN0Nxb0MsSUFBYUYsS0FBbUJDLEVBQWM7QUFDcEQsU0FBTztBQUFBLElBQ0gsR0FBR0E7QUFBQSxJQUNILFlBQUFDO0FBQUEsSUFDQSxLQUFLLE9BQU85L0IsTUFBUztBQUNqQixZQUFNcE4sSUFBUyxNQUFNaXRDLEVBQWMsSUFBSTcvQixDQUFJO0FBQzNDLGFBQU87QUFBQSxRQUNILEdBQUdwTjtBQUFBLFFBQ0gsV0FBVyxFQUFFLEdBQUdBLEVBQU8sV0FBVyxZQUFBa3RDLEVBQVU7QUFBQSxNQUM1RDtBQUFBLElBQ1E7QUFBQSxFQUNSO0FBQ0E7QUFLTyxTQUFTQyxHQUFvQ250QyxHQUFRO0FBQ3hELFNBQU87QUFBQTtBQUFBLDJCQUVnQkEsRUFBTyxVQUFVLFVBQVU7QUFBQSxtQkFDbkMsS0FBSyxVQUFVQSxFQUFPLE9BQU8sY0FBYyxDQUFBLENBQUUsQ0FBQztBQUFBO0FBQUEsRUFFL0QsS0FBSTtBQUNOO0FDaENBLFNBQVNvdEMsR0FBVW5zQyxHQUFLbUYsR0FBUTtBQUU1QixTQUFPbkYsS0FBT21GLEtBQVUsT0FBT0EsRUFBT25GLENBQUcsSUFBTTtBQUNuRDtBQUNBLFNBQVNvc0MsR0FBbUI5ZixHQUFRO0FBQ2hDLFNBQVE2ZixHQUFVLGNBQWM3ZixDQUFNLEtBQ2xDNmYsR0FBVSxvQkFBb0I3ZixDQUFNLEtBQ3BDNmYsR0FBVSxxQkFBcUI3ZixDQUFNLEtBQ3JDNmYsR0FBVSwyQkFBMkI3ZixDQUFNLEtBQzNDNmYsR0FBVSxpQkFBaUI3ZixDQUFNLEtBQ2pDNmYsR0FBVSw0QkFBNEI3ZixDQUFNLEtBQzVDNmYsR0FBVSxTQUFTN2YsQ0FBTTtBQUNqQztBQUtPLFNBQVMrZixHQUFtQi9mLEdBQVE7O0FBQ3ZDLE1BQUksQ0FBQzhmLEdBQW1COWYsQ0FBTSxHQUFHO0FBQzdCLFVBQU1nZ0IsS0FBYzN0QyxJQUFBMnRCLEVBQU8sVUFBUCxRQUFBM3RCLEVBQWMsUUFDNUI7QUFBQSxNQUNFLFFBQVE0dEMsR0FBcUJqZ0IsRUFBTyxNQUFNLE1BQU0sTUFBTTtBQUFBLE1BQ3RELGdCQUFnQkEsRUFBTyxNQUFNLE1BQU0sa0JBQWtCO0FBQUEsTUFDckQsZUFBZUEsRUFBTyxNQUFNLE1BQU07QUFBQSxNQUNsQyxlQUFlQSxFQUFPLE1BQU0sTUFBTTtBQUFBLElBQ2xELElBQ2MsUUFDQWtnQixNQUF1QnJzQyxLQUFBbEIsSUFBQXF0QixFQUFPLFVBQVAsZ0JBQUFydEIsRUFBYyxXQUFkLGdCQUFBa0IsRUFBc0IsVUFBU21zQixFQUFPLE9BQzdEbWdCLEtBQWVscUMsSUFBQStwQixFQUFPLFVBQVAsUUFBQS9wQixFQUFjLFVBQVUsT0FBT2lxQyxJQUF5QixNQUN2RTtBQUFBLE1BQ0UsUUFBUUQsSUFBcUI3cEMsS0FBQUYsSUFBQThwQixFQUFPLFVBQVAsZ0JBQUE5cEIsRUFBYyxXQUFkLGdCQUFBRSxFQUFzQixNQUFNO0FBQUEsTUFDekQsT0FBTzhwQztBQUFBLE1BQ1AsUUFBTzNJLEtBQUFELElBQUF0WCxFQUFPLFVBQVAsZ0JBQUFzWCxFQUFjLFdBQWQsZ0JBQUFDLEVBQXNCO0FBQUEsSUFDN0MsSUFDYztBQUNOLFdBQU87QUFBQSxNQUNILE9BQU92WCxFQUFPO0FBQUEsTUFDZCxjQUFjQSxFQUFPO0FBQUEsTUFDckIsWUFBWUEsRUFBTztBQUFBLE1BQ25CLE9BQU9BLEVBQU87QUFBQSxNQUNkLFNBQVNBLEVBQU87QUFBQSxNQUNoQixjQUFjQSxFQUFPO0FBQUEsTUFDckIsUUFBUUEsRUFBTztBQUFBLE1BQ2Ysa0JBQWtCQSxFQUFPO0FBQUEsTUFDekIsT0FBT2dnQixLQUFlRyxJQUNoQjtBQUFBLFFBQ0UsT0FBT0g7QUFBQSxRQUNQLFFBQVFHO0FBQUEsTUFDNUIsSUFDa0I7QUFBQSxJQUNsQjtBQUFBLEVBQ0k7QUFDQSxTQUFPO0FBQUEsSUFDSCxPQUFPbmdCLEVBQU87QUFBQSxJQUNkLGNBQWNBLEVBQU87QUFBQSxJQUNyQixZQUFZQSxFQUFPO0FBQUEsSUFDbkIsT0FBT0EsRUFBTztBQUFBLElBQ2QsU0FBU0EsRUFBTztBQUFBLElBQ2hCLGNBQWNBLEVBQU87QUFBQSxJQUNyQixRQUFRQSxFQUFPO0FBQUEsSUFDZixrQkFBa0JBLEVBQU87QUFBQSxJQUN6QixPQUFPO0FBQUEsTUFDSCxPQUFPO0FBQUEsUUFDSCxRQUFRaWdCLEdBQXFCamdCLEVBQU8sZ0JBQWdCO0FBQUEsUUFDcEQsZ0JBQWdCQSxFQUFPLDRCQUE0QjtBQUFBLFFBQ25ELGVBQWVBLEVBQU87QUFBQSxRQUN0QixlQUFlQSxFQUFPO0FBQUEsTUFDdEM7QUFBQSxNQUNZLFFBQVE7QUFBQSxRQUNKLFFBQVFpZ0IsR0FBcUJqZ0IsRUFBTyxpQkFBaUI7QUFBQSxRQUNyRCxPQUFPQSxFQUFPO0FBQUEsUUFDZCxPQUFPQSxFQUFPO0FBQUEsTUFDOUI7QUFBQSxJQUNBO0FBQUEsRUFDQTtBQUNBO0FBQ08sU0FBU2lnQixHQUFxQmh0QyxHQUFRO0FBQ3pDLE1BQUksQ0FBQ0E7QUFDRDtBQUNKLE1BQUksT0FBT0EsS0FBVztBQUNsQixXQUFPQTtBQUNYLFFBQU1tdEMsSUFBSSxPQUFPbnRDLENBQU07QUFDdkIsU0FBSW10QyxNQUFNLFVBQ0MsRUFBRSxNQUFNLGFBQWEsTUFBTSxLQUFLLElBQ3ZDQSxNQUFNLGNBQ0MsRUFBRSxNQUFNLGFBQVksSUFDM0JBLE1BQU0sY0FDQyxFQUFFLE1BQU0sYUFBWSxJQUV4QixFQUFFLE1BQU0sYUFBYSxNQUFNLEtBQUs7QUFDM0M7QUN6RjhCcmxCLEVBQVM7QUFBQSxFQUNuQyxRQUFRQyxFQUFRO0FBQ3BCLENBQUM7QUFDTSxNQUFNcWxCLEtBQTRCbmMsR0FBcUIsUUFBUTtBQUFBLEVBQ2xFbkosRUFBUztBQUFBLElBQ0wsUUFBUUMsRUFBUTtBQUFBLElBQ2hCLGdCQUFnQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsSUFDOUMsTUFBTUMsRUFBVSxTQUFTO0FBQUEsSUFDekIsTUFBTUEsRUFBVSxRQUFRO0FBQUEsSUFDeEIsU0FBU0csRUFBUUwsRUFBUyxFQUFFLE1BQU1FLEVBQVUsWUFBWSxHQUFHLE1BQU1ELEVBQVEsRUFBRSxDQUFFLENBQUM7QUFBQSxFQUN0RixDQUFLO0FBQUEsRUFDREQsRUFBUztBQUFBLElBQ0wsUUFBUUMsRUFBUTtBQUFBLElBQ2hCLGdCQUFnQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsSUFDOUMsTUFBTUMsRUFBVSxTQUFTO0FBQUEsSUFDekIsTUFBTUEsRUFBVSxNQUFNO0FBQUEsSUFDdEIsUUFBUW1KLEdBQU8sQ0FBQyxlQUFlLFdBQVcsQ0FBQztBQUFBLElBQzNDLFNBQVNoSixFQUFRTCxFQUFTLEVBQUUsTUFBTUUsRUFBVSxZQUFZLEdBQUcsTUFBTUQsRUFBUSxFQUFFLENBQUUsRUFBRSxHQUFHRCxFQUFTO0FBQUEsTUFDdkYsTUFBTUUsRUFBVSxhQUFhO0FBQUEsTUFDN0IsT0FBT0QsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsTUFDckMsWUFBWUEsRUFBUSxFQUFHLFNBQVE7QUFBQSxJQUMzQyxDQUFTLENBQUMsQ0FBQztBQUFBLEVBQ1gsQ0FBSztBQUFBLEVBQ0RELEVBQVM7QUFBQSxJQUNMLFFBQVFDLEVBQVE7QUFBQSxJQUNoQixnQkFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLElBQzlDLE1BQU1DLEVBQVUsU0FBUztBQUFBLElBQ3pCLE1BQU1BLEVBQVUsV0FBVztBQUFBLElBQzNCLFFBQVFtSixHQUFPLENBQUMsZUFBZSxhQUFhLFlBQVksQ0FBQztBQUFBLElBQ3pELFNBQVNoSixFQUFRTCxFQUFTLEVBQUUsTUFBTUUsRUFBVSxhQUFhLEdBQUcsTUFBTUQsRUFBUSxFQUFFLENBQUUsRUFBRSxHQUFHRCxFQUFTO0FBQUEsTUFDeEYsTUFBTUUsRUFBVSxjQUFjO0FBQUEsTUFDOUIsT0FBT0QsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsTUFDckMsWUFBWUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsSUFDdEQsQ0FBUyxDQUFDLENBQUM7QUFBQSxFQUNYLENBQUs7QUFDTCxDQUFDLEdBQ1lzbEIsS0FBdUJ2bEIsRUFBUztBQUFBLEVBQ3pDLFFBQVFDLEVBQVE7QUFBQSxFQUNoQixnQkFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzlDLE1BQU1DLEVBQVUsZUFBZTtBQUFBLEVBQy9CLFFBQVFtSixHQUFPLENBQUMsZUFBZSxhQUFhLFlBQVksQ0FBQztBQUFBLEVBQ3pELFdBQVdwSixFQUFRO0FBQUEsRUFDbkIsTUFBTUEsRUFBUTtBQUFBLEVBQ2QsUUFBUUEsRUFBUSxFQUFHLFNBQVE7QUFDL0IsQ0FBQyxHQUNZdWxCLEtBQXNCeGxCLEVBQVM7QUFBQSxFQUN4QyxRQUFRQyxFQUFRO0FBQUEsRUFDaEIsZ0JBQWdCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUM5QyxNQUFNb0osR0FBTyxDQUFDLFlBQVksZUFBZSxDQUFDO0FBQUEsRUFDMUMsUUFBUUEsR0FBTyxDQUFDLGVBQWUsYUFBYSxZQUFZLENBQUM7QUFBQSxFQUN6RCxXQUFXcEosRUFBUTtBQUFBLEVBQ25CLE1BQU1BLEVBQVE7QUFBQSxFQUNkLFFBQVFBLEVBQVEsRUFBRyxTQUFRO0FBQy9CLENBQUMsR0FDWXdsQixLQUFxQ3psQixFQUFTO0FBQUEsRUFDdkQsUUFBUUMsRUFBUTtBQUFBLEVBQ2hCLE1BQU1DLEVBQVUsc0JBQXNCO0FBQUEsRUFDdEMsYUFBYUQsRUFBUTtBQUFBLEVBQ3JCLE1BQU1BLEVBQVE7QUFBQSxFQUNkLFdBQVdFLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFO0FBQUEsRUFDdkMsVUFBVUUsR0FBUyxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQzdDLENBQUMsR0M3REt4QyxLQUFTRCxHQUFVLHdCQUF3QixHQ0dwQzZuQixLQUFtQjFsQixFQUFTO0FBQUEsRUFDckMsSUFBSUMsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsRUFDbEMsaUJBQWlCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUMvQyxtQkFBbUJtSixFQUFRLEVBQUcsR0FBR2xKLEVBQVUsS0FBSyxDQUFDLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUN0RSxVQUFVQyxHQUFTRixFQUFRLEdBQUlHLEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFRO0FBQUE7QUFBQSxFQUUzRCxtQkFBbUJDLEVBQVFKLEVBQVEsQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFRO0FBQUEsRUFDMUQsUUFBUUMsRUFBVSxtQkFBbUIsRUFBRSxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzFELFFBQVFHLEVBQVFELEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFRO0FBQUE7QUFBQSxFQUU1QyxPQUFPaVcsRUFDSztBQUFBLElBQ1IsUUFBUXNQLEVBQ0k7QUFBQSxNQUNSLFFBQVF2bEIsRUFBSyxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsTUFDbkMsT0FBT0gsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsSUFDakQsQ0FBUyxFQUNJLFNBQVEsRUFDUixTQUFRO0FBQUEsRUFDckIsQ0FBSyxFQUNJLFNBQVEsRUFDUixTQUFRO0FBQUEsRUFDYixRQUFRMmxCLEdBQ0UsQ0FBQyxhQUFhLGNBQWMsVUFBVSxhQUFhLGFBQWEsQ0FBQyxFQUN0RSxTQUFRLEVBQ1IsU0FBUTtBQUFBLEVBQ2IsZ0JBQWdCemxCLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUNqRSxPQUFPaVcsRUFDSztBQUFBLElBQ1IsY0FBY2pOLEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDakMscUJBQXFCakosR0FBU0YsRUFBUSxHQUFJRyxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBUTtBQUFBLElBQ3RFLGVBQWVnSixFQUFRLEVBQUcsU0FBUTtBQUFBLElBQ2xDLHNCQUFzQmpKLEdBQVNGLEVBQVEsR0FBSUcsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFBQSxFQUMvRSxDQUFLLEVBQ0ksU0FBUSxFQUNSLFNBQVE7QUFDakIsQ0FBQyxHQUVZeWxCLEtBQWdDN2xCLEVBQVM7QUFBQSxFQUNsRCxJQUFJQyxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3ZCLE9BQU9BLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3JDLE1BQU1BLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3BDLFlBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzFDLE1BQU11SyxHQUFRO0FBQUEsSUFDVnRLLEVBQVUsWUFBWTtBQUFBLElBQ3RCQSxFQUFVLGFBQWE7QUFBQSxJQUN2QkEsRUFBVSxnQkFBZ0I7QUFBQSxJQUMxQkEsRUFBVSxhQUFhO0FBQUEsSUFDdkJBLEVBQVUsY0FBYztBQUFBLEVBQ2hDLENBQUs7QUFDTCxDQUFDLEdBQ1k0bEIsS0FBeUJDLEVBQzFCO0FBQUEsRUFDUixJQUFJOWxCLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDdkIsV0FBV0EsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUM5QixTQUFTQSxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzVCLFNBQVNJLEVBQVF3bEIsRUFBNkIsRUFBRSxTQUFRO0FBQUEsRUFDeEQsTUFBTTVsQixFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3pCLFFBQVFBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3RDLE1BQU1vSixHQUFPLENBQUMsUUFBUSxhQUFhLFFBQVEsQ0FBQyxFQUFFLFNBQVE7QUFBQSxFQUN0RCxRQUFRQSxHQUFPLENBQUMsYUFBYSxjQUFjLGFBQWEsQ0FBQyxFQUFFLFNBQVE7QUFBQSxFQUNuRSxNQUFNdWMsR0FDSTtBQUFBLElBQ047QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsSUFDQTtBQUFBLElBQ0E7QUFBQSxJQUNBO0FBQUEsRUFDUixDQUFLLEVBQ0ksU0FBUTtBQUFBLEVBQ2IscUJBQXFCM2xCLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ25ELFNBQVNLLEdBQVMsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3hDLFFBQVFMLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUFBLEVBQ3RDLGNBQWNBLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDakMsT0FBT0csRUFBSyxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQUEsRUFDbEMsT0FBT2dYLEVBQ0lmLEVBQ0M7QUFBQSxJQUNSLE1BQU1wVyxFQUFRO0FBQUEsSUFDZCxhQUFhQSxFQUFRO0FBQUEsSUFDckIsY0FBY0UsR0FBU0MsRUFBSyxDQUFFLEVBQUUsU0FBUTtBQUFBLEVBQ2hELENBQUssRUFDSSxZQUFXLENBQUUsRUFDYixTQUFRO0FBQ2pCLENBQUMsRUFDSSxZQUFXLEdBQ0g0bEIsS0FBaUNobUIsRUFBUztBQUFBLEVBQ25ELE1BQU1FLEVBQVUsc0JBQXNCO0FBQUEsRUFDdEMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLGNBQWNELEVBQVM7QUFBQSxJQUNuQixJQUFJQyxFQUFRLEVBQUcsU0FBUTtBQUFBLElBQ3ZCLFFBQVFDLEVBQVUsdUJBQXVCLEVBQUUsU0FBUTtBQUFBLEVBQzNELENBQUs7QUFDTCxDQUFDLEdBRVkrbEIsS0FBbUNqbUIsRUFBUztBQUFBLEVBQ3JELE1BQU1FLEVBQVUseUJBQXlCO0FBQUEsRUFDekMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLE1BQU02bEI7QUFBQSxFQUNOLGtCQUFrQjdsQixFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVE7QUFDcEQsQ0FBQyxHQUVZaW1CLEtBQWtDbG1CLEVBQVM7QUFBQSxFQUNwRCxNQUFNRSxFQUFVLHdCQUF3QjtBQUFBLEVBQ3hDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixNQUFNNmxCO0FBQUEsRUFDTixrQkFBa0I3bEIsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFRO0FBQ3BELENBQUMsR0FDWWttQixLQUFxQ25tQixFQUFTO0FBQUEsRUFDdkQsTUFBTUUsRUFBVSwyQkFBMkI7QUFBQSxFQUMzQyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsU0FBU0EsRUFBUTtBQUNyQixDQUFDLEdBQ1ltbUIsS0FBOERwbUIsRUFBUztBQUFBLEVBQ2hGLE1BQU1FLEVBQVUsdURBQXVEO0FBQUEsRUFDdkUsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixlQUFlbUosRUFBUTtBQUFBLEVBQ3ZCLFlBQVluSixFQUFRO0FBQUEsRUFDcEIsVUFBVUksRUFBUUQsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFDbEQsQ0FBQyxHQUNZaW1CLEtBQTBEcm1CLEVBQVM7QUFBQSxFQUM1RSxNQUFNRSxFQUFVLG1EQUFtRDtBQUFBLEVBQ25FLFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsZUFBZW1KLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDbEMsT0FBT25KLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDMUIsVUFBVUksRUFBUUQsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVE7QUFDbEQsQ0FBQyxHQUNZa21CLEtBQTJEdG1CLEVBQVM7QUFBQSxFQUM3RSxNQUFNRSxFQUFVLG9EQUFvRDtBQUFBLEVBQ3BFLFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsZUFBZW1KLEVBQVE7QUFBQSxFQUN2QixPQUFPcEosRUFBUztBQUFBLElBQ1osTUFBTUMsRUFBUSxFQUFHLFNBQVE7QUFBQSxJQUN6QixTQUFTQSxFQUFRLEVBQUcsU0FBUTtBQUFBLElBQzVCLE9BQU9BLEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDMUIsTUFBTUEsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUNqQyxDQUFLO0FBQ0wsQ0FBQyxHQUNZc21CLEtBQXVDdm1CLEVBQVM7QUFBQSxFQUN6RCxNQUFNRSxFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixNQUFNNmxCO0FBQ1YsQ0FBQyxHQUNZVSxLQUF1Q3htQixFQUFTO0FBQUEsRUFDekQsTUFBTUUsRUFBVSw2QkFBNkI7QUFBQSxFQUM3QyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGNBQWNtSixFQUFRO0FBQUEsRUFDdEIsZUFBZUEsRUFBUTtBQUMzQixDQUFDLEdBQ1lxZCxLQUFvQ3ptQixFQUFTO0FBQUEsRUFDdEQsTUFBTUUsRUFBVSwwQkFBMEI7QUFBQSxFQUMxQyxNQUFNNGxCO0FBQUEsRUFDTixVQUFVN2xCLEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDN0Isa0JBQWtCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVE7QUFDcEQsQ0FBQyxHQUNZeW1CLEtBQW9DMW1CLEVBQVM7QUFBQSxFQUN0RCxNQUFNRSxFQUFVLDBCQUEwQjtBQUFBLEVBQzFDLFNBQVNELEVBQVE7QUFBQSxFQUNqQixVQUFVQSxFQUFRLEVBQUcsU0FBUTtBQUNqQyxDQUFDLEdBQ1kwbUIsS0FBc0MzbUIsRUFBUztBQUFBLEVBQ3hELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsU0FBU0QsRUFBUTtBQUFBLEVBQ2pCLFVBQVVBLEVBQVEsRUFBRyxTQUFRO0FBQ2pDLENBQUMsR0FDWTJtQixLQUFzQzVtQixFQUFTO0FBQUEsRUFDeEQsTUFBTUUsRUFBVSw0QkFBNEI7QUFBQSxFQUM1QyxTQUFTRCxFQUFRO0FBQUEsRUFDakIsY0FBY21KLEVBQVE7QUFBQSxFQUN0QixlQUFlQSxFQUFRO0FBQUEsRUFDdkIsVUFBVW5KLEVBQVEsRUFBRyxTQUFRO0FBQ2pDLENBQUMsR0FDWTRtQixLQUFtQjdtQixFQUFTO0FBQUEsRUFDckMsTUFBTUUsRUFBVSxPQUFPO0FBQUEsRUFDdkIsVUFBVUQsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUM3QixPQUFPRyxFQUFLLEVBQUcsU0FBUTtBQUMzQixDQUFDLEdBQ1kwbUIsS0FBcUM5bUIsRUFBUztBQUFBLEVBQ3ZELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsVUFBVUQsRUFBUTtBQUN0QixDQUFDLEdBQ1k4bUIsS0FBb0MvbUIsRUFBUztBQUFBLEVBQ3RELE1BQU1FLEVBQVUsMkJBQTJCO0FBQUEsRUFDM0MsT0FBT0QsRUFBUTtBQUFBLEVBQ2YsVUFBVUEsRUFBUSxFQUFHLFNBQVE7QUFDakMsQ0FBQyxHQUNZK21CLEtBQW1DaG5CLEVBQVM7QUFBQSxFQUNyRCxNQUFNRSxFQUFVLDBCQUEwQjtBQUFBLEVBQzFDLFVBQVVELEVBQVEsRUFBRyxTQUFRO0FBQ2pDLENBQUMsR0FDWWduQixLQUFvQ2puQixFQUFTO0FBQUEsRUFDdEQsTUFBTUUsRUFBVSwyQkFBMkI7QUFBQSxFQUMzQyxVQUFVRCxFQUFRLEVBQUcsU0FBUTtBQUNqQyxDQUFDLEdBQ1lpbkIsS0FBdUNsbkIsRUFBUztBQUFBLEVBQ3pELE1BQU1FLEVBQVUsOEJBQThCO0FBQUEsRUFDOUMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixrQkFBa0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBUTtBQUNwRCxDQUFDLEdBQ1lrbkIsS0FBMkNubkIsRUFBUztBQUFBLEVBQzdELE1BQU1FLEVBQVUsbUNBQW1DO0FBQUEsRUFDbkQsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixnQkFBZ0JtSixFQUFRO0FBQzVCLENBQUMsR0FDWWdlLEtBQTJDcG5CLEVBQVM7QUFBQSxFQUM3RCxNQUFNRSxFQUFVLG1DQUFtQztBQUFBLEVBQ25ELFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsY0FBY21KLEVBQVE7QUFDMUIsQ0FBQyxHQUNZaWUsS0FBc0N0QixFQUN2QztBQUFBLEVBQ1IsTUFBTTdsQixFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVE7QUFDdEIsQ0FBQyxFQUNJLFlBQVcsR0FDSHFuQixLQUFzQ3ZCLEVBQ3ZDO0FBQUEsRUFDUixNQUFNN2xCLEVBQVUsNkJBQTZCO0FBQUEsRUFDN0MsVUFBVUQsRUFBUTtBQUN0QixDQUFDLEVBQ0ksWUFBVyxHQUNIc25CLEtBQXNDdm5CLEVBQVM7QUFBQSxFQUN4RCxNQUFNRSxFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVE7QUFDdEIsQ0FBQyxHQUNZdW5CLEtBQStCeG5CLEVBQVM7QUFBQSxFQUNqRCxNQUFNRSxFQUFVLHFCQUFxQjtBQUFBLEVBQ3JDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixhQUFhSSxFQUFRTCxFQUFTO0FBQUEsSUFDMUIsT0FBT29KLEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDMUIsTUFBTUMsR0FBTyxDQUFDLFlBQVksUUFBUSxDQUFDLEVBQUUsU0FBUTtBQUFBLElBQzdDLFdBQVdELEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDOUIsZUFBZUEsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUMxQyxDQUFLLENBQUM7QUFDTixDQUFDLEdBQ1lxZSxLQUFnQ3puQixFQUFTO0FBQUEsRUFDbEQsTUFBTUUsRUFBVSw2QkFBNkI7QUFBQSxFQUM3QyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGVBQWVtSixFQUFRO0FBQUEsRUFDdkIsT0FBT25KLEVBQVE7QUFBQSxFQUNmLGNBQWNtSixFQUFRO0FBQUEsRUFDdEIsYUFBYW5KLEVBQVE7QUFDekIsQ0FBQyxHQUNZeW5CLEtBQStCMW5CLEVBQVM7QUFBQSxFQUNqRCxNQUFNRSxFQUFVLDRCQUE0QjtBQUFBLEVBQzVDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsZUFBZW1KLEVBQVE7QUFBQSxFQUN2QixjQUFjQSxFQUFRO0FBQUEsRUFDdEIsYUFBYW5KLEVBQVE7QUFDekIsQ0FBQyxHQUNZMG5CLEtBQTBDM25CLEVBQVM7QUFBQSxFQUM1RCxNQUFNRSxFQUFVLHdDQUF3QztBQUFBLEVBQ3hELFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsZUFBZW1KLEVBQVE7QUFBQSxFQUN2QixPQUFPbkosRUFBUTtBQUFBLEVBQ2YsY0FBY21KLEVBQVE7QUFBQSxFQUN0QixhQUFhbkosRUFBUTtBQUN6QixDQUFDLEdBQ1kybkIsS0FBeUM1bkIsRUFBUztBQUFBO0FBQUEsRUFFM0QsTUFBTUUsRUFBVSx1Q0FBdUM7QUFBQSxFQUN2RCxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGVBQWVtSixFQUFRO0FBQUEsRUFDdkIsWUFBWW5KLEVBQVE7QUFBQSxFQUNwQixjQUFjbUosRUFBUTtBQUFBLEVBQ3RCLGFBQWFuSixFQUFRO0FBQ3pCLENBQUMsR0FDWTRuQixLQUFzQzduQixFQUFTO0FBQUEsRUFDeEQsTUFBTUUsRUFBVSw2QkFBNkI7QUFBQSxFQUM3QyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGVBQWVtSixFQUFRO0FBQUEsRUFDdkIsY0FBY0EsRUFBUTtBQUFBLEVBQ3RCLGFBQWFuSixFQUFRO0FBQUEsRUFDckIsTUFBTUQsRUFBUztBQUFBLElBQ1gsT0FBT0MsRUFBUSxFQUFHLFNBQVE7QUFBQSxJQUMxQixNQUFNQSxFQUFRLEVBQUcsU0FBUTtBQUFBLElBQ3pCLFlBQVlBLEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDL0IsTUFBTW9KLEdBQU8sQ0FBQyxRQUFRLE9BQU8sQ0FBQyxFQUFFLFNBQVE7QUFBQSxFQUNoRCxDQUFLO0FBQ0wsQ0FBQyxHQUNZeWUsS0FBcUM5bkIsRUFBUztBQUFBLEVBQ3ZELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixlQUFlbUosRUFBUTtBQUFBLEVBQ3ZCLGNBQWNBLEVBQVE7QUFBQSxFQUN0QixhQUFhbkosRUFBUTtBQUFBLEVBQ3JCLE1BQU1ELEVBQVM7QUFBQSxJQUNYLE9BQU9DLEVBQVEsRUFBRyxTQUFRO0FBQUEsSUFDMUIsTUFBTUEsRUFBUSxFQUFHLFNBQVE7QUFBQSxJQUN6QixZQUFZQSxFQUFRLEVBQUcsU0FBUTtBQUFBLElBQy9CLE1BQU1vSixHQUFPLENBQUMsUUFBUSxPQUFPLENBQUMsRUFBRSxTQUFRO0FBQUEsRUFDaEQsQ0FBSztBQUNMLENBQUMsR0FDWTBlLEtBQTZCL25CLEVBQVM7QUFBQSxFQUMvQyxNQUFNRSxFQUFVLGtCQUFrQjtBQUFBLEVBQ2xDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixVQUFVeWxCO0FBQ2QsQ0FBQyxHQUNZc0MsS0FBMEJob0IsRUFBUztBQUFBLEVBQzVDLE1BQU1FLEVBQVUsZUFBZTtBQUFBLEVBQy9CLFVBQVVELEVBQVE7QUFBQSxFQUNsQixVQUFVeWxCO0FBQ2QsQ0FBQyxHQUNZdUMsS0FBZ0Rqb0IsRUFBUztBQUFBLEVBQ2xFLE1BQU1FLEVBQVUsd0NBQXdDO0FBQUEsRUFDeEQsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsT0FBT0EsRUFBUTtBQUFBLEVBQ2YsY0FBY21KLEVBQVE7QUFBQSxFQUN0QixhQUFhbkosRUFBUTtBQUN6QixDQUFDLEdBQ1lpb0IsS0FBK0Nsb0IsRUFBUztBQUFBLEVBQ2pFLE1BQU1FLEVBQVUsdUNBQXVDO0FBQUEsRUFDdkQsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsV0FBV0EsRUFBUTtBQUFBLEVBQ25CLGNBQWNtSixFQUFRO0FBQUEsRUFDdEIsYUFBYW5KLEVBQVE7QUFDekIsQ0FBQyxHQUNZa29CLEtBQXFDbm9CLEVBQVM7QUFBQSxFQUN2RCxNQUFNRSxFQUFVLDRCQUE0QjtBQUFBLEVBQzVDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixNQUFNNmxCO0FBQUEsRUFDTixjQUFjMWMsRUFBUTtBQUFBLEVBQ3RCLGFBQWFuSixFQUFRO0FBQ3pCLENBQUMsR0FDWW1vQixLQUFvQ3BvQixFQUFTO0FBQUEsRUFDdEQsTUFBTUUsRUFBVSwyQkFBMkI7QUFBQSxFQUMzQyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsTUFBTTZsQjtBQUFBLEVBQ04sY0FBYzFjLEVBQVE7QUFBQSxFQUN0QixhQUFhbkosRUFBUTtBQUN6QixDQUFDLEdBQ1lvb0IsS0FBK0Jyb0IsRUFBUztBQUFBLEVBQ2pELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNBLEVBQVE7QUFBQSxFQUNqQixlQUFlbUosRUFBUTtBQUFBLEVBQ3ZCLE9BQU9uSixFQUFRO0FBQUEsRUFDZixjQUFjbUosRUFBUTtBQUFBLEVBQ3RCLGFBQWFuSixFQUFRO0FBQ3pCLENBQUMsR0FDWXFvQixLQUE4QnRvQixFQUFTO0FBQUE7QUFBQSxFQUVoRCxNQUFNRSxFQUFVLDJCQUEyQjtBQUFBLEVBQzNDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTQSxFQUFRO0FBQUEsRUFDakIsZUFBZW1KLEVBQVE7QUFBQSxFQUN2QixNQUFNbkosRUFBUTtBQUFBLEVBQ2QsY0FBY21KLEVBQVE7QUFBQSxFQUN0QixhQUFhbkosRUFBUTtBQUN6QixDQUFDLEdBQ1lzb0IsS0FBNEJ2b0IsRUFBUztBQUFBLEVBQzlDLE1BQU1FLEVBQVUsaUJBQWlCO0FBQUEsRUFDakMsVUFBVUQsRUFBUTtBQUFBLEVBQ2xCLFNBQVNHLEVBQUs7QUFDbEIsQ0FBQyxHQUNZb29CLEtBQTRCeG9CLEVBQVM7QUFBQSxFQUM5QyxNQUFNRSxFQUFVLGlCQUFpQjtBQUFBLEVBQ2pDLFVBQVVELEVBQVE7QUFBQSxFQUNsQixTQUFTRyxFQUFLO0FBQ2xCLENBQUMsR0FDWXFvQixLQUE0QnpvQixFQUFTO0FBQUEsRUFDOUMsTUFBTUUsRUFBVSxpQkFBaUI7QUFBQSxFQUNqQyxVQUFVRCxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzdCLGFBQWFBLEVBQVEsRUFBRyxTQUFRO0FBQ3BDLENBQUMsR0FDWXlvQixLQUE0QjFvQixFQUFTO0FBQUEsRUFDOUMsTUFBTUUsRUFBVSxpQkFBaUI7QUFBQSxFQUNqQyxVQUFVRCxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzdCLFVBQVVHLEVBQUssRUFBRyxTQUFRO0FBQzlCLENBQUMsR0FDWXVvQixLQUEyQjNvQixFQUFTO0FBQUEsRUFDN0MsTUFBTUUsRUFBVSxnQkFBZ0I7QUFBQSxFQUNoQyxVQUFVRCxFQUFRLEVBQUcsU0FBUTtBQUFBLEVBQzdCLFNBQVNHLEVBQUs7QUFDbEIsQ0FBQyxHQUNZd29CLEtBQW9DNW9CLEVBQVM7QUFBQSxFQUN0RCxNQUFNRSxFQUFVLDRCQUE0QjtBQUFBLEVBQzVDLFVBQVVELEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDN0IsU0FBU0EsRUFBUSxFQUFHLFNBQVE7QUFDaEMsQ0FBQyxHQUNZNG9CLEtBQW1DN29CLEVBQVM7QUFBQSxFQUNyRCxNQUFNRSxFQUFVLDBCQUEwQjtBQUFBLEVBQzFDLFVBQVVELEVBQVEsRUFBRyxTQUFRO0FBQUEsRUFDN0IsU0FBU0EsRUFBUSxFQUFHLFNBQVE7QUFDaEMsQ0FBQyxHQUNZNm9CLEtBQTJDOW9CLEVBQVM7QUFBQSxFQUM3RCxNQUFNRSxFQUFVLG1DQUFtQztBQUFBLEVBQ25ELFVBQVVELEVBQVE7QUFBQSxFQUNsQixhQUFhQSxFQUFRO0FBQUEsRUFDckIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGNBQWNtSixFQUFRO0FBQUEsRUFDdEIsT0FBT25KLEVBQVE7QUFBQSxFQUNmLGFBQWFBLEVBQVE7QUFDekIsQ0FBQyxHQUNZOG9CLEtBQTBDL29CLEVBQVM7QUFBQSxFQUM1RCxNQUFNRSxFQUFVLGtDQUFrQztBQUFBLEVBQ2xELFVBQVVELEVBQVE7QUFBQSxFQUNsQixhQUFhQSxFQUFRO0FBQUEsRUFDckIsU0FBU0EsRUFBUTtBQUFBLEVBQ2pCLGNBQWNtSixFQUFRO0FBQUEsRUFDdEIsV0FBV25KLEVBQVE7QUFDdkIsQ0FBQyxHQUNZK29CLEtBQXVDaHBCLEVBQVM7QUFBQSxFQUN6RCxNQUFNRSxFQUFVLCtCQUErQjtBQUFBLEVBQy9DLFVBQVVELEVBQVE7QUFBQSxFQUNsQixjQUFjbUosRUFBUTtBQUFBLEVBQ3RCLFNBQVNuSixFQUFRO0FBQ3JCLENBQUMsR0FDWWdwQixLQUFzQ2pwQixFQUFTO0FBQUEsRUFDeEQsTUFBTUUsRUFBVSw2QkFBNkI7QUFBQSxFQUM3QyxVQUFVRCxFQUFRO0FBQUEsRUFDbEIsY0FBY21KLEVBQVE7QUFBQSxFQUN0QixTQUFTbkosRUFBUTtBQUNyQixDQUFDLEdBQ1lpcEIsS0FBZ0NscEIsRUFBUztBQUFBLEVBQ2xELE1BQU1FLEVBQVUsdUJBQXVCO0FBQUEsRUFDdkMsVUFBVUQsRUFBUSxFQUFHLFNBQVE7QUFBQSxFQUM3QixTQUFTQSxFQUFRLEVBQUcsU0FBUTtBQUNoQyxDQUFDLEdBTVlrcEIsS0FBcUJwRCxFQUN0QjtBQUFBLEVBQ1IsTUFBTTlsQixFQUFRO0FBQUEsRUFDZCxVQUFVQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVE7QUFDNUMsQ0FBQyxFQUNJLFlBQVcsR0FDSG1wQixLQUE0QmpnQixHQUFxQixRQUFRO0FBQUEsRUFDbEU2YztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBSztBQUFBLEVBQ0FDO0FBQUEsRUFDQUk7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FJO0FBQUEsRUFDQUM7QUFBQSxFQUNBSztBQUFBLEVBQ0FKO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQ0osQ0FBQztBQUN3QzlmLEdBQXFCLFFBQVE7QUFBQSxFQUNsRXNkO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUc7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQXdCO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUNKLENBQUM7QUFNTSxTQUFTVSxHQUFtQm5tQixHQUFPO0FBQ3RDLFFBQU1vbUIsSUFBTSxLQUFLLE1BQU1wbUIsRUFBTSxLQUFLLFVBQVUsR0FDdEMxRCxJQUFTNHBCLEdBQTBCLFVBQVVFLENBQUc7QUFDdEQsTUFBSSxDQUFDOXBCLEVBQU8sU0FBUztBQUNqQixVQUFNK3BCLElBQWdCSixHQUFtQixVQUFVRyxDQUFHO0FBQ3RELFdBQUlDLEVBQWMsVUFDUCxFQUFFLE1BQU1BLEVBQWMsTUFBTSxXQUFXLEdBQUksSUFFL0MsRUFBRSxNQUFNLE1BQU0sV0FBVyxHQUFJO0FBQUEsRUFDeEM7QUFDQSxTQUFPLEVBQUUsTUFBTS9wQixFQUFPLE1BQU0sV0FBVyxHQUFLO0FBQ2hEO0FDbmdCWSxNQUFDZ3FCLEtBQWdDLGdCQUtoQ0MsS0FBeUM7QUFBQSxFQUNsRCxrQkFBa0IsQ0FBQyxPQUFPO0FBQUEsRUFDMUIsT0FBTztBQUFBLElBQ0gsT0FBTztBQUFBLE1BQ0gsUUFBUSxFQUFFLE1BQU0sYUFBYSxNQUFNLEtBQUs7QUFBQSxNQUN4QyxlQUFlLEVBQUUsT0FBTyx5QkFBd0I7QUFBQSxNQUNoRCxlQUFlLEVBQUUsTUFBTSxlQUFjO0FBQUEsTUFDckMsZ0JBQWdCO0FBQUEsSUFDNUI7QUFBQSxJQUNRLFFBQVE7QUFBQSxNQUNKLFFBQVEsRUFBRSxNQUFNLGFBQWEsTUFBTSxLQUFLO0FBQUEsTUFDeEMsT0FBTztBQUFBLElBQ25CO0FBQUEsRUFDQTtBQUNBOztBQUNPLE1BQU1DLEtBQU4sTUFBTUEsV0FBMkIzbEIsR0FBcUI7QUFBQSxFQU16RCxZQUFZeG5CLElBQVUsSUFBSTtBQUN0QixVQUFLO0FBTlQsSUFBQWttQixFQUFBLE1BQUFpQztBQUNBLElBQUFqQyxFQUFBLE1BQUFrbkI7QUFDQSxJQUFBbG5CLEVBQUEsTUFBQW1uQixJQUFpQjtBQUNqQixJQUFBbm5CLEVBQUEsTUFBQW9uQixJQUFvQjtBQUNwQixJQUFBL3pCLEVBQUEsc0JBQWUsSUFBSW1PLEdBQW1CO0FBR2xDLElBQUFtSCxFQUFBLE1BQUsxRyxJQUFTbm9CLEVBQVEsU0FBU2l0QyxLQUMvQnBlLEVBQUEsTUFBS3VlLElBQVVwdEMsRUFBUTtBQUFBLEVBQzNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxJQUFJLGVBQWU7QUFDZixXQUFPd21CLEVBQUEsTUFBSzJCO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsSUFBSSxhQUFhRCxHQUFPO0FBQ3BCLElBQUEyRyxFQUFBLE1BQUsxRyxJQUFTRDtBQUFBLEVBQ2xCO0FBQUEsRUFDQSxJQUFJLG9CQUFvQjtBQUNwQixXQUFPMUIsRUFBQSxNQUFLOG1CLE9BQXFCO0FBQUEsRUFDckM7QUFBQSxFQUNBLE1BQU0sV0FBV3R0QyxHQUFTO0FBQ3RCLFVBQU11dEMsSUFBU3Z0QyxFQUFRLFVBQVV3bUIsRUFBQSxNQUFLNG1CO0FBQ3RDLFdBQUksT0FBT0csS0FBVyxhQUNYLE1BQU1BLEVBQU0sSUFFaEJBO0FBQUEsRUFDWDtBQUFBLEVBQ0EsV0FBVzVtQixHQUFPOztBQUNkLFVBQU0sRUFBRSxNQUFNMUQsR0FBUSxXQUFBdXFCLEVBQVMsSUFBS1YsR0FBbUJubUIsQ0FBSztBQUM1RCxRQUFJMUQsTUFBVyxTQUdmLEtBQUssS0FBSyxLQUFLQSxDQUFNLEdBQ2pCLENBQUF1cUIsSUFTSjtBQUFBLFVBTkl2cUIsRUFBTyxTQUFTLFVBQ2hCLEtBQUssS0FBSyxTQUFTLEVBQUUsTUFBTSxTQUFTLE9BQU9BLEdBQVEsSUFHbkQsS0FBSyxLQUFLQSxFQUFPLE1BQU1BLENBQU0sR0FFN0JBLEVBQU8sU0FBUyxvQkFBb0I7QUFDcEMsYUFBSyxLQUFLLGdCQUFnQjtBQUFBLFVBQ3RCLE1BQU07QUFBQSxVQUNOLGNBQWM7QUFBQSxZQUNWLEdBQUdBO0FBQUEsVUFDdkI7QUFBQSxRQUNBLENBQWE7QUFDRDtBQUFBLE1BQ0o7QUFJQSxVQUhJQSxFQUFPLFNBQVMscUJBQ2hCNEwsRUFBQSxNQUFLeWUsSUFBb0JycUIsRUFBTyxVQUVoQ0EsRUFBTyxTQUFTLGlCQUFpQjtBQUNqQyxjQUFNd1UsSUFBV2dVLEdBQXdCLFVBQVV4b0IsQ0FBTTtBQUN6RCxZQUFJLENBQUN3VSxFQUFTLFNBQVM7QUFDbkIsVUFBQWxXLEdBQU8sTUFBTSxxQ0FBcUNrVyxFQUFTLEtBQUs7QUFDaEU7QUFBQSxRQUNKO0FBQ0EsY0FBTWdXLE1BQWMxeUMsSUFBQTA4QixFQUFTLEtBQUssU0FBUyxVQUF2QixnQkFBQTE4QixFQUE4QixpQkFBZ0IsR0FDNUQyeUMsTUFBZXJ5QyxJQUFBbzhCLEVBQVMsS0FBSyxTQUFTLFVBQXZCLGdCQUFBcDhCLEVBQThCLGtCQUFpQixHQUM5RHN5QyxJQUFjRixJQUFjQyxHQUM1Qi9RLElBQVEsSUFBSXBPLEdBQU07QUFBQSxVQUNwQixhQUFBa2Y7QUFBQSxVQUNBLHNCQUFvQmx4QyxJQUFBazdCLEVBQVMsS0FBSyxTQUFTLFVBQXZCLGdCQUFBbDdCLEVBQThCLHdCQUF1QixDQUFBO0FBQUEsVUFDekUsY0FBQW14QztBQUFBLFVBQ0EsdUJBQXFCL3VDLElBQUE4NEIsRUFBUyxLQUFLLFNBQVMsVUFBdkIsZ0JBQUE5NEIsRUFBOEIseUJBQXdCLENBQUE7QUFBQSxVQUMzRSxhQUFBZ3ZDO0FBQUEsUUFDaEIsQ0FBYTtBQUNELGFBQUssS0FBSyxnQkFBZ0JoUixDQUFLLEdBQy9CLEtBQUssS0FBSyxhQUFhO0FBQUEsVUFDbkIsTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFlBQ04sSUFBSWxGLEVBQVMsS0FBSyxTQUFTLE1BQU07QUFBQSxZQUNqQyxRQUFRQSxFQUFTLEtBQUssU0FBUyxVQUFVLENBQUE7QUFBQSxZQUN6QyxPQUFPO0FBQUEsY0FDSCxhQUFBZ1c7QUFBQSxjQUNBLHNCQUFvQjd1QyxJQUFBNjRCLEVBQVMsS0FBSyxTQUFTLFVBQXZCLGdCQUFBNzRCLEVBQThCLHdCQUF1QixDQUFBO0FBQUEsY0FDekUsY0FBQTh1QztBQUFBLGNBQ0EsdUJBQXFCNXVDLElBQUEyNEIsRUFBUyxLQUFLLFNBQVMsVUFBdkIsZ0JBQUEzNEIsRUFBOEIseUJBQXdCLENBQUE7QUFBQSxjQUMzRSxhQUFBNnVDO0FBQUEsWUFDeEI7QUFBQSxVQUNBO0FBQUEsUUFDQSxDQUFhO0FBQ0Q7QUFBQSxNQUNKO0FBQ0EsVUFBSTFxQixFQUFPLFNBQVMsOEJBQThCO0FBQzlDLGFBQUssS0FBSyxZQUFZO0FBQ3RCO0FBQUEsTUFDSjtBQUNBLFVBQUlBLEVBQU8sU0FBUyw2QkFBNkI7QUFDN0MsYUFBSyxLQUFLLGdCQUFnQjtBQUFBLFVBQ3RCLFFBQVFBLEVBQU87QUFBQSxRQUMvQixDQUFhO0FBQ0Q7QUFBQSxNQUNKO0FBQ0EsVUFBSUEsRUFBTyxTQUFTLDJEQUNoQkEsRUFBTyxTQUFTLCtCQUErQjtBQUcvQyxhQUFLLFVBQVU7QUFBQSxVQUNYLE1BQU07QUFBQSxVQUNOLFNBQVNBLEVBQU87QUFBQSxRQUNoQyxDQUFhO0FBQ0Q7QUFBQSxNQUNKO0FBQ0EsVUFBSUEsRUFBTyxTQUFTLHVEQUNoQkEsRUFBTyxTQUFTLGdDQUNoQkEsRUFBTyxTQUFTLDRDQUNoQkEsRUFBTyxTQUFTLDBDQUEwQztBQUMxRCxRQUFJQSxFQUFPLFNBQVMsNENBQ2hCLEtBQUssS0FBSywwQkFBMEI7QUFBQSxVQUNoQyxNQUFNO0FBQUEsVUFDTixPQUFPQSxFQUFPO0FBQUEsVUFDZCxRQUFRQSxFQUFPO0FBQUEsVUFDZixZQUFZQSxFQUFPO0FBQUEsUUFDdkMsQ0FBaUI7QUFHTDtBQUFBLE1BQ0o7QUFDQSxVQUFJQSxFQUFPLFNBQVMsNkJBQ2hCQSxFQUFPLFNBQVMsNEJBQ2hCQSxFQUFPLFNBQVMsK0JBQStCO0FBRS9DLFlBQUlBLEVBQU8sS0FBSyxTQUFTLG9CQUNyQkEsRUFBTyxTQUFTLDBCQUEwQjtBQUMxQyxnQkFBTTZrQixJQUFjN2tCLEVBQU8sS0FBSyxnQkFBZ0IsSUFDMUNnQyxJQUFTaEMsRUFBTyxLQUFLLFNBQVMsQ0FBQTtBQUNwQyxjQUFJO0FBQ0EsaUJBQUssS0FBSyxvQkFBb0I7QUFBQSxjQUMxQixhQUFBNmtCO0FBQUEsY0FDQSxPQUFBN2lCO0FBQUEsWUFDeEIsQ0FBcUI7QUFBQSxVQUNMLFNBQ092ZixHQUFLO0FBQ1IsWUFBQTZiLEdBQU8sTUFBTSxtQ0FBbUM3YixHQUFLdWQsRUFBTyxJQUFJO0FBQUEsVUFDcEU7QUFFQTtBQUFBLFFBQ0o7QUFDQSxZQUFJQSxFQUFPLEtBQUssU0FBUyxXQUFXO0FBQ2hDLGdCQUFNMnFCLElBQWlCM3FCLEVBQU8sU0FBUyw2QkFDbkNBLEVBQU8sU0FBUywyQkFDZEEsRUFBTyxtQkFDUCxNQUNBempCLElBQU91cEMsR0FBMEIsTUFBTTtBQUFBLFlBQ3pDLFFBQVE5bEIsRUFBTyxLQUFLO0FBQUEsWUFDcEIsZ0JBQUEycUI7QUFBQSxZQUNBLE1BQU0zcUIsRUFBTyxLQUFLO0FBQUEsWUFDbEIsTUFBTUEsRUFBTyxLQUFLO0FBQUEsWUFDbEIsU0FBU0EsRUFBTyxLQUFLO0FBQUEsWUFDckIsUUFBUUEsRUFBTyxLQUFLO0FBQUEsVUFDeEMsQ0FBaUI7QUFDRCxlQUFLLEtBQUssZUFBZXpqQixDQUFJO0FBQzdCO0FBQUEsUUFDSjtBQUNBLFlBQUl5akIsRUFBTyxLQUFLLFNBQVMsMEJBQ3JCQSxFQUFPLFNBQVMsMEJBQTBCO0FBQzFDLGdCQUFNempCLElBQU95akIsRUFBTyxNQUNkNHFCLElBQXFCM0UsR0FBbUMsTUFBTTtBQUFBLFlBQ2hFLFFBQVExcEMsRUFBSztBQUFBLFlBQ2IsTUFBTUEsRUFBSztBQUFBLFlBQ1gsYUFBYUEsRUFBSztBQUFBLFlBQ2xCLE1BQU1BLEVBQUs7QUFBQSxZQUNYLFdBQVcsS0FBSyxNQUFNQSxFQUFLLGFBQWEsSUFBSTtBQUFBLFlBQzVDLFVBQVVBLEVBQUs7QUFBQSxVQUNuQyxDQUFpQjtBQUNELGVBQUssS0FBSyxlQUFlcXVDLENBQWtCLEdBQzNDLEtBQUssS0FBSyx3QkFBd0JBLENBQWtCO0FBQ3BEO0FBQUEsUUFDSjtBQUNBLFlBQUk1cUIsRUFBTyxLQUFLLFNBQVMsbUJBQ3JCQSxFQUFPLEtBQUssU0FBUyxZQUFZO0FBQ2pDLGdCQUFNOWUsSUFBUzhlLEVBQU8sU0FBUywyQkFDekIsY0FDQSxlQUNBNnFCLElBQVU3RSxHQUFvQixNQUFNO0FBQUEsWUFDdEMsUUFBUWhtQixFQUFPLEtBQUs7QUFBQSxZQUNwQixNQUFNQSxFQUFPLEtBQUs7QUFBQSxZQUNsQixRQUFBOWU7QUFBQSxZQUNBLFdBQVc4ZSxFQUFPLEtBQUs7QUFBQSxZQUN2QixNQUFNQSxFQUFPLEtBQUs7QUFBQSxZQUNsQixRQUFRQSxFQUFPLEtBQUs7QUFBQSxVQUN4QyxDQUFpQjtBQUNELGVBQUssS0FBSyxlQUFlNnFCLENBQU8sR0FDNUI3cUIsRUFBTyxTQUFTLDRCQUNoQixLQUFLLEtBQUssMkJBQTJCNnFCLENBQU87QUFFaEQ7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUNBLFVBQUk3cUIsRUFBTyxTQUFTLGlDQUFpQztBQUNqRCxjQUFNempCLElBQU95akI7QUFDYixhQUFLLFVBQVU7QUFBQSxVQUNYLE1BQU07QUFBQSxVQUNOLFNBQVN6akIsRUFBSztBQUFBLFFBQzlCLENBQWE7QUFDRDtBQUFBLE1BQ0o7QUFDQSxVQUFJeWpCLEVBQU8sU0FBUyw4QkFBOEI7QUFDOUMsY0FBTXpqQixJQUFPeWpCO0FBQ2IsUUFBSXpqQixFQUFLLFdBQ0wsS0FBSyxVQUFVO0FBQUEsVUFDWCxNQUFNO0FBQUEsVUFDTixTQUFTQSxFQUFLO0FBQUEsUUFDbEMsQ0FBaUI7QUFFTDtBQUFBLE1BQ0o7QUFDQSxVQUFJeWpCLEVBQU8sU0FBUywrQkFDaEJBLEVBQU8sU0FBUyw4QkFBOEI7QUFDOUMsY0FBTXpqQixJQUFPeWpCLEVBQU87QUFDcEIsWUFBSXpqQixFQUFLLFNBQVMsbUJBQW1CQSxFQUFLLFdBQVcsYUFBYTtBQUM5RCxnQkFBTThwQixJQUFXMGYsR0FBcUIsTUFBTTtBQUFBLFlBQ3hDLFFBQVF4cEMsRUFBSztBQUFBLFlBQ2IsTUFBTUEsRUFBSztBQUFBLFlBQ1gsUUFBUTtBQUFBO0FBQUEsWUFDUixXQUFXQSxFQUFLO0FBQUEsWUFDaEIsTUFBTUEsRUFBSztBQUFBLFlBQ1gsUUFBUTtBQUFBLFVBQzVCLENBQWlCO0FBQ0QsZUFBSyxLQUFLLGVBQWU4cEIsQ0FBUSxHQUNqQyxLQUFLLEtBQUssaUJBQWlCO0FBQUEsWUFDdkIsSUFBSTlwQixFQUFLO0FBQUEsWUFDVCxNQUFNO0FBQUEsWUFDTixRQUFRQSxFQUFLLFdBQVc7QUFBQSxZQUN4QixXQUFXQSxFQUFLLGFBQWE7QUFBQSxZQUM3QixNQUFNQSxFQUFLLFFBQVE7QUFBQSxVQUN2QyxDQUFpQjtBQUNEO0FBQUEsUUFDSjtBQUNBLFlBQUlBLEVBQUssU0FBUyxtQkFBbUJBLEVBQUssU0FBUyxZQUFZO0FBQzNELGdCQUFNc3VDLElBQVU3RSxHQUFvQixNQUFNO0FBQUEsWUFDdEMsUUFBUXpwQyxFQUFLO0FBQUEsWUFDYixNQUFNQSxFQUFLO0FBQUEsWUFDWCxRQUFReWpCLEVBQU8sU0FBUyw4QkFDbEIsY0FDQTtBQUFBO0FBQUEsWUFDTixXQUFXempCLEVBQUs7QUFBQSxZQUNoQixNQUFNQSxFQUFLO0FBQUEsWUFDWCxRQUFRQSxFQUFLO0FBQUEsVUFDakMsQ0FBaUI7QUFDRCxlQUFLLEtBQUssZUFBZXN1QyxDQUFPO0FBQ2hDO0FBQUEsUUFDSjtBQUNBLFlBQUl0dUMsRUFBSyxTQUFTLFdBQVc7QUFDekIsZ0JBQU11dUMsSUFBZWhGLEdBQTBCLE1BQU07QUFBQSxZQUNqRCxRQUFROWxCLEVBQU8sS0FBSztBQUFBLFlBQ3BCLE1BQU1BLEVBQU8sS0FBSztBQUFBLFlBQ2xCLE1BQU1BLEVBQU8sS0FBSztBQUFBLFlBQ2xCLFNBQVNBLEVBQU8sS0FBSztBQUFBLFlBQ3JCLFFBQVFBLEVBQU8sU0FBUyw4QkFDakJ6akIsRUFBSyxVQUFVLGNBQ2ZBLEVBQUssVUFBVTtBQUFBLFVBQzFDLENBQWlCO0FBQ0QsZUFBSyxLQUFLLGVBQWV1dUMsQ0FBWTtBQUNyQztBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQUE7QUFBQSxFQUNKO0FBQUEsRUFDQSxTQUFTbDBDLEdBQU87QUFDWixTQUFLLEtBQUssU0FBUztBQUFBLE1BQ2YsTUFBTTtBQUFBLE1BQ04sT0FBQUE7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNMO0FBQUEsRUFDQSxVQUFVO0FBQ04sU0FBSyxLQUFLLFdBQVc7QUFBQSxFQUN6QjtBQUFBLEVBQ0EsV0FBVztBQUNQLFNBQUssS0FBSyxjQUFjO0FBQUEsRUFDNUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsWUFBWXVKLEdBQVM0cUMsR0FBZ0IsRUFBRSxpQkFBQUMsSUFBa0IsR0FBSSxJQUFLLElBQUk7QUFDbEUsVUFBTTkwQixJQUFVLE9BQU8vVixLQUFZLFdBQzdCO0FBQUEsTUFDRTtBQUFBLFFBQ0ksTUFBTTtBQUFBLFFBQ04sTUFBTUE7QUFBQSxNQUMxQjtBQUFBLElBQ0EsSUFDY0EsRUFBUSxRQUFRLElBQUksQ0FBQytWLE1BQ2ZBLEVBQVEsU0FBUyxnQkFDVjtBQUFBLE1BQ0gsTUFBTTtBQUFBLE1BQ04sV0FBV0EsRUFBUTtBQUFBLE1BQ25CLEdBQUlBLEVBQVEsZ0JBQWdCO0lBQ3BELElBRXVCQSxDQUNWO0FBQ0wsU0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsUUFDRixNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixTQUFBQTtBQUFBLE1BQ2hCO0FBQUEsTUFDWSxHQUFHNjBCO0FBQUEsSUFDZixDQUFTLEdBQ0dDLEtBQ0EsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDdEIsQ0FBYTtBQUFBLEVBRVQ7QUFBQSxFQUNBLFNBQVNDLEdBQU8sRUFBRSxpQkFBQUQsSUFBa0IsR0FBSSxJQUFLLENBQUEsR0FBSTtBQUM3QyxTQUFLLFlBQVk7QUFBQSxNQUNiLE1BQU07QUFBQSxNQUNOLE1BQU07QUFBQSxNQUNOLFNBQVMsQ0FBQyxFQUFFLE1BQU0sZUFBZSxPQUFBQyxFQUFLLENBQUU7QUFBQSxJQUNwRCxHQUFXLENBQUEsR0FBSSxFQUFFLGlCQUFBRCxHQUFpQjtBQUFBLEVBQzlCO0FBQUEsRUFDQSx3QkFBd0J2bEIsR0FBUTs7QUFDNUIsVUFBTXlsQixJQUFZMUYsR0FBbUIvZixDQUFNLEdBQ3JDMGxCLElBQWM7QUFBQSxNQUNoQixNQUFNO0FBQUEsTUFDTixjQUFjRCxFQUFVO0FBQUEsTUFDeEIsT0FBT0EsRUFBVSxTQUFTM25CLEVBQUEsTUFBSzJCO0FBQUEsTUFDL0IsbUJBQW1CZ21CLEVBQVUsb0JBQ3pCakIsR0FBdUM7QUFBQSxNQUMzQyxPQUFPO0FBQUEsUUFDSCxPQUFPO0FBQUEsVUFDSCxVQUFRN3hDLEtBQUFOLElBQUFvekMsRUFBVSxVQUFWLGdCQUFBcHpDLEVBQWlCLFVBQWpCLGdCQUFBTSxFQUF3QixhQUM1QnNELEtBQUFwQyxJQUFBMndDLEdBQXVDLFVBQXZDLGdCQUFBM3dDLEVBQThDLFVBQTlDLGdCQUFBb0MsRUFBcUQ7QUFBQSxVQUN6RCxtQkFBaUJHLEtBQUFGLElBQUF1dkMsRUFBVSxVQUFWLGdCQUFBdnZDLEVBQWlCLFVBQWpCLGdCQUFBRSxFQUF3QixxQkFDckNtaEMsS0FBQUQsSUFBQWtOLEdBQXVDLFVBQXZDLGdCQUFBbE4sRUFBOEMsVUFBOUMsZ0JBQUFDLEVBQXFEO0FBQUEsVUFDekQsaUJBQWVvTyxLQUFBQyxJQUFBSCxFQUFVLFVBQVYsZ0JBQUFHLEVBQWlCLFVBQWpCLGdCQUFBRCxFQUF3QixvQkFDbkNFLEtBQUFwdUMsSUFBQStzQyxHQUF1QyxVQUF2QyxnQkFBQS9zQyxFQUE4QyxVQUE5QyxnQkFBQW91QyxFQUFxRDtBQUFBLFVBQ3pELGdCQUFnQnBCLEdBQW1CLDBCQUF5QnFCLEtBQUFDLElBQUFOLEVBQVUsVUFBVixnQkFBQU0sRUFBaUIsVUFBakIsZ0JBQUFELEVBQXdCLGFBQWEsT0FDN0ZFLEtBQUFDLElBQUF6QixHQUF1QyxVQUF2QyxnQkFBQXlCLEVBQThDLFVBQTlDLGdCQUFBRCxFQUFxRDtBQUFBLFFBQzdFO0FBQUEsUUFDZ0IsUUFBUTtBQUFBLFVBQ0osVUFBUUUsS0FBQUMsSUFBQVYsRUFBVSxVQUFWLGdCQUFBVSxFQUFpQixXQUFqQixnQkFBQUQsRUFBeUIsYUFDN0JFLE1BQUFDLElBQUE3QixHQUF1QyxVQUF2QyxnQkFBQTZCLEVBQThDLFdBQTlDLGdCQUFBRCxHQUFzRDtBQUFBLFVBQzFELFNBQU9FLE1BQUFDLEtBQUFkLEVBQVUsVUFBVixnQkFBQWMsR0FBaUIsV0FBakIsZ0JBQUFELEdBQXlCLFlBQzVCOXRDLE1BQUFndUMsS0FBQWhDLEdBQXVDLFVBQXZDLGdCQUFBZ0MsR0FBOEMsV0FBOUMsZ0JBQUFodUMsR0FBc0Q7QUFBQSxVQUMxRCxTQUFPaXVDLE1BQUFDLEtBQUFqQixFQUFVLFVBQVYsZ0JBQUFpQixHQUFpQixXQUFqQixnQkFBQUQsR0FBeUIsWUFDNUJFLE1BQUFDLEtBQUFwQyxHQUF1QyxVQUF2QyxnQkFBQW9DLEdBQThDLFdBQTlDLGdCQUFBRCxHQUFzRDtBQUFBLFFBQzlFO0FBQUEsTUFDQTtBQUFBLE1BQ1ksYUFBYWxCLEVBQVUsY0FDbkJqQixHQUF1QztBQUFBO0FBQUE7QUFBQSxNQUczQyxHQUFJaUIsRUFBVSxnQkFBZ0I7SUFDMUM7QUFDUSxXQUFJQSxFQUFVLFdBQ1ZDLEVBQVksU0FBUztBQUFBLE1BQ2pCLElBQUlELEVBQVUsT0FBTztBQUFBLE1BQ3JCLFNBQVNBLEVBQVUsT0FBTztBQUFBLE1BQzFCLFdBQVdBLEVBQVUsT0FBTztBQUFBLElBQzVDLElBRVlBLEVBQVUsU0FBU0EsRUFBVSxNQUFNLFNBQVMsTUFDNUNDLEVBQVksUUFBUUQsRUFBVSxNQUFNLElBQUksQ0FBQzkyQixRQUFVO0FBQUEsTUFDL0MsR0FBR0E7QUFBQSxNQUNILFFBQVE7QUFBQSxJQUN4QixFQUFjLElBRUMrMkI7QUFBQSxFQUNYO0FBQUEsRUFDQSxPQUFPLHlCQUF5Qno2QixHQUFHO0FBQy9CLFFBQUksT0FBT0EsSUFBTTtBQUNiO0FBRUosVUFBTSxFQUFFLE1BQUE3RyxHQUFNLGdCQUFBeWlDLEdBQWdCLGlCQUFBQyxHQUFpQixXQUFBQyxHQUFXLG1CQUFBQyxHQUFtQixvQkFBQUMsR0FBb0IsaUJBQUFDLEdBQWlCLG1CQUFBQyxHQUFtQixtQkFBQUMsR0FBbUIscUJBQUFDLEdBQXFCLFdBQUFDLEdBQVcsZUFBQUMsR0FBZSxpQkFBQUMsR0FBaUIsR0FBR2x6QyxFQUFJLElBQUsyVyxHQUM5TitVLElBQVM7QUFBQSxNQUNYLE1BQUE1YjtBQUFBLE1BQ0EsaUJBQWlCeWlDLEtBQWtDQztBQUFBLE1BQ25ELFdBQUFDO0FBQUEsTUFDQSxvQkFBb0JDLEtBRWRDO0FBQUEsTUFDTixtQkFBbUJDLEtBQW9DQztBQUFBLE1BQ3ZELHFCQUFxQkMsS0FFZkM7QUFBQSxNQUNOLGlCQUFpQkUsS0FBZ0NDO0FBQUEsTUFDakQsV0FBQUY7QUFBQSxNQUNBLEdBQUdoekM7QUFBQSxJQUNmO0FBRVEsa0JBQU8sS0FBSzByQixDQUFNLEVBQUUsUUFBUSxDQUFDdHNCLE1BQVE7QUFDakMsTUFBSXNzQixFQUFPdHNCLENBQUcsTUFBTSxVQUNoQixPQUFPc3NCLEVBQU90c0IsQ0FBRztBQUFBLElBQ3pCLENBQUMsR0FDTSxPQUFPLEtBQUtzc0IsQ0FBTSxFQUFFLFNBQVMsSUFBSUEsSUFBUztBQUFBLEVBQ3JEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksZUFBZXluQixHQUFlO0FBQzlCLElBQUF0aEIsRUFBQSxNQUFLd2UsSUFBaUI4QztBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEscUJBQXFCQSxHQUFlOztBQUtoQyxRQUpJLE9BQU8zcEIsRUFBQSxNQUFLNm1CLE1BQW1CLE9BRS9CeGUsRUFBQSxNQUFLd2UsSUFBaUIsT0FFdEI4QyxNQUFrQixRQUFRO0FBRTFCLFdBQUssVUFBVTtBQUFBLFFBQ1gsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLFVBQ0wsTUFBTTtBQUFBLFVBQ04sU0FBUztBQUFBLFFBQzdCO0FBQUEsTUFDQSxDQUFhO0FBQ0Q7QUFBQSxJQUNKO0FBQ0EsUUFBSTNwQixFQUFBLE1BQUs2bUIsUUFBbUIsUUFDeEIsT0FBTzdtQixFQUFBLE1BQUs2bUIsT0FBbUIsWUFDL0IsT0FBTzhDLEtBQWtCLFVBQVU7QUFFbkMsTUFBQTV1QixHQUFPLEtBQUssMElBQTBJO0FBQ3RKO0FBQUEsSUFDSjtBQUNBLFFBQUk0dUIsTUFBa0IsTUFBTTtBQUN4QixNQUFBNXVCLEdBQU8sTUFBTSxpR0FBaUcsR0FDOUcsS0FBSyxVQUFVO0FBQUEsUUFDWCxNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixTQUFTO0FBQUEsUUFDN0I7QUFBQSxNQUNBLENBQWE7QUFDRDtBQUFBLElBQ0o7QUFDQSxRQUFJaUYsRUFBQSxNQUFLNm1CLFFBQW1CLFFBQ3hCLE9BQU83bUIsRUFBQSxNQUFLNm1CLE9BQW1CLFVBQVU7QUFFekMsV0FBSyxVQUFVO0FBQUEsUUFDWCxNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsVUFDTCxNQUFNO0FBQUEsVUFDTixTQUFTOEM7QUFBQSxRQUM3QjtBQUFBLE1BQ0EsQ0FBYTtBQUNEO0FBQUEsSUFDSjtBQUNBLFNBQUlBLEtBQUEsZ0JBQUFBLEVBQWUsZ0JBQWFwMUMsSUFBQXlyQixFQUFBLE1BQUs2bUIsUUFBTCxnQkFBQXR5QyxFQUFxQixjQUNqRG8xQyxLQUFBLGdCQUFBQSxFQUFlLGdCQUFhOTBDLElBQUFtckIsRUFBQSxNQUFLNm1CLFFBQUwsZ0JBQUFoeUMsRUFBcUIsY0FDakQ4MEMsS0FBQSxnQkFBQUEsRUFBZSxxQkFBa0I1ekMsSUFBQWlxQixFQUFBLE1BQUs2bUIsUUFBTCxnQkFBQTl3QyxFQUFxQixnQkFBZTtBQUNyRSxNQUFBZ2xCLEdBQU8sS0FBSyxrTUFBa00sS0FBSyxVQUFVaUYsRUFBQSxNQUFLNm1CLEdBQWMsR0FBRyxLQUFLLFVBQVU4QyxDQUFhLENBQUM7QUFDaFI7QUFBQSxJQUNKO0FBQ0EsU0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsUUFDTCxNQUFNO0FBQUEsUUFDTixTQUFTQTtBQUFBLE1BQ3pCO0FBQUEsSUFDQSxDQUFTO0FBQUEsRUFDTDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0Esb0JBQW9Cem5CLEdBQVE7QUFDeEIsVUFBTTBsQixJQUFjLEtBQUssd0JBQXdCMWxCLENBQU07QUFDdkQsU0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixTQUFTMGxCO0FBQUEsSUFDckIsQ0FBUztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsdUJBQXVCOWtCLEdBQVVuTSxHQUFRaXpCLElBQWdCLElBQU07QUFDM0QsU0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsUUFDRixNQUFNO0FBQUEsUUFDTixRQUFBanpCO0FBQUEsUUFDQSxTQUFTbU0sRUFBUztBQUFBLE1BQ2xDO0FBQUEsSUFDQSxDQUFTO0FBQ0QsUUFBSTtBQUNBLFlBQU05cEIsSUFBT3dwQyxHQUFxQixNQUFNO0FBQUEsUUFDcEMsUUFBUTFmLEVBQVM7QUFBQSxRQUNqQixnQkFBZ0JBLEVBQVM7QUFBQSxRQUN6QixNQUFNO0FBQUEsUUFDTixRQUFRO0FBQUEsUUFDUixXQUFXQSxFQUFTO0FBQUEsUUFDcEIsTUFBTUEsRUFBUztBQUFBLFFBQ2YsUUFBQW5NO0FBQUEsTUFDaEIsQ0FBYTtBQUNELFdBQUssS0FBSyxlQUFlM2QsQ0FBSTtBQUFBLElBQ2pDLFNBQ08zRixHQUFPO0FBQ1YsTUFBQTBuQixHQUFPLE1BQU0sZ0NBQWdDMW5CLEdBQU95dkIsQ0FBUTtBQUFBLElBQ2hFO0FBQ0EsSUFBSThtQixLQUNBLEtBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLElBQ3RCLENBQWE7QUFBQSxFQUVUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0EsVUFBVUMsR0FBTyxFQUFFLFFBQUFDLElBQVMsR0FBSyxJQUFLLENBQUEsR0FBSTtBQUN0QyxTQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLE9BQU9sSyxHQUFvQmlLLENBQUs7QUFBQSxJQUM1QyxDQUFTLEdBQ0dDLEtBQ0EsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDdEIsQ0FBYTtBQUFBLEVBRVQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUEsYUFBYTdKLEdBQVlDLEdBQVk7QUFDakMsVUFBTSxFQUFFLFVBQUFDLEdBQVUsV0FBQUMsR0FBVyxTQUFBRSxFQUFPLElBQUtOLEdBQW9CQyxHQUFZQyxDQUFVLEdBQzdFNkosSUFBYSxJQUFJLElBQUk1SixFQUFTLElBQUksQ0FBQ25uQyxNQUFTQSxFQUFLLE1BQU0sQ0FBQztBQUU5RCxlQUFXZ3hDLEtBQVUxSjtBQUNqQixNQUFBeUosRUFBVyxJQUFJQyxFQUFPLE1BQU07QUFFaEMsUUFBSUQsRUFBVyxPQUFPO0FBQ2xCLGlCQUFXMUksS0FBVTBJO0FBQ2pCLGFBQUssVUFBVTtBQUFBLFVBQ1gsTUFBTTtBQUFBLFVBQ04sU0FBUzFJO0FBQUEsUUFDN0IsQ0FBaUI7QUFHVCxVQUFNNEksSUFBc0IsQ0FBQyxHQUFHN0osR0FBVyxHQUFHRSxDQUFPO0FBQ3JELGVBQVc0SixLQUFZRDtBQUNuQixVQUFJQyxFQUFTLFNBQVMsV0FBVztBQUM3QixjQUFNQyxJQUFZO0FBQUEsVUFDZCxNQUFNO0FBQUEsVUFDTixNQUFNRCxFQUFTO0FBQUEsVUFDZixTQUFTQSxFQUFTO0FBQUEsVUFDbEIsSUFBSUEsRUFBUztBQUFBLFFBQ2pDO0FBQ2dCLFFBQUlBLEVBQVMsU0FBUyxZQUFZQSxFQUFTLFdBQ3ZDQyxFQUFVLFNBQVNELEVBQVMsU0FFaEMsS0FBSyxVQUFVO0FBQUEsVUFDWCxNQUFNO0FBQUEsVUFDTixNQUFNQztBQUFBLFFBQzFCLENBQWlCO0FBQUEsTUFDTCxNQUNLLENBQUlELEVBQVMsU0FBUyxtQkFDdkJudkIsR0FBTyxLQUFLLDZFQUE2RTtBQUFBLEVBR3JHO0FBQUEsRUFDQSxnQkFBZ0JxVCxHQUFpQk4sR0FBVTtBQUN2QyxTQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLGtCQUFrQk0sRUFBZ0I7QUFBQSxNQUNsQyxNQUFNO0FBQUEsUUFDRixNQUFNO0FBQUEsUUFDTixxQkFBcUJBLEVBQWdCO0FBQUEsUUFDckMsU0FBU047QUFBQSxNQUN6QjtBQUFBLElBQ0EsQ0FBUztBQUFBLEVBQ0w7QUFDSjtBQXZsQkluTSxLQUFBLGVBQ0FpbEIsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUE7QUFKRyxJQUFNc0QsS0FBTnpEOztBQ2ZBLE1BQU0wRCxXQUE2QkQsR0FBbUI7QUFBQSxFQVl6RCxZQUFZNXdDLElBQVUsSUFBSTtBQUN0QixRQUFJLE9BQU8sb0JBQXNCO0FBQzdCLFlBQU0sSUFBSSxNQUFNLDZDQUE2QztBQUVqRSxVQUFNQSxDQUFPO0FBZmpCLElBQUF1WixFQUFBO0FBQ0EsSUFBQTJNLEVBQUEsTUFBQTRxQjtBQUNBLElBQUE1cUIsRUFBQSxNQUFBNnFCLEdBQVM7QUFBQSxNQUNMLFFBQVE7QUFBQSxNQUNSLGdCQUFnQjtBQUFBLE1BQ2hCLGFBQWE7QUFBQSxNQUNiLFFBQVE7QUFBQSxJQUNoQjtBQUNJLElBQUE3cUIsRUFBQSxNQUFBOHFCO0FBQ0EsSUFBQTlxQixFQUFBLE1BQUErcUIsSUFBbUI7QUFDbkIsSUFBQS9xQixFQUFBLE1BQUFnckIsSUFBUztBQU1MLFNBQUssVUFBVWx4QyxHQUNmNnVCLEVBQUEsTUFBS2lpQixJQUFPOXdDLEVBQVEsV0FBVyw2Q0FDL0I2dUIsRUFBQSxNQUFLbWlCLElBQXFCaHhDLEVBQVEscUJBQXFCO0FBQUEsRUFDM0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksU0FBUztBQUNULFdBQU93bUIsRUFBQSxNQUFLdXFCLEdBQU87QUFBQSxFQUN2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxTQUFTO0FBQ1QsV0FBT3ZxQixFQUFBLE1BQUt1cUIsR0FBTztBQUFBLEVBQ3ZCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLElBQUksa0JBQWtCO0FBQ2xCLFdBQU92cUIsRUFBQSxNQUFLdXFCO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksUUFBUTtBQUNSLFdBQU92cUIsRUFBQSxNQUFLMHFCO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVVBLE1BQU0sUUFBUWx4QyxHQUFTO0FBQ25CLFFBQUl3bUIsRUFBQSxNQUFLdXFCLEdBQU8sV0FBVztBQUN2QjtBQUVKLElBQUl2cUIsRUFBQSxNQUFLdXFCLEdBQU8sV0FBVyxnQkFDdkJ4dkIsR0FBTyxLQUFLLHdFQUF3RTtBQUV4RixVQUFNMkcsSUFBUWxvQixFQUFRLFNBQVMsS0FBSztBQUNwQyxTQUFLLGVBQWVrb0I7QUFDcEIsVUFBTWlwQixJQUFVbnhDLEVBQVEsT0FBT3dtQixFQUFBLE1BQUtzcUIsS0FDOUJ2RCxJQUFTLE1BQU0sS0FBSyxXQUFXdnRDLENBQU8sR0FDdENveEMsSUFBYyxPQUFPN0QsS0FBVyxZQUFZQSxFQUFPLFdBQVcsS0FBSztBQUN6RSxRQUE4QixDQUFDL21CLEVBQUEsTUFBS3dxQixPQUFzQixDQUFDSTtBQUN2RCxZQUFNLElBQUl6M0IsRUFBVSx5TUFBeU07QUFHak8sV0FBTyxJQUFJLFFBQVEsT0FBT29uQixHQUFTQyxNQUFXOztBQUMxQyxVQUFJO0FBQ0EsY0FBTXFRLElBQW9CO0FBQUEsVUFDdEIsR0FBSXJ4QyxFQUFRLHdCQUF3QjtVQUNwQyxPQUFPLEtBQUs7QUFBQSxRQUNoQyxHQUNzQnN4QyxJQUFnQixJQUFJLElBQUlILENBQU87QUFDckMsWUFBSUksSUFBaUIsSUFBSSxrQkFBaUI7QUFDMUMsY0FBTUMsSUFBY0QsRUFBZSxrQkFBa0IsWUFBWTtBQUNqRSxZQUFJdmlCO0FBQ0osUUFBQUgsRUFBQSxNQUFLa2lCLEdBQVM7QUFBQSxVQUNWLFFBQVE7QUFBQSxVQUNSLGdCQUFBUTtBQUFBLFVBQ0EsYUFBQUM7QUFBQSxVQUNBLFFBQUF4aUI7QUFBQSxRQUNwQixJQUNnQixLQUFLLEtBQUsscUJBQXFCeEksRUFBQSxNQUFLdXFCLEdBQU8sTUFBTSxHQUNqRFMsRUFBWSxpQkFBaUIsUUFBUSxNQUFNO0FBQ3ZDLFVBQUEzaUIsRUFBQSxNQUFLa2lCLEdBQVM7QUFBQSxZQUNWLFFBQVE7QUFBQSxZQUNSLGdCQUFBUTtBQUFBLFlBQ0EsYUFBQUM7QUFBQSxZQUNBLFFBQUF4aUI7QUFBQSxVQUN4QixJQUtvQixLQUFLLG9CQUFvQnFpQixDQUFpQixHQUMxQyxLQUFLLEtBQUsscUJBQXFCN3FCLEVBQUEsTUFBS3VxQixHQUFPLE1BQU0sR0FDakQsS0FBSyxRQUFPLEdBQ1poUSxFQUFPO0FBQUEsUUFDWCxDQUFDLEdBQ0R5USxFQUFZLGlCQUFpQixTQUFTLENBQUM3cUIsTUFBVTtBQUM3QyxlQUFLLE1BQUssR0FDVixLQUFLLFNBQVNBLENBQUssR0FDbkJxYSxFQUFPcmEsQ0FBSztBQUFBLFFBQ2hCLENBQUMsR0FDRDZxQixFQUFZLGlCQUFpQixXQUFXLENBQUM3cUIsTUFBVTtBQUMvQyxlQUFLLFdBQVdBLENBQUs7QUFDckIsZ0JBQU0sRUFBRSxNQUFNMUQsR0FBUSxXQUFBdXFCLEVBQVMsSUFBS1YsR0FBbUJubUIsQ0FBSztBQUM1RCxVQUFJLENBQUMxRCxLQUFVdXFCLE1BR1h2cUIsRUFBTyxTQUFTLHFCQUNoQjRMLEVBQUEsTUFBS29pQixJQUFtQixNQUVuQmh1QixFQUFPLFNBQVMsbUJBQ3JCNEwsRUFBQSxNQUFLb2lCLElBQW1CLEtBRXhCaHVCLEVBQU8sU0FBUyxzQkFDaEIsS0FBSyxpQkFBaUJBLEVBQU8sUUFBUSxTQUVyQyxLQUFLLHFCQUFxQm91QixFQUFrQixXQUFXLE1BQU07QUFBQSxRQUVyRSxDQUFDO0FBRUQsY0FBTUksSUFBZSxLQUFLLFFBQVEsZ0JBQWdCLFNBQVMsY0FBYyxPQUFPO0FBQ2hGLFFBQUFBLEVBQWEsV0FBVyxJQUN4QkYsRUFBZSxVQUFVLENBQUM1cUIsTUFBVTtBQUNoQyxVQUFBOHFCLEVBQWEsWUFBWTlxQixFQUFNLFFBQVEsQ0FBQztBQUFBLFFBQzVDO0FBRUEsY0FBTXVhLElBQVMsS0FBSyxRQUFRLGVBQ3ZCLE1BQU0sVUFBVSxhQUFhLGFBQWE7QUFBQSxVQUN2QyxPQUFPO0FBQUEsUUFDL0IsQ0FBcUI7QUFDTCxRQUFBcVEsRUFBZSxTQUFTclEsRUFBTyxlQUFjLEVBQUcsQ0FBQyxDQUFDLEdBQzlDLEtBQUssUUFBUSx5QkFDYnFRLElBQ0ksTUFBTSxLQUFLLFFBQVEscUJBQXFCQSxDQUFjLEdBQzFEMWlCLEVBQUEsTUFBS2tpQixHQUFTLEVBQUUsR0FBR3ZxQixFQUFBLE1BQUt1cUIsSUFBUSxnQkFBQVEsRUFBYztBQUVsRCxjQUFNRyxJQUFRLE1BQU1ILEVBQWUsWUFBVztBQUU5QyxZQURBLE1BQU1BLEVBQWUsb0JBQW9CRyxDQUFLLEdBQzFDLENBQUNBLEVBQU07QUFDUCxnQkFBTSxJQUFJLE1BQU0sd0JBQXdCO0FBRTVDLGNBQU1DLElBQWMsTUFBTSxNQUFNTCxHQUFlO0FBQUEsVUFDM0MsUUFBUTtBQUFBLFVBQ1IsTUFBTUksRUFBTTtBQUFBLFVBQ1osU0FBUztBQUFBLFlBQ0wsZ0JBQWdCO0FBQUEsWUFDaEIsZUFBZSxVQUFVbkUsQ0FBTTtBQUFBLFlBQy9CLHVCQUF1QjlGLEdBQVEscUJBQXFCO0FBQUEsVUFDNUU7QUFBQSxRQUNBLENBQWlCO0FBQ0QsUUFBQXpZLEtBQVMzekIsS0FBQU4sSUFBQTQyQyxFQUFZLFlBQVosZ0JBQUE1MkMsRUFBcUIsSUFBSSxnQkFBekIsZ0JBQUFNLEVBQXNDLE1BQU0sS0FBSyxPQUMxRHd6QixFQUFBLE1BQUtraUIsR0FBUyxFQUFFLEdBQUd2cUIsRUFBQSxNQUFLdXFCLElBQVEsUUFBQS9oQixFQUFNO0FBQ3RDLGNBQU00aUIsSUFBUztBQUFBLFVBQ1gsTUFBTTtBQUFBLFVBQ04sS0FBSyxNQUFNRCxFQUFZLEtBQUk7QUFBQSxRQUMvQztBQUNnQixjQUFNSixFQUFlLHFCQUFxQkssQ0FBTTtBQUFBLE1BQ3BELFNBQ08vM0MsR0FBTztBQUNWLGFBQUssTUFBSyxHQUNWLEtBQUssU0FBU0EsQ0FBSyxHQUNuQm1uQyxFQUFPbm5DLENBQUs7QUFBQSxNQUNoQjtBQUFBLElBQ0osQ0FBQztBQUFBLEVBQ0w7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLFVBQVU4c0IsR0FBTztBQUNiLFFBQUksQ0FBQ0gsRUFBQSxNQUFLdXFCLEdBQU8sZUFDYnZxQixFQUFBLE1BQUt1cUIsR0FBTyxZQUFZLGVBQWU7QUFDdkMsWUFBTSxJQUFJLE1BQU0sNkZBQTZGO0FBRWpILElBQUF2cUIsRUFBQSxNQUFLdXFCLEdBQU8sWUFBWSxLQUFLLEtBQUssVUFBVXBxQixDQUFLLENBQUM7QUFBQSxFQUN0RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxLQUFLa3JCLEdBQU87QUFDUixJQUFBaGpCLEVBQUEsTUFBS3FpQixJQUFTVyxJQUNWcnJCLEVBQUEsTUFBS3VxQixHQUFPLGtCQUNXdnFCLEVBQUEsTUFBS3VxQixHQUFPLGVBQ3BCLFdBQVUsRUFBRyxRQUFRLENBQUNlLE1BQVc7QUFDNUMsTUFBSUEsRUFBTyxVQUNQQSxFQUFPLE1BQU0sVUFBVSxDQUFDRDtBQUFBLElBRWhDLENBQUM7QUFBQSxFQUVUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxRQUFRO0FBSUosUUFISXJyQixFQUFBLE1BQUt1cUIsR0FBTyxlQUNadnFCLEVBQUEsTUFBS3VxQixHQUFPLFlBQVksTUFBSyxHQUU3QnZxQixFQUFBLE1BQUt1cUIsR0FBTyxnQkFBZ0I7QUFDNUIsWUFBTVEsSUFBaUIvcUIsRUFBQSxNQUFLdXFCLEdBQU87QUFDbkMsTUFBQVEsRUFBZSxXQUFVLEVBQUcsUUFBUSxDQUFDTyxNQUFXOztBQUM1QyxTQUFBLzJDLElBQUErMkMsRUFBTyxVQUFQLFFBQUEvMkMsRUFBYztBQUFBLE1BQ2xCLENBQUMsR0FDRHcyQyxFQUFlLE1BQUs7QUFBQSxJQUN4QjtBQUNBLElBQUkvcUIsRUFBQSxNQUFLdXFCLEdBQU8sV0FBVyxtQkFDdkJsaUIsRUFBQSxNQUFLa2lCLEdBQVM7QUFBQSxNQUNWLFFBQVE7QUFBQSxNQUNSLGdCQUFnQjtBQUFBLE1BQ2hCLGFBQWE7QUFBQSxNQUNiLFFBQVE7QUFBQSxJQUN4QixJQUNZLEtBQUssS0FBSyxxQkFBcUJ2cUIsRUFBQSxNQUFLdXFCLEdBQU8sTUFBTSxHQUNqRCxLQUFLLFNBQVE7QUFBQSxFQUVyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxZQUFZO0FBQ1IsSUFBSXZxQixFQUFBLE1BQUt5cUIsUUFDTCxLQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxJQUN0QixDQUFhLEdBQ0RwaUIsRUFBQSxNQUFLb2lCLElBQW1CLE1BRTVCLEtBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLElBQ2xCLENBQVM7QUFBQSxFQUNMO0FBQ0o7QUEvT0lILEtBQUEsZUFDQUMsSUFBQSxlQU1BQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQTtBQ3pCRyxNQUFNYSxLQUFZLFdBQVc7O0FDUzdCLE1BQU1DLFdBQWdDcEIsR0FBbUI7QUFBQSxFQXNCNUQsWUFBWTV3QyxJQUFVLElBQUk7QUFDdEIsVUFBTUEsQ0FBTztBQXZCZCxJQUFBa21CLEVBQUEsTUFBQStyQjtBQUNILElBQUEvckIsRUFBQSxNQUFBa25CO0FBQ0EsSUFBQWxuQixFQUFBLE1BQUE0cUI7QUFDQSxJQUFBNXFCLEVBQUEsTUFBQTZxQixJQUFTO0FBQUEsTUFDTCxRQUFRO0FBQUEsTUFDUixXQUFXO0FBQUEsSUFDbkI7QUFDSSxJQUFBN3FCLEVBQUEsTUFBQThxQjtBQUNBLElBQUE5cUIsRUFBQSxNQUFBZ3NCO0FBQ0EsSUFBQWhzQixFQUFBLE1BQUFpc0I7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUE1NEIsRUFBQTtBQUNBLElBQUFBLEVBQUEsd0JBQWlCO0FBQ2pCLElBQUEyTSxFQUFBLE1BQUErcUIsSUFBbUI7QUFDbkIsSUFBQS9xQixFQUFBLE1BQUFrc0I7QUFDQSxJQUFBbHNCLEVBQUEsTUFBQW1zQjtBQUdJLElBQUF4akIsRUFBQSxNQUFLaWlCLElBQU85d0MsRUFBUSxNQUNwQjZ1QixFQUFBLE1BQUttaUIsSUFBcUJoeEMsRUFBUSxxQkFBcUIsS0FDdkQ2dUIsRUFBQSxNQUFLdWpCLElBQW1CcHlDLEVBQVEsa0JBQ2hDNnVCLEVBQUEsTUFBS3dqQixJQUEwQnJ5QyxFQUFRLDBCQUEwQjtBQUFBLEVBQ3JFO0FBQUEsRUFDQSwwQkFBMEI7QUFDdEIsV0FBT3luQztBQUFBLEVBQ1g7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksU0FBUztBQUNULFdBQU9qaEIsRUFBQSxNQUFLdXFCLElBQU87QUFBQSxFQUN2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxrQkFBa0I7QUFDbEIsV0FBT3ZxQixFQUFBLE1BQUt1cUI7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFFBQVE7QUFDUixXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUEsSUFBSSxnQkFBZ0I7QUFDaEIsV0FBT3ZxQixFQUFBLE1BQUswckI7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRQSxTQUFTSSxHQUFZO0FBQ2pCLFNBQUssS0FBSyxTQUFTQSxDQUFVO0FBQUEsRUFDakM7QUFBQSxFQXNKQSxNQUFNLFFBQVF0eUMsR0FBUztBQUNuQixVQUFNa29CLElBQVFsb0IsRUFBUSxTQUFTLEtBQUs7QUFDcEMsU0FBSyxlQUFla29CLEdBQ3BCMkcsRUFBQSxNQUFLdWUsSUFBVSxNQUFNLEtBQUssV0FBV3B0QyxDQUFPO0FBQzVDLFVBQU11eUMsSUFBTXZ5QyxFQUFRLE9BQ2hCd21CLEVBQUEsTUFBS3NxQixPQUNMLDBDQUEwQyxLQUFLLFlBQVk7QUFDL0QsSUFBQWppQixFQUFBLE1BQUtpaUIsSUFBT3lCO0FBQ1osVUFBTUMsSUFBZ0I7QUFBQSxNQUNsQixHQUFJeHlDLEVBQVEsd0JBQXdCO01BQ3BDLE9BQU8sS0FBSztBQUFBLElBQ3hCO0FBQ1EsVUFBTSxJQUFJLFFBQVEsQ0FBQytnQyxHQUFTQyxNQUFXO0FBQ25DLE1BQUEvQyxFQUFBLE1BQUtnVSxJQUFBUSxJQUFMLFdBQXFCMVIsR0FBU0MsR0FBUXdSLEdBQWUsTUFBTXhSLENBQU07QUFBQSxJQUNyRSxDQUFDLEdBQ0QsTUFBTSxLQUFLLG9CQUFvQndSLENBQWE7QUFBQSxFQUNoRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsVUFBVTdyQixHQUFPO0FBQ2IsUUFBSSxDQUFDSCxFQUFBLE1BQUt1cUIsSUFBTztBQUNiLFlBQU0sSUFBSSxNQUFNLG1GQUFtRjtBQUV2RyxJQUFBdnFCLEVBQUEsTUFBS3VxQixJQUFPLFVBQVUsS0FBSyxLQUFLLFVBQVVwcUIsQ0FBSyxDQUFDO0FBQUEsRUFDcEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxRQUFROztBQUNKLEtBQUE1ckIsSUFBQXlyQixFQUFBLE1BQUt1cUIsSUFBTyxjQUFaLFFBQUFoMkMsRUFBdUIsU0FDdkI4ekIsRUFBQSxNQUFLcWpCLElBQWlCLFNBQ3RCLEtBQUssdUJBQXVCLFFBQzVCLEtBQUssaUJBQWlCLEdBQ3RCcmpCLEVBQUEsTUFBS3NqQixJQUE0QjtBQUFBLEVBQ3JDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxLQUFLakIsR0FBUTtBQUNULFVBQU0sSUFBSSxNQUFNLCtGQUErRjtBQUFBLEVBQ25IO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVFBLFVBQVViLEdBQU9yd0MsSUFBVSxJQUFJO0FBQzNCLElBQUl3bUIsRUFBQSxNQUFLdXFCLElBQU8sV0FBVyxlQUN2QixNQUFNLFVBQVVWLEdBQU9yd0MsQ0FBTztBQUFBLEVBRXRDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLGtCQUFrQjtBQUVkLElBQUl3bUIsRUFBQSxNQUFLeXFCLFFBQ0wsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDdEIsQ0FBYSxHQUNEcGlCLEVBQUEsTUFBS29pQixJQUFtQjtBQUFBLEVBRWhDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFVQSxXQUFXeUIsR0FBYUMsSUFBd0IsSUFBTTtBQUNsRCxRQUFJRCxJQUFjO0FBQ2Q7QUFHSixJQUFJQyxLQUNBLEtBQUssZ0JBQWU7QUFFeEIsVUFBTUMsSUFBUyxLQUFLLGtCQUFrQixPQUFPLG1CQUV2Q0MsSUFBZSxLQUFLLElBQUksR0FBRyxLQUFLLE1BQU0sS0FBSyxJQUFJSCxHQUFhRSxDQUFNLENBQUMsQ0FBQztBQUMxRSxTQUFLLEtBQUssbUJBQW1CLEdBQzdCLEtBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLE1BQ04sU0FBU3BzQixFQUFBLE1BQUswckI7QUFBQSxNQUNkLGVBQWUxckIsRUFBQSxNQUFLMnJCO0FBQUEsTUFDcEIsY0FBQVU7QUFBQSxJQUNaLENBQVM7QUFBQSxFQUNMO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0EsVUFBVUYsSUFBd0IsSUFBTTtBQUNwQyxRQUFJLENBQUNuc0IsRUFBQSxNQUFLMHJCLE9BQWtCLE9BQU8sS0FBSyx3QkFBeUI7QUFDN0Q7QUFFSixVQUFNUSxJQUFjLEtBQUssSUFBRyxJQUFLLEtBQUs7QUFDdEMsSUFBSUEsS0FBZSxLQUNmLEtBQUssV0FBV0EsR0FBYUMsQ0FBcUIsR0FFdEQ5akIsRUFBQSxNQUFLcWpCLElBQWlCLFNBQ3RCLEtBQUssdUJBQXVCLFFBQzVCLEtBQUssaUJBQWlCLEdBQ3RCcmpCLEVBQUEsTUFBS3NqQixJQUE0QjtBQUFBLEVBQ3JDO0FBQ0o7QUFoVkkvRSxLQUFBLGVBQ0EwRCxLQUFBLGVBQ0FDLEtBQUEsZUFJQUMsS0FBQSxlQUNBa0IsS0FBQSxlQUNBQyxLQUFBLGVBVUFsQixLQUFBLGVBQ0FtQixLQUFBLGVBQ0FDLEtBQUEsZUFyQkdKLEtBQUEsZUFtRUdRLEtBQWUsZUFBQzFSLEdBQVNDLEdBQVF3UixHQUFlO0FBQ2xELE1BQUloc0IsRUFBQSxNQUFLdXFCLElBQU8sV0FBVztBQUN2QixJQUFBaFEsRUFBTztBQUNQO0FBQUEsRUFDSjtBQUNBLE1BQUksQ0FBQ3ZhLEVBQUEsTUFBSzRtQjtBQUNOLFVBQU0sSUFBSXp6QixFQUFVLG9FQUFvRTtBQUU1RixNQUNJLENBQUM2TSxFQUFBLE1BQUs0bUIsSUFBUSxXQUFXLEtBQUssS0FDOUIsQ0FBQzVtQixFQUFBLE1BQUt3cUI7QUFDTixVQUFNLElBQUlyM0IsRUFBVSw2S0FBNks7QUFFck0sTUFBSW01QixJQUFLO0FBQ1QsTUFBSXRzQixFQUFBLE1BQUs0ckI7QUFDTCxJQUFBVSxJQUFLLE1BQU10c0IsRUFBQSxNQUFLNHJCLElBQUwsV0FBc0I7QUFBQSxNQUM3QixLQUFLNXJCLEVBQUEsTUFBS3NxQjtBQUFBLE1BQ1YsUUFBUXRxQixFQUFBLE1BQUs0bUI7QUFBQSxJQUM3QjtBQUFBLE9BRWE7QUFFRCxVQUFNMkYsSUFDQTtBQUFBLE1BQ0U7QUFBQTtBQUFBLE1BRUEsNkJBQTZCdnNCLEVBQUEsTUFBSzRtQjtBQUFBO0FBQUEsTUFFbEMxRjtBQUFBLElBQ3BCO0FBT1ksSUFBQW9MLElBQUssSUFBSWYsR0FBVXZyQixFQUFBLE1BQUtzcUIsS0FBTWlDLENBQWtCO0FBQUEsRUFDcEQ7QUFDQSxFQUFBbGtCLEVBQUEsTUFBS2tpQixJQUFTO0FBQUEsSUFDVixRQUFRO0FBQUEsSUFDUixXQUFXK0I7QUFBQSxFQUN2QixJQUNRLEtBQUssS0FBSyxxQkFBcUJ0c0IsRUFBQSxNQUFLdXFCLElBQU8sTUFBTTtBQUNqRCxRQUFNaUMsSUFBb0IsTUFBTTtBQUM1QixJQUFBbmtCLEVBQUEsTUFBS2tpQixJQUFTO0FBQUEsTUFDVixRQUFRO0FBQUEsTUFDUixXQUFXK0I7QUFBQSxJQUMzQixJQUNZLEtBQUssS0FBSyxxQkFBcUJ0c0IsRUFBQSxNQUFLdXFCLElBQU8sTUFBTSxHQUNqRCxLQUFLLFFBQU8sR0FDWmhRLEVBQU87QUFBQSxFQUNYO0FBQ0EsRUFBSXZhLEVBQUEsTUFBSzZyQixRQUE0QixLQUNqQ1csRUFBaUIsSUFHakJGLEVBQUcsaUJBQWlCLFFBQVFFLENBQWlCLEdBRWpERixFQUFHLGlCQUFpQixTQUFTLENBQUNqNUMsTUFBVTtBQUNwQyxTQUFLLFNBQVNBLENBQUssR0FDbkJnMUIsRUFBQSxNQUFLa2lCLElBQVM7QUFBQSxNQUNWLFFBQVE7QUFBQSxNQUNSLFdBQVc7QUFBQSxJQUMzQixJQUNZLEtBQUssS0FBSyxxQkFBcUJ2cUIsRUFBQSxNQUFLdXFCLElBQU8sTUFBTSxHQUNqRC9QLEVBQU9ubkMsQ0FBSztBQUFBLEVBQ2hCLENBQUMsR0FDRGk1QyxFQUFHLGlCQUFpQixXQUFXLENBQUMxdkMsTUFBWTs7QUFDeEMsU0FBSyxXQUFXQSxDQUFPO0FBQ3ZCLFVBQU0sRUFBRSxNQUFNNmYsR0FBUSxXQUFBdXFCLEVBQVMsSUFBS1YsR0FBbUIxcEMsQ0FBTztBQUM5RCxRQUFJLEdBQUM2ZixLQUFVdXFCO0FBR2YsVUFBSXZxQixFQUFPLFNBQVMsK0JBQStCO0FBQy9DLFFBQUE0TCxFQUFBLE1BQUtzakIsSUFBNEJsdkIsRUFBTyxnQkFDeEM0TCxFQUFBLE1BQUtxakIsSUFBaUJqdkIsRUFBTyxVQUN6QixLQUFLLHlCQUF5QixXQUc5QixLQUFLLHVCQUF1QixLQUFLLElBQUcsR0FDcEMsS0FBSyxpQkFBaUI7QUFFMUIsY0FBTWd3QixJQUFPL00sR0FBb0JqakIsRUFBTyxLQUFLLEdBR3ZDaXdCLEtBQU0zMkMsS0FBQWxCLEtBQUFOLElBQUEsS0FBSyxzQkFBTCxnQkFBQUEsRUFBd0IsVUFBeEIsZ0JBQUFNLEVBQStCLFdBQS9CLGdCQUFBa0IsRUFBdUM7QUFDbkQsWUFBSTIyQyxLQUFPLE9BQU9BLEtBQVEsVUFBVTtBQUVoQyxnQkFBTTl1QixJQUFJOHVCLEVBQUk7QUFDZCxjQUFJOXVCLE1BQU0sZ0JBQWdCQSxNQUFNO0FBRTVCLGlCQUFLLGtCQUFrQjZ1QixFQUFLLGFBQWE7QUFBQSxtQkFFcEM3dUIsTUFBTSxhQUFhO0FBQ3hCLGtCQUFNK3VCLElBQU9ELEVBQUksUUFBUTtBQUV6QixpQkFBSyxrQkFBbUJELEVBQUssYUFBYSxJQUFJRSxJQUFRO0FBQUEsVUFDMUQ7QUFHSSxpQkFBSyxrQkFBa0JGLEVBQUssYUFBYSxLQUFLO0FBQUEsUUFFdEQsTUFDSyxDQUFJLE9BQU9DLEtBQVEsV0FDaEJBLEVBQUksV0FBVyxPQUFPLElBQ3RCLEtBQUssa0JBQWtCRCxFQUFLLGFBQWEsSUFJekMsS0FBSyxrQkFBa0JBLEVBQUssYUFBYSxLQUFLLElBS2xELEtBQUssa0JBQWtCQSxFQUFLLGFBQWEsS0FBSztBQUVsRCxjQUFNWCxJQUFhO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixNQUFNVztBQUFBLFVBQ04sWUFBWWh3QixFQUFPO0FBQUEsUUFDdkM7QUFDZ0IsYUFBSyxTQUFTcXZCLENBQVU7QUFBQSxNQUM1QixXQUNTcnZCLEVBQU8sU0FBUyxxQ0FBcUM7QUFDMUQsY0FBTW13QixNQUF1Q3BULEtBQUFsaEMsS0FBQUYsS0FBQUQsSUFBQSxLQUFLLHNCQUFMLGdCQUFBQSxFQUF3QixVQUF4QixnQkFBQUMsRUFBK0IsVUFBL0IsZ0JBQUFFLEVBQXNDLG1CQUF0QyxnQkFBQWtoQyxFQUN2Qyx1QkFBc0I7QUFDNUIsYUFBSyxVQUFVLENBQUNvVCxDQUFvQztBQUFBLE1BQ3hELE1BQ0ssQ0FBSW53QixFQUFPLFNBQVMscUJBQ3JCNEwsRUFBQSxNQUFLb2lCLElBQW1CLE1BRW5CaHVCLEVBQU8sU0FBUyxrQkFDckI0TCxFQUFBLE1BQUtvaUIsSUFBbUIsTUFFbkJodUIsRUFBTyxTQUFTLHNCQUNyQixLQUFLLGlCQUFpQkEsRUFBTyxRQUFRLFNBRXJDLEtBQUsscUJBQXFCdXZCLEVBQWMsV0FBVyxNQUFNO0FBQUEsRUFFakUsQ0FBQyxHQUNETSxFQUFHLGlCQUFpQixTQUFTLE1BQU07QUFDL0IsSUFBQWprQixFQUFBLE1BQUtraUIsSUFBUztBQUFBLE1BQ1YsUUFBUTtBQUFBLE1BQ1IsV0FBVztBQUFBLElBQzNCLElBQ1ksS0FBSyxLQUFLLHFCQUFxQnZxQixFQUFBLE1BQUt1cUIsSUFBTyxNQUFNLEdBQ2pELEtBQUssU0FBUTtBQUFBLEVBQ2pCLENBQUM7QUFDTDtBQ2hPRyxNQUFNc0MsS0FBMkIsT0FBTyxrQkFBa0I7QUFDMUQsU0FBU0MsR0FBaUJuNkIsR0FBUztBQUN0QyxTQUFPO0FBQUEsSUFDSCxDQUFDazZCLEVBQXdCLEdBQUc7QUFBQSxJQUM1QixTQUFBbDZCO0FBQUEsRUFDUjtBQUNBO0FBQ08sU0FBU282QixHQUFtQnA0QyxHQUFRO0FBQ3ZDLFNBQVEsT0FBT0EsS0FBVyxZQUN0QkEsTUFBVyxRQUNYazRDLE1BQTRCbDRDO0FBQ3BDO0FBQ08sU0FBU3E0QyxHQUFvQm44QixHQUFNO0FBQ3RDLFNBQVFBLEVBQUssU0FBUyxjQUNqQkEsRUFBSyxTQUFTLGlCQUFpQkEsRUFBSyxTQUFTO0FBQ3REO0FBQ08sU0FBU284QixHQUF5QnA4QixHQUFNO0FBQzNDLE1BQUlBLEVBQUssU0FBUztBQUNkLFdBQU9BO0FBRVgsTUFBSUEsRUFBSyxTQUFTLGlCQUFpQkEsRUFBSyxTQUFTLGNBQWM7QUFDM0QsVUFBTXE4QixJQUFZcjhCLEVBQUssYUFBYSxjQUFjQSxFQUFLLGFBQWEsV0FBVyxTQUFTLElBQ2xGQSxFQUFLLGFBQWEsYUFDbEI7QUFDTixXQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixjQUFjQSxFQUFLLGFBQWE7QUFBQSxNQUNoQyxZQUFZcThCO0FBQUEsTUFDWixTQUFTcjhCLEVBQUssYUFBYTtBQUFBLE1BQzNCLGVBQWVBLEVBQUssYUFBYTtBQUFBLE1BQ2pDLGtCQUFrQkEsRUFBSyxhQUFhO0FBQUEsSUFDaEQ7QUFBQSxFQUNJO0FBQ0EsUUFBTSxJQUFJc0MsRUFBVSxzQkFBc0J0QyxDQUFJLEVBQUU7QUFDcEQ7QUN6QkEsU0FBU3M4QixLQUE0QjtBQUNqQyxTQUFPLEtBQUssTUFBTSxLQUFLLFVBQVV6RyxFQUFzQyxDQUFDO0FBQzVFOztBQWtDTyxNQUFNMEcsV0FBd0Jsc0IsR0FBb0I7QUFBQSxFQTBCckQsWUFBWThULEdBQWN4N0IsSUFBVSxJQUFJO0FBQ3BDLFVBQUs7QUEzQk4sSUFBQWttQixFQUFBLE1BQUEydEI7QUFDSCxJQUFBdDZCLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQTJNLEVBQUEsTUFBQTR0QjtBQUNBLElBQUE1dEIsRUFBQSxNQUFBNnRCO0FBQ0EsSUFBQTd0QixFQUFBLE1BQUE4dEI7QUFDQSxJQUFBOXRCLEVBQUEsTUFBQUw7QUFDQSxJQUFBSyxFQUFBLE1BQUErdEIsSUFBb0IsQ0FBQTtBQUNwQixJQUFBL3RCLEVBQUEsTUFBQWd1QjtBQUNBLElBQUFodUIsRUFBQSxNQUFBaXVCLElBQXlCLENBQUE7QUFDekIsSUFBQWp1QixFQUFBLE1BQUFrdUIsR0FBVyxDQUFBO0FBQ1gsSUFBQWx1QixFQUFBLE1BQUFtdUI7QUFDQSxJQUFBbnVCLEVBQUEsTUFBQW91QixJQUEwQixDQUFBO0FBQzFCLElBQUFwdUIsRUFBQSxNQUFBcXVCLElBQWdCO0FBRWhCO0FBQUEsSUFBQXJ1QixFQUFBLE1BQUFzdUIsSUFBdUIsb0JBQUksSUFBRztBQUU5QjtBQUFBLElBQUF0dUIsRUFBQSxNQUFBdXVCLElBQXFCLENBQUE7QUFPckI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQXZ1QixFQUFBLE1BQUF3dUIsSUFBcUJmLEdBQXlCO0FBQzlDLElBQUF6dEIsRUFBQSxNQUFBeXVCLElBQStDO0FBRzNDLFNBQUssZUFBZW5aLEdBQ3BCLEtBQUssVUFBVXg3QixHQUNWLE9BQU9BLEVBQVEsWUFBYyxPQUFlK21DLEdBQWdCLEtBQzdEL21DLEVBQVEsY0FBYyxXQUN0QjZ1QixFQUFBLE1BQUtpbEIsR0FBYSxJQUFJakQsR0FBb0IsS0FFckM3d0MsRUFBUSxjQUFjLGVBQzNCLE9BQU9BLEVBQVEsWUFBYyxNQUM3QjZ1QixFQUFBLE1BQUtpbEIsR0FBYSxJQUFJOUIsR0FBdUIsS0FHN0NuakIsRUFBQSxNQUFLaWxCLEdBQWE5ekMsRUFBUSxZQUU5QjZ1QixFQUFBLE1BQUtrbEIsR0FBZ0J2WSxJQUNyQjNNLEVBQUEsTUFBS2hKLEdBQVcsSUFBSThJLEdBQVc7QUFBQSxNQUMzQixHQUFJM3VCLEVBQVEsV0FBVztNQUN2QixTQUFTd21CLEVBQUEsTUFBSzR0QjtBQUFBLElBQzFCLENBQVMsSUFDRHZsQixFQUFBLE1BQUtvbEIsS0FBcUJqMEMsRUFBUSxvQkFBb0IsQ0FBQSxHQUFJLElBQUlrb0MsRUFBNkIsSUFDM0ZyWixFQUFBLE1BQUtxbEIsSUFBMkJsTSxHQUE2QmhvQyxFQUFRLDJCQUEyQixDQUFBLENBQUUsSUFDbEc2dUIsRUFBQSxNQUFLd2xCLElBQTBCcjBDLEVBQVEscUJBQXFCLEtBQzVENnVCLEVBQUEsTUFBSzhsQixJQUNEMzBDLEVBQVEsK0NBQStDO0FBQUEsRUFDL0Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksWUFBWTtBQUNaLFdBQU93bUIsRUFBQSxNQUFLc3RCO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksZUFBZTtBQUNmLFdBQU90dEIsRUFBQSxNQUFLdXRCO0FBQUEsRUFDaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksUUFBUTtBQUNSLFdBQU92dEIsRUFBQSxNQUFLWCxHQUFTO0FBQUEsRUFDekI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLElBQUksVUFBVTtBQUNWLFdBQU9XLEVBQUEsTUFBS1g7QUFBQSxFQUNoQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxJQUFJLFFBQVE7QUFDUixXQUFPVyxFQUFBLE1BQUtzdEIsR0FBVztBQUFBLEVBQzNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJQSxJQUFJLFVBQVU7QUFDVixXQUFPdHRCLEVBQUEsTUFBSzR0QjtBQUFBLEVBQ2hCO0FBQUEsRUFDQSxJQUFJLG9CQUFvQjtBQUNwQixXQUFPNXRCLEVBQUEsTUFBS2l1QjtBQUFBLEVBQ2hCO0FBQUEsRUFvRUEsTUFBTSxZQUFZamMsR0FBVTtBQUN4QixXQUFBaFMsRUFBQSxNQUFLdXRCLEdBQWMsS0FBSyxpQkFBaUJ2dEIsRUFBQSxNQUFLWCxJQUFVMlMsQ0FBUSxHQUNoRSxLQUFLLEtBQUssaUJBQWlCaFMsRUFBQSxNQUFLWCxJQUFVVyxFQUFBLE1BQUt1dEIsSUFBZXZiLENBQVEsR0FDdEUsTUFBTXlGLEVBQUEsTUFBSzRWLEdBQUFlLElBQUwsV0FBc0JwYyxJQUM1QixNQUFNaFMsRUFBQSxNQUFLc3RCLEdBQVcsb0JBQW9CLE1BQU03VixFQUFBLE1BQUs0VixHQUFBZ0IsSUFBTCxVQUF3QixHQUNqRXJjO0FBQUEsRUFDWDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQTBVQSxNQUFNLFFBQVF4NEIsR0FBUztBQUVuQixVQUFNaStCLEVBQUEsTUFBSzRWLEdBQUFlLElBQUwsV0FBc0IsS0FBSyxlQUNqQzNXLEVBQUEsTUFBSzRWLEdBQUFpQixJQUFMLFlBQ0EsTUFBTXR1QixFQUFBLE1BQUtzdEIsR0FBVyxRQUFRO0FBQUEsTUFDMUIsUUFBUTl6QyxFQUFRLFVBQVUsS0FBSyxRQUFRO0FBQUEsTUFDdkMsT0FBTyxLQUFLLFFBQVE7QUFBQSxNQUNwQixLQUFLQSxFQUFRO0FBQUEsTUFDYixzQkFBc0IsTUFBTWkrQixFQUFBLE1BQUs0VixHQUFBZ0IsSUFBTCxXQUF1QixLQUFLLFFBQVE7QUFBQSxJQUM1RSxDQUFTLEdBSURobUIsRUFBQSxNQUFLdWxCLEdBQVcsQ0FBQSxJQUNoQixLQUFLLEtBQUssbUJBQW1CNXRCLEVBQUEsTUFBSzR0QixFQUFRO0FBQUEsRUFDOUM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsY0FBYzFOLEdBQVk7QUFDdEIsUUFBSXFPO0FBQ0osSUFBSSxPQUFPck8sS0FBZSxhQUN0QnFPLElBQWlCck8sRUFBV2xnQixFQUFBLE1BQUs0dEIsRUFBUSxJQUd6Q1csSUFBaUJyTyxHQUVyQmxnQixFQUFBLE1BQUtzdEIsR0FBVyxhQUFhdHRCLEVBQUEsTUFBSzR0QixJQUFVVyxDQUFjO0FBQUEsRUFDOUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNQSxZQUFZM3hDLEdBQVM0cUMsSUFBaUIsSUFBSTtBQUN0QyxJQUFBeG5CLEVBQUEsTUFBS3N0QixHQUFXLFlBQVkxd0MsR0FBUzRxQyxDQUFjO0FBQUEsRUFDdkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsU0FBU0UsR0FBTyxFQUFFLGlCQUFBRCxJQUFrQixHQUFJLElBQUssQ0FBQSxHQUFJO0FBQzdDLElBQUF6bkIsRUFBQSxNQUFLc3RCLEdBQVcsU0FBUzVGLEdBQU8sRUFBRSxpQkFBQUQsRUFBZSxDQUFFO0FBQUEsRUFDdkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsS0FBSzRELEdBQU87QUFDUixJQUFBcnJCLEVBQUEsTUFBS3N0QixHQUFXLEtBQUtqQyxDQUFLO0FBQUEsRUFDOUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlBLFFBQVE7QUFDSixJQUFBaGpCLEVBQUEsTUFBS3lsQixJQUEwQixDQUFBLElBQy9COXRCLEVBQUEsTUFBS3N0QixHQUFXLE1BQUs7QUFBQSxFQUN6QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsVUFBVXpELEdBQU9yd0MsSUFBVSxJQUFJO0FBQzNCLElBQUF3bUIsRUFBQSxNQUFLc3RCLEdBQVcsVUFBVXpELEdBQU9yd0MsQ0FBTztBQUFBLEVBQzVDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtBLFlBQVk7QUFDUixJQUFBd21CLEVBQUEsTUFBS3N0QixHQUFXLFVBQVM7QUFBQSxFQUM3QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxRQUFRMWtCLEdBQWNwdkIsSUFBVSxFQUFFLGVBQWUsR0FBSyxHQUFJO0FBQzVELElBQUF3bUIsRUFBQSxNQUFLWCxHQUFTLFlBQVl1SixHQUFjcHZCLENBQU87QUFDL0MsVUFBTXFYLElBQU9tUCxFQUFBLE1BQUt1dEIsR0FBYyxNQUFNLEtBQUssQ0FBQzE4QixNQUFTQSxFQUFLLFNBQVMrWCxFQUFhLFFBQVEsSUFBSTtBQUM1RixRQUFJL1gsS0FDQUEsRUFBSyxTQUFTLGNBQ2QrWCxFQUFhLFFBQVEsU0FBUztBQUM5QixZQUFNNk8sRUFBQSxNQUFLNFYsR0FBQW1CLElBQUwsV0FBNkI1bEIsRUFBYSxTQUFTL1g7QUFBQSxhQUVwRCtYLEVBQWEsUUFBUSxTQUFTLG9CQUFvQjtBQUN2RCxNQUFJcHZCLEVBQVEsaUJBQ1J1aEIsR0FBTyxLQUFLLDJGQUEyRjtBQUUzRyxZQUFNc3NCLElBQXFCakcsR0FBbUN4WSxDQUFZO0FBQzFFLE1BQUE1SSxFQUFBLE1BQUtzdEIsR0FBVyxnQkFBZ0JqRyxHQUFvQixFQUFJO0FBQUEsSUFDNUQ7QUFFSSxZQUFNLElBQUluMEIsR0FBbUIsUUFBUTBWLEVBQWEsUUFBUSxJQUFJLFlBQVk7QUFBQSxFQUVsRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0EsTUFBTSxPQUFPQSxHQUFjcHZCLElBQVUsRUFBRSxjQUFjLEdBQUssR0FBSTtBQUMxRCxJQUFBd21CLEVBQUEsTUFBS1gsR0FBUyxXQUFXdUosR0FBY3B2QixDQUFPO0FBRTlDLFVBQU1xWCxJQUFPbVAsRUFBQSxNQUFLdXRCLEdBQWMsTUFBTSxLQUFLLENBQUMxOEIsTUFBU0EsRUFBSyxTQUFTK1gsRUFBYSxRQUFRLElBQUk7QUFDNUYsUUFBSS9YLEtBQ0FBLEVBQUssU0FBUyxjQUNkK1gsRUFBYSxRQUFRLFNBQVM7QUFDOUIsWUFBTTZPLEVBQUEsTUFBSzRWLEdBQUFtQixJQUFMLFdBQTZCNWxCLEVBQWEsU0FBUy9YO0FBQUEsYUFFcEQrWCxFQUFhLFFBQVEsU0FBUyxvQkFBb0I7QUFDdkQsTUFBSXB2QixFQUFRLGdCQUNSdWhCLEdBQU8sS0FBSywyRkFBMkY7QUFFM0csWUFBTXNzQixJQUFxQmpHLEdBQW1DeFksQ0FBWTtBQUMxRSxNQUFBNUksRUFBQSxNQUFLc3RCLEdBQVcsZ0JBQWdCakcsR0FBb0IsRUFBSztBQUFBLElBQzdEO0FBRUksWUFBTSxJQUFJbjBCLEdBQW1CLFFBQVEwVixFQUFhLFFBQVEsSUFBSSxZQUFZO0FBQUEsRUFFbEY7QUFDSjtBQTFtQkkwa0IsSUFBQSxlQUNBQyxJQUFBLGVBQ0FDLEtBQUEsZUFDQW51QixJQUFBLGVBQ0FvdUIsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsSUFBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUVBQyxLQUFBLGVBRUFDLEtBQUEsZUFPQUMsS0FBQSxlQUNBQyxLQUFBLGVBekJHZCxJQUFBLGVBNEZHZSxLQUFnQixlQUFDcnhCLEdBQU87QUFDMUIsRUFBQXNMLEVBQUEsTUFBS2tsQixHQUFnQnh3QjtBQUNyQixRQUFNZ0gsSUFBVyxNQUFNL0QsRUFBQSxNQUFLdXRCLEdBQWMsbUJBQW1CdnRCLEVBQUEsTUFBS1gsRUFBUSxHQUNwRW92QixJQUFlMXFCLEVBQVMsSUFBSSxDQUFDOUIsTUFBWUEsRUFBUSwwQkFBMEIsR0FDM0VqRCxLQUFZLE1BQU1nQixFQUFBLE1BQUt1dEIsR0FBYyxZQUFZdnRCLEVBQUEsTUFBS1gsRUFBUSxHQUMvRCxPQUFPMnRCLEVBQW1CLEVBQzFCLElBQUlDLEVBQXdCLEdBQzNCeUIsSUFBa0IsT0FBTzF1QixFQUFBLE1BQUt1dEIsR0FBYyxRQUFVLE9BQ3hELE9BQU92dEIsRUFBQSxNQUFLdXRCLEdBQWMsYUFBZSxLQUN2Q29CLElBQXFCNXFCLEVBQVMsU0FBUztBQUM3QyxFQUFBc0UsRUFBQSxNQUFLbWxCLElBQ0RrQixLQUFtQkMsSUFDYixDQUFDLEdBQUczdkIsR0FBVSxHQUFHeXZCLENBQVksSUFDN0IsU0FFVmhYLEVBQUEsTUFBSzRWLEdBQUF1QixJQUFMO0FBQ0osR0FDTVAsS0FBaUIsZUFBQ1EsSUFBbUIsSUFBSTtBQUMzQyxRQUFNQyxJQUFlLE1BQU05dUIsRUFBQSxNQUFLdXRCLEdBQWMsZ0JBQWdCdnRCLEVBQUEsTUFBS1gsRUFBUSxHQUNyRXNxQixJQUFnQixLQUFLLFFBQ3RCLGtCQUNDLE9BQ0EsS0FBSyxRQUFRLGVBQ1Q7QUFBQSxJQUNFLGVBQWUsS0FBSyxRQUFRO0FBQUEsRUFDaEQsSUFDa0I7QUFDVixFQUFJQSxNQUFrQixRQUFRQSxNQUFrQixVQUN4QyxLQUFLLFFBQVEsWUFDYkEsRUFBYyxXQUFXLEtBQUssUUFBUSxVQUV0QyxLQUFLLFFBQVEsa0JBQ2JBLEVBQWMsV0FBVyxLQUFLLFFBQVEsbUJBR3JDLEtBQUssUUFBUSxXQUFXLEtBQUssUUFBUSxrQkFDMUM1dUIsR0FBTyxLQUFLLGdGQUFnRjtBQWVoRyxRQUFNZzBCLElBQWE7QUFBQSxJQUNmLEdBUFM7QUFBQSxNQUNULEdBQUkvdUIsRUFBQSxNQUFLa3VCLE9BQXNCO01BQy9CLEdBQUksS0FBSyxRQUFRLFVBQVU7TUFDM0IsR0FBSVcsS0FBb0IsQ0FBQTtBQUFBLElBQ3BDO0FBQUEsSUFJWSxjQUFBQztBQUFBLElBQ0EsT0FBTzl1QixFQUFBLE1BQUt1dEIsR0FBYztBQUFBLElBQzFCLE9BQU8sS0FBSyxRQUFRO0FBQUEsSUFDcEIsT0FBT3Z0QixFQUFBLE1BQUt3dEI7QUFBQSxJQUNaLFNBQVM3RDtBQUFBLElBQ1QsUUFBUSxPQUFPM3BCLEVBQUEsTUFBS3V0QixHQUFjLFVBQVcsYUFDdkMsTUFBTXZ0QixFQUFBLE1BQUt1dEIsR0FBYyxPQUFPdnRCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLEVBQWEsSUFDakV2dEIsRUFBQSxNQUFLdXRCLEdBQWM7QUFBQSxFQUNyQztBQUdRLFNBQUFsbEIsRUFBQSxNQUFLNmxCLElBQXFCYSxJQUNuQkE7QUFDWCxHQVFNQyxLQUFjLGVBQUNsc0IsR0FBVWIsR0FBUztBQUNwQyxRQUFNK1AsSUFBWSxNQUFNL1AsRUFBUSxnQkFBZ0JqQyxFQUFBLE1BQUtYLElBQVV5RCxFQUFTLFNBQVM7QUFDakYsRUFBQTlDLEVBQUEsTUFBS3V0QixHQUFjLEtBQUssaUJBQWlCdnRCLEVBQUEsTUFBS1gsSUFBVTJTLENBQVEsR0FDaEUsS0FBSyxLQUFLLGlCQUFpQmhTLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWV2YixDQUFRLEdBRXRFLE1BQU15RixFQUFBLE1BQUs0VixHQUFBZSxJQUFMLFdBQXNCcGMsSUFDNUIsTUFBTWhTLEVBQUEsTUFBS3N0QixHQUFXLG9CQUFvQixNQUFNN1YsRUFBQSxNQUFLNFYsR0FBQWdCLElBQUwsVUFBd0I7QUFDeEUsUUFBTTEzQixJQUFTaUwsR0FBbUJvUSxDQUFRO0FBQzFDLFNBQUFoUyxFQUFBLE1BQUtzdEIsR0FBVyx1QkFBdUJ4cUIsR0FBVW5NLEdBQVEsRUFBSSxHQUN0RHFiO0FBQ1gsR0FDTXdjLEtBQXVCLGVBQUMxckIsR0FBVWpTLEdBQU07QUFDMUMsRUFBQW1QLEVBQUEsTUFBS1gsR0FBUyxRQUFRLFVBQVUsS0FBSyxNQUFNLEtBQUssVUFBVVcsRUFBQSxNQUFLNHRCLEVBQVEsQ0FBQztBQUN4RSxNQUFJNWMsSUFBYWxPLEVBQVM7QUFVMUIsTUFUSWpTLEVBQUssZUFDRGdELEdBQVloRCxFQUFLLFVBQVUsSUFDM0JtZ0IsSUFBYW5nQixFQUFLLFdBQVcsTUFBTW1nQixDQUFVLElBRzdDQSxJQUFhLEtBQUssTUFBTUEsQ0FBVSxJQUdwQixNQUFNbmdCLEVBQUssY0FBY21QLEVBQUEsTUFBS1gsSUFBVTJSLEdBQVlsTyxFQUFTLE1BQU0sR0FDdEU7QUFDZixVQUFNeUYsSUFBVyxLQUFLLFFBQVEsZUFBZTtBQUFBLE1BQ3pDLFVBQVUxWCxFQUFLO0FBQUEsTUFDZixRQUFRaVMsRUFBUztBQUFBLElBQ2pDLENBQWE7QUFDRCxRQUFJeUYsTUFBYSxJQUFPO0FBQ3BCLFdBQUssS0FBSyxvQkFBb0J2SSxFQUFBLE1BQUtYLElBQVVXLEVBQUEsTUFBS3V0QixJQUFlMThCLEdBQU07QUFBQSxRQUNuRSxVQUFBaVM7QUFBQSxNQUNwQixDQUFpQixHQUNEOUMsRUFBQSxNQUFLdXRCLEdBQWMsS0FBSyxvQkFBb0J2dEIsRUFBQSxNQUFLWCxJQUFVeE8sR0FBTTtBQUFBLFFBQzdELFVBQUFpUztBQUFBLE1BQ3BCLENBQWlCO0FBQ0QsWUFBTW51QixJQUFTO0FBQ2YsTUFBQXFyQixFQUFBLE1BQUtzdEIsR0FBVyx1QkFBdUJ4cUIsR0FBVW51QixHQUFRLEVBQUksR0FDN0QsS0FBSyxLQUFLLGtCQUFrQnFyQixFQUFBLE1BQUtYLElBQVVXLEVBQUEsTUFBS3V0QixJQUFlMThCLEdBQU1sYyxHQUFRLEVBQUUsVUFBQW11QixFQUFRLENBQUUsR0FDekY5QyxFQUFBLE1BQUt1dEIsR0FBYyxLQUFLLGtCQUFrQnZ0QixFQUFBLE1BQUtYLElBQVV4TyxHQUFNbGMsR0FBUTtBQUFBLFFBQ25FLFVBQUFtdUI7QUFBQSxNQUNwQixDQUFpQjtBQUNEO0FBQUEsSUFDSixXQUNTLE9BQU95RixJQUFhLEtBQWE7QUFDdEMsV0FBSyxLQUFLLDJCQUEyQnZJLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWU7QUFBQSxRQUNwRSxNQUFNO0FBQUEsUUFDTixNQUFBMThCO0FBQUEsUUFDQSxjQUFjLElBQUkrWSxHQUFvQjlHLEdBQVU5QyxFQUFBLE1BQUt1dEIsRUFBYTtBQUFBLE1BQ3RGLENBQWlCO0FBQ0Q7QUFBQSxJQUNKO0FBQUEsRUFDSjtBQUNBLE9BQUssS0FBSyxvQkFBb0J2dEIsRUFBQSxNQUFLWCxJQUFVVyxFQUFBLE1BQUt1dEIsSUFBZTE4QixHQUFNO0FBQUEsSUFDbkUsVUFBQWlTO0FBQUEsRUFDWixDQUFTLEdBQ0Q5QyxFQUFBLE1BQUt1dEIsR0FBYyxLQUFLLG9CQUFvQnZ0QixFQUFBLE1BQUtYLElBQVV4TyxHQUFNO0FBQUEsSUFDN0QsVUFBQWlTO0FBQUEsRUFDWixDQUFTLEdBQ0Q5QyxFQUFBLE1BQUtYLEdBQVMsUUFBUSxVQUFVLEtBQUssTUFBTSxLQUFLLFVBQVVXLEVBQUEsTUFBSzR0QixFQUFRLENBQUM7QUFDeEUsUUFBTWo1QyxJQUFTLE1BQU1rYyxFQUFLLE9BQU9tUCxFQUFBLE1BQUtYLElBQVV5RCxFQUFTLFdBQVc7QUFBQSxJQUNoRSxVQUFBQTtBQUFBLEVBQ1osQ0FBUztBQUNELE1BQUlwRztBQUNKLEVBQUlxd0IsR0FBbUJwNEMsQ0FBTSxLQUV6QituQixJQUFlekIsR0FBY3RtQixFQUFPLE9BQU8sR0FDM0NxckIsRUFBQSxNQUFLc3RCLEdBQVcsdUJBQXVCeHFCLEdBQVVwRyxHQUFjLEVBQUssTUFHcEVBLElBQWV6QixHQUFjdG1CLENBQU0sR0FDbkNxckIsRUFBQSxNQUFLc3RCLEdBQVcsdUJBQXVCeHFCLEdBQVVwRyxHQUFjLEVBQUksSUFFdkUsS0FBSyxLQUFLLGtCQUFrQnNELEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWUxOEIsR0FBTTZMLEdBQWMsRUFBRSxVQUFBb0csRUFBUSxDQUFFLEdBQy9GOUMsRUFBQSxNQUFLdXRCLEdBQWMsS0FBSyxrQkFBa0J2dEIsRUFBQSxNQUFLWCxJQUFVeE8sR0FBTTZMLEdBQWMsRUFBRSxVQUFBb0csR0FBVTtBQUM3RixHQUNNbXNCLEtBQW1CLGVBQUNuc0IsR0FBVTtBQUNoQyxRQUFNb3NCLElBQWtCLE1BQU1sdkIsRUFBQSxNQUFLdXRCLEdBQWMsbUJBQW1CdnRCLEVBQUEsTUFBS1gsRUFBUSxHQUMzRTJNLElBQWEsSUFBSSxJQUFJa2pCLEVBQWdCLElBQUksQ0FBQ2p0QixNQUFZLENBQUNBLEVBQVEsVUFBVUEsQ0FBTyxDQUFDLENBQUMsR0FDbEZqRCxJQUFXLE1BQU1nQixFQUFBLE1BQUt1dEIsR0FBYyxZQUFZdnRCLEVBQUEsTUFBS1gsRUFBUSxHQUM3RDh2QixJQUFrQixJQUFJLElBQUlud0IsRUFBUyxJQUFJLENBQUNuTyxNQUFTLENBQUNBLEVBQUssTUFBTUEsQ0FBSSxDQUFDLENBQUMsR0FDbkV1K0IsSUFBa0JwakIsRUFBVyxJQUFJbEosRUFBUyxJQUFJO0FBQ3BELE1BQUlzc0I7QUFDQSxVQUFNM1gsRUFBQSxNQUFLNFYsR0FBQTJCLElBQUwsV0FBb0Jsc0IsR0FBVXNzQjtBQUFBLE9BRW5DO0FBQ0QsVUFBTTdpQixJQUFlNGlCLEVBQWdCLElBQUlyc0IsRUFBUyxJQUFJO0FBQ3RELFFBQUl5SixLQUFnQkEsRUFBYSxTQUFTO0FBQ3RDLFlBQU1rTCxFQUFBLE1BQUs0VixHQUFBbUIsSUFBTCxXQUE2QjFyQixHQUFVeUo7QUFBQTtBQUc3QyxZQUFNLElBQUlyWixHQUFtQixRQUFRNFAsRUFBUyxJQUFJLFlBQVk7QUFBQSxFQUV0RTtBQUNKLEdBQ000VixLQUFvQixlQUFDL2hCLEdBQVEwNEIsR0FBWWhPLEdBQVE7QUFDbkQsTUFBSXJoQixFQUFBLE1BQUt5dEIsSUFBa0IsV0FBVztBQUNsQztBQUVKLFFBQU03VSxJQUFnQjtBQUFBLElBQ2xCLE9BQU81WSxFQUFBLE1BQUt1dEI7QUFBQSxJQUNaLGFBQWE1MkI7QUFBQSxJQUNiLFNBQVNxSixFQUFBLE1BQUtYO0FBQUEsRUFDMUIsR0FFY2l3QixLQURVLE1BQU0sUUFBUSxJQUFJdHZCLEVBQUEsTUFBS3l0QixJQUFrQixJQUFJLENBQUM1VSxNQUFjQSxFQUFVLElBQUlELENBQWEsQ0FBQyxDQUFDLEdBQ2xFLEtBQUssQ0FBQ2prQyxNQUFXQSxFQUFPLE9BQU8saUJBQWlCO0FBQ3ZGLE1BQUkyNkMsR0FBd0I7QUFHeEIsUUFBSXR2QixFQUFBLE1BQUs4dEIsSUFBd0J1QixDQUFVO0FBQ3ZDO0FBRUosSUFBQXJ2QixFQUFBLE1BQUs4dEIsSUFBd0J1QixDQUFVLElBQUk7QUFDM0MsVUFBTWg4QyxJQUFRLElBQUlrZ0IsR0FBaUMsK0JBQStCLEtBQUssVUFBVSs3QixFQUF1QixPQUFPLFVBQVUsQ0FBQyxJQUFJQSxDQUFzQjtBQUNwSyxTQUFLLEtBQUsscUJBQXFCdHZCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWVsNkMsR0FBTztBQUFBLE1BQ3JFLFFBQUFndUM7QUFBQSxJQUNoQixDQUFhLEdBQ0QsS0FBSyxVQUFTO0FBQ2QsVUFBTWtPLElBQWV6TixHQUFvQ3dOLENBQXNCO0FBQy9FLFNBQUssWUFBWUMsQ0FBWTtBQUM3QjtBQUFBLEVBQ0o7QUFDSixHQUNBakIsS0FBa0IsV0FBRztBQUNqQixFQUFBdHVCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsS0FBSyxDQUFDbnRCLE1BQVU7QUFHL0IsUUFGQSxLQUFLLEtBQUssbUJBQW1CQSxDQUFLLEdBRTlCQSxFQUFNLFNBQVM7QUFDZixVQUFJO0FBQ0EsY0FBTXF2QixJQUFpQnJ2QjtBQUN2QixRQUFBa0ksRUFBQSxNQUFLdWxCLEdBQVduTixHQUFzQnpnQixFQUFBLE1BQUs0dEIsSUFBVTRCLEdBQWdCeHZCLEVBQUEsTUFBSzZ0QixHQUF1QixJQUNqRzd0QixFQUFBLE1BQUtYLEdBQVMsUUFBUSxVQUFVVyxFQUFBLE1BQUs0dEIsSUFDckMsS0FBSyxLQUFLLG1CQUFtQjV0QixFQUFBLE1BQUs0dEIsRUFBUTtBQUFBLE1BQzlDLFNBQ08xdUMsR0FBSztBQUNSLGFBQUssS0FBSyxTQUFTO0FBQUEsVUFDZixNQUFNO0FBQUEsVUFDTixPQUFPQTtBQUFBLFFBQy9CLENBQXFCO0FBQUEsTUFDTDtBQUFBLEVBRVIsQ0FBQyxHQUNEOGdCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsb0JBQW9CLENBQUMsRUFBRSxhQUFBaE0sR0FBYSxPQUFBN2lCLFFBQVk7QUFDL0QsUUFBSTtBQUNBLE1BQUF1QixFQUFBLE1BQUtndUIsSUFBcUIsSUFBSTFNLEdBQWE3aUIsS0FBUyxDQUFBLENBQUUsR0FDdERnWixFQUFBLE1BQUs0VixHQUFBdUIsSUFBTDtBQUFBLElBQ0osU0FDTzF2QyxHQUFLO0FBQ1IsV0FBSyxLQUFLLFNBQVMsRUFBRSxNQUFNLFNBQVMsT0FBT0EsR0FBSztBQUFBLElBQ3BEO0FBQUEsRUFDSixDQUFDLEdBQ0Q4Z0IsRUFBQSxNQUFLc3RCLEdBQVcsR0FBRyxTQUFTLENBQUNudEIsTUFBVTtBQUNuQyxJQUFLSCxFQUFBLE1BQUsrdEIsUUFDTjFsQixFQUFBLE1BQUswbEIsSUFBZ0IsS0FDckIsS0FBSyxLQUFLLGVBQWUvdEIsRUFBQSxNQUFLWCxJQUFVVyxFQUFBLE1BQUt1dEIsRUFBYSxJQUU5RCxLQUFLLEtBQUssU0FBU3B0QixDQUFLO0FBQUEsRUFDNUIsQ0FBQyxHQUNESCxFQUFBLE1BQUtzdEIsR0FBVyxHQUFHLGdCQUFnQixNQUFNO0FBQ3JDLElBQUFqbEIsRUFBQSxNQUFLMGxCLElBQWdCLEtBQ3JCLEtBQUssS0FBSyxlQUFlL3RCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLEVBQWEsR0FDMUR2dEIsRUFBQSxNQUFLdXRCLEdBQWMsS0FBSyxlQUFldnRCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLEVBQWE7QUFBQSxFQUM1RSxDQUFDLEdBQ0R2dEIsRUFBQSxNQUFLc3RCLEdBQVcsR0FBRyxhQUFhLENBQUNudEIsTUFBVTtBQUN2QyxVQUFNbm5CLElBQU9tbkIsRUFBTSxTQUFTLE9BQU9BLEVBQU0sU0FBUyxPQUFPLFNBQVMsQ0FBQyxHQUM3RHN2QixJQUFhM1AsR0FBa0M5bUMsQ0FBSSxLQUFLLElBQ3hEcW9DLEtBQVNyb0MsS0FBQSxnQkFBQUEsRUFBTSxPQUFNO0FBQzNCLFNBQUssS0FBSyxhQUFhZ25CLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWVrQyxDQUFVLEdBQ3BFenZCLEVBQUEsTUFBS3V0QixHQUFjLEtBQUssYUFBYXZ0QixFQUFBLE1BQUtYLElBQVVvd0IsQ0FBVSxHQUM5RGhZLEVBQUEsTUFBSzRWLEdBQUEzVSxJQUFMLFdBQTBCK1csR0FBWXR2QixFQUFNLFNBQVMsSUFBSWtoQjtBQUFBLEVBQzdELENBQUMsR0FDRHJoQixFQUFBLE1BQUtzdEIsR0FBVyxHQUFHLGNBQWMsTUFBTTtBQUNuQyxJQUFJdHRCLEVBQUEsTUFBSyt0QixPQUNMMWxCLEVBQUEsTUFBSzBsQixJQUFnQixLQUV6QixLQUFLLEtBQUssaUJBQWlCL3RCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLEVBQWE7QUFBQSxFQUNoRSxDQUFDO0FBQ0QsTUFBSW1DLElBQWUsR0FDZkM7QUFDSixFQUFBM3ZCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsMEJBQTBCLENBQUNudEIsTUFBVTtBQUNwRCxRQUFJO0FBQ0EsWUFBTXl2QixJQUFRenZCLEVBQU0sT0FDZGtoQixJQUFTbGhCLEVBQU0sUUFDZmt2QixJQUFhbHZCLEVBQU07QUFDekIsTUFBSXd2QixNQUFldE8sTUFDZnNPLElBQWF0TyxHQUNicU8sSUFBZTtBQUduQixZQUFNRyxLQURjN3ZCLEVBQUEsTUFBSzJ0QixJQUF1QnRNLENBQU0sS0FBSyxNQUM3QnVPO0FBRTlCLFVBREE1dkIsRUFBQSxNQUFLMnRCLElBQXVCdE0sQ0FBTSxJQUFJd08sR0FDbEM3dkIsRUFBQSxNQUFLMHRCLElBQXlCLHFCQUFxQjtBQUNuRDtBQUVKLFlBQU1vQyxJQUFjLEtBQUssTUFBTUQsRUFBUSxTQUFTN3ZCLEVBQUEsTUFBSzB0QixJQUF5QixrQkFBa0I7QUFDaEcsTUFBSW9DLElBQWNKLE1BQ2RBLElBQWVJLEdBSWZyWSxFQUFBLE1BQUs0VixHQUFBM1UsSUFBTCxXQUEwQm1YLEdBQVNSLEdBQVloTztBQUFBLElBRXZELFNBQ09uaUMsR0FBSztBQUNSLFdBQUssS0FBSyxTQUFTO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixPQUFPQTtBQUFBLE1BQzNCLENBQWlCO0FBQUEsSUFDTDtBQUFBLEVBQ0osQ0FBQyxHQUNEOGdCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsZUFBZSxDQUFDbnRCLE1BQVU7QUFDekMsUUFBSTtBQUNBLFlBQU00dkIsSUFBUSxDQUFDL3ZCLEVBQUEsTUFBSzR0QixHQUFTLEtBQUssQ0FBQzUwQyxNQUFTQSxFQUFLLFdBQVdtbkIsRUFBTSxNQUFNO0FBR3hFLFVBRkFrSSxFQUFBLE1BQUt1bEIsR0FBV25OLEdBQXNCemdCLEVBQUEsTUFBSzR0QixJQUFVenRCLEdBQU9ILEVBQUEsTUFBSzZ0QixHQUF1QixJQUN4Rjd0QixFQUFBLE1BQUtYLEdBQVMsUUFBUSxVQUFVVyxFQUFBLE1BQUs0dEIsSUFDakNtQyxHQUFPO0FBQ1AsY0FBTUMsSUFBWWh3QixFQUFBLE1BQUs0dEIsR0FBUyxLQUFLLENBQUM1MEMsTUFBU0EsRUFBSyxXQUFXbW5CLEVBQU0sTUFBTTtBQUMzRSxRQUFJNnZCLEtBQ0EsS0FBSyxLQUFLLGlCQUFpQkEsQ0FBUztBQUFBLE1BRTVDO0FBQ0EsV0FBSyxLQUFLLG1CQUFtQmh3QixFQUFBLE1BQUs0dEIsRUFBUTtBQUFBLElBQzlDLFNBQ08xdUMsR0FBSztBQUNSLFdBQUssS0FBSyxTQUFTO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixPQUFPQTtBQUFBLE1BQzNCLENBQWlCO0FBQUEsSUFDTDtBQUFBLEVBQ0osQ0FBQyxHQUNEOGdCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsZ0JBQWdCLENBQUNudEIsTUFBVTtBQUMxQyxRQUFJO0FBQ0EsTUFBQWtJLEVBQUEsTUFBS3VsQixHQUFXNXRCLEVBQUEsTUFBSzR0QixHQUFTLE9BQU8sQ0FBQzUwQyxNQUFTQSxFQUFLLFdBQVdtbkIsRUFBTSxNQUFNLElBQzNFSCxFQUFBLE1BQUtYLEdBQVMsUUFBUSxVQUFVVyxFQUFBLE1BQUs0dEIsSUFDckMsS0FBSyxLQUFLLG1CQUFtQjV0QixFQUFBLE1BQUs0dEIsRUFBUTtBQUFBLElBQzlDLFNBQ08xdUMsR0FBSztBQUNSLFdBQUssS0FBSyxTQUFTO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixPQUFPQTtBQUFBLE1BQzNCLENBQWlCO0FBQUEsSUFDTDtBQUFBLEVBQ0osQ0FBQyxHQUNEOGdCLEVBQUEsTUFBS3N0QixHQUFXLEdBQUcsaUJBQWlCLE9BQU9udEIsTUFBVTtBQUNqRCxRQUFJO0FBQ0EsWUFBTXNYLEVBQUEsTUFBSzRWLEdBQUE0QixJQUFMLFdBQXlCOXVCO0FBQUEsSUFDbkMsU0FDTzlzQixHQUFPO0FBQ1YsTUFBQTBuQixHQUFPLE1BQU0sZ0NBQWdDMW5CLENBQUssR0FDbEQsS0FBSyxLQUFLLFNBQVM7QUFBQSxRQUNmLE1BQU07QUFBQSxRQUNOLE9BQUFBO0FBQUEsTUFDcEIsQ0FBaUI7QUFBQSxJQUNMO0FBQUEsRUFDSixDQUFDLEdBQ0Qyc0IsRUFBQSxNQUFLc3RCLEdBQVcsR0FBRyxnQkFBZ0IsQ0FBQ25YLE1BQVU7QUFDMUMsSUFBQW5XLEVBQUEsTUFBS1gsR0FBUyxNQUFNLElBQUk4VyxDQUFLO0FBQUEsRUFDakMsQ0FBQyxHQUNEblcsRUFBQSxNQUFLc3RCLEdBQVcsR0FBRyxxQkFBcUIsTUFBTTtBQUMxQyxJQUFJdHRCLEVBQUEsTUFBSyt0QixPQUNMMWxCLEVBQUEsTUFBSzBsQixJQUFnQixLQUV6QixLQUFLLEtBQUsscUJBQXFCL3RCLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLEVBQWE7QUFBQSxFQUNwRSxDQUFDLEdBQ0R2dEIsRUFBQSxNQUFLc3RCLEdBQVcsR0FBRyxTQUFTLENBQUNqNkMsTUFBVTtBQUNuQyxTQUFLLEtBQUssU0FBU0EsQ0FBSztBQUFBLEVBQzVCLENBQUMsR0FDRDJzQixFQUFBLE1BQUtzdEIsR0FBVyxHQUFHLDJCQUEyQixDQUFDeHFCLE1BQWE7QUFDeEQsU0FBSyxLQUFLLDJCQUEyQjlDLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWV6cUIsQ0FBUSxHQUM1RTlDLEVBQUEsTUFBS211QixPQUNMbnVCLEVBQUEsTUFBS3N0QixHQUFXLFVBQVU7QUFBQSxNQUN0QixNQUFNO0FBQUEsSUFDMUIsQ0FBaUI7QUFBQSxFQUVULENBQUMsR0FDRHR0QixFQUFBLE1BQUtzdEIsR0FBVyxHQUFHLHdCQUF3QixDQUFDbGYsTUFBb0I7QUFDNUQsU0FBSyxLQUFLLDJCQUEyQnBPLEVBQUEsTUFBS1gsSUFBVVcsRUFBQSxNQUFLdXRCLElBQWU7QUFBQSxNQUNwRSxNQUFNO0FBQUEsTUFDTixjQUFjcE0sR0FBbUNuaEIsRUFBQSxNQUFLdXRCLElBQWVuZixDQUFlO0FBQUEsSUFDcEcsQ0FBYTtBQUFBLEVBQ0wsQ0FBQztBQUNMO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQXdnQixLQUF3QixXQUFHOztBQUV2QixRQUFNcUIsS0FBbUIxN0MsSUFBQXlyQixFQUFBLE1BQUt3dEIsUUFBTCxnQkFBQWo1QyxFQUFvQixPQUFPLENBQUNxcEIsTUFBTUEsRUFBRSxTQUFTLFFBQ2hFc3lCLElBQW9CLENBQUNDLE1BQVE7QUFDL0IsVUFBTTV4QixJQUFVNHhCLEVBQUk7QUFDcEIsUUFBSzV4QixHQUVMO0FBQUEsVUFBSSxNQUFNLFFBQVFBLENBQU87QUFDckIsZUFBT0E7QUFDWCxVQUFJQSxLQUFXLE1BQU0sUUFBUUEsRUFBUSxVQUFVO0FBQzNDLGVBQU9BLEVBQVE7QUFBQTtBQUFBLEVBRXZCLEdBQ002eEIsSUFBYyxvQkFBSSxJQUFHO0FBQzNCLGFBQVdELEtBQU9GLEdBQWtCO0FBQ2hDLFVBQU14eEIsSUFBUXVCLEVBQUEsTUFBS2d1QixJQUFxQixJQUFJbUMsRUFBSSxZQUFZLEtBQUssQ0FBQSxHQUMzRDV4QixJQUFVMnhCLEVBQWtCQyxDQUFHO0FBQ3JDLGVBQVd0L0IsS0FBUTROO0FBQ2YsTUFBSUYsS0FBVyxDQUFDQSxFQUFRLFNBQVMxTixFQUFLLElBQUksS0FFckN1L0IsRUFBWSxJQUFJdi9CLEVBQUssSUFBSSxLQUMxQnUvQixFQUFZLElBQUl2L0IsRUFBSyxNQUFNQSxDQUFJO0FBQUEsRUFHM0M7QUFDQSxRQUFNK0QsSUFBTyxNQUFNLEtBQUt3N0IsRUFBWSxPQUFNLENBQUUsR0FDdENDLElBQU9yd0IsRUFBQSxNQUFLaXVCO0FBSWxCLEdBSGdCb0MsRUFBSyxXQUFXejdCLEVBQUssVUFDakMsS0FBSyxVQUFVeTdCLEVBQUssSUFBSSxDQUFDenlCLE1BQU1BLEVBQUUsSUFBSSxFQUFFLE1BQU0sTUFDekMsS0FBSyxVQUFVaEosRUFBSyxJQUFJLENBQUNnSixNQUFNQSxFQUFFLElBQUksRUFBRSxNQUFNLE9BRWpEeUssRUFBQSxNQUFLNGxCLElBQXFCcjVCLElBQzFCLEtBQUssS0FBSyxxQkFBcUJvTCxFQUFBLE1BQUtpdUIsR0FBa0I7QUFFOUQ7QUM5Z0JRLE1BQUNxQyxLQUFRO0FBQUEsRUFDakIscUJBQXFCQztBQUFBQSxFQUNyQixxQkFBcUJDO0FBQUFBLEVBQ3JCLG1DQUFtQ0M7QUFDdkM7IiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNCwzNSwzNiwzNywzOCwzOSw0MCw0MSw0Miw0Myw0NCw0NSw0Niw0Nyw0OCw0OSw1MCw1MSw1Nyw1OCw1OV19
